function tp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var np={exports:{}},vc={},rp={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=Symbol.for("react.element"),Bw=Symbol.for("react.portal"),jw=Symbol.for("react.fragment"),Fw=Symbol.for("react.strict_mode"),Uw=Symbol.for("react.profiler"),$w=Symbol.for("react.provider"),zw=Symbol.for("react.context"),Vw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Ww=Symbol.for("react.memo"),Gw=Symbol.for("react.lazy"),Fh=Symbol.iterator;function Xw(t){return t===null||typeof t!="object"?null:(t=Fh&&t[Fh]||t["@@iterator"],typeof t=="function"?t:null)}var ip={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sp=Object.assign,op={};function so(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||ip}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ap(){}ap.prototype=so.prototype;function k0(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||ip}var O0=k0.prototype=new ap;O0.constructor=k0;sp(O0,so.prototype);O0.isPureReactComponent=!0;var Uh=Array.isArray,lp=Object.prototype.hasOwnProperty,R0={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)lp.call(e,i)&&!cp.hasOwnProperty(i)&&(o[i]=e[i]);var g=arguments.length-2;if(g===1)o.children=n;else if(1<g){for(var m=Array(g),x=0;x<g;x++)m[x]=arguments[x+2];o.children=m}if(t&&t.defaultProps)for(i in g=t.defaultProps,g)o[i]===void 0&&(o[i]=g[i]);return{$$typeof:Ta,type:t,key:l,ref:f,props:o,_owner:R0.current}}function qw(t,e){return{$$typeof:Ta,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ta}function Yw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $h=/\/+/g;function Au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yw(""+t.key):e.toString(36)}function Nl(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case Ta:case Bw:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Au(f,0):i,Uh(o)?(n="",t!=null&&(n=t.replace($h,"$&/")+"/"),Nl(o,e,n,"",function(x){return x})):o!=null&&(P0(o)&&(o=qw(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace($h,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",Uh(t))for(var g=0;g<t.length;g++){l=t[g];var m=i+Au(l,g);f+=Nl(l,e,n,m,o)}else if(m=Xw(t),typeof m=="function")for(t=m.call(t),g=0;!(l=t.next()).done;)l=l.value,m=i+Au(l,g++),f+=Nl(l,e,n,m,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function Ja(t,e,n){if(t==null)return t;var i=[],o=0;return Nl(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Kw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},kl={transition:null},Zw={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:kl,ReactCurrentOwner:R0};function dp(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Ja,forEach:function(t,e,n){Ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ja(t,function(){e++}),e},toArray:function(t){return Ja(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=so;Fe.Fragment=jw;Fe.Profiler=Uw;Fe.PureComponent=k0;Fe.StrictMode=Fw;Fe.Suspense=Hw;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw;Fe.act=dp;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sp({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=R0.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var g=t.type.defaultProps;for(m in e)lp.call(e,m)&&!cp.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&g!==void 0?g[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){g=Array(m);for(var x=0;x<m;x++)g[x]=arguments[x+2];i.children=g}return{$$typeof:Ta,type:t.type,key:o,ref:l,props:i,_owner:f}};Fe.createContext=function(t){return t={$$typeof:zw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$w,_context:t},t.Consumer=t};Fe.createElement=up;Fe.createFactory=function(t){var e=up.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:Vw,render:t}};Fe.isValidElement=P0;Fe.lazy=function(t){return{$$typeof:Gw,_payload:{_status:-1,_result:t},_init:Kw}};Fe.memo=function(t,e){return{$$typeof:Ww,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};Fe.unstable_act=dp;Fe.useCallback=function(t,e){return fn.current.useCallback(t,e)};Fe.useContext=function(t){return fn.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return fn.current.useEffect(t,e)};Fe.useId=function(){return fn.current.useId()};Fe.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return fn.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Fe.useRef=function(t){return fn.current.useRef(t)};Fe.useState=function(t){return fn.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return fn.current.useTransition()};Fe.version="18.3.1";rp.exports=Fe;var X=rp.exports;const D0=yc(X),Qw=tp({__proto__:null,default:D0},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw=X,ey=Symbol.for("react.element"),ty=Symbol.for("react.fragment"),ny=Object.prototype.hasOwnProperty,ry=Jw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iy={key:!0,ref:!0,__self:!0,__source:!0};function fp(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)ny.call(e,i)&&!iy.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:ey,type:t,key:l,ref:f,props:o,_owner:ry.current}}vc.Fragment=ty;vc.jsx=fp;vc.jsxs=fp;np.exports=vc;var y=np.exports,hp={exports:{}},Fn={},gp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,ee){var ye=ne.length;ne.push(ee);e:for(;0<ye;){var we=ye-1>>>1,de=ne[we];if(0<o(de,ee))ne[we]=ee,ne[ye]=de,ye=we;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var ee=ne[0],ye=ne.pop();if(ye!==ee){ne[0]=ye;e:for(var we=0,de=ne.length,he=de>>>1;we<he;){var Ie=2*(we+1)-1,et=ne[Ie],ue=Ie+1,It=ne[ue];if(0>o(et,ye))ue<de&&0>o(It,et)?(ne[we]=It,ne[ue]=ye,we=ue):(ne[we]=et,ne[Ie]=ye,we=Ie);else if(ue<de&&0>o(It,ye))ne[we]=It,ne[ue]=ye,we=ue;else break e}}return ee}function o(ne,ee){var ye=ne.sortIndex-ee.sortIndex;return ye!==0?ye:ne.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,g=f.now();t.unstable_now=function(){return f.now()-g}}var m=[],x=[],v=1,_=null,S=3,T=!1,L=!1,M=!1,H=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ne){for(var ee=n(x);ee!==null;){if(ee.callback===null)i(x);else if(ee.startTime<=ne)i(x),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=n(x)}}function F(ne){if(M=!1,N(ne),!L)if(n(m)!==null)L=!0,ze($);else{var ee=n(x);ee!==null&&le(F,ee.startTime-ne)}}function $(ne,ee){L=!1,M&&(M=!1,P(D),D=-1),T=!0;var ye=S;try{for(N(ee),_=n(m);_!==null&&(!(_.expirationTime>ee)||ne&&!te());){var we=_.callback;if(typeof we=="function"){_.callback=null,S=_.priorityLevel;var de=we(_.expirationTime<=ee);ee=t.unstable_now(),typeof de=="function"?_.callback=de:_===n(m)&&i(m),N(ee)}else i(m);_=n(m)}if(_!==null)var he=!0;else{var Ie=n(x);Ie!==null&&le(F,Ie.startTime-ee),he=!1}return he}finally{_=null,S=ye,T=!1}}var z=!1,B=null,D=-1,O=5,G=-1;function te(){return!(t.unstable_now()-G<O)}function Z(){if(B!==null){var ne=t.unstable_now();G=ne;var ee=!0;try{ee=B(!0,ne)}finally{ee?ae():(z=!1,B=null)}}else z=!1}var ae;if(typeof I=="function")ae=function(){I(Z)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,K=ke.port2;ke.port1.onmessage=Z,ae=function(){K.postMessage(null)}}else ae=function(){H(Z,0)};function ze(ne){B=ne,z||(z=!0,ae())}function le(ne,ee){D=H(function(){ne(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){L||T||(L=!0,ze($))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(ne){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var ye=S;S=ee;try{return ne()}finally{S=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,ee){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ye=S;S=ne;try{return ee()}finally{S=ye}},t.unstable_scheduleCallback=function(ne,ee,ye){var we=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?we+ye:we):ye=we,ne){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ye+de,ne={id:v++,callback:ee,priorityLevel:ne,startTime:ye,expirationTime:de,sortIndex:-1},ye>we?(ne.sortIndex=ye,e(x,ne),n(m)===null&&ne===n(x)&&(M?(P(D),D=-1):M=!0,le(F,ye-we))):(ne.sortIndex=de,e(m,ne),L||T||(L=!0,ze($))),ne},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(ne){var ee=S;return function(){var ye=S;S=ee;try{return ne.apply(this,arguments)}finally{S=ye}}}})(pp);gp.exports=pp;var sy=gp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=X,jn=sy;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,sa={};function Zi(t,e){Hs(t,e),Hs(t+"Capture",e)}function Hs(t,e){for(sa[t]=e,t=0;t<e.length;t++)mp.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pd=Object.prototype.hasOwnProperty,ay=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zh={},Vh={};function ly(t){return pd.call(Vh,t)?!0:pd.call(zh,t)?!1:ay.test(t)?Vh[t]=!0:(zh[t]=!0,!1)}function cy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uy(t,e,n,i){if(e===null||typeof e>"u"||cy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var M0=/[\-:]([a-z])/g;function L0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(M0,L0);en[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(M0,L0);en[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(M0,L0);en[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function B0(t,e,n,i){var o=en.hasOwnProperty(e)?en[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uy(e,n,o,i)&&(n=null),i||o===null?ly(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ur=oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),md=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),wp=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),xd=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),U0=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),yp=Symbol.for("react.offscreen"),Hh=Symbol.iterator;function So(t){return t===null||typeof t!="object"?null:(t=Hh&&t[Hh]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,Su;function jo(t){if(Su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Su=e&&e[1]||""}return`
`+Su+t}var Tu=!1;function Iu(t,e){if(!t||Tu)return"";Tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var i=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){i=x}t.call(e.prototype)}else{try{throw Error()}catch(x){i=x}t()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,g=l.length-1;1<=f&&0<=g&&o[f]!==l[g];)g--;for(;1<=f&&0<=g;f--,g--)if(o[f]!==l[g]){if(f!==1||g!==1)do if(f--,g--,0>g||o[f]!==l[g]){var m=`
`+o[f].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=f&&0<=g);break}}}finally{Tu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jo(t):""}function dy(t){switch(t.tag){case 5:return jo(t.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return t=Iu(t.type,!1),t;case 11:return t=Iu(t.type.render,!1),t;case 1:return t=Iu(t.type,!0),t;default:return""}}function yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case bs:return"Portal";case md:return"Profiler";case j0:return"StrictMode";case xd:return"Suspense";case wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wp:return(t.displayName||"Context")+".Consumer";case xp:return(t._context.displayName||"Context")+".Provider";case F0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U0:return e=t.displayName||null,e!==null?e:yd(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return yd(t(e))}catch{}}return null}function fy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(e);case 8:return e===j0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hy(t){var e=vp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=hy(t))}function Ep(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=vp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vd(t,e){var n=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _p(t,e){e=e.checked,e!=null&&B0(t,"checked",e,!1)}function Ed(t,e){_p(t,e);var n=wi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_d(t,e.type,n):e.hasOwnProperty("defaultValue")&&_d(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _d(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fo=Array.isArray;function Bs(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function bd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Fo(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function bp(t,e){var n=wi(e.value),i=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function qh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,Ap=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gy=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){gy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function Sp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function Tp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Sp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var py=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ad(t,e){if(e){if(py[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=null;function $0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Id=null,js=null,Fs=null;function Yh(t){if(t=ka(t)){if(typeof Id!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Ac(e),Id(t.stateNode,t.type,e))}}function Ip(t){js?Fs?Fs.push(t):Fs=[t]:js=t}function Np(){if(js){var t=js,e=Fs;if(Fs=js=null,Yh(t),e)for(t=0;t<e.length;t++)Yh(e[t])}}function kp(t,e){return t(e)}function Op(){}var Nu=!1;function Rp(t,e,n){if(Nu)return t(e,n);Nu=!0;try{return kp(t,e,n)}finally{Nu=!1,(js!==null||Fs!==null)&&(Op(),Np())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var i=Ac(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var Nd=!1;if(Lr)try{var To={};Object.defineProperty(To,"passive",{get:function(){Nd=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{Nd=!1}function my(t,e,n,i,o,l,f,g,m){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(v){this.onError(v)}}var Xo=!1,zl=null,Vl=!1,kd=null,xy={onError:function(t){Xo=!0,zl=t}};function wy(t,e,n,i,o,l,f,g,m){Xo=!1,zl=null,my.apply(xy,arguments)}function yy(t,e,n,i,o,l,f,g,m){if(wy.apply(this,arguments),Xo){if(Xo){var x=zl;Xo=!1,zl=null}else throw Error(re(198));Vl||(Vl=!0,kd=x)}}function Qi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kh(t){if(Qi(t)!==t)throw Error(re(188))}function vy(t){var e=t.alternate;if(!e){if(e=Qi(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Kh(o),t;if(l===i)return Kh(o),e;l=l.sibling}throw Error(re(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,g=o.child;g;){if(g===n){f=!0,n=o,i=l;break}if(g===i){f=!0,i=o,n=l;break}g=g.sibling}if(!f){for(g=l.child;g;){if(g===n){f=!0,n=l,i=o;break}if(g===i){f=!0,i=l,n=o;break}g=g.sibling}if(!f)throw Error(re(189))}}if(n.alternate!==i)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function Dp(t){return t=vy(t),t!==null?Mp(t):null}function Mp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mp(t);if(e!==null)return e;t=t.sibling}return null}var Lp=jn.unstable_scheduleCallback,Zh=jn.unstable_cancelCallback,Ey=jn.unstable_shouldYield,_y=jn.unstable_requestPaint,kt=jn.unstable_now,by=jn.unstable_getCurrentPriorityLevel,z0=jn.unstable_ImmediatePriority,Bp=jn.unstable_UserBlockingPriority,Hl=jn.unstable_NormalPriority,Cy=jn.unstable_LowPriority,jp=jn.unstable_IdlePriority,Ec=null,Cr=null;function Ay(t){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:Iy,Sy=Math.log,Ty=Math.LN2;function Iy(t){return t>>>=0,t===0?32:31-(Sy(t)/Ty|0)|0}var rl=64,il=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var g=f&~o;g!==0?i=Uo(g):(l&=f,l!==0&&(i=Uo(l)))}else f=n&~o,f!==0?i=Uo(f):l!==0&&(i=Uo(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ur(e),o=1<<n,i|=t[n],e&=~o;return i}function Ny(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ky(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-ur(l),g=1<<f,m=o[f];m===-1?(!(g&n)||g&i)&&(o[f]=Ny(g,e)):m<=e&&(t.expiredLanes|=g),l&=~g}}function Od(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fp(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function Oy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-ur(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function V0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ur(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var Je=0;function Up(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $p,H0,zp,Vp,Hp,Rd=!1,sl=[],li=null,ci=null,ui=null,la=new Map,ca=new Map,ti=[],Ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qh(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function Io(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=ka(e),e!==null&&H0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Py(t,e,n,i,o){switch(e){case"focusin":return li=Io(li,t,e,n,i,o),!0;case"dragenter":return ci=Io(ci,t,e,n,i,o),!0;case"mouseover":return ui=Io(ui,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return la.set(l,Io(la.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,ca.set(l,Io(ca.get(l)||null,t,e,n,i,o)),!0}return!1}function Wp(t){var e=Ui(t.target);if(e!==null){var n=Qi(e);if(n!==null){if(e=n.tag,e===13){if(e=Pp(n),e!==null){t.blockedOn=e,Hp(t.priority,function(){zp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Td=i,n.target.dispatchEvent(i),Td=null}else return e=ka(n),e!==null&&H0(e),t.blockedOn=n,!1;e.shift()}return!0}function Jh(t,e,n){Ol(t)&&n.delete(e)}function Dy(){Rd=!1,li!==null&&Ol(li)&&(li=null),ci!==null&&Ol(ci)&&(ci=null),ui!==null&&Ol(ui)&&(ui=null),la.forEach(Jh),ca.forEach(Jh)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,Rd||(Rd=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,Dy)))}function ua(t){function e(o){return No(o,t)}if(0<sl.length){No(sl[0],t);for(var n=1;n<sl.length;n++){var i=sl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(li!==null&&No(li,t),ci!==null&&No(ci,t),ui!==null&&No(ui,t),la.forEach(e),ca.forEach(e),n=0;n<ti.length;n++)i=ti[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&ti.shift()}var Us=Ur.ReactCurrentBatchConfig,Gl=!0;function My(t,e,n,i){var o=Je,l=Us.transition;Us.transition=null;try{Je=1,W0(t,e,n,i)}finally{Je=o,Us.transition=l}}function Ly(t,e,n,i){var o=Je,l=Us.transition;Us.transition=null;try{Je=4,W0(t,e,n,i)}finally{Je=o,Us.transition=l}}function W0(t,e,n,i){if(Gl){var o=Pd(t,e,n,i);if(o===null)Uu(t,e,i,Xl,n),Qh(t,i);else if(Py(o,t,e,n,i))i.stopPropagation();else if(Qh(t,i),e&4&&-1<Ry.indexOf(t)){for(;o!==null;){var l=ka(o);if(l!==null&&$p(l),l=Pd(t,e,n,i),l===null&&Uu(t,e,i,Xl,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Uu(t,e,i,null,n)}}var Xl=null;function Pd(t,e,n,i){if(Xl=null,t=$0(i),t=Ui(t),t!==null)if(e=Qi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xl=t,null}function Gp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(by()){case z0:return 1;case Bp:return 4;case Hl:case Cy:return 16;case jp:return 536870912;default:return 16}default:return 16}}var ii=null,G0=null,Rl=null;function Xp(){if(Rl)return Rl;var t,e=G0,n=e.length,i,o="value"in ii?ii.value:ii.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return Rl=o.slice(t,1<i?1-i:void 0)}function Pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function e1(){return!1}function Un(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(n=t[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ol:e1,this.isPropagationStopped=e1,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X0=Un(oo),Na=_t({},oo,{view:0,detail:0}),By=Un(Na),Ou,Ru,ko,_c=_t({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ko&&(ko&&t.type==="mousemove"?(Ou=t.screenX-ko.screenX,Ru=t.screenY-ko.screenY):Ru=Ou=0,ko=t),Ou)},movementY:function(t){return"movementY"in t?t.movementY:Ru}}),t1=Un(_c),jy=_t({},_c,{dataTransfer:0}),Fy=Un(jy),Uy=_t({},Na,{relatedTarget:0}),Pu=Un(Uy),$y=_t({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),zy=Un($y),Vy=_t({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hy=Un(Vy),Wy=_t({},oo,{data:0}),n1=Un(Wy),Gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qy[t])?!!e[t]:!1}function q0(){return Yy}var Ky=_t({},Na,{key:function(t){if(t.key){var e=Gy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q0,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zy=Un(Ky),Qy=_t({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r1=Un(Qy),Jy=_t({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q0}),ev=Un(Jy),tv=_t({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),nv=Un(tv),rv=_t({},_c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iv=Un(rv),sv=[9,13,27,32],Y0=Lr&&"CompositionEvent"in window,qo=null;Lr&&"documentMode"in document&&(qo=document.documentMode);var ov=Lr&&"TextEvent"in window&&!qo,qp=Lr&&(!Y0||qo&&8<qo&&11>=qo),i1=" ",s1=!1;function Yp(t,e){switch(t){case"keyup":return sv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function av(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(s1=!0,i1);case"textInput":return t=e.data,t===i1&&s1?null:t;default:return null}}function lv(t,e){if(As)return t==="compositionend"||!Y0&&Yp(t,e)?(t=Xp(),Rl=G0=ii=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qp&&e.locale!=="ko"?null:e.data;default:return null}}var cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cv[t.type]:e==="textarea"}function Zp(t,e,n,i){Ip(i),e=ql(e,"onChange"),0<e.length&&(n=new X0("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Yo=null,da=null;function uv(t){lm(t,0)}function bc(t){var e=Is(t);if(Ep(e))return t}function dv(t,e){if(t==="change")return e}var Qp=!1;if(Lr){var Du;if(Lr){var Mu="oninput"in document;if(!Mu){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),Mu=typeof a1.oninput=="function"}Du=Mu}else Du=!1;Qp=Du&&(!document.documentMode||9<document.documentMode)}function l1(){Yo&&(Yo.detachEvent("onpropertychange",Jp),da=Yo=null)}function Jp(t){if(t.propertyName==="value"&&bc(da)){var e=[];Zp(e,da,t,$0(t)),Rp(uv,e)}}function fv(t,e,n){t==="focusin"?(l1(),Yo=e,da=n,Yo.attachEvent("onpropertychange",Jp)):t==="focusout"&&l1()}function hv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(da)}function gv(t,e){if(t==="click")return bc(e)}function pv(t,e){if(t==="input"||t==="change")return bc(e)}function mv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:mv;function fa(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!pd.call(e,o)||!fr(t[o],e[o]))return!1}return!0}function c1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u1(t,e){var n=c1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c1(n)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function K0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xv(t){var e=tm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(i!==null&&K0(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=u1(n,l);var f=u1(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wv=Lr&&"documentMode"in document&&11>=document.documentMode,Ss=null,Dd=null,Ko=null,Md=!1;function d1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Md||Ss==null||Ss!==$l(i)||(i=Ss,"selectionStart"in i&&K0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ko&&fa(Ko,i)||(Ko=i,i=ql(Dd,"onSelect"),0<i.length&&(e=new X0("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ss)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},Lu={},nm={};Lr&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Cc(t){if(Lu[t])return Lu[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nm)return Lu[t]=e[n];return t}var rm=Cc("animationend"),im=Cc("animationiteration"),sm=Cc("animationstart"),om=Cc("transitionend"),am=new Map,f1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){am.set(t,e),Zi(e,[t])}for(var Bu=0;Bu<f1.length;Bu++){var ju=f1[Bu],yv=ju.toLowerCase(),vv=ju[0].toUpperCase()+ju.slice(1);Ei(yv,"on"+vv)}Ei(rm,"onAnimationEnd");Ei(im,"onAnimationIteration");Ei(sm,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(om,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function h1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,yy(i,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var g=i[f],m=g.instance,x=g.currentTarget;if(g=g.listener,m!==l&&o.isPropagationStopped())break e;h1(o,g,x),l=m}else for(f=0;f<i.length;f++){if(g=i[f],m=g.instance,x=g.currentTarget,g=g.listener,m!==l&&o.isPropagationStopped())break e;h1(o,g,x),l=m}}}if(Vl)throw t=kd,Vl=!1,kd=null,t}function ht(t,e){var n=e[Ud];n===void 0&&(n=e[Ud]=new Set);var i=t+"__bubble";n.has(i)||(cm(e,t,2,!1),n.add(i))}function Fu(t,e,n){var i=0;e&&(i|=4),cm(n,t,i,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[ll]){t[ll]=!0,mp.forEach(function(n){n!=="selectionchange"&&(Ev.has(n)||Fu(n,!1,t),Fu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,Fu("selectionchange",!1,e))}}function cm(t,e,n,i){switch(Gp(e)){case 1:var o=My;break;case 4:o=Ly;break;default:o=W0}n=o.bind(null,e,n,t),o=void 0,!Nd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Uu(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;f=f.return}for(;g!==null;){if(f=Ui(g),f===null)return;if(m=f.tag,m===5||m===6){i=l=f;continue e}g=g.parentNode}}i=i.return}Rp(function(){var x=l,v=$0(n),_=[];e:{var S=am.get(t);if(S!==void 0){var T=X0,L=t;switch(t){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":T=Zy;break;case"focusin":L="focus",T=Pu;break;case"focusout":L="blur",T=Pu;break;case"beforeblur":case"afterblur":T=Pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=t1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Fy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ev;break;case rm:case im:case sm:T=zy;break;case om:T=nv;break;case"scroll":T=By;break;case"wheel":T=iv;break;case"copy":case"cut":case"paste":T=Hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=r1}var M=(e&4)!==0,H=!M&&t==="scroll",P=M?S!==null?S+"Capture":null:S;M=[];for(var I=x,N;I!==null;){N=I;var F=N.stateNode;if(N.tag===5&&F!==null&&(N=F,P!==null&&(F=aa(I,P),F!=null&&M.push(ga(I,F,N)))),H)break;I=I.return}0<M.length&&(S=new T(S,L,null,n,v),_.push({event:S,listeners:M}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",S&&n!==Td&&(L=n.relatedTarget||n.fromElement)&&(Ui(L)||L[Br]))break e;if((T||S)&&(S=v.window===v?v:(S=v.ownerDocument)?S.defaultView||S.parentWindow:window,T?(L=n.relatedTarget||n.toElement,T=x,L=L?Ui(L):null,L!==null&&(H=Qi(L),L!==H||L.tag!==5&&L.tag!==6)&&(L=null)):(T=null,L=x),T!==L)){if(M=t1,F="onMouseLeave",P="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(M=r1,F="onPointerLeave",P="onPointerEnter",I="pointer"),H=T==null?S:Is(T),N=L==null?S:Is(L),S=new M(F,I+"leave",T,n,v),S.target=H,S.relatedTarget=N,F=null,Ui(v)===x&&(M=new M(P,I+"enter",L,n,v),M.target=N,M.relatedTarget=H,F=M),H=F,T&&L)t:{for(M=T,P=L,I=0,N=M;N;N=gs(N))I++;for(N=0,F=P;F;F=gs(F))N++;for(;0<I-N;)M=gs(M),I--;for(;0<N-I;)P=gs(P),N--;for(;I--;){if(M===P||P!==null&&M===P.alternate)break t;M=gs(M),P=gs(P)}M=null}else M=null;T!==null&&g1(_,S,T,M,!1),L!==null&&H!==null&&g1(_,H,L,M,!0)}}e:{if(S=x?Is(x):window,T=S.nodeName&&S.nodeName.toLowerCase(),T==="select"||T==="input"&&S.type==="file")var $=dv;else if(o1(S))if(Qp)$=pv;else{$=hv;var z=fv}else(T=S.nodeName)&&T.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&($=gv);if($&&($=$(t,x))){Zp(_,$,n,v);break e}z&&z(t,S,x),t==="focusout"&&(z=S._wrapperState)&&z.controlled&&S.type==="number"&&_d(S,"number",S.value)}switch(z=x?Is(x):window,t){case"focusin":(o1(z)||z.contentEditable==="true")&&(Ss=z,Dd=x,Ko=null);break;case"focusout":Ko=Dd=Ss=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,d1(_,n,v);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":d1(_,n,v)}var B;if(Y0)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else As?Yp(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(qp&&n.locale!=="ko"&&(As||D!=="onCompositionStart"?D==="onCompositionEnd"&&As&&(B=Xp()):(ii=v,G0="value"in ii?ii.value:ii.textContent,As=!0)),z=ql(x,D),0<z.length&&(D=new n1(D,t,null,n,v),_.push({event:D,listeners:z}),B?D.data=B:(B=Kp(n),B!==null&&(D.data=B)))),(B=ov?av(t,n):lv(t,n))&&(x=ql(x,"onBeforeInput"),0<x.length&&(v=new n1("onBeforeInput","beforeinput",null,n,v),_.push({event:v,listeners:x}),v.data=B))}lm(_,e)})}function ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ql(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=aa(t,n),l!=null&&i.unshift(ga(t,l,o)),l=aa(t,e),l!=null&&i.push(ga(t,l,o))),t=t.return}return i}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g1(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var g=n,m=g.alternate,x=g.stateNode;if(m!==null&&m===i)break;g.tag===5&&x!==null&&(g=x,o?(m=aa(n,l),m!=null&&f.unshift(ga(n,m,g))):o||(m=aa(n,l),m!=null&&f.push(ga(n,m,g)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var _v=/\r\n?/g,bv=/\u0000|\uFFFD/g;function p1(t){return(typeof t=="string"?t:""+t).replace(_v,`
`).replace(bv,"")}function cl(t,e,n){if(e=p1(e),p1(t)!==e&&n)throw Error(re(425))}function Yl(){}var Ld=null,Bd=null;function jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,m1=typeof Promise=="function"?Promise:void 0,Av=typeof queueMicrotask=="function"?queueMicrotask:typeof m1<"u"?function(t){return m1.resolve(null).then(t).catch(Sv)}:Fd;function Sv(t){setTimeout(function(){throw t})}function $u(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),ua(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);ua(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),_r="__reactFiber$"+ao,pa="__reactProps$"+ao,Br="__reactContainer$"+ao,Ud="__reactEvents$"+ao,Tv="__reactListeners$"+ao,Iv="__reactHandles$"+ao;function Ui(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Br]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x1(t);t!==null;){if(n=t[_r])return n;t=x1(t)}return e}t=n,n=t.parentNode}return null}function ka(t){return t=t[_r]||t[Br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Ac(t){return t[pa]||null}var $d=[],Ns=-1;function _i(t){return{current:t}}function pt(t){0>Ns||(t.current=$d[Ns],$d[Ns]=null,Ns--)}function dt(t,e){Ns++,$d[Ns]=t.current,t.current=e}var yi={},an=_i(yi),Sn=_i(!1),Gi=yi;function Ws(t,e){var n=t.type.contextTypes;if(!n)return yi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Tn(t){return t=t.childContextTypes,t!=null}function Kl(){pt(Sn),pt(an)}function w1(t,e,n){if(an.current!==yi)throw Error(re(168));dt(an,e),dt(Sn,n)}function um(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(re(108,fy(t)||"Unknown",o));return _t({},n,i)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,Gi=an.current,dt(an,t),dt(Sn,Sn.current),!0}function y1(t,e,n){var i=t.stateNode;if(!i)throw Error(re(169));n?(t=um(t,e,Gi),i.__reactInternalMemoizedMergedChildContext=t,pt(Sn),pt(an),dt(an,t)):pt(Sn),dt(Sn,n)}var Or=null,Sc=!1,zu=!1;function dm(t){Or===null?Or=[t]:Or.push(t)}function Nv(t){Sc=!0,dm(t)}function bi(){if(!zu&&Or!==null){zu=!0;var t=0,e=Je;try{var n=Or;for(Je=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Or=null,Sc=!1}catch(o){throw Or!==null&&(Or=Or.slice(t+1)),Lp(z0,bi),o}finally{Je=e,zu=!1}}return null}var ks=[],Os=0,Ql=null,Jl=0,qn=[],Yn=0,Xi=null,Rr=1,Pr="";function Mi(t,e){ks[Os++]=Jl,ks[Os++]=Ql,Ql=t,Jl=e}function fm(t,e,n){qn[Yn++]=Rr,qn[Yn++]=Pr,qn[Yn++]=Xi,Xi=t;var i=Rr;t=Pr;var o=32-ur(i)-1;i&=~(1<<o),n+=1;var l=32-ur(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Rr=1<<32-ur(e)+o|n<<o|i,Pr=l+t}else Rr=1<<l|n<<o|i,Pr=t}function Z0(t){t.return!==null&&(Mi(t,1),fm(t,1,0))}function Q0(t){for(;t===Ql;)Ql=ks[--Os],ks[Os]=null,Jl=ks[--Os],ks[Os]=null;for(;t===Xi;)Xi=qn[--Yn],qn[Yn]=null,Pr=qn[--Yn],qn[Yn]=null,Rr=qn[--Yn],qn[Yn]=null}var Bn=null,Ln=null,wt=!1,cr=null;function hm(t,e){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:Rr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Ln=null,!0):!1;default:return!1}}function zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vd(t){if(wt){var e=Ln;if(e){var n=e;if(!v1(t,e)){if(zd(t))throw Error(re(418));e=di(n.nextSibling);var i=Bn;e&&v1(t,e)?hm(i,n):(t.flags=t.flags&-4097|2,wt=!1,Bn=t)}}else{if(zd(t))throw Error(re(418));t.flags=t.flags&-4097|2,wt=!1,Bn=t}}}function E1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function ul(t){if(t!==Bn)return!1;if(!wt)return E1(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jd(t.type,t.memoizedProps)),e&&(e=Ln)){if(zd(t))throw gm(),Error(re(418));for(;e;)hm(t,e),e=di(e.nextSibling)}if(E1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=Bn?di(t.stateNode.nextSibling):null;return!0}function gm(){for(var t=Ln;t;)t=di(t.nextSibling)}function Gs(){Ln=Bn=null,wt=!1}function J0(t){cr===null?cr=[t]:cr.push(t)}var kv=Ur.ReactCurrentBatchConfig;function Oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var i=n.stateNode}if(!i)throw Error(re(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var g=o.refs;f===null?delete g[l]:g[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _1(t){var e=t._init;return e(t._payload)}function pm(t){function e(P,I){if(t){var N=P.deletions;N===null?(P.deletions=[I],P.flags|=16):N.push(I)}}function n(P,I){if(!t)return null;for(;I!==null;)e(P,I),I=I.sibling;return null}function i(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function o(P,I){return P=pi(P,I),P.index=0,P.sibling=null,P}function l(P,I,N){return P.index=N,t?(N=P.alternate,N!==null?(N=N.index,N<I?(P.flags|=2,I):N):(P.flags|=2,I)):(P.flags|=1048576,I)}function f(P){return t&&P.alternate===null&&(P.flags|=2),P}function g(P,I,N,F){return I===null||I.tag!==6?(I=Yu(N,P.mode,F),I.return=P,I):(I=o(I,N),I.return=P,I)}function m(P,I,N,F){var $=N.type;return $===Cs?v(P,I,N.props.children,F,N.key):I!==null&&(I.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Qr&&_1($)===I.type)?(F=o(I,N.props),F.ref=Oo(P,I,N),F.return=P,F):(F=Ul(N.type,N.key,N.props,null,P.mode,F),F.ref=Oo(P,I,N),F.return=P,F)}function x(P,I,N,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=Ku(N,P.mode,F),I.return=P,I):(I=o(I,N.children||[]),I.return=P,I)}function v(P,I,N,F,$){return I===null||I.tag!==7?(I=Hi(N,P.mode,F,$),I.return=P,I):(I=o(I,N),I.return=P,I)}function _(P,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Yu(""+I,P.mode,N),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case el:return N=Ul(I.type,I.key,I.props,null,P.mode,N),N.ref=Oo(P,null,I),N.return=P,N;case bs:return I=Ku(I,P.mode,N),I.return=P,I;case Qr:var F=I._init;return _(P,F(I._payload),N)}if(Fo(I)||So(I))return I=Hi(I,P.mode,N,null),I.return=P,I;dl(P,I)}return null}function S(P,I,N,F){var $=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return $!==null?null:g(P,I,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case el:return N.key===$?m(P,I,N,F):null;case bs:return N.key===$?x(P,I,N,F):null;case Qr:return $=N._init,S(P,I,$(N._payload),F)}if(Fo(N)||So(N))return $!==null?null:v(P,I,N,F,null);dl(P,N)}return null}function T(P,I,N,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return P=P.get(N)||null,g(I,P,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case el:return P=P.get(F.key===null?N:F.key)||null,m(I,P,F,$);case bs:return P=P.get(F.key===null?N:F.key)||null,x(I,P,F,$);case Qr:var z=F._init;return T(P,I,N,z(F._payload),$)}if(Fo(F)||So(F))return P=P.get(N)||null,v(I,P,F,$,null);dl(I,F)}return null}function L(P,I,N,F){for(var $=null,z=null,B=I,D=I=0,O=null;B!==null&&D<N.length;D++){B.index>D?(O=B,B=null):O=B.sibling;var G=S(P,B,N[D],F);if(G===null){B===null&&(B=O);break}t&&B&&G.alternate===null&&e(P,B),I=l(G,I,D),z===null?$=G:z.sibling=G,z=G,B=O}if(D===N.length)return n(P,B),wt&&Mi(P,D),$;if(B===null){for(;D<N.length;D++)B=_(P,N[D],F),B!==null&&(I=l(B,I,D),z===null?$=B:z.sibling=B,z=B);return wt&&Mi(P,D),$}for(B=i(P,B);D<N.length;D++)O=T(B,P,D,N[D],F),O!==null&&(t&&O.alternate!==null&&B.delete(O.key===null?D:O.key),I=l(O,I,D),z===null?$=O:z.sibling=O,z=O);return t&&B.forEach(function(te){return e(P,te)}),wt&&Mi(P,D),$}function M(P,I,N,F){var $=So(N);if(typeof $!="function")throw Error(re(150));if(N=$.call(N),N==null)throw Error(re(151));for(var z=$=null,B=I,D=I=0,O=null,G=N.next();B!==null&&!G.done;D++,G=N.next()){B.index>D?(O=B,B=null):O=B.sibling;var te=S(P,B,G.value,F);if(te===null){B===null&&(B=O);break}t&&B&&te.alternate===null&&e(P,B),I=l(te,I,D),z===null?$=te:z.sibling=te,z=te,B=O}if(G.done)return n(P,B),wt&&Mi(P,D),$;if(B===null){for(;!G.done;D++,G=N.next())G=_(P,G.value,F),G!==null&&(I=l(G,I,D),z===null?$=G:z.sibling=G,z=G);return wt&&Mi(P,D),$}for(B=i(P,B);!G.done;D++,G=N.next())G=T(B,P,D,G.value,F),G!==null&&(t&&G.alternate!==null&&B.delete(G.key===null?D:G.key),I=l(G,I,D),z===null?$=G:z.sibling=G,z=G);return t&&B.forEach(function(Z){return e(P,Z)}),wt&&Mi(P,D),$}function H(P,I,N,F){if(typeof N=="object"&&N!==null&&N.type===Cs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case el:e:{for(var $=N.key,z=I;z!==null;){if(z.key===$){if($=N.type,$===Cs){if(z.tag===7){n(P,z.sibling),I=o(z,N.props.children),I.return=P,P=I;break e}}else if(z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Qr&&_1($)===z.type){n(P,z.sibling),I=o(z,N.props),I.ref=Oo(P,z,N),I.return=P,P=I;break e}n(P,z);break}else e(P,z);z=z.sibling}N.type===Cs?(I=Hi(N.props.children,P.mode,F,N.key),I.return=P,P=I):(F=Ul(N.type,N.key,N.props,null,P.mode,F),F.ref=Oo(P,I,N),F.return=P,P=F)}return f(P);case bs:e:{for(z=N.key;I!==null;){if(I.key===z)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){n(P,I.sibling),I=o(I,N.children||[]),I.return=P,P=I;break e}else{n(P,I);break}else e(P,I);I=I.sibling}I=Ku(N,P.mode,F),I.return=P,P=I}return f(P);case Qr:return z=N._init,H(P,I,z(N._payload),F)}if(Fo(N))return L(P,I,N,F);if(So(N))return M(P,I,N,F);dl(P,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(n(P,I.sibling),I=o(I,N),I.return=P,P=I):(n(P,I),I=Yu(N,P.mode,F),I.return=P,P=I),f(P)):n(P,I)}return H}var Xs=pm(!0),mm=pm(!1),ec=_i(null),tc=null,Rs=null,ef=null;function tf(){ef=Rs=tc=null}function nf(t){var e=ec.current;pt(ec),t._currentValue=e}function Hd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){tc=t,ef=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(ef!==t)if(t={context:t,memoizedValue:e,next:null},Rs===null){if(tc===null)throw Error(re(308));Rs=t,tc.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return e}var $i=null;function rf(t){$i===null?$i=[t]:$i.push(t)}function xm(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,rf(e)):(n.next=o.next,o.next=n),e.interleaved=n,jr(t,i)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,jr(t,n)}return o=i.interleaved,o===null?(e.next=e,rf(i)):(e.next=o.next,o.next=e),i.interleaved=e,jr(t,n)}function Dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V0(t,n)}}function b1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,i){var o=t.updateQueue;Jr=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var m=g,x=m.next;m.next=null,f===null?l=x:f.next=x,f=m;var v=t.alternate;v!==null&&(v=v.updateQueue,g=v.lastBaseUpdate,g!==f&&(g===null?v.firstBaseUpdate=x:g.next=x,v.lastBaseUpdate=m))}if(l!==null){var _=o.baseState;f=0,v=x=m=null,g=l;do{var S=g.lane,T=g.eventTime;if((i&S)===S){v!==null&&(v=v.next={eventTime:T,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var L=t,M=g;switch(S=e,T=n,M.tag){case 1:if(L=M.payload,typeof L=="function"){_=L.call(T,_,S);break e}_=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=M.payload,S=typeof L=="function"?L.call(T,_,S):L,S==null)break e;_=_t({},_,S);break e;case 2:Jr=!0}}g.callback!==null&&g.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[g]:S.push(g))}else T={eventTime:T,lane:S,tag:g.tag,payload:g.payload,callback:g.callback,next:null},v===null?(x=v=T,m=_):v=v.next=T,f|=S;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;S=g,g=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(!0);if(v===null&&(m=_),o.baseState=m,o.firstBaseUpdate=x,o.lastBaseUpdate=v,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Yi|=f,t.lanes=f,t.memoizedState=_}}function C1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(re(191,o));o.call(i)}}}var Oa={},Ar=_i(Oa),ma=_i(Oa),xa=_i(Oa);function zi(t){if(t===Oa)throw Error(re(174));return t}function of(t,e){switch(dt(xa,e),dt(ma,t),dt(Ar,Oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cd(e,t)}pt(Ar),dt(Ar,e)}function qs(){pt(Ar),pt(ma),pt(xa)}function ym(t){zi(xa.current);var e=zi(Ar.current),n=Cd(e,t.type);e!==n&&(dt(ma,t),dt(Ar,n))}function af(t){ma.current===t&&(pt(Ar),pt(ma))}var vt=_i(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vu=[];function lf(){for(var t=0;t<Vu.length;t++)Vu[t]._workInProgressVersionPrimary=null;Vu.length=0}var Ml=Ur.ReactCurrentDispatcher,Hu=Ur.ReactCurrentBatchConfig,qi=0,Et=null,Bt=null,Ht=null,ic=!1,Zo=!1,wa=0,Ov=0;function rn(){throw Error(re(321))}function cf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function uf(t,e,n,i,o,l){if(qi=l,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?Mv:Lv,t=n(i,o),Zo){l=0;do{if(Zo=!1,wa=0,25<=l)throw Error(re(301));l+=1,Ht=Bt=null,e.updateQueue=null,Ml.current=Bv,t=n(i,o)}while(Zo)}if(Ml.current=sc,e=Bt!==null&&Bt.next!==null,qi=0,Ht=Bt=Et=null,ic=!1,e)throw Error(re(300));return t}function df(){var t=wa!==0;return wa=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Et.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function er(){if(Bt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Ht===null?Et.memoizedState:Ht.next;if(e!==null)Ht=e,Bt=t;else{if(t===null)throw Error(re(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Ht===null?Et.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function ya(t,e){return typeof e=="function"?e(t):e}function Wu(t){var e=er(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var i=Bt,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var g=f=null,m=null,x=l;do{var v=x.lane;if((qi&v)===v)m!==null&&(m=m.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:t(i,x.action);else{var _={lane:v,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};m===null?(g=m=_,f=i):m=m.next=_,Et.lanes|=v,Yi|=v}x=x.next}while(x!==null&&x!==l);m===null?f=i:m.next=g,fr(i,e.memoizedState)||(An=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=m,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,Et.lanes|=l,Yi|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gu(t){var e=er(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);fr(l,e.memoizedState)||(An=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function vm(){}function Em(t,e){var n=Et,i=er(),o=e(),l=!fr(i.memoizedState,o);if(l&&(i.memoizedState=o,An=!0),i=i.queue,ff(Cm.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,va(9,bm.bind(null,n,i,o,e),void 0,null),Xt===null)throw Error(re(349));qi&30||_m(n,e,o)}return o}function _m(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bm(t,e,n,i){e.value=n,e.getSnapshot=i,Am(e)&&Sm(t)}function Cm(t,e,n){return n(function(){Am(e)&&Sm(t)})}function Am(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function Sm(t){var e=jr(t,1);e!==null&&dr(e,t,1,-1)}function A1(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=Dv.bind(null,Et,t),[e.memoizedState,t]}function va(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Tm(){return er().memoizedState}function Ll(t,e,n,i){var o=Er();Et.flags|=t,o.memoizedState=va(1|e,n,void 0,i===void 0?null:i)}function Tc(t,e,n,i){var o=er();i=i===void 0?null:i;var l=void 0;if(Bt!==null){var f=Bt.memoizedState;if(l=f.destroy,i!==null&&cf(i,f.deps)){o.memoizedState=va(e,n,l,i);return}}Et.flags|=t,o.memoizedState=va(1|e,n,l,i)}function S1(t,e){return Ll(8390656,8,t,e)}function ff(t,e){return Tc(2048,8,t,e)}function Im(t,e){return Tc(4,2,t,e)}function Nm(t,e){return Tc(4,4,t,e)}function km(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Om(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4,4,km.bind(null,e,t),n)}function hf(){}function Rm(t,e){var n=er();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cf(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Pm(t,e){var n=er();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cf(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Dm(t,e,n){return qi&21?(fr(n,e)||(n=Fp(),Et.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function Rv(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var i=Hu.transition;Hu.transition={};try{t(!1),e()}finally{Je=n,Hu.transition=i}}function Mm(){return er().memoizedState}function Pv(t,e,n){var i=gi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lm(t))Bm(e,n);else if(n=xm(t,e,n,i),n!==null){var o=dn();dr(n,t,i,o),jm(n,e,i)}}function Dv(t,e,n){var i=gi(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lm(t))Bm(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,g=l(f,n);if(o.hasEagerState=!0,o.eagerState=g,fr(g,f)){var m=e.interleaved;m===null?(o.next=o,rf(e)):(o.next=m.next,m.next=o),e.interleaved=o;return}}catch{}finally{}n=xm(t,e,o,i),n!==null&&(o=dn(),dr(n,t,i,o),jm(n,e,i))}}function Lm(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function Bm(t,e){Zo=ic=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jm(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V0(t,n)}}var sc={readContext:Jn,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},Mv={readContext:Jn,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:S1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,km.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=Er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Er();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Pv.bind(null,Et,t),[i.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:A1,useDebugValue:hf,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=A1(!1),e=t[0];return t=Rv.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Et,o=Er();if(wt){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),Xt===null)throw Error(re(349));qi&30||_m(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,S1(Cm.bind(null,i,l,t),[t]),i.flags|=2048,va(9,bm.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=Er(),e=Xt.identifierPrefix;if(wt){var n=Pr,i=Rr;n=(i&~(1<<32-ur(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ov++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lv={readContext:Jn,useCallback:Rm,useContext:Jn,useEffect:ff,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Pm,useReducer:Wu,useRef:Tm,useState:function(){return Wu(ya)},useDebugValue:hf,useDeferredValue:function(t){var e=er();return Dm(e,Bt.memoizedState,t)},useTransition:function(){var t=Wu(ya)[0],e=er().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1},Bv={readContext:Jn,useCallback:Rm,useContext:Jn,useEffect:ff,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Pm,useReducer:Gu,useRef:Tm,useState:function(){return Gu(ya)},useDebugValue:hf,useDeferredValue:function(t){var e=er();return Bt===null?e.memoizedState=t:Dm(e,Bt.memoizedState,t)},useTransition:function(){var t=Gu(ya)[0],e=er().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:_t({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ic={isMounted:function(t){return(t=t._reactInternals)?Qi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=dn(),o=gi(t),l=Dr(i,o);l.payload=e,n!=null&&(l.callback=n),e=fi(t,l,o),e!==null&&(dr(e,t,o,i),Dl(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=dn(),o=gi(t),l=Dr(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=fi(t,l,o),e!==null&&(dr(e,t,o,i),Dl(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),i=gi(t),o=Dr(n,i);o.tag=2,e!=null&&(o.callback=e),e=fi(t,o,i),e!==null&&(dr(e,t,i,n),Dl(e,t,i))}};function T1(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!fa(n,i)||!fa(o,l):!0}function Fm(t,e,n){var i=!1,o=yi,l=e.contextType;return typeof l=="object"&&l!==null?l=Jn(l):(o=Tn(e)?Gi:an.current,i=e.contextTypes,l=(i=i!=null)?Ws(t,o):yi),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ic,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function I1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ic.enqueueReplaceState(e,e.state,null)}function Gd(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},sf(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Jn(l):(l=Tn(e)?Gi:an.current,o.context=Ws(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Wd(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ic.enqueueReplaceState(o,o.state,null),nc(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e){try{var n="",i=e;do n+=dy(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function Xu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jv=typeof WeakMap=="function"?WeakMap:Map;function Um(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ac||(ac=!0,r0=i),Xd(t,e)},n}function $m(t,e,n){n=Dr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Xd(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Xd(t,e),typeof i!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function N1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new jv;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=Qv.bind(null,t,e,n),e.then(t,t))}function k1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O1(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var Fv=Ur.ReactCurrentOwner,An=!1;function un(t,e,n,i){e.child=t===null?mm(e,null,n,i):Xs(e,t.child,n,i)}function R1(t,e,n,i,o){n=n.render;var l=e.ref;return $s(e,o),i=uf(t,e,n,i,l,o),n=df(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Fr(t,e,o)):(wt&&n&&Z0(e),e.flags|=1,un(t,e,i,o),e.child)}function P1(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!Ef(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,zm(t,e,l,i,o)):(t=Ul(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(f,i)&&t.ref===e.ref)return Fr(t,e,o)}return e.flags|=1,t=pi(l,i),t.ref=e.ref,t.return=e,e.child=t}function zm(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(fa(l,i)&&t.ref===e.ref)if(An=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,Fr(t,e,o)}return qd(t,e,n,i,o)}function Vm(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Ds,Dn),Dn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Ds,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,dt(Ds,Dn),Dn|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,dt(Ds,Dn),Dn|=i;return un(t,e,o,n),e.child}function Hm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qd(t,e,n,i,o){var l=Tn(n)?Gi:an.current;return l=Ws(e,l),$s(e,o),n=uf(t,e,n,i,l,o),i=df(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Fr(t,e,o)):(wt&&i&&Z0(e),e.flags|=1,un(t,e,n,o),e.child)}function D1(t,e,n,i,o){if(Tn(n)){var l=!0;Zl(e)}else l=!1;if($s(e,o),e.stateNode===null)Bl(t,e),Fm(e,n,i),Gd(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,g=e.memoizedProps;f.props=g;var m=f.context,x=n.contextType;typeof x=="object"&&x!==null?x=Jn(x):(x=Tn(n)?Gi:an.current,x=Ws(e,x));var v=n.getDerivedStateFromProps,_=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function";_||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||m!==x)&&I1(e,f,i,x),Jr=!1;var S=e.memoizedState;f.state=S,nc(e,i,f,o),m=e.memoizedState,g!==i||S!==m||Sn.current||Jr?(typeof v=="function"&&(Wd(e,n,v,i),m=e.memoizedState),(g=Jr||T1(e,n,g,i,S,m,x))?(_||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),f.props=i,f.state=m,f.context=x,i=g):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,wm(t,e),g=e.memoizedProps,x=e.type===e.elementType?g:or(e.type,g),f.props=x,_=e.pendingProps,S=f.context,m=n.contextType,typeof m=="object"&&m!==null?m=Jn(m):(m=Tn(n)?Gi:an.current,m=Ws(e,m));var T=n.getDerivedStateFromProps;(v=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==_||S!==m)&&I1(e,f,i,m),Jr=!1,S=e.memoizedState,f.state=S,nc(e,i,f,o);var L=e.memoizedState;g!==_||S!==L||Sn.current||Jr?(typeof T=="function"&&(Wd(e,n,T,i),L=e.memoizedState),(x=Jr||T1(e,n,x,i,S,L,m)||!1)?(v||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,L,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,L,m)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=L),f.props=i,f.state=L,f.context=m,i=x):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return Yd(t,e,n,i,l,o)}function Yd(t,e,n,i,o,l){Hm(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&y1(e,n,!1),Fr(t,e,l);i=e.stateNode,Fv.current=e;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=Xs(e,t.child,null,l),e.child=Xs(e,null,g,l)):un(t,e,g,l),e.memoizedState=i.state,o&&y1(e,n,!0),e.child}function Wm(t){var e=t.stateNode;e.pendingContext?w1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w1(t,e.context,!1),of(t,e.containerInfo)}function M1(t,e,n,i,o){return Gs(),J0(o),e.flags|=256,un(t,e,n,i),e.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gm(t,e,n){var i=e.pendingProps,o=vt.current,l=!1,f=(e.flags&128)!==0,g;if((g=f)||(g=t!==null&&t.memoizedState===null?!1:(o&2)!==0),g?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),dt(vt,o&1),t===null)return Vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Oc(f,i,0,null),t=Hi(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Zd(n),e.memoizedState=Kd,t):gf(e,f));if(o=t.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return Uv(t,e,f,i,g,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,g=o.sibling;var m={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=pi(o,m),i.subtreeFlags=o.subtreeFlags&14680064),g!==null?l=pi(g,l):(l=Hi(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?Zd(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=Kd,i}return l=t.child,t=l.sibling,i=pi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function gf(t,e){return e=Oc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fl(t,e,n,i){return i!==null&&J0(i),Xs(e,t.child,null,n),t=gf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Uv(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=Xu(Error(re(422))),fl(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Oc({mode:"visible",children:i.children},o,0,null),l=Hi(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Xs(e,t.child,null,f),e.child.memoizedState=Zd(f),e.memoizedState=Kd,l);if(!(e.mode&1))return fl(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(re(419)),i=Xu(l,i,void 0),fl(t,e,f,i)}if(g=(f&t.childLanes)!==0,An||g){if(i=Xt,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,jr(t,o),dr(i,t,o,-1))}return vf(),i=Xu(Error(re(421))),fl(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Jv.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,Ln=di(o.nextSibling),Bn=e,wt=!0,cr=null,t!==null&&(qn[Yn++]=Rr,qn[Yn++]=Pr,qn[Yn++]=Xi,Rr=t.id,Pr=t.overflow,Xi=e),e=gf(e,i.children),e.flags|=4096,e)}function L1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hd(t.return,e,n)}function qu(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function Xm(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(un(t,e,i.children,n),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L1(t,n,e);else if(t.tag===19)L1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(dt(vt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),qu(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&rc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}qu(e,!0,n,null,l);break;case"together":qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $v(t,e,n){switch(e.tag){case 3:Wm(e),Gs();break;case 5:ym(e);break;case 1:Tn(e.type)&&Zl(e);break;case 4:of(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;dt(ec,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(dt(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?Gm(t,e,n):(dt(vt,vt.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);dt(vt,vt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Xm(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),dt(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,Vm(t,e,n)}return Fr(t,e,n)}var qm,Qd,Ym,Km;qm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qd=function(){};Ym=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,zi(Ar.current);var l=null;switch(n){case"input":o=vd(t,o),i=vd(t,i),l=[];break;case"select":o=_t({},o,{value:void 0}),i=_t({},i,{value:void 0}),l=[];break;case"textarea":o=bd(t,o),i=bd(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Yl)}Ad(n,i);var f;n=null;for(x in o)if(!i.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var g=o[x];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(sa.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in i){var m=i[x];if(g=o!=null?o[x]:void 0,i.hasOwnProperty(x)&&m!==g&&(m!=null||g!=null))if(x==="style")if(g){for(f in g)!g.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in m)m.hasOwnProperty(f)&&g[f]!==m[f]&&(n||(n={}),n[f]=m[f])}else n||(l||(l=[]),l.push(x,n)),n=m;else x==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,g=g?g.__html:void 0,m!=null&&g!==m&&(l=l||[]).push(x,m)):x==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(x,""+m):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(sa.hasOwnProperty(x)?(m!=null&&x==="onScroll"&&ht("scroll",t),l||g===m||(l=[])):(l=l||[]).push(x,m))}n&&(l=l||[]).push("style",n);var x=l;(e.updateQueue=x)&&(e.flags|=4)}};Km=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ro(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function zv(t,e,n){var i=e.pendingProps;switch(Q0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Tn(e.type)&&Kl(),sn(e),null;case 3:return i=e.stateNode,qs(),pt(Sn),pt(an),lf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cr!==null&&(o0(cr),cr=null))),Qd(t,e),sn(e),null;case 5:af(e);var o=zi(xa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ym(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(re(166));return sn(e),null}if(t=zi(Ar.current),ul(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[_r]=e,i[pa]=l,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",i),ht("close",i);break;case"iframe":case"object":case"embed":ht("load",i);break;case"video":case"audio":for(o=0;o<$o.length;o++)ht($o[o],i);break;case"source":ht("error",i);break;case"img":case"image":case"link":ht("error",i),ht("load",i);break;case"details":ht("toggle",i);break;case"input":Wh(i,l),ht("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},ht("invalid",i);break;case"textarea":Xh(i,l),ht("invalid",i)}Ad(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var g=l[f];f==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&cl(i.textContent,g,t),o=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&cl(i.textContent,g,t),o=["children",""+g]):sa.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&ht("scroll",i)}switch(n){case"input":tl(i),Gh(i,l,!0);break;case"textarea":tl(i),qh(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Yl)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[_r]=e,t[pa]=i,qm(t,e,!1,!1),e.stateNode=t;e:{switch(f=Sd(n,i),n){case"dialog":ht("cancel",t),ht("close",t),o=i;break;case"iframe":case"object":case"embed":ht("load",t),o=i;break;case"video":case"audio":for(o=0;o<$o.length;o++)ht($o[o],t);o=i;break;case"source":ht("error",t),o=i;break;case"img":case"image":case"link":ht("error",t),ht("load",t),o=i;break;case"details":ht("toggle",t),o=i;break;case"input":Wh(t,i),o=vd(t,i),ht("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=_t({},i,{value:void 0}),ht("invalid",t);break;case"textarea":Xh(t,i),o=bd(t,i),ht("invalid",t);break;default:o=i}Ad(n,o),g=o;for(l in g)if(g.hasOwnProperty(l)){var m=g[l];l==="style"?Tp(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Ap(t,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&oa(t,m):typeof m=="number"&&oa(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(sa.hasOwnProperty(l)?m!=null&&l==="onScroll"&&ht("scroll",t):m!=null&&B0(t,l,m,f))}switch(n){case"input":tl(t),Gh(t,i,!1);break;case"textarea":tl(t),qh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wi(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Bs(t,!!i.multiple,l,!1):i.defaultValue!=null&&Bs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(re(166));if(n=zi(xa.current),zi(Ar.current),ul(e)){if(i=e.stateNode,n=e.memoizedProps,i[_r]=e,(l=i.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:cl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[_r]=e,e.stateNode=i}return sn(e),null;case 13:if(pt(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Ln!==null&&e.mode&1&&!(e.flags&128))gm(),Gs(),e.flags|=98560,l=!1;else if(l=ul(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(re(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(re(317));l[_r]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),l=!1}else cr!==null&&(o0(cr),cr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?jt===0&&(jt=3):vf())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return qs(),Qd(t,e),t===null&&ha(e.stateNode.containerInfo),sn(e),null;case 10:return nf(e.type._context),sn(e),null;case 17:return Tn(e.type)&&Kl(),sn(e),null;case 19:if(pt(vt),l=e.memoizedState,l===null)return sn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)Ro(l,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=rc(t),f!==null){for(e.flags|=128,Ro(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(vt,vt.current&1|2),e.child}t=t.sibling}l.tail!==null&&kt()>Ks&&(e.flags|=128,i=!0,Ro(l,!1),e.lanes=4194304)}else{if(!i)if(t=rc(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!wt)return sn(e),null}else 2*kt()-l.renderingStartTime>Ks&&n!==1073741824&&(e.flags|=128,i=!0,Ro(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=kt(),e.sibling=null,n=vt.current,dt(vt,i?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return yf(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Dn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function Vv(t,e){switch(Q0(e),e.tag){case 1:return Tn(e.type)&&Kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qs(),pt(Sn),pt(an),lf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return af(e),null;case 13:if(pt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(vt),null;case 4:return qs(),null;case 10:return nf(e.type._context),null;case 22:case 23:return yf(),null;case 24:return null;default:return null}}var hl=!1,on=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Tt(t,e,i)}else n.current=null}function Jd(t,e,n){try{n()}catch(i){Tt(t,e,i)}}var B1=!1;function Wv(t,e){if(Ld=Gl,t=tm(),K0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,g=-1,m=-1,x=0,v=0,_=t,S=null;t:for(;;){for(var T;_!==n||o!==0&&_.nodeType!==3||(g=f+o),_!==l||i!==0&&_.nodeType!==3||(m=f+i),_.nodeType===3&&(f+=_.nodeValue.length),(T=_.firstChild)!==null;)S=_,_=T;for(;;){if(_===t)break t;if(S===n&&++x===o&&(g=f),S===l&&++v===i&&(m=f),(T=_.nextSibling)!==null)break;_=S,S=_.parentNode}_=T}n=g===-1||m===-1?null:{start:g,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bd={focusedElem:t,selectionRange:n},Gl=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var M=L.memoizedProps,H=L.memoizedState,P=e.stateNode,I=P.getSnapshotBeforeUpdate(e.elementType===e.type?M:or(e.type,M),H);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(F){Tt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return L=B1,B1=!1,L}function Qo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&Jd(e,n,l)}o=o.next}while(o!==i)}}function Nc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function e0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zm(t){var e=t.alternate;e!==null&&(t.alternate=null,Zm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[pa],delete e[Ud],delete e[Tv],delete e[Iv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qm(t){return t.tag===5||t.tag===3||t.tag===4}function j1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function t0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(i!==4&&(t=t.child,t!==null))for(t0(t,e,n),t=t.sibling;t!==null;)t0(t,e,n),t=t.sibling}function n0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(n0(t,e,n),t=t.sibling;t!==null;)n0(t,e,n),t=t.sibling}var Qt=null,ar=!1;function qr(t,e,n){for(n=n.child;n!==null;)Jm(t,e,n),n=n.sibling}function Jm(t,e,n){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:on||Ps(n,e);case 6:var i=Qt,o=ar;Qt=null,qr(t,e,n),Qt=i,ar=o,Qt!==null&&(ar?(t=Qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(ar?(t=Qt,n=n.stateNode,t.nodeType===8?$u(t.parentNode,n):t.nodeType===1&&$u(t,n),ua(t)):$u(Qt,n.stateNode));break;case 4:i=Qt,o=ar,Qt=n.stateNode.containerInfo,ar=!0,qr(t,e,n),Qt=i,ar=o;break;case 0:case 11:case 14:case 15:if(!on&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&Jd(n,e,f),o=o.next}while(o!==i)}qr(t,e,n);break;case 1:if(!on&&(Ps(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Tt(n,e,g)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(on=(i=on)||n.memoizedState!==null,qr(t,e,n),on=i):qr(t,e,n);break;default:qr(t,e,n)}}function F1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hv),e.forEach(function(i){var o=eE.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function sr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,g=f;e:for(;g!==null;){switch(g.tag){case 5:Qt=g.stateNode,ar=!1;break e;case 3:Qt=g.stateNode.containerInfo,ar=!0;break e;case 4:Qt=g.stateNode.containerInfo,ar=!0;break e}g=g.return}if(Qt===null)throw Error(re(160));Jm(l,f,o),Qt=null,ar=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(x){Tt(o,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e2(e,t),e=e.sibling}function e2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),yr(t),i&4){try{Qo(3,t,t.return),Nc(3,t)}catch(M){Tt(t,t.return,M)}try{Qo(5,t,t.return)}catch(M){Tt(t,t.return,M)}}break;case 1:sr(e,t),yr(t),i&512&&n!==null&&Ps(n,n.return);break;case 5:if(sr(e,t),yr(t),i&512&&n!==null&&Ps(n,n.return),t.flags&32){var o=t.stateNode;try{oa(o,"")}catch(M){Tt(t,t.return,M)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,g=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&_p(o,l),Sd(g,f);var x=Sd(g,l);for(f=0;f<m.length;f+=2){var v=m[f],_=m[f+1];v==="style"?Tp(o,_):v==="dangerouslySetInnerHTML"?Ap(o,_):v==="children"?oa(o,_):B0(o,v,_,x)}switch(g){case"input":Ed(o,l);break;case"textarea":bp(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Bs(o,!!l.multiple,T,!1):S!==!!l.multiple&&(l.defaultValue!=null?Bs(o,!!l.multiple,l.defaultValue,!0):Bs(o,!!l.multiple,l.multiple?[]:"",!1))}o[pa]=l}catch(M){Tt(t,t.return,M)}}break;case 6:if(sr(e,t),yr(t),i&4){if(t.stateNode===null)throw Error(re(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(M){Tt(t,t.return,M)}}break;case 3:if(sr(e,t),yr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ua(e.containerInfo)}catch(M){Tt(t,t.return,M)}break;case 4:sr(e,t),yr(t);break;case 13:sr(e,t),yr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(xf=kt())),i&4&&F1(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(on=(x=on)||v,sr(e,t),on=x):sr(e,t),yr(t),i&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!v&&t.mode&1)for(xe=t,v=t.child;v!==null;){for(_=xe=v;xe!==null;){switch(S=xe,T=S.child,S.tag){case 0:case 11:case 14:case 15:Qo(4,S,S.return);break;case 1:Ps(S,S.return);var L=S.stateNode;if(typeof L.componentWillUnmount=="function"){i=S,n=S.return;try{e=i,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(M){Tt(i,n,M)}}break;case 5:Ps(S,S.return);break;case 22:if(S.memoizedState!==null){$1(_);continue}}T!==null?(T.return=S,xe=T):$1(_)}v=v.sibling}e:for(v=null,_=t;;){if(_.tag===5){if(v===null){v=_;try{o=_.stateNode,x?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=_.stateNode,m=_.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,g.style.display=Sp("display",f))}catch(M){Tt(t,t.return,M)}}}else if(_.tag===6){if(v===null)try{_.stateNode.nodeValue=x?"":_.memoizedProps}catch(M){Tt(t,t.return,M)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;v===_&&(v=null),_=_.return}v===_&&(v=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:sr(e,t),yr(t),i&4&&F1(t);break;case 21:break;default:sr(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qm(n)){var i=n;break e}n=n.return}throw Error(re(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(oa(o,""),i.flags&=-33);var l=j1(t);n0(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,g=j1(t);t0(t,g,f);break;default:throw Error(re(161))}}catch(m){Tt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gv(t,e,n){xe=t,t2(t)}function t2(t,e,n){for(var i=(t.mode&1)!==0;xe!==null;){var o=xe,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||hl;if(!f){var g=o.alternate,m=g!==null&&g.memoizedState!==null||on;g=hl;var x=on;if(hl=f,(on=m)&&!x)for(xe=o;xe!==null;)f=xe,m=f.child,f.tag===22&&f.memoizedState!==null?z1(o):m!==null?(m.return=f,xe=m):z1(o);for(;l!==null;)xe=l,t2(l),l=l.sibling;xe=o,hl=g,on=x}U1(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,xe=l):U1(t)}}function U1(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Nc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!on)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&C1(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C1(e,f,n)}break;case 5:var g=e.stateNode;if(n===null&&e.flags&4){n=g;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var v=x.memoizedState;if(v!==null){var _=v.dehydrated;_!==null&&ua(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}on||e.flags&512&&e0(e)}catch(S){Tt(e,e.return,S)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function $1(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function z1(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nc(4,e)}catch(m){Tt(e,n,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(m){Tt(e,o,m)}}var l=e.return;try{e0(e)}catch(m){Tt(e,l,m)}break;case 5:var f=e.return;try{e0(e)}catch(m){Tt(e,f,m)}}}catch(m){Tt(e,e.return,m)}if(e===t){xe=null;break}var g=e.sibling;if(g!==null){g.return=e.return,xe=g;break}xe=e.return}}var Xv=Math.ceil,oc=Ur.ReactCurrentDispatcher,pf=Ur.ReactCurrentOwner,Qn=Ur.ReactCurrentBatchConfig,Ge=0,Xt=null,Ot=null,Jt=0,Dn=0,Ds=_i(0),jt=0,Ea=null,Yi=0,kc=0,mf=0,Jo=null,_n=null,xf=0,Ks=1/0,Nr=null,ac=!1,r0=null,hi=null,gl=!1,si=null,lc=0,ea=0,i0=null,jl=-1,Fl=0;function dn(){return Ge&6?kt():jl!==-1?jl:jl=kt()}function gi(t){return t.mode&1?Ge&2&&Jt!==0?Jt&-Jt:kv.transition!==null?(Fl===0&&(Fl=Fp()),Fl):(t=Je,t!==0||(t=window.event,t=t===void 0?16:Gp(t.type)),t):1}function dr(t,e,n,i){if(50<ea)throw ea=0,i0=null,Error(re(185));Ia(t,n,i),(!(Ge&2)||t!==Xt)&&(t===Xt&&(!(Ge&2)&&(kc|=n),jt===4&&ni(t,Jt)),In(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Ks=kt()+500,Sc&&bi()))}function In(t,e){var n=t.callbackNode;ky(t,e);var i=Wl(t,t===Xt?Jt:0);if(i===0)n!==null&&Zh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Zh(n),e===1)t.tag===0?Nv(V1.bind(null,t)):dm(V1.bind(null,t)),Av(function(){!(Ge&6)&&bi()}),n=null;else{switch(Up(i)){case 1:n=z0;break;case 4:n=Bp;break;case 16:n=Hl;break;case 536870912:n=jp;break;default:n=Hl}n=c2(n,n2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n2(t,e){if(jl=-1,Fl=0,Ge&6)throw Error(re(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var i=Wl(t,t===Xt?Jt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=cc(t,i);else{e=i;var o=Ge;Ge|=2;var l=i2();(Xt!==t||Jt!==e)&&(Nr=null,Ks=kt()+500,Vi(t,e));do try{Kv();break}catch(g){r2(t,g)}while(!0);tf(),oc.current=l,Ge=o,Ot!==null?e=0:(Xt=null,Jt=0,e=jt)}if(e!==0){if(e===2&&(o=Od(t),o!==0&&(i=o,e=s0(t,o))),e===1)throw n=Ea,Vi(t,0),ni(t,i),In(t,kt()),n;if(e===6)ni(t,i);else{if(o=t.current.alternate,!(i&30)&&!qv(o)&&(e=cc(t,i),e===2&&(l=Od(t),l!==0&&(i=l,e=s0(t,l))),e===1))throw n=Ea,Vi(t,0),ni(t,i),In(t,kt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(re(345));case 2:Li(t,_n,Nr);break;case 3:if(ni(t,i),(i&130023424)===i&&(e=xf+500-kt(),10<e)){if(Wl(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){dn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Fd(Li.bind(null,t,_n,Nr),e);break}Li(t,_n,Nr);break;case 4:if(ni(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-ur(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Xv(i/1960))-i,10<i){t.timeoutHandle=Fd(Li.bind(null,t,_n,Nr),i);break}Li(t,_n,Nr);break;case 5:Li(t,_n,Nr);break;default:throw Error(re(329))}}}return In(t,kt()),t.callbackNode===n?n2.bind(null,t):null}function s0(t,e){var n=Jo;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=cc(t,e),t!==2&&(e=_n,_n=n,e!==null&&o0(e)),t}function o0(t){_n===null?_n=t:_n.push.apply(_n,t)}function qv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!fr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~mf,e&=~kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),i=1<<n;t[n]=-1,e&=~i}}function V1(t){if(Ge&6)throw Error(re(327));zs();var e=Wl(t,0);if(!(e&1))return In(t,kt()),null;var n=cc(t,e);if(t.tag!==0&&n===2){var i=Od(t);i!==0&&(e=i,n=s0(t,i))}if(n===1)throw n=Ea,Vi(t,0),ni(t,e),In(t,kt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,_n,Nr),In(t,kt()),null}function wf(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Ks=kt()+500,Sc&&bi())}}function Ki(t){si!==null&&si.tag===0&&!(Ge&6)&&zs();var e=Ge;Ge|=1;var n=Qn.transition,i=Je;try{if(Qn.transition=null,Je=1,t)return t()}finally{Je=i,Qn.transition=n,Ge=e,!(Ge&6)&&bi()}}function yf(){Dn=Ds.current,pt(Ds)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cv(n)),Ot!==null)for(n=Ot.return;n!==null;){var i=n;switch(Q0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Kl();break;case 3:qs(),pt(Sn),pt(an),lf();break;case 5:af(i);break;case 4:qs();break;case 13:pt(vt);break;case 19:pt(vt);break;case 10:nf(i.type._context);break;case 22:case 23:yf()}n=n.return}if(Xt=t,Ot=t=pi(t.current,null),Jt=Dn=e,jt=0,Ea=null,mf=kc=Yi=0,_n=Jo=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}$i=null}return t}function r2(t,e){do{var n=Ot;try{if(tf(),Ml.current=sc,ic){for(var i=Et.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ic=!1}if(qi=0,Ht=Bt=Et=null,Zo=!1,wa=0,pf.current=null,n===null||n.return===null){jt=1,Ea=e,Ot=null;break}e:{var l=t,f=n.return,g=n,m=e;if(e=Jt,g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var x=m,v=g,_=v.tag;if(!(v.mode&1)&&(_===0||_===11||_===15)){var S=v.alternate;S?(v.updateQueue=S.updateQueue,v.memoizedState=S.memoizedState,v.lanes=S.lanes):(v.updateQueue=null,v.memoizedState=null)}var T=k1(f);if(T!==null){T.flags&=-257,O1(T,f,g,l,e),T.mode&1&&N1(l,x,e),e=T,m=x;var L=e.updateQueue;if(L===null){var M=new Set;M.add(m),e.updateQueue=M}else L.add(m);break e}else{if(!(e&1)){N1(l,x,e),vf();break e}m=Error(re(426))}}else if(wt&&g.mode&1){var H=k1(f);if(H!==null){!(H.flags&65536)&&(H.flags|=256),O1(H,f,g,l,e),J0(Ys(m,g));break e}}l=m=Ys(m,g),jt!==4&&(jt=2),Jo===null?Jo=[l]:Jo.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var P=Um(l,m,e);b1(l,P);break e;case 1:g=m;var I=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(hi===null||!hi.has(N)))){l.flags|=65536,e&=-e,l.lanes|=e;var F=$m(l,g,e);b1(l,F);break e}}l=l.return}while(l!==null)}o2(n)}catch($){e=$,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function i2(){var t=oc.current;return oc.current=sc,t===null?sc:t}function vf(){(jt===0||jt===3||jt===2)&&(jt=4),Xt===null||!(Yi&268435455)&&!(kc&268435455)||ni(Xt,Jt)}function cc(t,e){var n=Ge;Ge|=2;var i=i2();(Xt!==t||Jt!==e)&&(Nr=null,Vi(t,e));do try{Yv();break}catch(o){r2(t,o)}while(!0);if(tf(),Ge=n,oc.current=i,Ot!==null)throw Error(re(261));return Xt=null,Jt=0,jt}function Yv(){for(;Ot!==null;)s2(Ot)}function Kv(){for(;Ot!==null&&!Ey();)s2(Ot)}function s2(t){var e=l2(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?o2(t):Ot=e,pf.current=null}function o2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vv(n,e),n!==null){n.flags&=32767,Ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,Ot=null;return}}else if(n=zv(n,e,Dn),n!==null){Ot=n;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);jt===0&&(jt=5)}function Li(t,e,n){var i=Je,o=Qn.transition;try{Qn.transition=null,Je=1,Zv(t,e,n,i)}finally{Qn.transition=o,Je=i}return null}function Zv(t,e,n,i){do zs();while(si!==null);if(Ge&6)throw Error(re(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Oy(t,l),t===Xt&&(Ot=Xt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,c2(Hl,function(){return zs(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Qn.transition,Qn.transition=null;var f=Je;Je=1;var g=Ge;Ge|=4,pf.current=null,Wv(t,n),e2(n,t),xv(Bd),Gl=!!Ld,Bd=Ld=null,t.current=n,Gv(n),_y(),Ge=g,Je=f,Qn.transition=l}else t.current=n;if(gl&&(gl=!1,si=t,lc=o),l=t.pendingLanes,l===0&&(hi=null),Ay(n.stateNode),In(t,kt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(ac)throw ac=!1,t=r0,r0=null,t;return lc&1&&t.tag!==0&&zs(),l=t.pendingLanes,l&1?t===i0?ea++:(ea=0,i0=t):ea=0,bi(),null}function zs(){if(si!==null){var t=Up(lc),e=Qn.transition,n=Je;try{if(Qn.transition=null,Je=16>t?16:t,si===null)var i=!1;else{if(t=si,si=null,lc=0,Ge&6)throw Error(re(331));var o=Ge;for(Ge|=4,xe=t.current;xe!==null;){var l=xe,f=l.child;if(xe.flags&16){var g=l.deletions;if(g!==null){for(var m=0;m<g.length;m++){var x=g[m];for(xe=x;xe!==null;){var v=xe;switch(v.tag){case 0:case 11:case 15:Qo(8,v,l)}var _=v.child;if(_!==null)_.return=v,xe=_;else for(;xe!==null;){v=xe;var S=v.sibling,T=v.return;if(Zm(v),v===x){xe=null;break}if(S!==null){S.return=T,xe=S;break}xe=T}}}var L=l.alternate;if(L!==null){var M=L.child;if(M!==null){L.child=null;do{var H=M.sibling;M.sibling=null,M=H}while(M!==null)}}xe=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,xe=f;else e:for(;xe!==null;){if(l=xe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Qo(9,l,l.return)}var P=l.sibling;if(P!==null){P.return=l.return,xe=P;break e}xe=l.return}}var I=t.current;for(xe=I;xe!==null;){f=xe;var N=f.child;if(f.subtreeFlags&2064&&N!==null)N.return=f,xe=N;else e:for(f=I;xe!==null;){if(g=xe,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Nc(9,g)}}catch($){Tt(g,g.return,$)}if(g===f){xe=null;break e}var F=g.sibling;if(F!==null){F.return=g.return,xe=F;break e}xe=g.return}}if(Ge=o,bi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Ec,t)}catch{}i=!0}return i}finally{Je=n,Qn.transition=e}}return!1}function H1(t,e,n){e=Ys(n,e),e=Um(t,e,1),t=fi(t,e,1),e=dn(),t!==null&&(Ia(t,1,e),In(t,e))}function Tt(t,e,n){if(t.tag===3)H1(t,t,n);else for(;e!==null;){if(e.tag===3){H1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hi===null||!hi.has(i))){t=Ys(n,t),t=$m(e,t,1),e=fi(e,t,1),t=dn(),e!==null&&(Ia(e,1,t),In(e,t));break}}e=e.return}}function Qv(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,Xt===t&&(Jt&n)===n&&(jt===4||jt===3&&(Jt&130023424)===Jt&&500>kt()-xf?Vi(t,0):mf|=n),In(t,e)}function a2(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var n=dn();t=jr(t,e),t!==null&&(Ia(t,e,n),In(t,n))}function Jv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a2(t,n)}function eE(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(re(314))}i!==null&&i.delete(e),a2(t,n)}var l2;l2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,$v(t,e,n);An=!!(t.flags&131072)}else An=!1,wt&&e.flags&1048576&&fm(e,Jl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Bl(t,e),t=e.pendingProps;var o=Ws(e,an.current);$s(e,n),o=uf(null,e,i,t,o,n);var l=df();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(i)?(l=!0,Zl(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,sf(e),o.updater=Ic,e.stateNode=o,o._reactInternals=e,Gd(e,i,t,n),e=Yd(null,e,i,!0,l,n)):(e.tag=0,wt&&l&&Z0(e),un(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Bl(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=nE(i),t=or(i,t),o){case 0:e=qd(null,e,i,t,n);break e;case 1:e=D1(null,e,i,t,n);break e;case 11:e=R1(null,e,i,t,n);break e;case 14:e=P1(null,e,i,or(i.type,t),n);break e}throw Error(re(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),qd(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),D1(t,e,i,o,n);case 3:e:{if(Wm(e),t===null)throw Error(re(387));i=e.pendingProps,l=e.memoizedState,o=l.element,wm(t,e),nc(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Ys(Error(re(423)),e),e=M1(t,e,i,n,o);break e}else if(i!==o){o=Ys(Error(re(424)),e),e=M1(t,e,i,n,o);break e}else for(Ln=di(e.stateNode.containerInfo.firstChild),Bn=e,wt=!0,cr=null,n=mm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),i===o){e=Fr(t,e,n);break e}un(t,e,i,n)}e=e.child}return e;case 5:return ym(e),t===null&&Vd(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,jd(i,o)?f=null:l!==null&&jd(i,l)&&(e.flags|=32),Hm(t,e),un(t,e,f,n),e.child;case 6:return t===null&&Vd(e),null;case 13:return Gm(t,e,n);case 4:return of(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Xs(e,null,i,n):un(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),R1(t,e,i,o,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,dt(ec,i._currentValue),i._currentValue=f,l!==null)if(fr(l.value,f)){if(l.children===o.children&&!Sn.current){e=Fr(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var g=l.dependencies;if(g!==null){f=l.child;for(var m=g.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=Dr(-1,n&-n),m.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var v=x.pending;v===null?m.next=m:(m.next=v.next,v.next=m),x.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Hd(l.return,n,e),g.lanes|=n;break}m=m.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(re(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),Hd(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}un(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,$s(e,n),o=Jn(o),i=i(o),e.flags|=1,un(t,e,i,n),e.child;case 14:return i=e.type,o=or(i,e.pendingProps),o=or(i.type,o),P1(t,e,i,o,n);case 15:return zm(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),Bl(t,e),e.tag=1,Tn(i)?(t=!0,Zl(e)):t=!1,$s(e,n),Fm(e,i,o),Gd(e,i,o,n),Yd(null,e,i,!0,t,n);case 19:return Xm(t,e,n);case 22:return Vm(t,e,n)}throw Error(re(156,e.tag))};function c2(t,e){return Lp(t,e)}function tE(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,i){return new tE(t,e,n,i)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nE(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F0)return 11;if(t===U0)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")Ef(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Cs:return Hi(n.children,o,l,e);case j0:f=8,o|=8;break;case md:return t=Zn(12,n,e,o|2),t.elementType=md,t.lanes=l,t;case xd:return t=Zn(13,n,e,o),t.elementType=xd,t.lanes=l,t;case wd:return t=Zn(19,n,e,o),t.elementType=wd,t.lanes=l,t;case yp:return Oc(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xp:f=10;break e;case wp:f=9;break e;case F0:f=11;break e;case U0:f=14;break e;case Qr:f=16,i=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Zn(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Hi(t,e,n,i){return t=Zn(7,t,i,e),t.lanes=n,t}function Oc(t,e,n,i){return t=Zn(22,t,i,e),t.elementType=yp,t.lanes=n,t.stateNode={isHidden:!1},t}function Yu(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function Ku(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rE(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _f(t,e,n,i,o,l,f,g,m){return t=new rE(t,e,n,g,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Zn(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sf(l),t}function iE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function u2(t){if(!t)return yi;t=t._reactInternals;e:{if(Qi(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Tn(n))return um(t,n,e)}return e}function d2(t,e,n,i,o,l,f,g,m){return t=_f(n,i,!0,t,o,l,f,g,m),t.context=u2(null),n=t.current,i=dn(),o=gi(n),l=Dr(i,o),l.callback=e??null,fi(n,l,o),t.current.lanes=o,Ia(t,o,i),In(t,i),t}function Rc(t,e,n,i){var o=e.current,l=dn(),f=gi(o);return n=u2(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=fi(o,e,f),t!==null&&(dr(t,o,f,l),Dl(t,o,f)),f}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bf(t,e){W1(t,e),(t=t.alternate)&&W1(t,e)}function sE(){return null}var f2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cf(t){this._internalRoot=t}Pc.prototype.render=Cf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Rc(t,e,null,null)};Pc.prototype.unmount=Cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){Rc(null,t,null,null)}),e[Br]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&Wp(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G1(){}function oE(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var x=uc(f);l.call(x)}}var f=d2(e,i,t,0,null,!1,!1,"",G1);return t._reactRootContainer=f,t[Br]=f.current,ha(t.nodeType===8?t.parentNode:t),Ki(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var g=i;i=function(){var x=uc(m);g.call(x)}}var m=_f(t,0,!1,null,null,!1,!1,"",G1);return t._reactRootContainer=m,t[Br]=m.current,ha(t.nodeType===8?t.parentNode:t),Ki(function(){Rc(e,m,n,i)}),m}function Mc(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var g=o;o=function(){var m=uc(f);g.call(m)}}Rc(e,f,t,o)}else f=oE(n,e,t,o,i);return uc(f)}$p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(V0(e,n|1),In(e,kt()),!(Ge&6)&&(Ks=kt()+500,bi()))}break;case 13:Ki(function(){var i=jr(t,1);if(i!==null){var o=dn();dr(i,t,1,o)}}),bf(t,1)}};H0=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=dn();dr(e,t,134217728,n)}bf(t,134217728)}};zp=function(t){if(t.tag===13){var e=gi(t),n=jr(t,e);if(n!==null){var i=dn();dr(n,t,e,i)}bf(t,e)}};Vp=function(){return Je};Hp=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};Id=function(t,e,n){switch(e){case"input":if(Ed(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Ac(i);if(!o)throw Error(re(90));Ep(i),Ed(i,o)}}}break;case"textarea":bp(t,n);break;case"select":e=n.value,e!=null&&Bs(t,!!n.multiple,e,!1)}};kp=wf;Op=Ki;var aE={usingClientEntryPoint:!1,Events:[ka,Is,Ac,Ip,Np,wf]},Po={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||sE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Ec=pl.inject(lE),Cr=pl}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;Fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(re(200));return iE(t,e,null,n)};Fn.createRoot=function(t,e){if(!Af(t))throw Error(re(299));var n=!1,i="",o=f2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=_f(t,1,!1,null,null,n,!1,i,o),t[Br]=e.current,ha(t.nodeType===8?t.parentNode:t),new Cf(e)};Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t){return Ki(t)};Fn.hydrate=function(t,e,n){if(!Dc(e))throw Error(re(200));return Mc(null,t,e,!0,n)};Fn.hydrateRoot=function(t,e,n){if(!Af(t))throw Error(re(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=f2;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=d2(e,null,t,1,n??null,o,!1,l,f),t[Br]=e.current,ha(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Pc(e)};Fn.render=function(t,e,n){if(!Dc(e))throw Error(re(200));return Mc(null,t,e,!1,n)};Fn.unmountComponentAtNode=function(t){if(!Dc(t))throw Error(re(40));return t._reactRootContainer?(Ki(function(){Mc(null,null,t,!1,function(){t._reactRootContainer=null,t[Br]=null})}),!0):!1};Fn.unstable_batchedUpdates=wf;Fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Dc(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Mc(t,e,n,!1,i)};Fn.version="18.3.1-next-f1338f8080-20240426";function h2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h2)}catch(t){console.error(t)}}h2(),hp.exports=Fn;var cE=hp.exports,g2,X1=cE;g2=X1.createRoot,X1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_a.apply(this,arguments)}var oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oi||(oi={}));const q1="popstate";function uE(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:g}=i.location;return a0("",{pathname:l,search:f,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:dc(o)}return fE(e,n,null,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dE(){return Math.random().toString(36).substr(2,8)}function Y1(t,e){return{usr:t.state,key:t.key,idx:e}}function a0(t,e,n,i){return n===void 0&&(n=null),_a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lo(e):e,{state:n,key:e&&e.key||i||dE()})}function dc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function lo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function fE(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,g=oi.Pop,m=null,x=v();x==null&&(x=0,f.replaceState(_a({},f.state,{idx:x}),""));function v(){return(f.state||{idx:null}).idx}function _(){g=oi.Pop;let H=v(),P=H==null?null:H-x;x=H,m&&m({action:g,location:M.location,delta:P})}function S(H,P){g=oi.Push;let I=a0(M.location,H,P);x=v()+1;let N=Y1(I,x),F=M.createHref(I);try{f.pushState(N,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(F)}l&&m&&m({action:g,location:M.location,delta:1})}function T(H,P){g=oi.Replace;let I=a0(M.location,H,P);x=v();let N=Y1(I,x),F=M.createHref(I);f.replaceState(N,"",F),l&&m&&m({action:g,location:M.location,delta:0})}function L(H){let P=o.location.origin!=="null"?o.location.origin:o.location.href,I=typeof H=="string"?H:dc(H);return I=I.replace(/ $/,"%20"),Rt(P,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,P)}let M={get action(){return g},get location(){return t(o,f)},listen(H){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(q1,_),m=H,()=>{o.removeEventListener(q1,_),m=null}},createHref(H){return e(o,H)},createURL:L,encodeLocation(H){let P=L(H);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:S,replace:T,go(H){return f.go(H)}};return M}var K1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(K1||(K1={}));function hE(t,e,n){return n===void 0&&(n="/"),gE(t,e,n,!1)}function gE(t,e,n,i){let o=typeof e=="string"?lo(e):e,l=Sf(o.pathname||"/",n);if(l==null)return null;let f=m2(t);pE(f);let g=null;for(let m=0;g==null&&m<f.length;++m){let x=SE(l);g=CE(f[m],x,i)}return g}function m2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,g)=>{let m={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};m.relativePath.startsWith("/")&&(Rt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let x=mi([i,m.relativePath]),v=n.concat(m);l.children&&l.children.length>0&&(Rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),m2(l.children,e,v,x)),!(l.path==null&&!l.index)&&e.push({path:x,score:_E(x,l.index),routesMeta:v})};return t.forEach((l,f)=>{var g;if(l.path===""||!((g=l.path)!=null&&g.includes("?")))o(l,f);else for(let m of x2(l.path))o(l,f,m)}),e}function x2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=x2(i.join("/")),g=[];return g.push(...f.map(m=>m===""?l:[l,m].join("/"))),o&&g.push(...f),g.map(m=>t.startsWith("/")&&m===""?"/":m)}function pE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const mE=/^:[\w-]+$/,xE=3,wE=2,yE=1,vE=10,EE=-2,Z1=t=>t==="*";function _E(t,e){let n=t.split("/"),i=n.length;return n.some(Z1)&&(i+=EE),e&&(i+=wE),n.filter(o=>!Z1(o)).reduce((o,l)=>o+(mE.test(l)?xE:l===""?yE:vE),i)}function bE(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function CE(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let g=0;g<i.length;++g){let m=i[g],x=g===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",_=Q1({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},v),S=m.route;if(!_&&x&&n&&!i[i.length-1].route.index&&(_=Q1({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),f.push({params:o,pathname:mi([l,_.pathname]),pathnameBase:kE(mi([l,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(l=mi([l,_.pathnameBase]))}return f}function Q1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=AE(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((x,v,_)=>{let{paramName:S,isOptional:T}=v;if(S==="*"){let M=g[_]||"";f=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const L=g[_];return T&&!L?x[S]=void 0:x[S]=(L||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:f,pattern:t}}function AE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),p2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,m)=>(i.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function SE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return p2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function TE(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?lo(t):t;return{pathname:n?n.startsWith("/")?n:IE(n,e):e,search:OE(i),hash:RE(o)}}function IE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Zu(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w2(t,e){let n=NE(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function y2(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=lo(t):(o=_a({},t),Rt(!o.pathname||!o.pathname.includes("?"),Zu("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),Zu("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),Zu("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,g;if(f==null)g=n;else{let _=e.length-1;if(!i&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),_-=1;o.pathname=S.join("/")}g=_>=0?e[_]:"/"}let m=TE(o,g),x=f&&f!=="/"&&f.endsWith("/"),v=(l||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(x||v)&&(m.pathname+="/"),m}const mi=t=>t.join("/").replace(/\/\/+/g,"/"),kE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const v2=["post","put","patch","delete"];new Set(v2);const DE=["get",...v2];new Set(DE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ba.apply(this,arguments)}const Tf=X.createContext(null),ME=X.createContext(null),Ji=X.createContext(null),Lc=X.createContext(null),es=X.createContext({outlet:null,matches:[],isDataRoute:!1}),E2=X.createContext(null);function LE(t,e){let{relative:n}=e===void 0?{}:e;Ra()||Rt(!1);let{basename:i,navigator:o}=X.useContext(Ji),{hash:l,pathname:f,search:g}=b2(t,{relative:n}),m=f;return i!=="/"&&(m=f==="/"?i:mi([i,f])),o.createHref({pathname:m,search:g,hash:l})}function Ra(){return X.useContext(Lc)!=null}function Pa(){return Ra()||Rt(!1),X.useContext(Lc).location}function _2(t){X.useContext(Ji).static||X.useLayoutEffect(t)}function BE(){let{isDataRoute:t}=X.useContext(es);return t?KE():jE()}function jE(){Ra()||Rt(!1);let t=X.useContext(Tf),{basename:e,future:n,navigator:i}=X.useContext(Ji),{matches:o}=X.useContext(es),{pathname:l}=Pa(),f=JSON.stringify(w2(o,n.v7_relativeSplatPath)),g=X.useRef(!1);return _2(()=>{g.current=!0}),X.useCallback(function(x,v){if(v===void 0&&(v={}),!g.current)return;if(typeof x=="number"){i.go(x);return}let _=y2(x,JSON.parse(f),l,v.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:mi([e,_.pathname])),(v.replace?i.replace:i.push)(_,v.state,v)},[e,i,f,l,t])}function b2(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=X.useContext(Ji),{matches:o}=X.useContext(es),{pathname:l}=Pa(),f=JSON.stringify(w2(o,i.v7_relativeSplatPath));return X.useMemo(()=>y2(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function FE(t,e){return UE(t,e)}function UE(t,e,n,i){Ra()||Rt(!1);let{navigator:o}=X.useContext(Ji),{matches:l}=X.useContext(es),f=l[l.length-1],g=f?f.params:{};f&&f.pathname;let m=f?f.pathnameBase:"/";f&&f.route;let x=Pa(),v;if(e){var _;let H=typeof e=="string"?lo(e):e;m==="/"||(_=H.pathname)!=null&&_.startsWith(m)||Rt(!1),v=H}else v=x;let S=v.pathname||"/",T=S;if(m!=="/"){let H=m.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(H.length).join("/")}let L=hE(t,{pathname:T}),M=WE(L&&L.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:mi([m,o.encodeLocation?o.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?m:mi([m,o.encodeLocation?o.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),l,n,i);return e&&M?X.createElement(Lc.Provider,{value:{location:ba({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:oi.Pop}},M):M}function $E(){let t=YE(),e=PE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:o},n):null,null)}const zE=X.createElement($E,null);class VE extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?X.createElement(es.Provider,{value:this.props.routeContext},X.createElement(E2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HE(t){let{routeContext:e,match:n,children:i}=t,o=X.useContext(Tf);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(es.Provider,{value:e},i)}function WE(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,g=(o=n)==null?void 0:o.errors;if(g!=null){let v=f.findIndex(_=>_.route.id&&(g==null?void 0:g[_.route.id])!==void 0);v>=0||Rt(!1),f=f.slice(0,Math.min(f.length,v+1))}let m=!1,x=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<f.length;v++){let _=f[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(x=v),_.route.id){let{loaderData:S,errors:T}=n,L=_.route.loader&&S[_.route.id]===void 0&&(!T||T[_.route.id]===void 0);if(_.route.lazy||L){m=!0,x>=0?f=f.slice(0,x+1):f=[f[0]];break}}}return f.reduceRight((v,_,S)=>{let T,L=!1,M=null,H=null;n&&(T=g&&_.route.id?g[_.route.id]:void 0,M=_.route.errorElement||zE,m&&(x<0&&S===0?(L=!0,H=null):x===S&&(L=!0,H=_.route.hydrateFallbackElement||null)));let P=e.concat(f.slice(0,S+1)),I=()=>{let N;return T?N=M:L?N=H:_.route.Component?N=X.createElement(_.route.Component,null):_.route.element?N=_.route.element:N=v,X.createElement(HE,{match:_,routeContext:{outlet:v,matches:P,isDataRoute:n!=null},children:N})};return n&&(_.route.ErrorBoundary||_.route.errorElement||S===0)?X.createElement(VE,{location:n.location,revalidation:n.revalidation,component:M,error:T,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}var C2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(C2||{}),fc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fc||{});function GE(t){let e=X.useContext(Tf);return e||Rt(!1),e}function XE(t){let e=X.useContext(ME);return e||Rt(!1),e}function qE(t){let e=X.useContext(es);return e||Rt(!1),e}function A2(t){let e=qE(),n=e.matches[e.matches.length-1];return n.route.id||Rt(!1),n.route.id}function YE(){var t;let e=X.useContext(E2),n=XE(fc.UseRouteError),i=A2(fc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function KE(){let{router:t}=GE(C2.UseNavigateStable),e=A2(fc.UseNavigateStable),n=X.useRef(!1);return _2(()=>{n.current=!0}),X.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,ba({fromRouteId:e},l)))},[t,e])}function ZE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zo(t){Rt(!1)}function QE(t){let{basename:e="/",children:n=null,location:i,navigationType:o=oi.Pop,navigator:l,static:f=!1,future:g}=t;Ra()&&Rt(!1);let m=e.replace(/^\/*/,"/"),x=X.useMemo(()=>({basename:m,navigator:l,static:f,future:ba({v7_relativeSplatPath:!1},g)}),[m,g,l,f]);typeof i=="string"&&(i=lo(i));let{pathname:v="/",search:_="",hash:S="",state:T=null,key:L="default"}=i,M=X.useMemo(()=>{let H=Sf(v,m);return H==null?null:{location:{pathname:H,search:_,hash:S,state:T,key:L},navigationType:o}},[m,v,_,S,T,L,o]);return M==null?null:X.createElement(Ji.Provider,{value:x},X.createElement(Lc.Provider,{children:n,value:M}))}function JE(t){let{children:e,location:n}=t;return FE(l0(e),n)}new Promise(()=>{});function l0(t,e){e===void 0&&(e=[]);let n=[];return X.Children.forEach(t,(i,o)=>{if(!X.isValidElement(i))return;let l=[...e,o];if(i.type===X.Fragment){n.push.apply(n,l0(i.props.children,l));return}i.type!==zo&&Rt(!1),!i.props.index||!i.props.children||Rt(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=l0(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c0(){return c0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c0.apply(this,arguments)}function e3(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function t3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n3(t,e){return t.button===0&&(!e||e==="_self")&&!t3(t)}const r3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i3="6";try{window.__reactRouterVersion=i3}catch{}const s3="startTransition",J1=Qw[s3];function o3(t){let{basename:e,children:n,future:i,window:o}=t,l=X.useRef();l.current==null&&(l.current=uE({window:o,v5Compat:!0}));let f=l.current,[g,m]=X.useState({action:f.action,location:f.location}),{v7_startTransition:x}=i||{},v=X.useCallback(_=>{x&&J1?J1(()=>m(_)):m(_)},[m,x]);return X.useLayoutEffect(()=>f.listen(v),[f,v]),X.useEffect(()=>ZE(i),[i]),X.createElement(QE,{basename:e,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const a3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S2=X.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:g,target:m,to:x,preventScrollReset:v,viewTransition:_}=e,S=e3(e,r3),{basename:T}=X.useContext(Ji),L,M=!1;if(typeof x=="string"&&l3.test(x)&&(L=x,a3))try{let N=new URL(window.location.href),F=x.startsWith("//")?new URL(N.protocol+x):new URL(x),$=Sf(F.pathname,T);F.origin===N.origin&&$!=null?x=$+F.search+F.hash:M=!0}catch{}let H=LE(x,{relative:o}),P=c3(x,{replace:f,state:g,target:m,preventScrollReset:v,relative:o,viewTransition:_});function I(N){i&&i(N),N.defaultPrevented||P(N)}return X.createElement("a",c0({},S,{href:L||H,onClick:M||l?i:I,ref:n,target:m}))});var eg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eg||(eg={}));var tg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tg||(tg={}));function c3(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:g}=e===void 0?{}:e,m=BE(),x=Pa(),v=b2(t,{relative:f});return X.useCallback(_=>{if(n3(_,n)){_.preventDefault();let S=i!==void 0?i:dc(x)===dc(v);m(t,{replace:S,state:o,preventScrollReset:l,relative:f,viewTransition:g})}},[x,m,v,i,o,n,t,l,f,g])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(t,e)=>{const n=X.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:g="",children:m,...x},v)=>X.createElement("svg",{ref:v,...u3,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:["lucide",`lucide-${d3(t)}`,g].join(" "),...x},[...e.map(([_,S])=>X.createElement(_,S)),...Array.isArray(m)?m:[m]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=De("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=De("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=De("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=De("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=De("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=De("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=De("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=De("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=De("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=De("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=De("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=De("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=De("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=De("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=De("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=De("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=De("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=De("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),T3="modulepreload",I3=function(t,e){return new URL(t,e).href},cg={},Zs=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){const f=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),m=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=Promise.allSettled(n.map(x=>{if(x=I3(x,i),x in cg)return;cg[x]=!0;const v=x.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(!!i)for(let L=f.length-1;L>=0;L--){const M=f[L];if(M.href===x&&(!v||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${_}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":T3,v||(T.as="script"),T.crossOrigin="",T.href=x,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((L,M)=>{T.addEventListener("load",L),T.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&l(g.reason);return e().catch(l)})},N3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Rf extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class k3 extends Rf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class O3 extends Rf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R3 extends Rf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var f0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(f0||(f0={}));var P3=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};class D3{constructor(e,{headers:n={},customFetch:i,region:o=f0.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=N3(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return P3(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:f}=n;let g={},{region:m}=n;m||(m=this.region),m&&m!=="any"&&(g["x-region"]=m);let x;f&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(g["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(g["Content-Type"]="application/json",x=JSON.stringify(f)));const v=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:x}).catch(L=>{throw new k3(L)}),_=v.headers.get("x-relay-error");if(_&&_==="true")throw new O3(v);if(!v.ok)throw new R3(v);let S=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return S==="application/json"?T=yield v.json():S==="application/octet-stream"?T=yield v.blob():S==="text/event-stream"?T=v:S==="multipart/form-data"?T=yield v.formData():T=yield v.text(),{data:T,error:null}}catch(o){return{data:null,error:o}}})}}var bn={},Pf={},Bc={},Da={},jc={},Fc={},M3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qs=M3();const L3=Qs.fetch,L2=Qs.fetch.bind(Qs),B2=Qs.Headers,B3=Qs.Request,j3=Qs.Response,co=Object.freeze(Object.defineProperty({__proto__:null,Headers:B2,Request:B3,Response:j3,default:L2,fetch:L3},Symbol.toStringTag,{value:"Module"})),F3=Lw(co);var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});let U3=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Uc.default=U3;var j2=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fc,"__esModule",{value:!0});const $3=j2(F3),z3=j2(Uc);let V3=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=$3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var f,g,m;let x=null,v=null,_=null,S=l.status,T=l.statusText;if(l.ok){if(this.method!=="HEAD"){const P=await l.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=P:v=JSON.parse(P))}const M=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),H=(g=l.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");M&&H&&H.length>1&&(_=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(x={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,_=null,S=406,T="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const M=await l.text();try{x=JSON.parse(M),Array.isArray(x)&&l.status===404&&(v=[],x=null,S=200,T="OK")}catch{l.status===404&&M===""?(S=204,T="No Content"):x={message:M}}if(x&&this.isMaybeSingle&&(!((m=x==null?void 0:x.details)===null||m===void 0)&&m.includes("0 rows"))&&(x=null,S=200,T="OK"),x&&this.shouldThrowOnError)throw new z3.default(x)}return{error:x,data:v,count:_,status:S,statusText:T}});return this.shouldThrowOnError||(o=o.catch(l=>{var f,g,m;return{error:{message:`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(m=l==null?void 0:l.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Fc.default=V3;var H3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jc,"__esModule",{value:!0});const W3=H3(Fc);let G3=class extends W3.default{select(e){let n=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:o,referencedTable:l=o}={}){const f=l?`${l}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"offset":`${o}.offset`,f=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(f,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:o=!1,wal:l=!1,format:f="text"}={}){var g;const m=[e?"analyze":null,n?"verbose":null,i?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${x}"; options=${m};`,f==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jc.default=G3;var X3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const q3=X3(jc);let Y3=class extends q3.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const f=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${f}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}};Da.default=Y3;var K3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bc,"__esModule",{value:!0});const Do=K3(Da);let Z3=class{constructor(e,{headers:n={},schema:i,fetch:o}){this.url=e,this.headers=n,this.schema=i,this.fetch=o}select(e,{head:n=!1,count:i}={}){const o=n?"HEAD":"GET";let l=!1;const f=(e??"*").split("").map(g=>/\s/.test(g)&&!l?"":(g==='"'&&(l=!l),g)).join("");return this.url.searchParams.set("select",f),i&&(this.headers.Prefer=`count=${i}`),new Do.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const f=e.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(f.length>0){const g=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new Do.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:o,defaultToNull:l=!0}={}){const f="POST",g=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&g.push(this.headers.Prefer),o&&g.push(`count=${o}`),l||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(e)){const m=e.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(m.length>0){const x=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new Do.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new Do.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Do.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Bc.default=Z3;var $c={},zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.version=void 0;zc.version="0.0.0-automated";Object.defineProperty($c,"__esModule",{value:!0});$c.DEFAULT_HEADERS=void 0;const Q3=zc;$c.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Q3.version}`};var F2=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pf,"__esModule",{value:!0});const J3=F2(Bc),e_=F2(Da),t_=$c;let n_=class U2{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},t_.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new J3.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new U2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:l}={}){let f;const g=new URL(`${this.url}/rpc/${e}`);let m;i||o?(f=i?"HEAD":"GET",Object.entries(n).filter(([v,_])=>_!==void 0).map(([v,_])=>[v,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([v,_])=>{g.searchParams.append(v,_)})):(f="POST",m=n);const x=Object.assign({},this.headers);return l&&(x.Prefer=`count=${l}`),new e_.default({method:f,url:g,headers:x,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}};Pf.default=n_;var uo=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const $2=uo(Pf);bn.PostgrestClient=$2.default;const z2=uo(Bc);bn.PostgrestQueryBuilder=z2.default;const V2=uo(Da);bn.PostgrestFilterBuilder=V2.default;const H2=uo(jc);bn.PostgrestTransformBuilder=H2.default;const W2=uo(Fc);bn.PostgrestBuilder=W2.default;const G2=uo(Uc);bn.PostgrestError=G2.default;var r_=bn.default={PostgrestClient:$2.default,PostgrestQueryBuilder:z2.default,PostgrestFilterBuilder:V2.default,PostgrestTransformBuilder:H2.default,PostgrestBuilder:W2.default,PostgrestError:G2.default};const{PostgrestClient:i_,PostgrestQueryBuilder:q6,PostgrestFilterBuilder:Y6,PostgrestTransformBuilder:K6,PostgrestBuilder:Z6,PostgrestError:Q6}=r_,s_="2.11.2",o_={"X-Client-Info":`realtime-js/${s_}`},a_="1.0.0",X2=1e4,l_=1e3;var Vs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vs||(Vs={}));var Rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Rn||(Rn={}));var lr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(lr||(lr={}));var h0;(function(t){t.websocket="websocket"})(h0||(h0={}));var ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ji||(ji={}));class c_{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const o=n.getUint8(1),l=n.getUint8(2);let f=this.HEADER_LENGTH+2;const g=i.decode(e.slice(f,f+o));f=f+o;const m=i.decode(e.slice(f,f+l));f=f+l;const x=JSON.parse(i.decode(e.slice(f,e.byteLength)));return{ref:null,topic:g,event:m,payload:x}}}class q2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ut||(ut={}));const ug=(t,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,f)=>(l[f]=u_(f,t,e,o),l),{})},u_=(t,e,n,i)=>{const o=e.find(g=>g.name===t),l=o==null?void 0:o.type,f=n[t];return l&&!i.includes(l)?Y2(l,f):g0(f)},Y2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return g_(e,n)}switch(t){case ut.bool:return d_(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return f_(e);case ut.json:case ut.jsonb:return h_(e);case ut.timestamp:return p_(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return g0(e);default:return g0(e)}},g0=t=>t,d_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},f_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},h_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},g_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const f=t.slice(1,n);try{l=JSON.parse("["+f+"]")}catch{l=f?f.split(","):[]}return l.map(g=>Y2(e,g))}return t},p_=t=>typeof t=="string"?t.replace(" ","T"):t,K2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Qu{constructor(e,n,i={},o=X2){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dg||(dg={}));class ta{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ta.syncState(this.state,o,l,f),this.pendingDiffs.forEach(m=>{this.state=ta.syncDiff(this.state,m,l,f)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ta.syncDiff(this.state,o,l,f),g())}),this.onJoin((o,l,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:f})}),this.onLeave((o,l,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const l=this.cloneDeep(e),f=this.transformState(n),g={},m={};return this.map(l,(x,v)=>{f[x]||(m[x]=v)}),this.map(f,(x,v)=>{const _=l[x];if(_){const S=v.map(H=>H.presence_ref),T=_.map(H=>H.presence_ref),L=v.filter(H=>T.indexOf(H.presence_ref)<0),M=_.filter(H=>S.indexOf(H.presence_ref)<0);L.length>0&&(g[x]=L),M.length>0&&(m[x]=M)}else g[x]=v}),this.syncDiff(l,{joins:g,leaves:m},i,o)}static syncDiff(e,n,i,o){const{joins:l,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(g,m)=>{var x;const v=(x=e[g])!==null&&x!==void 0?x:[];if(e[g]=this.cloneDeep(m),v.length>0){const _=e[g].map(T=>T.presence_ref),S=v.filter(T=>_.indexOf(T.presence_ref)<0);e[g].unshift(...S)}i(g,v,m)}),this.map(f,(g,m)=>{let x=e[g];if(!x)return;const v=m.map(_=>_.presence_ref);x=x.filter(_=>v.indexOf(_.presence_ref)<0),e[g]=x,o(g,x,m),x.length===0&&delete e[g]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fg||(fg={}));var hg;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(hg||(hg={}));var kr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(kr||(kr={}));class Df{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qu(this,lr.join,this.params,this.timeout),this.rejoinTimer=new q2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ta(this),this.broadcastEndpointURL=K2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:f,private:g}}=this.params;this._onError(v=>e==null?void 0:e(kr.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(kr.CLOSED));const m={},x={broadcast:l,presence:f,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(v=>v.filter))!==null&&o!==void 0?o:[],private:g};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var _;if(this.socket.setAuth(),v===void 0){e==null||e(kr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,T=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,L=[];for(let M=0;M<T;M++){const H=S[M],{filter:{event:P,schema:I,table:N,filter:F}}=H,$=v&&v[M];if($&&$.event===P&&$.schema===I&&$.table===N&&$.filter===F)L.push(Object.assign(Object.assign({},H),{id:$.id}));else{this.unsubscribe(),e==null||e(kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(kr.SUBSCRIBED);return}}).receive("error",v=>{e==null||e(kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:f}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var f,g,m;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),x.receive("ok",()=>l("ok")),x.receive("error",()=>l("error")),x.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const o=new Qu(this,lr.leave,{},e);o.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),f=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),f}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Qu(this,e,n,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,l;const f=e.toLocaleLowerCase(),{close:g,error:m,leave:x,join:v}=lr;if(i&&[g,m,x,v].indexOf(f)>=0&&i!==this._joinRef())return;let S=this._onMessage(f,n,i);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(T=>{var L,M,H;return((L=T.filter)===null||L===void 0?void 0:L.event)==="*"||((H=(M=T.filter)===null||M===void 0?void 0:M.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===f}).map(T=>T.callback(S,i)):(l=this.bindings[f])===null||l===void 0||l.filter(T=>{var L,M,H,P,I,N;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in T){const F=T.id,$=(L=T.filter)===null||L===void 0?void 0:L.event;return F&&((M=n.ids)===null||M===void 0?void 0:M.includes(F))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((H=n.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const F=(I=(P=T==null?void 0:T.filter)===null||P===void 0?void 0:P.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return F==="*"||F===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===f}).map(T=>{if(typeof S=="object"&&"ids"in S){const L=S.data,{schema:M,table:H,commit_timestamp:P,type:I,errors:N}=L;S=Object.assign(Object.assign({},{schema:M,table:H,commit_timestamp:P,eventType:I,new:{},old:{},errors:N}),this._getPayloadRecords(L))}T.callback(S,i)})}_isClosed(){return this.state===Rn.closed}_isJoined(){return this.state===Rn.joined}_isJoining(){return this.state===Rn.joining}_isLeaving(){return this.state===Rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Df.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lr.close,{},e)}_onError(e){this._on(lr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ug(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ug(e.columns,e.old_record)),n}}const m_=()=>{},x_=typeof WebSocket<"u",w_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y_{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=o_,this.params={},this.timeout=X2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=m_,this.conn=null,this.sendBuffer=[],this.serializer=new c_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let f;return l?f=l:typeof fetch>"u"?f=(...g)=>Zs(async()=>{const{default:m}=await Promise.resolve().then(()=>co);return{default:m}},void 0,import.meta.url).then(({default:m})=>m(...g)):f=fetch,(...g)=>f(...g)},this.endPoint=`${e}/${h0.websocket}`,this.httpEndpoint=K2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,f)=>f(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new q2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(x_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new v_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Zs(async()=>{const{default:e}=await import("./browser-DKtxEG08.js").then(n=>n.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a_}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Vs.connecting:return ji.Connecting;case Vs.open:return ji.Open;case Vs.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}channel(e,n={config:{}}){const i=new Df(`realtime:${e}`,n,this);return this.channels.push(i),i}push(e){const{topic:n,event:i,payload:o,ref:l}=e,f=()=>{this.encode(e,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let i=null;try{i=JSON.parse(atob(n.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(lr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(l_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:o,payload:l,ref:f}=n;f&&f===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${i} ${o} ${f&&"("+f+")"||""}`,l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,l,f)),this.stateChangeCallbacks.message.forEach(g=>g(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(lr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([w_],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class v_{constructor(e,n,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Vs.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class Mf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class E_ extends Mf{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class p0 extends Mf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var __=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};const Z2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},b_=()=>__(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zs(()=>Promise.resolve().then(()=>co),void 0,import.meta.url)).Response:Response}),m0=t=>{if(Array.isArray(t))return t.map(n=>m0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=m0(i)}),e};var ts=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};const Ju=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),C_=(t,e,n)=>ts(void 0,void 0,void 0,function*(){const i=yield b_();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{e(new E_(Ju(o),t.status||500))}).catch(o=>{e(new p0(Ju(o),o))}):e(new p0(Ju(t),t))}),A_=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),n))};function Ma(t,e,n,i,o,l){return ts(this,void 0,void 0,function*(){return new Promise((f,g)=>{t(n,A_(e,i,o,l)).then(m=>{if(!m.ok)throw m;return i!=null&&i.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>C_(m,g,i))})})}function hc(t,e,n,i){return ts(this,void 0,void 0,function*(){return Ma(t,"GET",e,n,i)})}function ei(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return Ma(t,"POST",e,i,o,n)})}function S_(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return Ma(t,"PUT",e,i,o,n)})}function T_(t,e,n,i){return ts(this,void 0,void 0,function*(){return Ma(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Q2(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return Ma(t,"DELETE",e,i,o,n)})}var En=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};const I_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class N_{constructor(e,n={},i,o){this.url=e,this.headers=n,this.bucketId=i,this.fetch=Z2(o)}uploadOrUpdate(e,n,i,o){return En(this,void 0,void 0,function*(){try{let l;const f=Object.assign(Object.assign({},gg),o);let g=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",f.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,m&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o!=null&&o.headers&&(g=Object.assign(Object.assign({},g),o.headers));const x=this._removeEmptyFolders(n),v=this._getFinalPath(x),_=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:e,body:l,headers:g},f!=null&&f.duplex?{duplex:f.duplex}:{})),S=yield _.json();return _.ok?{data:{path:x,id:S.Id,fullPath:S.Key},error:null}:{data:null,error:S}}catch(l){if(Vt(l))return{data:null,error:l};throw l}})}upload(e,n,i){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,o){return En(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),f=this._getFinalPath(l),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",n);try{let m;const x=Object.assign({upsert:gg.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",x.cacheControl)):(m=i,v["cache-control"]=`max-age=${x.cacheControl}`,v["content-type"]=x.contentType);const _=yield this.fetch(g.toString(),{method:"PUT",body:m,headers:v}),S=yield _.json();return _.ok?{data:{path:l,fullPath:S.Key},error:null}:{data:null,error:S}}catch(m){if(Vt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,n){return En(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const l=yield ei(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),f=new URL(this.url+l.url),g=f.searchParams.get("token");if(!g)throw new Mf("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:g},error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}update(e,n,i){return En(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return En(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}copy(e,n,i){return En(this,void 0,void 0,function*(){try{return{data:{path:(yield ei(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,i){return En(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield ei(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${f}`)},{data:l,error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,i){return En(this,void 0,void 0,function*(){try{const o=yield ei(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${l}`):null})),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}download(e,n){return En(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),f=l?`?${l}`:"";try{const g=this._getFinalPath(e);return{data:yield(yield hc(this.fetch,`${this.url}/${o}/${g}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(Vt(g))return{data:null,error:g};throw g}})}info(e){return En(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield hc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:m0(i),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}exists(e){return En(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield T_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Vt(i)&&i instanceof p0){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const g=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});m!==""&&o.push(m);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${x}`)}}}remove(e){return En(this,void 0,void 0,function*(){try{return{data:yield Q2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}list(e,n,i){return En(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},I_),n),{prefix:e||""});return{data:yield ei(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const k_="2.7.1",O_={"X-Client-Info":`storage-js/${k_}`};var ps=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};class R_{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},O_),n),this.fetch=Z2(i)}listBuckets(){return ps(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Vt(e))return{data:null,error:e};throw e}})}getBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ps(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ps(this,void 0,void 0,function*(){try{return{data:yield S_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield Q2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}}class P_ extends R_{constructor(e,n={},i){super(e,n,i)}from(e){return new N_(this.url,this.headers,e,this.fetch)}}const D_="2.49.8";let Ho="";typeof Deno<"u"?Ho="deno":typeof document<"u"?Ho="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ho="react-native":Ho="node";const M_={"X-Client-Info":`supabase-js-${Ho}/${D_}`},L_={headers:M_},B_={schema:"public"},j_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F_={};var U_=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};const $_=t=>{let e;return t?e=t:typeof fetch>"u"?e=L2:e=fetch,(...n)=>e(...n)},z_=()=>typeof Headers>"u"?B2:Headers,V_=(t,e,n)=>{const i=$_(n),o=z_();return(l,f)=>U_(void 0,void 0,void 0,function*(){var g;const m=(g=yield e())!==null&&g!==void 0?g:t;let x=new o(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${m}`),i(l,Object.assign(Object.assign({},f),{headers:x}))})};var H_=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};function W_(t){return t.endsWith("/")?t:t+"/"}function G_(t,e){var n,i;const{db:o,auth:l,realtime:f,global:g}=t,{db:m,auth:x,realtime:v,global:_}=e,S={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},x),l),realtime:Object.assign(Object.assign({},v),f),global:Object.assign(Object.assign(Object.assign({},_),g),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(i=g==null?void 0:g.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>H_(this,void 0,void 0,function*(){return""})};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}const J2="2.69.1",_s=30*1e3,x0=3,ed=x0*_s,X_="http://localhost:9999",q_="supabase.auth.token",Y_={"X-Client-Info":`gotrue-js/${J2}`},w0="X-Supabase-Api-Version",ex={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Z_=6e5;class Lf extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Q_ extends Lf{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function J_(t){return Re(t)&&t.name==="AuthApiError"}class tx extends Lf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ci extends Lf{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class Kr extends Ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eb(t){return Re(t)&&t.name==="AuthSessionMissingError"}class td extends Ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ml extends Ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xl extends Ci{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tb(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class pg extends Ci{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class y0 extends Ci{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function nd(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class mg extends Ci{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class na extends Ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wg=` 	
\r=`.split(""),nb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wg.length;e+=1)t[wg[e].charCodeAt(0)]=-2;for(let e=0;e<xg.length;e+=1)t[xg[e].charCodeAt(0)]=e;return t})();function nx(t,e,n){const i=nb[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function yg(t){const e=[],n=f=>{e.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=f=>{sb(f,i,n)};for(let f=0;f<t.length;f+=1)nx(t.charCodeAt(f),o,l);return e.join("")}function rb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ib(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}rb(i,e)}}function sb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ob(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)nx(t.charCodeAt(o),n,i);return new Uint8Array(e)}function ab(t){const e=[];return ib(t,n=>e.push(n)),new Uint8Array(e)}function lb(t){return Math.round(Date.now()/1e3)+t}function cb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const vr=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},ra=()=>{if(!vr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function ub(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const rx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},db=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ix=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yl=async(t,e)=>{await t.removeItem(e)};class Vc{constructor(){this.promise=new Vc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Vc.promiseConstructor=Promise;function rd(t){const e=t.split(".");if(e.length!==3)throw new na("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!K_.test(e[i]))throw new na("JWT not in base64url format");return{header:JSON.parse(yg(e[0])),payload:JSON.parse(yg(e[1])),signature:ob(e[2]),raw:{header:e[0],payload:e[1]}}}async function fb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hb(t,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const f=await t(l);if(!e(l,null,f)){i(f);return}}catch(f){if(!e(l,f)){o(f);return}}})()})}function gb(t){return("0"+t.toString(16)).substr(-2)}function pb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,gb).join("")}async function mb(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function xb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mb(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ms(t,e,n=!1){const i=pb();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await ix(t,`${e}-code-verifier`,o);const l=await xb(i);return[l,i===l?"plain":"s256"]}const wb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yb(t){const e=t.headers.get(w0);if(!e||!e.match(wb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Eb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _b=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};const Bi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bb=[502,503,504];async function vg(t){var e;if(!db(t))throw new y0(Bi(t),0);if(bb.includes(t.status))throw new y0(Bi(t),t.status);let n;try{n=await t.json()}catch(l){throw new tx(Bi(l),l)}let i;const o=yb(t);if(o&&o.getTime()>=ex["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new mg(Bi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Kr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0))throw new mg(Bi(n),t.status,n.weak_password.reasons);throw new Q_(Bi(n),t.status||500,i)}const Cb=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function $e(t,e,n,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[w0]||(l[w0]=ex["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const f=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await Ab(t,e,n+g,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function Ab(t,e,n,i,o,l){const f=Cb(e,i,o,l);let g;try{g=await t(n,Object.assign({},f))}catch(m){throw console.error(m),new y0(Bi(m),0)}if(g.ok||await vg(g),i!=null&&i.noResolveJson)return g;try{return await g.json()}catch(m){await vg(m)}}function Zr(t){var e;let n=null;Nb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=lb(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Eg(t){const e=Zr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ri(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Sb(t){return{data:t,error:null}}function Tb(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=t,f=_b(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},f);return{data:{properties:g,user:m},error:null}}function Ib(t){return t}function Nb(t){return t.access_token&&t.refresh_token&&t.expires_in}var kb=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};class Ob{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=rx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ri})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=kb(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Tb,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,l,f,g,m;try{const x={nextPage:null,lastPage:0,total:0},v=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Ib});if(v.error)throw v.error;const _=await v.json(),S=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(m=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(L=>{const M=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(L.split(";")[1].split("=")[1]);x[`${H}Page`]=M}),x.total=parseInt(S)),{data:Object.assign(Object.assign({},_),x),error:null}}catch(x){if(Re(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ri})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ri})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:n,error:i}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}}const Rb={getItem:t=>ra()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ra()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ra()&&globalThis.localStorage.removeItem(t)}};function _g(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Pb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xs={debug:!!(globalThis&&ra()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Db extends sx{}async function Mb(t,e,n){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Db(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Pb();const Lb={url:X_,storageKey:q_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bg(t,e,n){return await n()}class Ca{constructor(e){var n,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ca.nextInstanceID,Ca.nextInstanceID+=1,this.instanceID>0&&vr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Lb),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Ob({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=rx(o.fetch),this.lock=o.lock||bg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:vr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Mb:this.lock=bg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:ra()?this.storage=Rb:(this.memoryStorage={},this.storage=_g(this.memoryStorage)):(this.memoryStorage={},this.storage=_g(this.memoryStorage)),vr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${J2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ub(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),vr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),tb(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:f,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new tx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Zr}),{data:f,error:g}=l;if(g||!f)return{data:{user:null,session:null},error:g};const m=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(l){if(Re(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,i,o;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let T=null,L=null;this.flowType==="pkce"&&([T,L]=await ms(this.storage,this.storageKey)),l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:T,code_challenge_method:L},xform:Zr})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Zr})}else throw new ml("You must provide either an email or phone number and a password");const{data:f,error:g}=l;if(g||!f)return{data:{user:null,session:null},error:g};const m=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(l){if(Re(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:f,options:g}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Eg})}else if("phone"in e){const{phone:l,password:f,options:g}=e;n=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Eg})}else throw new ml("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new td}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await wl(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:f}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Zr});if(await yl(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new td}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:f})}catch(l){if(Re(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:l,nonce:f}=e,g=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zr}),{data:m,error:x}=g;return x?{data:{user:null,session:null},error:x}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new td}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:x})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,o,l,f;try{if("email"in e){const{email:g,options:m}=e;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await ms(this.storage,this.storageKey));const{error:_}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:g,options:m}=e,{data:x,error:v}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(f=m==null?void 0:m.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:v}}throw new ml("You must provide either an email or phone number.")}catch(g){if(Re(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(e){var n,i;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:g}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Zr});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,x=f.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(o){if(Re(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,i,o;try{let l=null,f=null;return this.flowType==="pkce"&&([l,f]=await ms(this.storage,this.storageKey)),await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:f}),headers:this.headers,xform:Sb})}catch(l){if(Re(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Kr;const{error:o}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:f}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:f,error:g}=await $e(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new ml("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<ed:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,x,v)=>(!f&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,x,v))})}return{data:{session:e},error:null}}const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async n=>{var i,o,l;const{data:f,error:g}=n;if(g)throw g;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kr}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:ri})})}catch(n){if(Re(n))return eb(n)&&(await this._removeSession(),await yl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Kr;const f=o.session;let g=null,m=null;this.flowType==="pkce"&&e.email!=null&&([g,m]=await ms(this.storage,this.storageKey));const{data:x,error:v}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:g,code_challenge_method:m}),jwt:f.access_token,xform:ri});if(v)throw v;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kr;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:f}=rd(e.access_token);if(f.exp&&(i=f.exp,o=i<=n),o){const{session:g,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!g)return{data:{user:null,session:null},error:null};l=g}else{const{data:g,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:g.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:f,error:g}=n;if(g)throw g;e=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Kr;const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!vr())throw new xl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pg("No code detected.");const{data:I,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:f,expires_in:g,expires_at:m,token_type:x}=e;if(!l||!g||!f||!x)throw new xl("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(g);let S=v+_;m&&(S=parseInt(m));const T=S-v;T*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const L=S-_;v-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,S,v):v-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,S,v);const{data:M,error:H}=await this._getUser(l);if(H)throw H;const P={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:S,refresh_token:f,token_type:x,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:e.type},error:null}}catch(i){if(Re(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{error:l};const f=(i=o.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:g}=await this.admin.signOut(f,e);if(g&&!(J_(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return e!=="others"&&(await this._removeSession(),await yl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=cb(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:f}=n;if(f)throw f;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ms(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Re(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var f,g,m,x,v;const{data:_,error:S}=l;if(S)throw S;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=e.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(x=_.session)===null||x===void 0?void 0:x.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return vr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Re(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:f}=n;if(f)throw f;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await hb(async o=>(o>0&&await fb(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zr})),(o,l)=>{const f=200*Math.pow(2,o);return l&&nd(l)&&Date.now()+f-i<_s})}catch(i){if(this._debug(n,"error",i),Re(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),vr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await wl(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ed;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ed}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),nd(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Vc;const{data:l,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!l.session)throw new Kr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const g={session:l.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(l){if(this._debug(o,"error",l),Re(l)){const f={session:null,error:l};return nd(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(e,n)}catch(m){l.push(m)}});if(await Promise.all(f),l.length>0){for(let g=0;g<l.length;g+=1)console.error(l[g]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ix(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await yl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${_s}ms, refresh threshold is ${x0} ticks`),o<=x0&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,f]=await ms(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(g.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:f}=n;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:x}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const{data:f,error:g}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:g})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],o=i.filter(f=>f.factor_type==="totp"&&f.status==="verified"),l=i.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=rd(o.access_token);let g=null;f.aal&&(g=f.aal);let m=g;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const v=f.amr||[];return{data:{currentLevel:g,nextLevel:m,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(f=>f.kid===e);if(i||(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+Z_>Date.now()))return i;const{data:o,error:l}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!o.keys||o.keys.length===0)throw new na("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),i=o.keys.find(f=>f.kid===e),!i)throw new na("No matching signing key found in JWKS");return i}async getClaims(e,n={keys:[]}){try{let i=e;if(!i){const{data:T,error:L}=await this.getSession();if(L||!T.session)return{data:null,error:L};i=T.session.access_token}const{header:o,payload:l,signature:f,raw:{header:g,payload:m}}=rd(i);if(vb(l.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:T}=await this.getUser(i);if(T)throw T;return{data:{claims:l,header:o,signature:f},error:null}}const x=Eb(o.alg),v=await this.fetchJwk(o.kid,n),_=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,_,f,ab(`${g}.${m}`)))throw new na("Invalid JWT signature");return{data:{claims:l,header:o,signature:f},error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}}Ca.nextInstanceID=0;const Bb=Ca;class jb extends Bb{constructor(e){super(e)}}var Fb=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})};class Ub{constructor(e,n,i){var o,l,f;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const g=W_(e),m=new URL(g);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const x=`sb-${m.hostname.split(".")[0]}-auth-token`,v={db:B_,realtime:F_,auth:Object.assign(Object.assign({},j_),{storageKey:x}),global:L_},_=G_(i??{},v);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(S,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=_.auth)!==null&&f!==void 0?f:{},this.headers,_.global.fetch),this.fetch=V_(n,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new i_(new URL("rest/v1",m).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new D3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new P_(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Fb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,storageKey:l,flowType:f,lock:g,debug:m},x,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,flowType:f,lock:g,debug:m,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new y_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $b=(t,e,n)=>new Ub(t,e,n),v0="https://ptbbyqiuczjtyyocjygo.supabase.co",zb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YmJ5cWl1Y3pqdHl5b2NqeWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MDU2NDUsImV4cCI6MjA2ODA4MTY0NX0.wdvVxJzYwpHTbL14GD8GVqqLgPtZmeXjA3p4AFomFnE",je=$b(v0,zb),zt={TICKETS:"tickets",SCAN_HISTORY:"scan_history",SETTINGS:"app_settings",PRINTER_SETTINGS:"printer_settings"},Ze={supabase:je,getProjectInfo:()=>{var n;return{projectId:((n=v0.split(".")[0])==null?void 0:n.split("//")[1])||"unknown",url:v0,isValid:!0}},tickets:{async getAll(){const{data:t,error:e}=await je.from(zt.TICKETS).select("*");if(e)throw e;return t||[]},async getByQrCode(t){const e=t.trim(),{data:n,error:i}=await je.from(zt.TICKETS).select("*").or(`qrCode.eq.${e},qrCode.eq.${e}
`).maybeSingle();if(i)throw i;return n},async create(t){const{data:e,error:n}=await je.from(zt.TICKETS).insert(t).select().single();if(n)throw n;return e},async update(t,e){const{data:n,error:i}=await je.from(zt.TICKETS).update(e).eq("qrCode",t).select().single();if(i)throw i;return n},async delete(t){const{error:e}=await je.from(zt.TICKETS).delete().eq("qrCode",t);if(e)throw e},async importBulk(t){const{data:e,error:n}=await je.from(zt.TICKETS).upsert(t,{onConflict:"qrCode",ignoreDuplicates:!1});if(n)throw n;return{success:!0,count:t.length}},async count(){const{count:t,error:e}=await je.from(zt.TICKETS).select("*",{count:"exact",head:!0});if(e)throw e;return t||0},async clearAll(){const{error:t}=await je.from(zt.TICKETS).delete().neq("qrCode","impossible_value");if(t)throw t}},scans:{async getAll(){const{data:t,error:e}=await je.from(zt.SCAN_HISTORY).select("*").order("timestamp",{ascending:!1});if(e)throw e;return t||[]},async record(t){const{qrCode:e,timestamp:n,success:i,message:o}=t,l={qrCode:e,timestamp:n,success:i,message:o},{data:f,error:g}=await je.from(zt.SCAN_HISTORY).insert(l).select().single();if(g)throw g;return f},async clearAll(){const{error:t}=await je.from(zt.SCAN_HISTORY).delete().neq("id",-1);if(t)throw t}},settings:{async getSettings(){const{data:t,error:e}=await je.from(zt.SETTINGS).select("*").maybeSingle();if(e){if(e.message.includes("does not exist"))return await this.createSettingsTable(),null;throw e}return t},async createSettingsTable(){const{error:t}=await je.rpc("create_settings_table");if(t)throw t;await this.getSettings()||await this.saveSettings({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:"1234567890128",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},async saveSettings(t){t.updatedAt=new Date().toISOString();const{data:e,error:n}=await je.from(zt.SETTINGS).upsert(t,{onConflict:"id"}).select().single();if(n)throw n;return e},async uploadLogo(t){var f,g,m;try{const{data:x,error:v}=await je.storage.listBuckets();if(v)throw new Error(`Failed to check storage buckets: ${v.message}`);const _=x==null?void 0:x.find(S=>S.name==="app-assets");if(!_)throw new Error(`BUCKET_NOT_FOUND: The "app-assets" storage bucket does not exist. Please create it manually in your Supabase dashboard:

1. Go to your Supabase project dashboard
2. Navigate to "Storage" in the sidebar
3. Click "Create new bucket"
4. Name it "app-assets"
5. Enable "Public bucket" option
6. Set MIME types to: image/png, image/jpeg, image/gif`);if(!_.public)throw new Error(`BUCKET_NOT_PUBLIC: The "app-assets" bucket exists but is not public. Please make it public in your Supabase dashboard:

1. Go to Storage > app-assets
2. Click on bucket settings
3. Enable "Public bucket" option`)}catch(x){throw x instanceof Error&&x.message.startsWith("BUCKET_")?x:new Error(`Failed to verify storage bucket: ${x.message}`)}const e=`logo-${Date.now()}`,{data:n,error:i}=await je.storage.from("app-assets").upload(`logos/${e}`,t,{cacheControl:"3600",upsert:!1});if(i)throw(f=i.message)!=null&&f.includes("Bucket not found")||(g=i.message)!=null&&g.includes("bucket does not exist")?new Error(`BUCKET_NOT_FOUND: The "app-assets" storage bucket does not exist. Please create it manually in your Supabase dashboard:

1. Go to your Supabase project dashboard
2. Navigate to "Storage" in the sidebar
3. Click "Create new bucket"
4. Name it "app-assets"
5. Enable "Public bucket" option
6. Set MIME types to: image/png, image/jpeg, image/gif`):(m=i.message)!=null&&m.includes("not allowed to perform this operation")?new Error('BUCKET_NOT_PUBLIC: The "app-assets" bucket is not accessible. Please ensure it is set to public in your Supabase dashboard.'):new Error(`Failed to upload logo: ${i.message}`);const{data:o}=je.storage.from("app-assets").getPublicUrl(n.path),l=await this.getSettings();return l?await this.saveSettings({...l,logoUrl:o.publicUrl}):await this.saveSettings({id:"settings",logoUrl:o.publicUrl,clubName:"Famous Summer Club",ean13Barcode:"1234567890123",adminPin:"123456",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o.publicUrl}},printer:{async getSettings(){const{data:t,error:e}=await je.from(zt.PRINTER_SETTINGS).select("*").eq("id","settings").maybeSingle();if(e){if(e.message.includes("does not exist"))return await this.createPrinterSettingsTable(),null;throw e}return t},async createPrinterSettingsTable(){const{error:t}=await je.rpc("create_printer_settings_table");t&&console.warn("Could not create printer_settings table automatically:",t)},async saveSettings(t){const e={...t,id:"settings",updatedAt:new Date().toISOString()},{data:n,error:i}=await je.from(zt.PRINTER_SETTINGS).upsert(e,{onConflict:"id"}).select().single();if(i)throw i;return n},async updateSelectedPrinter(t,e,n){const{error:i}=await je.from(zt.PRINTER_SETTINGS).upsert({id:"settings",selectedPrinter:t,printerName:e,printerType:n,updatedAt:new Date().toISOString()},{onConflict:"id"});if(i)throw i}},async validateTicket(t){try{const e=t.trim(),{data:n,error:i}=await je.from(zt.TICKETS).select("*").or(`qrCode.eq.${e},qrCode.eq.${e}
`).maybeSingle();if(i)throw i;if(!n)return{valid:!1,message:"Ticket not found"};if(n.entriesRemaining===0)return{valid:!1,message:"No entries remaining - access denied",ticket:n};if(n.entriesRemaining<0)return{valid:!1,message:"Invalid ticket - negative entries",ticket:n};const o={entriesRemaining:n.entriesRemaining-1,lastScanned:new Date().toISOString()},{data:l,error:f}=await je.from(zt.TICKETS).update(o).eq("qrCode",n.qrCode).select().single();if(f)throw f;return{valid:!0,message:`Access granted - ${l.entriesRemaining} entries remaining`,ticket:l}}catch(e){throw console.error("Error validating ticket:",e),new Error(`Could not validate ticket: ${e.message}`)}}};Promise.allSettled||(Promise.allSettled=function(t){return Promise.all(t.map(e=>e.then(n=>({status:"fulfilled",value:n})).catch(n=>({status:"rejected",reason:n}))))});String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return t instanceof RegExp?this.replace(new RegExp(t.source,t.flags+(t.global?"":"g")),e):this.split(t).join(e)});Array.prototype.at||(Array.prototype.at=function(t){const e=this.length,n=Math.trunc(t)||0,i=n<0?e+n:n;return i>=0&&i<e?this[i]:void 0});const ox=()=>{var e;const t=navigator.userAgent.toLowerCase();return t.includes("wv")||t.includes("webview")||t.includes("android")&&!t.includes("chrome")||window.AndroidInterface!==void 0||((e=window.webkit)==null?void 0:e.messageHandlers)!==void 0},Fi=()=>ox()?!("IntersectionObserver"in window&&"ResizeObserver"in window&&"fetch"in window&&"Promise"in window&&"Map"in window&&"Set"in window):!1,Vb=()=>{const t=navigator.userAgent,e=t.match(/Chrome\/(\d+)/),n=t.match(/wv\) AppleWebKit\/[\d.]+ \(KHTML, like Gecko\) Version\/[\d.]+ Chrome\/(\d+)/);let i="unknown",o=!0;return e?(i=e[1],o=parseInt(i)<70):n&&(i=n[1],o=parseInt(i)<70),{version:i,isOld:o}},ce={log:(...t)=>{var e;try{console.log(...t),(e=window.AndroidInterface)!=null&&e.log&&window.AndroidInterface.log(JSON.stringify(t))}catch{try{console.log("Log:",JSON.stringify(t))}catch{}}},error:(...t)=>{var e;try{console.error(...t),(e=window.AndroidInterface)!=null&&e.error&&window.AndroidInterface.error(JSON.stringify(t))}catch{try{console.log("Error:",JSON.stringify(t))}catch{}}},warn:(...t)=>{var e;try{console.warn(...t),(e=window.AndroidInterface)!=null&&e.warn&&window.AndroidInterface.warn(JSON.stringify(t))}catch{try{console.log("Warning:",JSON.stringify(t))}catch{}}}},Hb=()=>{ce.log("Initializing WebView compatibility...");const t=Vb();if(ce.log("WebView info:",t),ox()&&(document.body.classList.add("webview"),Fi()&&document.body.classList.add("basic-webview")),t.isOld){const e=document.createElement("style");e.textContent=`
      .basic-webview * {
        animation-duration: 0s !important;
        animation-delay: 0s !important;
        transition-duration: 0s !important;
        transition-delay: 0s !important;
      }
      .basic-webview .animate-spin {
        animation: none !important;
      }
      .basic-webview .animate-pulse {
        animation: none !important;
      }
    `,document.head.appendChild(e)}window.addEventListener("error",e=>{ce.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{ce.error("Unhandled promise rejection:",e.reason)}),ce.log("WebView compatibility initialized")},Ms={async checkConnection(){try{ce.log("WebView checking connection...");const t=await Ze.tickets.count();return ce.log("WebView connection check successful, ticket count:",t),!0}catch(t){return ce.error("WebView connection check failed:",t),!1}},async recordScan(t,e,n){try{ce.log("WebView recording scan:",{qrCode:t,success:e,message:n});const i={qrCode:t,timestamp:new Date().toISOString(),success:e,message:n};let o;for(let l=0;l<3;l++)try{await Ze.scans.record(i),ce.log("WebView scan recorded successfully");return}catch(f){o=f,ce.warn(`WebView scan recording attempt ${l+1} failed:`,f),l<2&&await new Promise(g=>setTimeout(g,1e3*(l+1)))}throw o}catch(i){throw ce.error("WebView scan recording failed:",i),i}},async getTicketCount(){try{ce.log("WebView getting ticket count...");const t=await Ze.tickets.count();return ce.log("WebView ticket count:",t),t}catch(t){return ce.error("WebView ticket count failed:",t),0}},async importTickets(t){try{if(ce.log("WebView importing tickets:",t.length),Fi()&&t.length>50){ce.log("Basic WebView detected, using batch import");let e=0;const n=25;for(let i=0;i<t.length;i+=n){const o=t.slice(i,i+n);ce.log(`Importing batch ${Math.floor(i/n)+1}/${Math.ceil(t.length/n)}`);try{const l=await Ze.tickets.importBulk(o);e+=l.count}catch(l){ce.error("Batch import failed:",l)}await new Promise(l=>setTimeout(l,500))}return{success:e>0,count:e}}else{const e=await Ze.tickets.importBulk(t);return ce.log("WebView tickets imported successfully"),e}}catch(e){throw ce.error("WebView ticket import failed:",e),e}}},ax=X.createContext(void 0),Wb=({children:t})=>{const[e,n]=X.useState(!1),[i,o]=X.useState(null),[l,f]=X.useState([]),[g,m]=X.useState(0),[x,v]=X.useState(!0),[_,S]=X.useState("checking"),[T,L]=X.useState(null),[M,H]=X.useState(null);X.useEffect(()=>{P();const z=setInterval(P,3e4);return()=>{clearInterval(z)}},[]),X.useEffect(()=>{_==="connected"&&I()},[_]),X.useEffect(()=>{const z=(M==null?void 0:M.clubName)||"Famous Summer Club";document.title=`${z} Scan`},[M]);const P=async()=>{v(!0),S("checking"),ce.log("AppContext: Checking backend connection..."),Ze.getProjectInfo();try{if(await Ms.checkConnection()){const B=await Ms.getTicketCount();m(B),S("connected"),ce.log("AppContext: Backend connected, ticket count:",B)}else ce.error("AppContext: Backend not available"),S("disconnected"),m(0)}catch(z){ce.error("AppContext: Error checking backend:",z),S("disconnected"),m(0)}finally{v(!1)}},I=async()=>{if(_==="connected")try{ce.log("AppContext: Refreshing app settings..."),H(null);const z=await Ze.settings.getSettings();H(z||{id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:1234567890128,ticketPrice:50,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),ce.log("AppContext: App settings loaded")}catch(z){ce.error("AppContext: Error loading app settings:",z),H({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:"1234567890128",ticketPrice:50,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}},N=async()=>{v(!0),ce.log("AppContext: Refreshing ticket count...");try{if(await Ms.checkConnection()){const B=await Ms.getTicketCount();m(B),S("connected"),ce.log("AppContext: Ticket count refreshed:",B)}else ce.error("AppContext: Backend not available during refresh"),S("disconnected"),m(0)}catch(z){ce.error("AppContext: Error refreshing ticket count:",z),S("disconnected"),m(0)}finally{v(!1)}},F=z=>{f(B=>[z,...B].slice(0,10))},$=()=>{f([])};return y.jsx(ax.Provider,{value:{isScanning:e,setIsScanning:n,lastScanResult:i,setLastScanResult:o,recentScans:l,addScan:F,clearRecentScans:$,ticketsCount:g,refreshTicketsCount:N,isLoading:x,backendStatus:_,flashColor:T,setFlashColor:L,appSettings:M,setAppSettings:H,refreshAppSettings:I},children:t})},$n=()=>{const t=X.useContext(ax);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},Gb=()=>{Pa();const{ticketsCount:t,backendStatus:e,appSettings:n}=$n(),[i,o]=X.useState(0),[l,f]=X.useState(0),[g,m]=X.useState(!1),x=(n==null?void 0:n.clubName)||"Famous Summer Club";Ze.getProjectInfo(),X.useEffect(()=>{console.log("Header: appSettings:",n),console.log("Header: logoUrl:",n==null?void 0:n.logoUrl),m(!1)},[n]);const v=()=>{const T=Date.now();T-l>2e3?o(1):o(L=>L+1),f(T),i+1>=6&&(o(0),window.location.href="/settings")},_=()=>{console.error("Header: Logo failed to load:",n==null?void 0:n.logoUrl),m(!0)},S=()=>{console.log("Header: Logo loaded successfully:",n==null?void 0:n.logoUrl),m(!1)};return y.jsx("header",{className:"glass-card border-b border-mauve-500/20 shadow-mauve-glow",children:y.jsx("div",{className:"container mx-auto px-4 py-4",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("button",{onClick:v,className:"flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity",children:[n!=null&&n.logoUrl&&!g?y.jsx("div",{className:"glass rounded-lg p-2 hover:glass-hover",children:y.jsx("img",{src:n.logoUrl,alt:`${x} Logo`,className:"h-10 w-auto rounded",onError:_,onLoad:S,style:{maxWidth:"200px"}})}):y.jsx("div",{className:"glass rounded-lg p-2 hover:glass-hover",children:y.jsx(w3,{className:"h-9 w-9 text-mauve-500"})}),y.jsxs("span",{className:"text-xl font-bold text-white hidden sm:block",children:[x," Scan"]})]}),!1,y.jsx("div",{className:"flex items-center space-x-4",children:e!=="checking"&&y.jsx("div",{className:"btn-square glass border border-mauve-500/30",children:e==="connected"?y.jsx(I2,{className:"h-5 w-5 text-green-400",title:"Connected to your Supabase database"}):y.jsx(T2,{className:"h-5 w-5 text-red-400",title:"Not Connected to Supabase"})})})]})})})},vl=({children:t})=>{const{appSettings:e,flashColor:n}=$n(),i=(e==null?void 0:e.clubName)||"Famous Summer Club";return y.jsxs("div",{className:`min-h-screen gradient-dark relative overflow-hidden ${n?`flash-${n}`:""}`,children:[y.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[y.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-mauve-900/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse"}),y.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-shadow-900/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),y.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col text-gray-100",children:[y.jsx(Gb,{}),y.jsx("main",{className:"flex-1 container mx-auto px-4 py-6",children:t}),y.jsx("footer",{className:"glass-card border-t border-mauve-500/20 py-4",children:y.jsxs("div",{className:"container mx-auto px-4 text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",i," Scan"]})})]})]})};var me;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(me||(me={}));var Cg=new Map([[me.QR_CODE,"QR_CODE"],[me.AZTEC,"AZTEC"],[me.CODABAR,"CODABAR"],[me.CODE_39,"CODE_39"],[me.CODE_93,"CODE_93"],[me.CODE_128,"CODE_128"],[me.DATA_MATRIX,"DATA_MATRIX"],[me.MAXICODE,"MAXICODE"],[me.ITF,"ITF"],[me.EAN_13,"EAN_13"],[me.EAN_8,"EAN_8"],[me.PDF_417,"PDF_417"],[me.RSS_14,"RSS_14"],[me.RSS_EXPANDED,"RSS_EXPANDED"],[me.UPC_A,"UPC_A"],[me.UPC_E,"UPC_E"],[me.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ag;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Ag||(Ag={}));function Xb(t){return Object.values(me).includes(t)}var gc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(gc||(gc={}));var qb=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[gc.SCAN_TYPE_CAMERA,gc.SCAN_TYPE_FILE],t}(),lx=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Cg.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Cg.get(e))},t}(),Sg=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),E0;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(E0||(E0={}));var Yb=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:E0.UNKWOWN_ERROR}},t}(),Kb=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Ir(t){return typeof t>"u"||t===null}var Ls=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),cx=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),g=0,m=f;g<m.length;g++){var x=m[g];if(l.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),_0={exports:{}};(function(t,e){(function(n,i){i(e)})(Gt,function(n){function i(b){return b==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,r){b.__proto__=r}||function(b,r){for(var s in r)r.hasOwnProperty(s)&&(b[s]=r[s])};function l(b,r){o(b,r);function s(){this.constructor=b}b.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(b,r){var s=Object.setPrototypeOf;s?s(b,r):b.__proto__=r}function g(b,r){r===void 0&&(r=b.constructor);var s=Error.captureStackTrace;s&&s(b,r)}var m=function(b){l(r,b);function r(s){var a=this.constructor,c=b.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),g(c),c}return r}(Error);class x extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}x.kind="Exception";class v extends x{}v.kind="ArgumentException";class _ extends x{}_.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new S(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends x{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class L{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class H extends x{}H.kind="IndexOutOfBoundsException";class P extends H{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}P.kind="ArrayIndexOutOfBoundsException";class I{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){I.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new _("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new P(s);if(a>r)throw new P(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return M.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=I.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=a(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class N{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class F{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=F.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=F.makeArray(r);M.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=~a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new _;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=a;d<=c;d++){const h=d>a?0:r&31,w=(2<<(d<c?31:s&31))-(1<<h);u[d]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new _;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const p=h>c?0:r&31,E=(2<<(h<u?31:s&31))-(1<<p)&4294967295;if((d[h]&E)!==(a?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new _("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[a+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=r[0]>>>u;for(let h=1;h<a;h++){const p=r[h];d|=p<<32-u,r[h-1]=d,d=p>>>u}r[a-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof F))return!1;const s=r;return this.size===s.size&&I.equals(this.bits,s.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new F(this.size,this.bits.slice())}}var $;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var z=$;class B extends x{static getFormatInstance(){return new B}}B.kind="FormatException";var D;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(D||(D={}));class O{constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,O.VALUE_IDENTIFIER_TO_ECI.set(r,this),O.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const p=u[d];O.VALUES_TO_ECI.set(p,this)}for(const d of c)O.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new B("incorect value");const s=O.VALUES_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}static getCharacterSetECIByName(r){const s=O.NAME_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}equals(r){if(!(r instanceof O))return!1;const s=r;return this.getName()===s.getName()}}O.VALUE_IDENTIFIER_TO_ECI=new Map,O.VALUES_TO_ECI=new Map,O.NAME_TO_ECI=new Map,O.Cp437=new O(D.Cp437,Int32Array.from([0,2]),"Cp437"),O.ISO8859_1=new O(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),O.ISO8859_2=new O(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),O.ISO8859_3=new O(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),O.ISO8859_4=new O(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),O.ISO8859_5=new O(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),O.ISO8859_6=new O(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),O.ISO8859_7=new O(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),O.ISO8859_8=new O(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),O.ISO8859_9=new O(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),O.ISO8859_10=new O(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),O.ISO8859_11=new O(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),O.ISO8859_13=new O(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),O.ISO8859_14=new O(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),O.ISO8859_15=new O(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),O.ISO8859_16=new O(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),O.SJIS=new O(D.SJIS,20,"SJIS","Shift_JIS"),O.Cp1250=new O(D.Cp1250,21,"Cp1250","windows-1250"),O.Cp1251=new O(D.Cp1251,22,"Cp1251","windows-1251"),O.Cp1252=new O(D.Cp1252,23,"Cp1252","windows-1252"),O.Cp1256=new O(D.Cp1256,24,"Cp1256","windows-1256"),O.UnicodeBigUnmarked=new O(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),O.UTF8=new O(D.UTF8,26,"UTF8","UTF-8"),O.ASCII=new O(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),O.Big5=new O(D.Big5,28,"Big5"),O.GB18030=new O(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),O.EUC_KR=new O(D.EUC_KR,30,"EUC_KR","EUC-KR");class G extends x{}G.kind="UnsupportedOperationException";class te{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!te.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof O?r:O.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(te.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(a.equals(O.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new G(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(O.UTF8)||r.equals(O.ISO8859_1)||r.equals(O.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class Z{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return te.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(z.CHARACTER_SET)!==void 0)return s.get(z.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,d=!0,h=0,p=0,w=0,E=0,C=0,A=0,R=0,j=0,U=0,V=0,Y=0;const ie=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let se=0;se<a&&(c||u||d);se++){const J=r[se]&255;d&&(h>0?J&128?h--:d=!1:J&128&&(J&64?(h++,J&32?(h++,J&16?(h++,J&8?d=!1:E++):w++):p++):d=!1)),c&&(J>127&&J<160?c=!1:J>159&&(J<192||J===215||J===247)&&Y++),u&&(C>0?J<64||J===127||J>252?u=!1:C--:J===128||J===160||J>239?u=!1:J>160&&J<224?(A++,j=0,R++,R>U&&(U=R)):J>127?(C++,R=0,j++,j>V&&(V=j)):(R=0,j=0))}return d&&h>0&&(d=!1),u&&C>0&&(u=!1),d&&(ie||p+w+E>0)?Z.UTF8:u&&(Z.ASSUME_SHIFT_JIS||U>=3||V>=3)?Z.SHIFT_JIS:c&&u?U===2&&A===2||Y*10>=a?Z.SHIFT_JIS:Z.ISO88591:c?Z.ISO88591:u?Z.SHIFT_JIS:d?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(d,h,p,w,E,C){if(d==="%%")return"%";if(s[++a]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let A=E?parseInt(E.substr(1)):void 0,R;switch(C){case"s":R=s[a];break;case"c":R=s[a][0];break;case"f":R=parseFloat(s[a]).toFixed(d);break;case"p":R=parseFloat(s[a]).toPrecision(d);break;case"e":R=parseFloat(s[a]).toExponential(d);break;case"x":R=parseInt(s[a]).toString(A||16);break;case"d":R=parseFloat(parseInt(s[a],A||10).toPrecision(d)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(A);let j=parseInt(p),U=p&&p[0]+""=="0"?"0":" ";for(;R.length<j;)R=h!==void 0?R+U:U+R;return R}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return te.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}Z.SHIFT_JIS=O.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=O.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=O.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class ae{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class ke{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new _("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new ke(a,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<a;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,a){if(r===null)throw new _("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,p=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new _("row lengths do not match");d=u,p++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+a.length)===a)w+=a.length,c[u]=!1,u++;else throw new _("illegal character encountered: "+r.substring(w));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new _("row lengths do not match");p++}const E=new ke(h,p);for(let C=0;C<u;C++)c[C]&&E.set(Math.floor(C%h),Math.floor(C/h));return E}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new _("input matrix dimensions do not match");const s=new F(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*a,p=r.getRow(u,s).getBitArray();for(let w=0;w<a;w++)c[h+w]^=p[w]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new _("Left and top must be nonnegative");if(c<1||a<1)throw new _("Height and width must be at least 1");const u=r+a,d=s+c;if(d>this.height||u>this.width)throw new _("The region must fit inside the matrix");const h=this.rowSize,p=this.bits;for(let w=s;w<d;w++){const E=w*h;for(let C=r;C<u;C++)p[E+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new F(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let d=0;d<a;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){M.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new F(r),c=new F(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,d=s,h=-1,p=-1;for(let w=0;w<s;w++)for(let E=0;E<a;E++){const C=c[w*a+E];if(C!==0){if(w<d&&(d=w),w>p&&(p=w),E*32<u){let A=0;for(;!(C<<31-A&4294967295);)A++;E*32+A<u&&(u=E*32+A)}if(E*32+31>h){let A=31;for(;!(C>>>A);)A--;E*32+A>h&&(h=E*32+A)}}}return h<u||p<d?null:Int32Array.from([u,d,h-u+1,p-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const d=s[a];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const d=s[a];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ke))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&I.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+I.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new ae;for(let u=0,d=this.height;u<d;u++){for(let h=0,p=this.width;h<p;h++)c.append(this.get(h,u)?r:s);c.append(a)}return c.toString()}clone(){return new ke(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends x{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class ze extends L{constructor(r){super(r),this.luminances=ze.EMPTY,this.buckets=new Int32Array(ze.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new F(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),d=this.buckets;for(let p=0;p<c;p++)d[(u[p]&255)>>ze.LUMINANCE_SHIFT]++;const h=ze.estimateBlackPoint(d);if(c<3)for(let p=0;p<c;p++)(u[p]&255)<h&&s.set(p);else{let p=u[0]&255,w=u[1]&255;for(let E=1;E<c-1;E++){const C=u[E+1]&255;(w*4-p-C)/2<h&&s.set(E),p=w,w=C}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new ke(s,a);this.initArrays(s);const u=this.buckets;for(let p=1;p<5;p++){const w=Math.floor(a*p/5),E=r.getRow(w,this.luminances),C=Math.floor(s*4/5);for(let A=Math.floor(s/5);A<C;A++){const R=E[A]&255;u[R>>ze.LUMINANCE_SHIFT]++}}const d=ze.estimateBlackPoint(u),h=r.getMatrix();for(let p=0;p<a;p++){const w=p*s;for(let E=0;E<s;E++)(h[w+E]&255)<d&&c.set(E,p)}return c}createBinarizer(r){return new ze(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<ze.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let E=0;E<s;E++)r[E]>u&&(c=E,u=r[E]),r[E]>a&&(a=r[E]);let d=0,h=0;for(let E=0;E<s;E++){const C=E-c,A=r[E]*C*C;A>h&&(d=E,h=A)}if(c>d){const E=c;c=d,d=E}if(d-c<=s/16)throw new K;let p=d-1,w=-1;for(let E=d-1;E>c;E--){const C=E-c,A=C*C*(d-E)*(a-r[E]);A>w&&(p=E,w=A)}return p<<ze.LUMINANCE_SHIFT}}ze.LUMINANCE_BITS=5,ze.LUMINANCE_SHIFT=8-ze.LUMINANCE_BITS,ze.LUMINANCE_BUCKETS=1<<ze.LUMINANCE_BITS,ze.EMPTY=Uint8ClampedArray.from([0]);class le extends ze{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=le.MINIMUM_DIMENSION&&a>=le.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>le.BLOCK_SIZE_POWER;s&le.BLOCK_SIZE_MASK&&u++;let d=a>>le.BLOCK_SIZE_POWER;a&le.BLOCK_SIZE_MASK&&d++;const h=le.calculateBlackPoints(c,u,d,s,a),p=new ke(s,a);le.calculateThresholdForBlock(c,u,d,s,a,h,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new le(r)}static calculateThresholdForBlock(r,s,a,c,u,d,h){const p=u-le.BLOCK_SIZE,w=c-le.BLOCK_SIZE;for(let E=0;E<a;E++){let C=E<<le.BLOCK_SIZE_POWER;C>p&&(C=p);const A=le.cap(E,2,a-3);for(let R=0;R<s;R++){let j=R<<le.BLOCK_SIZE_POWER;j>w&&(j=w);const U=le.cap(R,2,s-3);let V=0;for(let ie=-2;ie<=2;ie++){const se=d[A+ie];V+=se[U-2]+se[U-1]+se[U]+se[U+1]+se[U+2]}const Y=V/25;le.thresholdBlock(r,j,C,Y,c,h)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,d){for(let h=0,p=a*u+s;h<le.BLOCK_SIZE;h++,p+=u)for(let w=0;w<le.BLOCK_SIZE;w++)(r[p+w]&255)<=c&&d.set(s+w,a+h)}static calculateBlackPoints(r,s,a,c,u){const d=u-le.BLOCK_SIZE,h=c-le.BLOCK_SIZE,p=new Array(a);for(let w=0;w<a;w++){p[w]=new Int32Array(s);let E=w<<le.BLOCK_SIZE_POWER;E>d&&(E=d);for(let C=0;C<s;C++){let A=C<<le.BLOCK_SIZE_POWER;A>h&&(A=h);let R=0,j=255,U=0;for(let Y=0,ie=E*c+A;Y<le.BLOCK_SIZE;Y++,ie+=c){for(let se=0;se<le.BLOCK_SIZE;se++){const J=r[ie+se]&255;R+=J,J<j&&(j=J),J>U&&(U=J)}if(U-j>le.MIN_DYNAMIC_RANGE)for(Y++,ie+=c;Y<le.BLOCK_SIZE;Y++,ie+=c)for(let se=0;se<le.BLOCK_SIZE;se++)R+=r[ie+se]&255}let V=R>>le.BLOCK_SIZE_POWER*2;if(U-j<=le.MIN_DYNAMIC_RANGE&&(V=j/2,w>0&&C>0)){const Y=(p[w-1][C]+2*p[w][C-1]+p[w-1][C-1])/4;j<Y&&(V=Y)}p[w][C]=V}}return p}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class ne{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ae;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class ee extends ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new ee(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ee(this.delegate.rotateCounterClockwise45())}}class ye extends ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ye.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let p;if(r[u+3]===0)p=255;else{const E=r[u],C=r[u+1],A=r[u+2];p=306*E+601*C+117*A+512>>10}c[d]=p}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*ye.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),p=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=p,a.translate(h/2,p/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=ye.makeBufferFromCanvasImageData(s),this}invert(){return new ee(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class we{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||Gt||self||window||void 0)&&(globalThis||Gt||self||window||void 0).__awaiter||function(b,r,s,a){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(E){try{w(a.next(E))}catch(C){d(C)}}function p(E){try{w(a.throw(E))}catch(C){d(C)}}function w(E){E.done?u(E.value):c(E.value).then(h,p)}w((a=a.apply(b,r||[])).next())})};class he{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${s.length+1}`,h=a.groupId,p={deviceId:u,label:d,kind:c,groupId:h};s.push(p)}return s})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new we(s.deviceId,s.label))})}findDeviceById(r){return de(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return de(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return de(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return de(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return de(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return de(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return de(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return de(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new v(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new v(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new v("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new v("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const p=s&&h instanceof K,E=(h instanceof T||h instanceof B)&&a;if(p||E)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof T||c instanceof B,d=c instanceof K;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new ye(s),c=new le(a);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ie{constructor(r,s,a=s==null?0:8*s.length,c,u,d=M.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=M.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);M.arraycopy(s,0,a,0,s.length),M.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var ue=et,It;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(It||(It={}));var be=It;class Le{constructor(r,s,a,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class ve{constructor(r,s){if(s.length===0)throw new _;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),M.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let d=0,h=s.length;d!==h;d++){const p=s[d];a=tt.addOrSubtract(a,p)}return a}a=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)a=tt.addOrSubtract(u.multiply(r,a),s[d]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const d=s;s=a,a=d}let c=new Int32Array(a.length);const u=a.length-s.length;M.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=tt.addOrSubtract(s[d-u],a[d]);return new ve(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1),h=this.field;for(let p=0;p<a;p++){const w=s[p];for(let E=0;E<u;E++)d[p+E]=tt.addOrSubtract(d[p+E],h.multiply(w,c[E]))}return new ve(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=a.multiply(u[d],r);return new ve(a,c)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(a[h],s);return new ve(d,u)}divide(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new _("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),p=s.multiply(c.getCoefficient(c.getDegree()),d),w=r.multiplyByMonomial(h,p),E=s.buildMonomial(h,p);a=a.addOrSubtract(E),c=c.addOrSubtract(w)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class rt extends x{}rt.kind="ArithmeticException";class Ae extends tt{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new ve(this,Int32Array.from([0])),this.one=new ve(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new ve(this,a)}inverse(r){if(r===0)throw new rt;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class He extends x{}He.kind="ReedSolomonException";class Be extends x{}Be.kind="IllegalStateException";class Oe{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new ve(a,r),u=new Int32Array(s);let d=!0;for(let R=0;R<s;R++){const j=c.evaluateAt(a.exp(R+a.getGeneratorBase()));u[u.length-1-R]=j,j!==0&&(d=!1)}if(d)return;const h=new ve(a,u),p=this.runEuclideanAlgorithm(a.buildMonomial(s,1),h,s),w=p[0],E=p[1],C=this.findErrorLocations(w),A=this.findErrorMagnitudes(E,C);for(let R=0;R<C.length;R++){const j=r.length-1-a.log(C[R]);if(j<0)throw new He("Bad error location");r[j]=Ae.addOrSubtract(r[j],A[R])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const R=r;r=s,s=R}const c=this.field;let u=r,d=s,h=c.getZero(),p=c.getOne();for(;d.getDegree()>=(a/2|0);){let R=u,j=h;if(u=d,h=p,u.isZero())throw new He("r_{i-1} was zero");d=R;let U=c.getZero();const V=u.getCoefficient(u.getDegree()),Y=c.inverse(V);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ie=d.getDegree()-u.getDegree(),se=c.multiply(d.getCoefficient(d.getDegree()),Y);U=U.addOrSubtract(c.buildMonomial(ie,se)),d=d.addOrSubtract(u.multiplyByMonomial(ie,se))}if(p=U.multiply(h).addOrSubtract(j),d.getDegree()>=u.getDegree())throw new Be("Division algorithm failed to reduce polynomial?")}const w=p.getCoefficient(0);if(w===0)throw new He("sigmaTilde(0) was zero");const E=c.inverse(w),C=p.multiplyScalar(E),A=d.multiplyScalar(E);return[C,A]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==s)throw new He("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const h=u.inverse(s[d]);let p=1;for(let w=0;w<a;w++)if(d!==w){const E=u.multiply(s[w],h),C=E&1?E&-2:E|1;p=u.multiply(p,C)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(p)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var Qe;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})(Qe||(Qe={}));class ge{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=ge.convertBoolArrayToByteArray(c),d=ge.getEncodedData(c),h=new Le(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Qe.UPPER,c=Qe.UPPER,u="",d=0;for(;d<s;)if(c===Qe.BINARY){if(s-d<5)break;let h=ge.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=ge.readCode(r,d,11)+31,d+=11}for(let p=0;p<h;p++){if(s-d<8){d=s;break}const w=ge.readCode(r,d,8);u+=Z.castAsNonUtf8Char(w),d+=8}c=a}else{let h=c===Qe.DIGIT?4:5;if(s-d<h)break;let p=ge.readCode(r,d,h);d+=h;let w=ge.getCharacter(c,p);w.startsWith("CTRL_")?(a=c,c=ge.getTable(w.charAt(5)),w.charAt(6)==="L"&&(a=c)):(u+=w,c=a)}return u}static getTable(r){switch(r){case"L":return Qe.LOWER;case"P":return Qe.PUNCT;case"M":return Qe.MIXED;case"D":return Qe.DIGIT;case"B":return Qe.BINARY;case"U":default:return Qe.UPPER}}static getCharacter(r,s){switch(r){case Qe.UPPER:return ge.UPPER_TABLE[s];case Qe.LOWER:return ge.LOWER_TABLE[s];case Qe.MIXED:return ge.MIXED_TABLE[s];case Qe.PUNCT:return ge.PUNCT_TABLE[s];case Qe.DIGIT:return ge.DIGIT_TABLE[s];default:throw new Be("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Ae.AZTEC_DATA_10):(a=12,s=Ae.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new B;let d=r.length%a,h=new Int32Array(u);for(let A=0;A<u;A++,d+=a)h[A]=ge.readCode(r,d,a);try{new Oe(s).decode(h,u-c)}catch(A){throw new B(A)}let p=(1<<a)-1,w=0;for(let A=0;A<c;A++){let R=h[A];if(R===0||R===p)throw new B;(R===1||R===p-1)&&w++}let E=new Array(c*a-w),C=0;for(let A=0;A<c;A++){let R=h[A];if(R===1||R===p-1)E.fill(R>1,C,C+a-1),C+=a-1;else for(let j=a-1;j>=0;--j)E[C++]=(R&1<<j)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*N.truncDivision(N.truncDivision(c,2)-1,15),p=c/2,w=N.truncDivision(h,2);for(let E=0;E<p;E++){let C=E+N.truncDivision(E,15);u[p-E-1]=w-C-1,u[p+E]=w+C+1}}for(let h=0,p=0;h<a;h++){let w=(a-h)*4+(s?9:12),E=h*2,C=c-1-E;for(let A=0;A<w;A++){let R=A*2;for(let j=0;j<2;j++)d[p+R+j]=r.get(u[E+j],u[E+A]),d[p+2*w+R+j]=r.get(u[E+A],u[C-j]),d[p+4*w+R+j]=r.get(u[C-j],u[C-A]),d[p+6*w+R+j]=r.get(u[C-A],u[E+j])}p+=w*8}return d}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?ge.readCode(r,s,8):ge.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=ge.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}ge.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ge.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ge.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ge.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ge.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ee{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Nn{static floatToIntBits(r){return r}}Nn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof fe){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Nn.floatToIntBits(this.x)+Nn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(a>=s&&a>=c?(d=r[0],u=r[1],h=r[2]):c>=a&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const p=u;u=h,h=p}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return Ee.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class ln{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class $r extends ln{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class at{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=at.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,p=!1,w=!1,E=!1,C=!1;const A=this.width,R=this.height;for(;d;){d=!1;let j=!0;for(;(j||!p)&&s<A;)j=this.containsBlackPoint(a,c,s,!1),j?(s++,d=!0,p=!0):p||s++;if(s>=A){u=!0;break}let U=!0;for(;(U||!w)&&c<R;)U=this.containsBlackPoint(r,s,c,!0),U?(c++,d=!0,w=!0):w||c++;if(c>=R){u=!0;break}let V=!0;for(;(V||!E)&&r>=0;)V=this.containsBlackPoint(a,c,r,!1),V?(r--,d=!0,E=!0):E||r--;if(r<0){u=!0;break}let Y=!0;for(;(Y||!C)&&a>=0;)Y=this.containsBlackPoint(r,s,a,!0),Y?(a--,d=!0,C=!0):C||a--;if(a<0){u=!0;break}d&&(h=!0)}if(!u&&h){const j=s-r;let U=null;for(let se=1;U===null&&se<j;se++)U=this.getBlackPointOnSegment(r,c-se,r+se,c);if(U==null)throw new K;let V=null;for(let se=1;V===null&&se<j;se++)V=this.getBlackPointOnSegment(r,a+se,r+se,a);if(V==null)throw new K;let Y=null;for(let se=1;Y===null&&se<j;se++)Y=this.getBlackPointOnSegment(s,a+se,s-se,a);if(Y==null)throw new K;let ie=null;for(let se=1;ie===null&&se<j;se++)ie=this.getBlackPointOnSegment(s,c-se,s-se,c);if(ie==null)throw new K;return this.centerEdges(ie,U,Y,V)}else throw new K}getBlackPointOnSegment(r,s,a,c){const u=Ee.round(Ee.distance(r,s,a,c)),d=(a-r)/u,h=(c-s)/u,p=this.image;for(let w=0;w<u;w++){const E=Ee.round(r+w*d),C=Ee.round(s+w*h);if(p.get(E,C))return new fe(E,C)}return null}centerEdges(r,s,a,c){const u=r.getX(),d=r.getY(),h=s.getX(),p=s.getY(),w=a.getX(),E=a.getY(),C=c.getX(),A=c.getY(),R=at.CORR;return u<this.width/2?[new fe(C-R,A+R),new fe(h+R,p+R),new fe(w-R,E-R),new fe(u+R,d-R)]:[new fe(C+R,A+R),new fe(h+R,p-R),new fe(w-R,E+R),new fe(u-R,d-R)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,a))return!0}else for(let d=r;d<=s;d++)if(u.get(a,d))return!0;return!1}}at.INIT_SIZE=10,at.CORR=1;class pn{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),p=Math.floor(s[d+1]);if(h<-1||h>a||p<-1||p>c)throw new K;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),p===-1?(s[d+1]=0,u=!0):p===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),p=Math.floor(s[d+1]);if(h<-1||h>a||p<-1||p>c)throw new K;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),p===-1?(s[d+1]=0,u=!0):p===c&&(s[d+1]=c-1,u=!0)}}}class Ye{constructor(r,s,a,c,u,d,h,p,w){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=p,this.a33=w}static quadrilateralToQuadrilateral(r,s,a,c,u,d,h,p,w,E,C,A,R,j,U,V){const Y=Ye.quadrilateralToSquare(r,s,a,c,u,d,h,p);return Ye.squareToQuadrilateral(w,E,C,A,R,j,U,V).times(Y)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,w=this.a31,E=this.a32,C=this.a33;for(let A=0;A<s;A+=2){const R=r[A],j=r[A+1],U=u*R+p*j+C;r[A]=(a*R+d*j+w)/U,r[A+1]=(c*R+h*j+E)/U}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,w=this.a31,E=this.a32,C=this.a33,A=r.length;for(let R=0;R<A;R++){const j=r[R],U=s[R],V=u*j+p*U+C;r[R]=(a*j+d*U+w)/V,s[R]=(c*j+h*U+E)/V}}static squareToQuadrilateral(r,s,a,c,u,d,h,p){const w=r-a+u-h,E=s-c+d-p;if(w===0&&E===0)return new Ye(a-r,u-a,r,c-s,d-c,s,0,0,1);{const C=a-u,A=h-u,R=c-d,j=p-d,U=C*j-A*R,V=(w*j-A*E)/U,Y=(C*E-w*R)/U;return new Ye(a-r+V*a,h-r+Y*h,r,c-s+V*c,p-s+Y*p,s,V,Y,1)}}static quadrilateralToSquare(r,s,a,c,u,d,h,p){return Ye.squareToQuadrilateral(r,s,a,c,u,d,h,p).buildAdjoint()}buildAdjoint(){return new Ye(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Ye(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class qt extends pn{sampleGrid(r,s,a,c,u,d,h,p,w,E,C,A,R,j,U,V,Y,ie,se){const J=Ye.quadrilateralToQuadrilateral(c,u,d,h,p,w,E,C,A,R,j,U,V,Y,ie,se);return this.sampleGridWithTransform(r,s,a,J)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new K;const u=new ke(s,a),d=new Float32Array(2*s);for(let h=0;h<a;h++){const p=d.length,w=h+.5;for(let E=0;E<p;E+=2)d[E]=E/2+.5,d[E+1]=w;c.transformPoints(d),pn.checkAndNudgePoints(r,d);try{for(let E=0;E<p;E+=2)r.get(Math.floor(d[E]),Math.floor(d[E+1]))&&u.set(E/2,h)}catch{throw new K}}return u}}class Ft{static setGridSampler(r){Ft.gridSampler=r}static getInstance(){return Ft.gridSampler}}Ft.gridSampler=new qt;class Pt{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class mo{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new $r(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new K;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let d=0;d<4;d++){let h=a[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);a=(a<<3)+h}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(N.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new K}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let p=a-1;p>=0;--p)d[p]=r&15,r>>=4;try{new Oe(Ae.AZTEC_PARAM).decode(d,u)}catch{throw new K}let h=0;for(let p=0;p<c;p++)h=(h<<4)+d[p];return h}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(s,d,1,-1),A=this.getFirstDifferent(a,d,1,1),R=this.getFirstDifferent(c,d,-1,1),j=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let U=this.distancePoint(j,C)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(U<.75||U>1.25||!this.isWhiteOrBlackRectangle(C,A,R,j))break}s=C,a=A,c=R,u=j,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let h=new fe(s.getX()+.5,s.getY()-.5),p=new fe(a.getX()+.5,a.getY()+.5),w=new fe(c.getX()-.5,c.getY()+.5),E=new fe(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,p,w,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let h=new at(this.image).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{let p=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new Pt(p+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pt(p+7,w+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Pt(p-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pt(p-7,w-7),!1,-1,-1).toResultPoint()}let u=Ee.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=Ee.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let h=new at(this.image,15,u,d).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Pt(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pt(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Pt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Ee.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=Ee.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Pt(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let d=Ft.getInstance(),h=this.getDimension(),p=h/2-this.nbCenterLayers,w=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,p,p,w,p,w,w,p,w,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),d=u/a,h=r.getX(),p=r.getY(),w=d*(s.getX()-r.getX())/u,E=d*(s.getY()-r.getY())/u;for(let C=0;C<a;C++)this.image.get(Ee.round(h+C*w),Ee.round(p+C*E))&&(c|=1<<a-C-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Pt(r.getX()-u,r.getY()+u),s=new Pt(s.getX()-u,s.getY()-u),a=new Pt(a.getX()+u,a.getY()-u),c=new Pt(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,a),h!==d)?!1:(h=this.getColor(a,c),h===d)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,d=0,h=r.getX(),p=r.getY(),w=this.image.get(r.getX(),r.getY()),E=Math.ceil(a);for(let A=0;A<E;A++)h+=c,p+=u,this.image.get(Ee.round(h),Ee.round(p))!==w&&d++;let C=d/a;return C>.1&&C<.9?0:C<=.1===w?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Pt(u,d)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,w=new fe(h+c*u,p+c*d),E=new fe(h-c*u,p-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let C=new fe(h+c*u,p+c*d),A=new fe(h-c*u,p-c*d);return[w,C,E,A]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ee.round(r.getX()),a=Ee.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return Ee.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ee.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class nr{decode(r,s=null){let a=null,c=new mo(r.getBlackMatrix()),u=null,d=null;try{let E=c.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(s,u),d=new ge().decode(E)}catch(E){a=E}if(d==null)try{let E=c.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(s,u),d=new ge().decode(E)}catch(E){throw a??E}let h=new Ie(d.getText(),d.getRawBytes(),d.getNumBits(),u,ue.AZTEC,M.currentTimeMillis()),p=d.getByteSegments();p!=null&&h.putMetadata(be.BYTE_SEGMENTS,p);let w=d.getECLevel();return w!=null&&h.putMetadata(be.ERROR_CORRECTION_LEVEL,w),h}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(z.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Vn extends he{constructor(r=500){super(new nr,r)}}class lt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let p=270;h!==null&&h.get(be.ORIENTATION)===!0&&(p=p+h.get(be.ORIENTATION)%360),d.putMetadata(be.ORIENTATION,p);const w=d.getResultPoints();if(w!==null){const E=u.getHeight();for(let C=0;C<w.length;C++)w[C]=new fe(E-w[C].getY()-1,w[C].getX())}return d}else throw new K}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new F(a);const d=s&&s.get(z.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let p;d?p=c:p=15;const w=Math.trunc(c/2);for(let E=0;E<p;E++){const C=Math.trunc((E+1)/2),A=(E&1)===0,R=w+h*(A?C:-C);if(R<0||R>=c)break;try{u=r.getBlackRow(R,u)}catch{continue}for(let j=0;j<2;j++){if(j===1&&(u.reverse(),s&&s.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const U=new Map;s.forEach((V,Y)=>U.set(Y,V)),U.delete(z.NEED_RESULT_POINT_CALLBACK),s=U}try{const U=this.decodeRow(R,u,s);if(j===1){U.putMetadata(be.ORIENTATION,180);const V=U.getResultPoints();V!==null&&(V[0]=new fe(a-V[0].getX()-1,V[0].getY()),V[1]=new fe(a-V[1].getX()-1,V[1].getY()))}return U}catch{}}}throw new K}static recordPattern(r,s,a){const c=a.length;for(let w=0;w<c;w++)a[w]=0;const u=r.getSize();if(s>=u)throw new K;let d=!r.get(s),h=0,p=s;for(;p<u;){if(r.get(p)!==d)a[h]++;else{if(++h===c)break;a[h]=1,d=!d}p++}if(!(h===c||h===c-1&&p===u))throw new K}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new K;lt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;a*=h;let p=0;for(let w=0;w<c;w++){const E=r[w],C=s[w]*h,A=E>C?E-C:C-E;if(A>a)return Number.POSITIVE_INFINITY;p+=A}return p/u}}class oe extends lt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1;const p=6;for(let w=a;w<s;w++)if(r.get(w)!==h)u[c]++;else{if(c===p-1){let E=oe.MAX_AVG_VARIANCE,C=-1;for(let A=oe.CODE_START_A;A<=oe.CODE_START_C;A++){const R=lt.patternMatchVariance(u,oe.CODE_PATTERNS[A],oe.MAX_INDIVIDUAL_VARIANCE);R<E&&(E=R,C=A)}if(C>=0&&r.isRange(Math.max(0,d-(w-d)/2),d,!1))return Int32Array.from([d,w,C]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new K}static decodeCode(r,s,a){lt.recordPattern(r,a,s);let c=oe.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<oe.CODE_PATTERNS.length;d++){const h=oe.CODE_PATTERNS[d],p=this.patternMatchVariance(s,h,oe.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,u=d)}if(u>=0)return u;throw new K}decodeRow(r,s,a){const c=a&&a.get(z.ASSUME_GS1)===!0,u=oe.findStartPattern(s),d=u[2];let h=0;const p=new Uint8Array(20);p[h++]=d;let w;switch(d){case oe.CODE_START_A:w=oe.CODE_CODE_A;break;case oe.CODE_START_B:w=oe.CODE_CODE_B;break;case oe.CODE_START_C:w=oe.CODE_CODE_C;break;default:throw new B}let E=!1,C=!1,A="",R=u[0],j=u[1];const U=Int32Array.from([0,0,0,0,0,0]);let V=0,Y=0,ie=d,se=0,J=!0,Ue=!1,Ne=!1;for(;!E;){const hs=C;switch(C=!1,V=Y,Y=oe.decodeCode(s,U,j),p[h++]=Y,Y!==oe.CODE_STOP&&(J=!0),Y!==oe.CODE_STOP&&(se++,ie+=se*Y),R=j,j+=U.reduce((Dw,Mw)=>Dw+Mw,0),Y){case oe.CODE_START_A:case oe.CODE_START_B:case oe.CODE_START_C:throw new B}switch(w){case oe.CODE_CODE_A:if(Y<64)Ne===Ue?A+=String.fromCharCode(32+Y):A+=String.fromCharCode(32+Y+128),Ne=!1;else if(Y<96)Ne===Ue?A+=String.fromCharCode(Y-64):A+=String.fromCharCode(Y+64),Ne=!1;else switch(Y!==oe.CODE_STOP&&(J=!1),Y){case oe.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_A:!Ue&&Ne?(Ue=!0,Ne=!1):Ue&&Ne?(Ue=!1,Ne=!1):Ne=!0;break;case oe.CODE_SHIFT:C=!0,w=oe.CODE_CODE_B;break;case oe.CODE_CODE_B:w=oe.CODE_CODE_B;break;case oe.CODE_CODE_C:w=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_B:if(Y<96)Ne===Ue?A+=String.fromCharCode(32+Y):A+=String.fromCharCode(32+Y+128),Ne=!1;else switch(Y!==oe.CODE_STOP&&(J=!1),Y){case oe.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_B:!Ue&&Ne?(Ue=!0,Ne=!1):Ue&&Ne?(Ue=!1,Ne=!1):Ne=!0;break;case oe.CODE_SHIFT:C=!0,w=oe.CODE_CODE_A;break;case oe.CODE_CODE_A:w=oe.CODE_CODE_A;break;case oe.CODE_CODE_C:w=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_C:if(Y<100)Y<10&&(A+="0"),A+=Y;else switch(Y!==oe.CODE_STOP&&(J=!1),Y){case oe.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_CODE_A:w=oe.CODE_CODE_A;break;case oe.CODE_CODE_B:w=oe.CODE_CODE_B;break;case oe.CODE_STOP:E=!0;break}break}hs&&(w=w===oe.CODE_CODE_A?oe.CODE_CODE_B:oe.CODE_CODE_A)}const yn=j-R;if(j=s.getNextUnset(j),!s.isRange(j,Math.min(s.getSize(),j+(j-R)/2),!1))throw new K;if(ie-=se*V,ie%103!==V)throw new T;const ir=A.length;if(ir===0)throw new K;ir>0&&J&&(w===oe.CODE_CODE_C?A=A.substring(0,ir-2):A=A.substring(0,ir-1));const vn=(u[1]+u[0])/2,ot=R+yn/2,Zt=p.length,kn=new Uint8Array(Zt);for(let hs=0;hs<Zt;hs++)kn[hs]=p[hs];const fs=[new fe(vn,r),new fe(ot,r)];return new Ie(A,kn,0,fs,ue.CODE_128,new Date().getTime())}}oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],oe.MAX_AVG_VARIANCE=.25,oe.MAX_INDIVIDUAL_VARIANCE=.7,oe.CODE_SHIFT=98,oe.CODE_CODE_C=99,oe.CODE_CODE_B=100,oe.CODE_CODE_A=101,oe.CODE_FNC_1=102,oe.CODE_FNC_2=97,oe.CODE_FNC_3=96,oe.CODE_FNC_4_A=101,oe.CODE_FNC_4_B=100,oe.CODE_START_A=103,oe.CODE_START_B=104,oe.CODE_START_C=105,oe.CODE_STOP=106;class Dt extends lt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Dt.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),p,w;do{Dt.recordPattern(s,d,c);let U=Dt.toNarrowWidePattern(c);if(U<0)throw new K;p=Dt.patternToChar(U),this.decodeRowResult+=p,w=d;for(let V of c)d+=V;d=s.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let U of c)E+=U;let C=d-w-E;if(d!==h&&C*2<E)throw new K;if(this.usingCheckDigit){let U=this.decodeRowResult.length-1,V=0;for(let Y=0;Y<U;Y++)V+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Y));if(this.decodeRowResult.charAt(U)!==Dt.ALPHABET_STRING.charAt(V%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new K;let A;this.extendedMode?A=Dt.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let R=(u[1]+u[0])/2,j=w+E/2;return new Ie(A,null,0,[new fe(R,r),new fe(j,r)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,p=s.length;for(let w=c;w<a;w++)if(r.get(w)!==h)s[u]++;else{if(u===p-1){if(this.toNarrowWidePattern(s)===Dt.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((w-d)/2)),d,!1))return[d,w];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new K}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let p of r)p<u&&p>a&&(u=p);a=u,c=0;let d=0,h=0;for(let p=0;p<s;p++){let w=r[p];w>a&&(h|=1<<s-1-p,c++,d+=w)}if(c===3){for(let p=0;p<s&&c>0;p++){let w=r[p];if(w>a&&(c--,w*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Dt.CHARACTER_ENCODINGS.length;s++)if(Dt.CHARACTER_ENCODINGS[s]===r)return Dt.ALPHABET_STRING.charAt(s);if(r===Dt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new B;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new B;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new B;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new B;break}a+=h,c++}else a+=u}return a}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class it extends lt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new ae;it.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),p=null;a!=null&&(p=a.get(z.ALLOWED_LENGTHS)),p==null&&(p=it.DEFAULT_ALLOWED_LENGTHS);let w=h.length,E=!1,C=0;for(let j of p){if(w===j){E=!0;break}j>C&&(C=j)}if(!E&&w>C&&(E=!0),!E)throw new B;const A=[new fe(c[1],r),new fe(u[0],r)];return new Ie(h,null,0,A,ue.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<a;){lt.recordPattern(r,s,u);for(let w=0;w<5;w++){let E=2*w;d[w]=u[E],h[w]=u[E+1]}let p=it.decodeDigit(d);c.append(p.toString()),p=this.decodeDigit(h),c.append(p.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=it.skipWhiteSpace(r),a=it.findGuardPattern(r,s,it.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new K}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new K;return a}decodeEnd(r){r.reverse();try{let s=it.skipWhiteSpace(r),a;try{a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[0])}catch(u){u instanceof K&&(a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),d=r.getSize(),h=!1,p=0,w=s;u.fill(0);for(let E=s;E<d;E++)if(r.get(E)!==h)u[p]++;else{if(p===c-1){if(lt.patternMatchVariance(u,a,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[w,E];w+=u[0]+u[1],M.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,h=!h}throw new K}static decodeDigit(r){let s=it.MAX_AVG_VARIANCE,a=-1,c=it.PATTERNS.length;for(let u=0;u<c;u++){let d=it.PATTERNS[u],h=lt.patternMatchVariance(r,d,it.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,a=u):h===s&&(a=-1)}if(a>=0)return a%10;throw new K}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class bt extends lt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=bt.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return a}static checkChecksum(r){return bt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return bt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return bt.findGuardPattern(r,s,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let d=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let h=0,p=s,w=c.length,E=a;for(let C=s;C<d;C++)if(r.get(C)!==E)u[h]++;else{if(h===w-1){if(lt.patternMatchVariance(u,c,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return Int32Array.from([p,C]);p+=u[0]+u[1];let A=u.slice(2,u.length-1);for(let R=0;R<h-1;R++)u[R]=A[R];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,E=!E}throw new K}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let p=0;p<h;p++){let w=c[p],E=lt.patternMatchVariance(s,w,bt.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,d=p)}if(d>=0)return d;throw new K}}bt.MAX_AVG_VARIANCE=.48,bt.MAX_INDIVIDUAL_VARIANCE=.7,bt.START_END_PATTERN=Int32Array.from([1,1,1]),bt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),bt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),bt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=xo.parseExtensionString(d),p=[new fe((a[0]+a[1])/2,r),new fe(u,r)],w=new Ie(d,null,0,p,ue.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<5&&d<u;w++){let E=bt.decodeDigit(r,c,d,bt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<4-w),w!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==5)throw new K;let p=this.determineCheckDigit(h);if(xo.extensionChecksum(a.toString())!==p)throw new K;return d}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new K}static parseExtensionString(r){if(r.length!==5)return null;let s=xo.parseExtension5String(r);return s==null?null:new Map([[be.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class ou{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=ou.parseExtensionString(d),p=[new fe((a[0]+a[1])/2,r),new fe(u,r)],w=new Ie(d,null,0,p,ue.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&w.putAllMetadata(h),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let p=0;p<2&&d<u;p++){let w=bt.decodeDigit(r,c,d,bt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+w%10);for(let E of c)d+=E;w>=10&&(h|=1<<1-p),p!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==2)throw new K;if(parseInt(a.toString())%4!==h)throw new K;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[be.ISSUE_NUMBER,parseInt(r)]])}}class _h{static decodeRow(r,s,a){let c=bt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new xo().decodeRow(r,s,c)}catch{return new ou().decodeRow(r,s,c)}}}_h.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Xe extends bt{constructor(){super(),this.decodeRowStringBuffer="",Xe.L_AND_G_PATTERNS=Xe.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Xe.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];Xe.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=Xe.findStartGuardPattern(s),u=a==null?null:a.get(z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const J=new fe((c[0]+c[1])/2,r);u.foundPossibleResultPoint(J)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,p=d.resultString;if(u!=null){const J=new fe(h,r);u.foundPossibleResultPoint(J)}let w=this.decodeEnd(s,h);if(u!=null){const J=new fe((w[0]+w[1])/2,r);u.foundPossibleResultPoint(J)}let E=w[1],C=E+(E-w[0]);if(C>=s.getSize()||!s.isRange(E,C,!1))throw new K;let A=p.toString();if(A.length<8)throw new B;if(!Xe.checkChecksum(A))throw new T;let R=(c[1]+c[0])/2,j=(w[1]+w[0])/2,U=this.getBarcodeFormat(),V=[new fe(R,r),new fe(j,r)],Y=new Ie(A,null,0,V,U,new Date().getTime()),ie=0;try{let J=_h.decodeRow(r,s,w[1]);Y.putMetadata(be.UPC_EAN_EXTENSION,J.getText()),Y.putAllMetadata(J.getResultMetadata()),Y.addResultPoints(J.getResultPoints()),ie=J.getText().length}catch{}let se=a==null?null:a.get(z.ALLOWED_EAN_EXTENSIONS);if(se!=null){let J=!1;for(let Ue in se)if(ie.toString()===Ue){J=!0;break}if(!J)throw new K}return Y}decodeEnd(r,s){return Xe.findGuardPattern(r,s,!1,Xe.START_END_PATTERN,new Int32Array(Xe.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Xe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Xe.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}return(1e3-a)%10}}class Ti extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let w=0;w<6&&d<u;w++){let E=Xe.decodeDigit(r,c,d,Xe.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<5-w)}a=Ti.determineFirstDigit(a,h),d=Xe.findGuardPattern(r,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&d<u;w++){let E=Xe.decodeDigit(r,c,d,Xe.L_PATTERNS);a+=String.fromCharCode(48+E);for(let C of c)d+=C}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new K}}Ti.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class bh extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let p=0;p<4&&d<u;p++){let w=Xe.decodeDigit(r,c,d,Xe.L_PATTERNS);a+=String.fromCharCode(48+w);for(let E of c)d+=E}d=Xe.findGuardPattern(r,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&d<u;p++){let w=Xe.decodeDigit(r,c,d,Xe.L_PATTERNS);a+=String.fromCharCode(48+w);for(let E of c)d+=E}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ue.EAN_8}}class Ch extends Xe{constructor(){super(...arguments),this.ean13Reader=new Ti}getBarcodeFormat(){return ue.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new Ie(s.substring(1),null,null,r.getResultPoints(),ue.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new K}reset(){this.ean13Reader.reset()}}class rr extends Xe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let w=0;w<6&&d<u;w++){const E=rr.decodeDigit(r,c,d,rr.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<5-w)}let p=rr.determineNumSysAndCheckDigit(a,h);return{rowOffset:d,resultString:p}}decodeEnd(r,s){return rr.findGuardPatternWithoutCounters(r,s,!0,rr.MIDDLE_END_PATTERN)}checkChecksum(r){return Xe.checkChecksum(rr.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+r+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new ae;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}rr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class au extends lt{constructor(r){super();let s=r==null?null:r.get(z.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new Ti),a.push(new Ch),a.push(new bh),a.push(new rr)):(s.indexOf(ue.EAN_13)>-1&&a.push(new Ti),s.indexOf(ue.UPC_A)>-1&&a.push(new Ch),s.indexOf(ue.EAN_8)>-1&&a.push(new bh),s.indexOf(ue.UPC_E)>-1&&a.push(new rr)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),d=u.getBarcodeFormat()===ue.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(z.POSSIBLE_FORMATS),p=h==null||h.includes(ue.UPC_A);if(d&&p){const w=u.getRawBytes(),E=new Ie(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),ue.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new K}reset(){for(let r of this.readers)r.reset()}}class tn extends lt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(lt.patternMatchVariance(r,s[a],tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return a;throw new K}static count(r){return Ee.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=tn.MIN_FINDER_PATTERN_RATIO&&c<=tn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}tn.MAX_AVG_VARIANCE=.2,tn.MAX_INDIVIDUAL_VARIANCE=.45,tn.MIN_FINDER_PATTERN_RATIO=9.5/12,tn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ss{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof ss))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ha{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new fe(a,u)),this.resultPoints.push(new fe(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ha))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class hr{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let p of r)c+=p;let u=0,d=0,h=r.length;for(let p=0;p<h-1;p++){let w;for(w=1,d|=1<<p;w<r[p];w++,d&=~(1<<p)){let E=hr.combins(c-w-1,h-p-2);if(a&&d===0&&c-w-(h-p-1)>=h-p-1&&(E-=hr.combins(c-w-(h-p),h-p-2)),h-p-1>1){let C=0;for(let A=c-w-(h-p-2);A>s;A--)C+=hr.combins(c-w-A-1,h-p-3);E-=C*(h-1-p)}else c-w>s&&E--;u+=E}c-=w}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,d=1;for(let h=r;h>a;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class ow{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new F(a),u=0,h=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)h&1<<p&&c.set(u),u++;for(let p=1;p<r.length;++p){let w=r[p],E=w.getLeftChar().getValue();for(let C=11;C>=0;--C)E&1<<C&&c.set(u),u++;if(w.getRightChar()!=null){let C=w.getRightChar().getValue();for(let A=11;A>=0;--A)C&1<<A&&c.set(u),u++}}return c}}class Ii{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class lu{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class mn extends lu{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===mn.FNC1}}mn.FNC1="$";class Ni extends lu{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Hn extends lu{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new B;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Hn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Hn.FNC1}isAnyFNC1(){return this.firstDigit===Hn.FNC1||this.secondDigit===Hn.FNC1}}Hn.FNC1=10;class pe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new K;let s=r.substring(0,2);for(let u of pe.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(2,u[2],r):pe.processFixedAI(2,u[1],r);if(r.length<3)throw new K;let a=r.substring(0,3);for(let u of pe.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(3,u[2],r):pe.processFixedAI(3,u[1],r);for(let u of pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,u[2],r):pe.processFixedAI(4,u[1],r);if(r.length<4)throw new K;let c=r.substring(0,4);for(let u of pe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,u[2],r):pe.processFixedAI(4,u[1],r);throw new K}static processFixedAI(r,s,a){if(a.length<r)throw new K;let c=a.substring(0,r);if(a.length<r+s)throw new K;let u=a.substring(r,r+s),d=a.substring(r+s),h="("+c+")"+u,p=pe.parseFieldsInGeneralPurpose(d);return p==null?h:h+p}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let d=a.substring(r,u),h=a.substring(u),p="("+c+")"+d,w=pe.parseFieldsInGeneralPurpose(h);return w==null?p:p+w}}pe.VARIABLE_LENGTH=[],pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",pe.VARIABLE_LENGTH,20],["22",pe.VARIABLE_LENGTH,29],["30",pe.VARIABLE_LENGTH,8],["37",pe.VARIABLE_LENGTH,8],["90",pe.VARIABLE_LENGTH,30],["91",pe.VARIABLE_LENGTH,30],["92",pe.VARIABLE_LENGTH,30],["93",pe.VARIABLE_LENGTH,30],["94",pe.VARIABLE_LENGTH,30],["95",pe.VARIABLE_LENGTH,30],["96",pe.VARIABLE_LENGTH,30],["97",pe.VARIABLE_LENGTH,3],["98",pe.VARIABLE_LENGTH,30],["99",pe.VARIABLE_LENGTH,30]],pe.THREE_DIGIT_DATA_LENGTH=[["240",pe.VARIABLE_LENGTH,30],["241",pe.VARIABLE_LENGTH,30],["242",pe.VARIABLE_LENGTH,6],["250",pe.VARIABLE_LENGTH,30],["251",pe.VARIABLE_LENGTH,30],["253",pe.VARIABLE_LENGTH,17],["254",pe.VARIABLE_LENGTH,20],["400",pe.VARIABLE_LENGTH,30],["401",pe.VARIABLE_LENGTH,30],["402",17],["403",pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",pe.VARIABLE_LENGTH,20],["421",pe.VARIABLE_LENGTH,15],["422",3],["423",pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",pe.VARIABLE_LENGTH,15],["391",pe.VARIABLE_LENGTH,18],["392",pe.VARIABLE_LENGTH,15],["393",pe.VARIABLE_LENGTH,18],["703",pe.VARIABLE_LENGTH,30]],pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",pe.VARIABLE_LENGTH,20],["8003",pe.VARIABLE_LENGTH,30],["8004",pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",pe.VARIABLE_LENGTH,30],["8008",pe.VARIABLE_LENGTH,12],["8018",18],["8020",pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",pe.VARIABLE_LENGTH,70],["8200",pe.VARIABLE_LENGTH,70]];class os{constructor(r){this.buffer=new ae,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=pe.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Hn(this.information.getSize(),Hn.FNC1,Hn.FNC1):new Hn(this.information.getSize(),u-1,Hn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new Hn(r+7,a,c)}extractNumericValueFromBitArray(r,s){return os.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ni(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ni(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ni(this.current.getPosition(),this.buffer.toString()):s=new Ni(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ii(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ii(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ii(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ii(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new mn(r+7,""+(a+1));if(a>=90&&a<116)return new mn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new B}return new mn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new mn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Be("Decoding invalid alphanumeric value: "+a)}return new mn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class cu{constructor(r){this.information=r,this.generalDecoder=new os(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xn extends cu{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}xn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}xn.GTIN_SIZE=40;class as extends xn{constructor(r){super(r)}parseInformation(){let r=new ae;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(as.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,as.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,as.HEADER_SIZE+44)}}as.HEADER_SIZE=4;class Wa extends cu{constructor(r){super(r)}parseInformation(){let r=new ae;return this.getGeneralDecoder().decodeAllCodes(r,Wa.HEADER_SIZE)}}Wa.HEADER_SIZE=5;class Ga extends xn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class gr extends Ga{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=gr.HEADER_SIZE+Ga.GTIN_SIZE+gr.WEIGHT_SIZE)throw new K;let r=new ae;return this.encodeCompressedGtin(r,gr.HEADER_SIZE),this.encodeCompressedWeight(r,gr.HEADER_SIZE+Ga.GTIN_SIZE,gr.WEIGHT_SIZE),r.toString()}}gr.HEADER_SIZE=5,gr.WEIGHT_SIZE=15;class aw extends gr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class lw extends gr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class pr extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<pr.HEADER_SIZE+xn.GTIN_SIZE)throw new K;let r=new ae;this.encodeCompressedGtin(r,pr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(pr.HEADER_SIZE+xn.GTIN_SIZE,pr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(pr.HEADER_SIZE+xn.GTIN_SIZE+pr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}pr.HEADER_SIZE=8,pr.LAST_DIGIT_SIZE=2;class cn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+xn.GTIN_SIZE)throw new K;let r=new ae;this.encodeCompressedGtin(r,cn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+xn.GTIN_SIZE,cn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+xn.GTIN_SIZE+cn.LAST_DIGIT_SIZE,cn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+xn.GTIN_SIZE+cn.LAST_DIGIT_SIZE+cn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}cn.HEADER_SIZE=8,cn.LAST_DIGIT_SIZE=2,cn.FIRST_THREE_DIGITS_SIZE=10;class xt extends Ga{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE+xt.DATE_SIZE)throw new K;let r=new ae;return this.encodeCompressedGtin(r,xt.HEADER_SIZE),this.encodeCompressedWeight(r,xt.HEADER_SIZE+xt.GTIN_SIZE,xt.WEIGHT_SIZE),this.encodeCompressedDate(r,xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,xt.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}xt.HEADER_SIZE=8,xt.WEIGHT_SIZE=20,xt.DATE_SIZE=16;function Ah(b){try{if(b.get(1))return new as(b);if(!b.get(2))return new Wa(b);switch(os.extractNumericValueFromBitArray(b,1,4)){case 4:return new aw(b);case 5:return new lw(b)}switch(os.extractNumericValueFromBitArray(b,1,5)){case 12:return new pr(b);case 13:return new cn(b)}switch(os.extractNumericValueFromBitArray(b,1,7)){case 56:return new xt(b,"310","11");case 57:return new xt(b,"320","11");case 58:return new xt(b,"310","13");case 59:return new xt(b,"320","13");case 60:return new xt(b,"310","15");case 61:return new xt(b,"320","15");case 62:return new xt(b,"310","17");case 63:return new xt(b,"320","17")}}catch(r){throw console.log(r),new Be("unknown decoder: "+b)}}class zr{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof zr?zr.equalsOrNull(r.leftchar,s.leftchar)&&zr.equalsOrNull(r.rightchar,s.rightchar)&&zr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:zr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class uu{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof uu?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class Q extends tn{constructor(r){super(...arguments),this.pairs=new Array(Q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return Q.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,Q.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof K){if(!this.pairs.length)throw new K;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new K}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!Q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(r){for(let s of Q.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||Q.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new uu(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(zr.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let d=!1;for(let h of a.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ow.buildBitArray(r),c=Ah(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new Ie(c,null,null,h,ue.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let p=this.pairs.get(h);c+=p.getLeftChar().getChecksumPortion(),u++;let w=p.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,a,c),u==null?h=Q.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let p=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new K;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(E){w=null,this.verbose&&console.log(E)}return new zr(p,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;a>=0?d=a:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let p=!1;for(;d<u&&(p=!r.get(d),!!p);)d++;let w=0,E=d;for(let C=d;C<u;C++)if(r.get(C)!=p)c[w]++;else{if(w==3){if(h&&Q.reverseCounters(c),Q.isFinderPattern(c)){this.startEnd[0]=E,this.startEnd[1]=C;return}h&&Q.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new K}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,d;if(a){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();M.arraycopy(h,0,h,1,h.length-1),h[0]=c;let p;try{p=this.parseFinderValue(h,Q.FINDER_PATTERNS)}catch{return null}return new Ha(p,[u,d],u,d,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let ot=0;ot<u.length;ot++)u[ot]=0;if(c)Q.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Q.recordPattern(r,s.getStartEnd()[1],u);for(let ot=0,Zt=u.length-1;ot<Zt;ot++,Zt--){let kn=u[ot];u[ot]=u[Zt],u[Zt]=kn}}let d=17,h=Ee.sum(new Int32Array(u))/d,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new K;let w=this.getOddCounts(),E=this.getEvenCounts(),C=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let ot=0;ot<u.length;ot++){let Zt=1*u[ot]/h,kn=Zt+.5;if(kn<1){if(Zt<.3)throw new K;kn=1}else if(kn>8){if(Zt>8.7)throw new K;kn=8}let fs=ot/2;ot&1?(E[fs]=kn,A[fs]=Zt-kn):(w[fs]=kn,C[fs]=Zt-kn)}this.adjustOddEvenCounts(d);let R=4*s.getValue()+(a?0:2)+(c?0:1)-1,j=0,U=0;for(let ot=w.length-1;ot>=0;ot--){if(Q.isNotA1left(s,a,c)){let Zt=Q.WEIGHTS[R][2*ot];U+=w[ot]*Zt}j+=w[ot]}let V=0;for(let ot=E.length-1;ot>=0;ot--)if(Q.isNotA1left(s,a,c)){let Zt=Q.WEIGHTS[R][2*ot+1];V+=E[ot]*Zt}let Y=U+V;if(j&1||j>13||j<4)throw new K;let ie=(13-j)/2,se=Q.SYMBOL_WIDEST[ie],J=9-se,Ue=hr.getRSSvalue(w,se,!0),Ne=hr.getRSSvalue(E,J,!1),yn=Q.EVEN_TOTAL_SUBSET[ie],ir=Q.GSUM[ie],vn=Ue*yn+Ne+ir;return new ss(vn,Y)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=Ee.sum(new Int32Array(this.getOddCounts())),a=Ee.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let p=s+a-r,w=(s&1)==1,E=(a&1)==0;if(p==1)if(w){if(E)throw new K;u=!0}else{if(!E)throw new K;h=!0}else if(p==-1)if(w){if(E)throw new K;c=!0}else{if(!E)throw new K;d=!0}else if(p==0){if(w){if(!E)throw new K;s<a?(c=!0,h=!0):(u=!0,d=!0)}else if(E)throw new K}else throw new K;if(c){if(u)throw new K;Q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new K;Q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Q.SYMBOL_WIDEST=[7,5,4,3,1],Q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Q.GSUM=[0,348,1388,2948,3988],Q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Q.FINDER_PAT_A=0,Q.FINDER_PAT_B=1,Q.FINDER_PAT_C=2,Q.FINDER_PAT_D=3,Q.FINDER_PAT_E=4,Q.FINDER_PAT_F=5,Q.FINDER_PATTERN_SEQUENCES=[[Q.FINDER_PAT_A,Q.FINDER_PAT_A],[Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B],[Q.FINDER_PAT_A,Q.FINDER_PAT_C,Q.FINDER_PAT_B,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_C],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F]],Q.MAX_PAIRS=11;class cw extends ss{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends tn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);Ct.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);Ct.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Ct.checkChecksum(d,h))return Ct.constructResult(d,h)}throw new K}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new ae;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let d=0;for(let w=0;w<13;w++){let E=u.charAt(w).charCodeAt(0)-48;d+=w&1?E:3*E}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new Ie(u.toString(),null,0,[h[0],h[1],p[0],p[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,a,s,u),h=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(h!=null){let E=(u[0]+u[1])/2;s&&(E=r.getSize()-1-E),h.foundPossibleResultPoint(new fe(E,a))}let p=this.decodeDataCharacter(r,d,!0),w=this.decodeDataCharacter(r,d,!1);return new cw(1597*p.getValue()+w.getValue(),p.getChecksumPortion()+4*w.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let V=0;V<c.length;V++)c[V]=0;if(a)lt.recordPatternInReverse(r,s.getStartEnd()[0],c);else{lt.recordPattern(r,s.getStartEnd()[1]+1,c);for(let V=0,Y=c.length-1;V<Y;V++,Y--){let ie=c[V];c[V]=c[Y],c[Y]=ie}}let u=a?16:15,d=Ee.sum(new Int32Array(c))/u,h=this.getOddCounts(),p=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let V=0;V<c.length;V++){let Y=c[V]/d,ie=Math.floor(Y+.5);ie<1?ie=1:ie>8&&(ie=8);let se=Math.floor(V/2);V&1?(p[se]=ie,E[se]=Y-ie):(h[se]=ie,w[se]=Y-ie)}this.adjustOddEvenCounts(a,u);let C=0,A=0;for(let V=h.length-1;V>=0;V--)A*=9,A+=h[V],C+=h[V];let R=0,j=0;for(let V=p.length-1;V>=0;V--)R*=9,R+=p[V],j+=p[V];let U=A+3*R;if(a){if(C&1||C>12||C<4)throw new K;let V=(12-C)/2,Y=Ct.OUTSIDE_ODD_WIDEST[V],ie=9-Y,se=hr.getRSSvalue(h,Y,!1),J=hr.getRSSvalue(p,ie,!0),Ue=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[V],Ne=Ct.OUTSIDE_GSUM[V];return new ss(se*Ue+J+Ne,U)}else{if(j&1||j>10||j<4)throw new K;let V=(10-j)/2,Y=Ct.INSIDE_ODD_WIDEST[V],ie=9-Y,se=hr.getRSSvalue(h,Y,!0),J=hr.getRSSvalue(p,ie,!1),Ue=Ct.INSIDE_ODD_TOTAL_SUBSET[V],Ne=Ct.INSIDE_GSUM[V];return new ss(J*Ue+se+Ne,U)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,p=d;for(let w=d;w<c;w++)if(r.get(w)!==u)a[h]++;else{if(h===3){if(tn.isFinderPattern(a))return[p,w];p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,u=!u}throw new K}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,p=this.getDecodeFinderCounters(),w=new Int32Array(p.length);M.arraycopy(p,0,w,1,p.length-1),w[0]=h;const E=this.parseFinderValue(w,Ct.FINDER_PATTERNS);let C=d,A=c[1];return a&&(C=r.getSize()-1-C,A=r.getSize()-1-A),new Ha(E,[d,c[1]],C,A,s)}adjustOddEvenCounts(r,s){let a=Ee.sum(new Int32Array(this.getOddCounts())),c=Ee.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,p=!1;r?(a>12?d=!0:a<4&&(u=!0),c>12?p=!0:c<4&&(h=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?p=!0:c<4&&(h=!0));let w=a+c-s,E=(a&1)===(r?1:0),C=(c&1)===1;if(w===1)if(E){if(C)throw new K;d=!0}else{if(!C)throw new K;p=!0}else if(w===-1)if(E){if(C)throw new K;u=!0}else{if(!C)throw new K;h=!0}else if(w===0){if(E){if(!C)throw new K;a<c?(u=!0,p=!0):(d=!0,h=!0)}else if(C)throw new K}else throw new K;if(u){if(d)throw new K;tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new K;tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ls extends lt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(z.POSSIBLE_FORMATS):null,c=r&&r.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ue.EAN_13)||a.includes(ue.UPC_A)||a.includes(ue.EAN_8)||a.includes(ue.UPC_E))&&this.readers.push(new au(r)),a.includes(ue.CODE_39)&&this.readers.push(new Dt(c)),a.includes(ue.CODE_128)&&this.readers.push(new oe),a.includes(ue.ITF)&&this.readers.push(new it),a.includes(ue.RSS_14)&&this.readers.push(new Ct),a.includes(ue.RSS_EXPANDED)&&this.readers.push(new Q(this.verbose))):(this.readers.push(new au(r)),this.readers.push(new Dt),this.readers.push(new au(r)),this.readers.push(new oe),this.readers.push(new it),this.readers.push(new Ct),this.readers.push(new Q(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new K}reset(){this.readers.forEach(r=>r.reset())}}class uw extends he{constructor(r=500,s){super(new ls(s),r,s)}}class Ke{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class qe{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ve{constructor(r,s,a,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const p=d.getECCodewords(),w=d.getECBlocks();for(let E of w)h+=E.getCount()*(E.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new B;for(let a of Ve.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ve(1,10,10,8,8,new Ke(5,new qe(1,3))),new Ve(2,12,12,10,10,new Ke(7,new qe(1,5))),new Ve(3,14,14,12,12,new Ke(10,new qe(1,8))),new Ve(4,16,16,14,14,new Ke(12,new qe(1,12))),new Ve(5,18,18,16,16,new Ke(14,new qe(1,18))),new Ve(6,20,20,18,18,new Ke(18,new qe(1,22))),new Ve(7,22,22,20,20,new Ke(20,new qe(1,30))),new Ve(8,24,24,22,22,new Ke(24,new qe(1,36))),new Ve(9,26,26,24,24,new Ke(28,new qe(1,44))),new Ve(10,32,32,14,14,new Ke(36,new qe(1,62))),new Ve(11,36,36,16,16,new Ke(42,new qe(1,86))),new Ve(12,40,40,18,18,new Ke(48,new qe(1,114))),new Ve(13,44,44,20,20,new Ke(56,new qe(1,144))),new Ve(14,48,48,22,22,new Ke(68,new qe(1,174))),new Ve(15,52,52,24,24,new Ke(42,new qe(2,102))),new Ve(16,64,64,14,14,new Ke(56,new qe(2,140))),new Ve(17,72,72,16,16,new Ke(36,new qe(4,92))),new Ve(18,80,80,18,18,new Ke(48,new qe(4,114))),new Ve(19,88,88,20,20,new Ke(56,new qe(4,144))),new Ve(20,96,96,22,22,new Ke(68,new qe(4,174))),new Ve(21,104,104,24,24,new Ke(56,new qe(6,136))),new Ve(22,120,120,18,18,new Ke(68,new qe(6,175))),new Ve(23,132,132,20,20,new Ke(62,new qe(8,163))),new Ve(24,144,144,22,22,new Ke(62,new qe(8,156),new qe(2,155))),new Ve(25,8,18,6,16,new Ke(7,new qe(1,5))),new Ve(26,8,32,6,14,new Ke(11,new qe(1,10))),new Ve(27,12,26,10,24,new Ke(14,new qe(1,16))),new Ve(28,12,36,10,16,new Ke(18,new qe(1,22))),new Ve(29,16,36,14,16,new Ke(24,new qe(1,32))),new Ve(30,16,48,14,22,new Ke(28,new qe(1,49)))]}}Ve.VERSIONS=Ve.buildVersions();class du{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new B;this.version=du.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ke(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Ve.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,p=!1,w=!1,E=!1;do if(a===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,a-=2,c+=2,h=!0;else if(a===u-2&&c===0&&d&3&&!p)r[s++]=this.readCorner2(u,d)&255,a-=2,c+=2,p=!0;else if(a===u+4&&c===2&&!(d&7)&&!w)r[s++]=this.readCorner3(u,d)&255,a-=2,c+=2,w=!0;else if(a===u-2&&c===0&&(d&7)===4&&!E)r[s++]=this.readCorner4(u,d)&255,a-=2,c+=2,E=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(s!==this.version.getTotalCodewords())throw new B;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=a/u|0,p=d*c,w=h*u,E=new ke(w,p);for(let C=0;C<d;++C){const A=C*c;for(let R=0;R<h;++R){const j=R*u;for(let U=0;U<c;++U){const V=C*(c+2)+1+U,Y=A+U;for(let ie=0;ie<u;++ie){const se=R*(u+2)+1+ie;if(r.get(se,V)){const J=j+ie;E.set(J,Y)}}}}}return E}}class fu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let U of u)c+=U.getCount();const d=new Array(c);let h=0;for(let U of u)for(let V=0;V<U.getCount();V++){const Y=U.getDataCodewords(),ie=a.getECCodewords()+Y;d[h++]=new fu(Y,new Uint8Array(ie))}const w=d[0].codewords.length-a.getECCodewords(),E=w-1;let C=0;for(let U=0;U<E;U++)for(let V=0;V<h;V++)d[V].codewords[U]=r[C++];const A=s.getVersionNumber()===24,R=A?8:h;for(let U=0;U<R;U++)d[U].codewords[w-1]=r[C++];const j=d[0].codewords.length;for(let U=w;U<j;U++)for(let V=0;V<h;V++){const Y=A?(V+8)%h:V,ie=A&&Y>7?U-1:U;d[Y].codewords[ie]=r[C++]}if(C!==r.length)throw new _;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hu{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new _(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,h=r<d?r:d,p=d-h,w=255>>8-h<<p;s=(u[c]&w)>>p,r-=h,a+=h,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mt;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mt||(Mt={}));class Vr{static decode(r){const s=new hu(r),a=new ae,c=new ae,u=new Array;let d=Mt.ASCII_ENCODE;do if(d===Mt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,a,c);else{switch(d){case Mt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Mt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Mt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Mt.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new B}d=Mt.ASCII_ENCODE}while(d!==Mt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Le(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new B;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Mt.ASCII_ENCODE;if(u===129)return Mt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Mt.C40_ENCODE;case 231:return Mt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Mt.ANSIX12_ENCODE;case 239:return Mt.TEXT_ENCODE;case 240:return Mt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new B;break}}while(r.available()>0);return Mt.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new B;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new B}u=0;break;case 3:a?(s.append(String.fromCharCode(p+224)),a=!1):s.append(String.fromCharCode(p+96)),u=0;break;default:throw new B}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new B;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new B}u=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[p];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w),u=0}else throw new B;break;default:throw new B}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new B;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new B;const h=new Uint8Array(d);for(let p=0;p<d;p++){if(r.available()<8)throw new B;h[p]=this.unrandomize255State(r.readBits(8),c++)}a.push(h);try{s.append(te.decode(h,Z.ISO88591))}catch(p){throw new Be("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}Vr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vr.TEXT_SHIFT2_SET_CHARS=Vr.C40_SHIFT2_SET_CHARS,Vr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class dw{constructor(){this.rsDecoder=new Oe(Ae.DATA_MATRIX_FIELD_256)}decode(r){const s=new du(r),a=s.getVersion(),c=s.readCodewords(),u=fu.getDataBlocks(c,a);let d=0;for(let w of u)d+=w.getNumDataCodewords();const h=new Uint8Array(d),p=u.length;for(let w=0;w<p;w++){const E=u[w],C=E.getCodewords(),A=E.getNumDataCodewords();this.correctErrors(C,A);for(let R=0;R<A;R++)h[R*p+w]=C[R]}return Vr.decode(h)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new T}for(let c=0;c<s;c++)r[c]=a[c]}}class Nt{constructor(r){this.image=r,this.rectangleDetector=new at(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new K;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(p&1)===1&&(p+=1),4*h<7*p&&4*p<7*h&&(h=p=Math.max(h,p));let w=Nt.sampleGrid(this.image,a,c,u,d,h,p);return new ln(w,[a,c,u,d])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new fe(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new fe(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,a),h=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),E=d,C=[u,s,a,c];return E>h&&(E=h,C[0]=s,C[1]=a,C[2]=c,C[3]=u),E>p&&(E=p,C[0]=a,C[1]=c,C[2]=u,C[3]=s),E>w&&(C[0]=c,C[1]=u,C[2]=s,C[3]=a),C}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=Nt.shiftPoint(a,c,(d+1)*4),p=Nt.shiftPoint(c,a,(d+1)*4),w=this.transitionsBetween(h,s),E=this.transitionsBetween(p,u);return w<E?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(a,u),p=Nt.shiftPoint(s,a,(h+1)*4),w=Nt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(p,u),h=this.transitionsBetween(w,u);let E=new fe(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),C=new fe(u.getX()+(s.getX()-a.getX())/(h+1),u.getY()+(s.getY()-a.getY())/(h+1));if(!this.isValid(E))return this.isValid(C)?C:null;if(!this.isValid(C))return E;let A=this.transitionsBetween(p,E)+this.transitionsBetween(w,E),R=this.transitionsBetween(p,C)+this.transitionsBetween(w,C);return A>R?E:C}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,p=Nt.shiftPoint(s,a,h*4),w=Nt.shiftPoint(c,a,d*4);d=this.transitionsBetween(p,u)+1,h=this.transitionsBetween(w,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let E=(s.getX()+a.getX()+c.getX()+u.getX())/4,C=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Nt.moveAway(s,E,C),a=Nt.moveAway(a,E,C),c=Nt.moveAway(c,E,C),u=Nt.moveAway(u,E,C);let A,R;return p=Nt.shiftPoint(s,a,h*4),p=Nt.shiftPoint(p,u,d*4),A=Nt.shiftPoint(a,s,h*4),A=Nt.shiftPoint(A,c,d*4),w=Nt.shiftPoint(c,u,h*4),w=Nt.shiftPoint(w,a,d*4),R=Nt.shiftPoint(u,c,h*4),R=Nt.shiftPoint(R,s,d*4),[p,A,w,R]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,d,h){return Ft.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-a);if(h){let U=a;a=c,c=U,U=u,u=d,d=U}let p=Math.abs(u-a),w=Math.abs(d-c),E=-p/2,C=c<d?1:-1,A=a<u?1:-1,R=0,j=this.image.get(h?c:a,h?a:c);for(let U=a,V=c;U!==u;U+=A){let Y=this.image.get(h?V:U,h?U:V);if(Y!==j&&(R++,j=Y),E+=w,E>0){if(V===d)break;V+=C,E-=p}}return R}}class Hr{constructor(){this.decoder=new dw}decode(r,s=null){let a,c;if(s!=null&&s.has(z.PURE_BARCODE)){const w=Hr.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(w),c=Hr.NO_POINTS}else{const w=new Nt(r.getBlackMatrix()).detect();a=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=a.getRawBytes(),d=new Ie(a.getText(),u,8*u.length,c,ue.DATA_MATRIX,M.currentTimeMillis()),h=a.getByteSegments();h!=null&&d.putMetadata(be.BYTE_SEGMENTS,h);const p=a.getECLevel();return p!=null&&d.putMetadata(be.ERROR_CORRECTION_LEVEL,p),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new K;const c=this.moduleSize(s,r);let u=s[1];const d=a[1];let h=s[0];const w=(a[0]-h+1)/c,E=(d-u+1)/c;if(w<=0||E<=0)throw new K;const C=c/2;u+=C,h+=C;const A=new ke(w,E);for(let R=0;R<E;R++){const j=u+R*c;for(let U=0;U<w;U++)r.get(h+U*c,j)&&A.set(U,R)}return A}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new K;const d=c-r[0];if(d===0)throw new K;return d}}Hr.NO_POINTS=[];class fw extends he{constructor(r=500){super(new Hr,r)}}var cs;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(cs||(cs={}));class ct{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,ct.FOR_BITS.set(a,this),ct.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return ct.L;case"M":return ct.M;case"Q":return ct.Q;case"H":return ct.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof ct))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=ct.FOR_BITS.size)throw new _;return ct.FOR_BITS.get(r)}}ct.FOR_BITS=new Map,ct.FOR_VALUE=new Map,ct.L=new ct(cs.L,"L",1),ct.M=new ct(cs.M,"M",0),ct.Q=new ct(cs.Q,"Q",3),ct.H=new ct(cs.H,"H",2);class nn{constructor(r){this.errorCorrectionLevel=ct.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return N.bitCount(r^s)}static decodeFormatInformation(r,s){const a=nn.doDecodeFormatInformation(r,s);return a!==null?a:nn.doDecodeFormatInformation(r^nn.FORMAT_INFO_MASK_QR,s^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of nn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new nn(u[1]);let h=nn.numBitsDiffering(r,d);h<a&&(c=u[1],a=h),r!==s&&(h=nn.numBitsDiffering(s,d),h<a&&(c=u[1],a=h))}return a<=3?new nn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof nn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new B;try{return this.getVersionForNumber((r-17)/4)}catch{throw new B}}static getVersionForNumber(r){if(r<1||r>40)throw new _;return _e.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<_e.VERSION_DECODE_INFO.length;c++){const u=_e.VERSION_DECODE_INFO[c];if(u===r)return _e.getVersionForNumber(c+7);const d=nn.numBitsDiffering(r,u);d<s&&(a=c+7,s=d)}return s<=3?_e.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new ke(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new W(7,new k(1,19)),new W(10,new k(1,16)),new W(13,new k(1,13)),new W(17,new k(1,9))),new _e(2,Int32Array.from([6,18]),new W(10,new k(1,34)),new W(16,new k(1,28)),new W(22,new k(1,22)),new W(28,new k(1,16))),new _e(3,Int32Array.from([6,22]),new W(15,new k(1,55)),new W(26,new k(1,44)),new W(18,new k(2,17)),new W(22,new k(2,13))),new _e(4,Int32Array.from([6,26]),new W(20,new k(1,80)),new W(18,new k(2,32)),new W(26,new k(2,24)),new W(16,new k(4,9))),new _e(5,Int32Array.from([6,30]),new W(26,new k(1,108)),new W(24,new k(2,43)),new W(18,new k(2,15),new k(2,16)),new W(22,new k(2,11),new k(2,12))),new _e(6,Int32Array.from([6,34]),new W(18,new k(2,68)),new W(16,new k(4,27)),new W(24,new k(4,19)),new W(28,new k(4,15))),new _e(7,Int32Array.from([6,22,38]),new W(20,new k(2,78)),new W(18,new k(4,31)),new W(18,new k(2,14),new k(4,15)),new W(26,new k(4,13),new k(1,14))),new _e(8,Int32Array.from([6,24,42]),new W(24,new k(2,97)),new W(22,new k(2,38),new k(2,39)),new W(22,new k(4,18),new k(2,19)),new W(26,new k(4,14),new k(2,15))),new _e(9,Int32Array.from([6,26,46]),new W(30,new k(2,116)),new W(22,new k(3,36),new k(2,37)),new W(20,new k(4,16),new k(4,17)),new W(24,new k(4,12),new k(4,13))),new _e(10,Int32Array.from([6,28,50]),new W(18,new k(2,68),new k(2,69)),new W(26,new k(4,43),new k(1,44)),new W(24,new k(6,19),new k(2,20)),new W(28,new k(6,15),new k(2,16))),new _e(11,Int32Array.from([6,30,54]),new W(20,new k(4,81)),new W(30,new k(1,50),new k(4,51)),new W(28,new k(4,22),new k(4,23)),new W(24,new k(3,12),new k(8,13))),new _e(12,Int32Array.from([6,32,58]),new W(24,new k(2,92),new k(2,93)),new W(22,new k(6,36),new k(2,37)),new W(26,new k(4,20),new k(6,21)),new W(28,new k(7,14),new k(4,15))),new _e(13,Int32Array.from([6,34,62]),new W(26,new k(4,107)),new W(22,new k(8,37),new k(1,38)),new W(24,new k(8,20),new k(4,21)),new W(22,new k(12,11),new k(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new W(30,new k(3,115),new k(1,116)),new W(24,new k(4,40),new k(5,41)),new W(20,new k(11,16),new k(5,17)),new W(24,new k(11,12),new k(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new W(22,new k(5,87),new k(1,88)),new W(24,new k(5,41),new k(5,42)),new W(30,new k(5,24),new k(7,25)),new W(24,new k(11,12),new k(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new W(24,new k(5,98),new k(1,99)),new W(28,new k(7,45),new k(3,46)),new W(24,new k(15,19),new k(2,20)),new W(30,new k(3,15),new k(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new W(28,new k(1,107),new k(5,108)),new W(28,new k(10,46),new k(1,47)),new W(28,new k(1,22),new k(15,23)),new W(28,new k(2,14),new k(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new W(30,new k(5,120),new k(1,121)),new W(26,new k(9,43),new k(4,44)),new W(28,new k(17,22),new k(1,23)),new W(28,new k(2,14),new k(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new W(28,new k(3,113),new k(4,114)),new W(26,new k(3,44),new k(11,45)),new W(26,new k(17,21),new k(4,22)),new W(26,new k(9,13),new k(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new W(28,new k(3,107),new k(5,108)),new W(26,new k(3,41),new k(13,42)),new W(30,new k(15,24),new k(5,25)),new W(28,new k(15,15),new k(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new W(28,new k(4,116),new k(4,117)),new W(26,new k(17,42)),new W(28,new k(17,22),new k(6,23)),new W(30,new k(19,16),new k(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new W(28,new k(2,111),new k(7,112)),new W(28,new k(17,46)),new W(30,new k(7,24),new k(16,25)),new W(24,new k(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new W(30,new k(4,121),new k(5,122)),new W(28,new k(4,47),new k(14,48)),new W(30,new k(11,24),new k(14,25)),new W(30,new k(16,15),new k(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new W(30,new k(6,117),new k(4,118)),new W(28,new k(6,45),new k(14,46)),new W(30,new k(11,24),new k(16,25)),new W(30,new k(30,16),new k(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new W(26,new k(8,106),new k(4,107)),new W(28,new k(8,47),new k(13,48)),new W(30,new k(7,24),new k(22,25)),new W(30,new k(22,15),new k(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new W(28,new k(10,114),new k(2,115)),new W(28,new k(19,46),new k(4,47)),new W(28,new k(28,22),new k(6,23)),new W(30,new k(33,16),new k(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new W(30,new k(8,122),new k(4,123)),new W(28,new k(22,45),new k(3,46)),new W(30,new k(8,23),new k(26,24)),new W(30,new k(12,15),new k(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new k(3,117),new k(10,118)),new W(28,new k(3,45),new k(23,46)),new W(30,new k(4,24),new k(31,25)),new W(30,new k(11,15),new k(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new k(7,116),new k(7,117)),new W(28,new k(21,45),new k(7,46)),new W(30,new k(1,23),new k(37,24)),new W(30,new k(19,15),new k(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new k(5,115),new k(10,116)),new W(28,new k(19,47),new k(10,48)),new W(30,new k(15,24),new k(25,25)),new W(30,new k(23,15),new k(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new k(13,115),new k(3,116)),new W(28,new k(2,46),new k(29,47)),new W(30,new k(42,24),new k(1,25)),new W(30,new k(23,15),new k(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new k(17,115)),new W(28,new k(10,46),new k(23,47)),new W(30,new k(10,24),new k(35,25)),new W(30,new k(19,15),new k(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new k(17,115),new k(1,116)),new W(28,new k(14,46),new k(21,47)),new W(30,new k(29,24),new k(19,25)),new W(30,new k(11,15),new k(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new k(13,115),new k(6,116)),new W(28,new k(14,46),new k(23,47)),new W(30,new k(44,24),new k(7,25)),new W(30,new k(59,16),new k(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new k(12,121),new k(7,122)),new W(28,new k(12,47),new k(26,48)),new W(30,new k(39,24),new k(14,25)),new W(30,new k(22,15),new k(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new k(6,121),new k(14,122)),new W(28,new k(6,47),new k(34,48)),new W(30,new k(46,24),new k(10,25)),new W(30,new k(2,15),new k(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new k(17,122),new k(4,123)),new W(28,new k(29,46),new k(14,47)),new W(30,new k(49,24),new k(10,25)),new W(30,new k(24,15),new k(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new k(4,122),new k(18,123)),new W(28,new k(13,46),new k(32,47)),new W(30,new k(48,24),new k(14,25)),new W(30,new k(42,15),new k(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new k(20,117),new k(4,118)),new W(28,new k(40,47),new k(7,48)),new W(30,new k(43,24),new k(22,25)),new W(30,new k(10,15),new k(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new k(19,118),new k(6,119)),new W(28,new k(18,47),new k(31,48)),new W(30,new k(34,24),new k(34,25)),new W(30,new k(20,15),new k(61,16)))];var Ut;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(Ut||(Ut={}));class Wn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}Wn.values=new Map([[Ut.DATA_MASK_000,new Wn(Ut.DATA_MASK_000,(b,r)=>(b+r&1)===0)],[Ut.DATA_MASK_001,new Wn(Ut.DATA_MASK_001,(b,r)=>(b&1)===0)],[Ut.DATA_MASK_010,new Wn(Ut.DATA_MASK_010,(b,r)=>r%3===0)],[Ut.DATA_MASK_011,new Wn(Ut.DATA_MASK_011,(b,r)=>(b+r)%3===0)],[Ut.DATA_MASK_100,new Wn(Ut.DATA_MASK_100,(b,r)=>(Math.floor(b/2)+Math.floor(r/3)&1)===0)],[Ut.DATA_MASK_101,new Wn(Ut.DATA_MASK_101,(b,r)=>b*r%6===0)],[Ut.DATA_MASK_110,new Wn(Ut.DATA_MASK_110,(b,r)=>b*r%6<3)],[Ut.DATA_MASK_111,new Wn(Ut.DATA_MASK_111,(b,r)=>(b+r+b*r%3&1)===0)]]);class hw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new B;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=nn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return _e.getVersionForNumber(s);let a=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(h,d,a);let u=_e.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(d,h,a);if(u=_e.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new B}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=Wn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let p=0,w=0,E=0;for(let C=c-1;C>0;C-=2){C===6&&C--;for(let A=0;A<c;A++){const R=d?c-1-A:A;for(let j=0;j<2;j++)u.get(C-j,R)||(E++,w<<=1,this.bitMatrix.get(C-j,R)&&(w|=1),E===8&&(h[p++]=w,E=0,w=0))}d=!d}if(p!==s.getTotalCodewords())throw new B;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Wn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class gu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new _;const c=s.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const j of d)u+=j.getCount();const h=new Array(u);let p=0;for(const j of d)for(let U=0;U<j.getCount();U++){const V=j.getDataCodewords(),Y=c.getECCodewordsPerBlock()+V;h[p++]=new gu(V,new Uint8Array(Y))}const w=h[0].codewords.length;let E=h.length-1;for(;E>=0&&h[E].codewords.length!==w;)E--;E++;const C=w-c.getECCodewordsPerBlock();let A=0;for(let j=0;j<C;j++)for(let U=0;U<p;U++)h[U].codewords[j]=r[A++];for(let j=E;j<p;j++)h[j].codewords[C]=r[A++];const R=h[0].codewords.length;for(let j=C;j<R;j++)for(let U=0;U<p;U++){const V=U<E?j:j+1;h[U].codewords[V]=r[A++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Gn;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(Gn||(Gn={}));class Ce{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Ce.FOR_BITS.set(c,this),Ce.FOR_VALUE.set(r,this)}static forBits(r){const s=Ce.FOR_BITS.get(r);if(s===void 0)throw new _;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ce))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Ce.FOR_BITS=new Map,Ce.FOR_VALUE=new Map,Ce.TERMINATOR=new Ce(Gn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ce.NUMERIC=new Ce(Gn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ce.ALPHANUMERIC=new Ce(Gn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ce.STRUCTURED_APPEND=new Ce(Gn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ce.BYTE=new Ce(Gn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ce.ECI=new Ce(Gn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ce.KANJI=new Ce(Gn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ce.FNC1_FIRST_POSITION=new Ce(Gn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ce.FNC1_SECOND_POSITION=new Ce(Gn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ce.HANZI=new Ce(Gn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class yt{static decode(r,s,a,c){const u=new hu(r);let d=new ae;const h=new Array;let p=-1,w=-1;try{let E=null,C=!1,A;do{if(u.available()<4)A=Ce.TERMINATOR;else{const R=u.readBits(4);A=Ce.forBits(R)}switch(A){case Ce.TERMINATOR:break;case Ce.FNC1_FIRST_POSITION:case Ce.FNC1_SECOND_POSITION:C=!0;break;case Ce.STRUCTURED_APPEND:if(u.available()<16)throw new B;p=u.readBits(8),w=u.readBits(8);break;case Ce.ECI:const R=yt.parseECIValue(u);if(E=O.getCharacterSetECIByValue(R),E===null)throw new B;break;case Ce.HANZI:const j=u.readBits(4),U=u.readBits(A.getCharacterCountBits(s));j===yt.GB2312_SUBSET&&yt.decodeHanziSegment(u,d,U);break;default:const V=u.readBits(A.getCharacterCountBits(s));switch(A){case Ce.NUMERIC:yt.decodeNumericSegment(u,d,V);break;case Ce.ALPHANUMERIC:yt.decodeAlphanumericSegment(u,d,V,C);break;case Ce.BYTE:yt.decodeByteSegment(u,d,V,E,h,c);break;case Ce.KANJI:yt.decodeKanjiSegment(u,d,V);break;default:throw new B}break}}while(A!==Ce.TERMINATOR)}catch{throw new B}return new Le(r,d.toString(),h.length===0?null:h,a===null?null:a.toString(),p,w)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new B;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,a--}try{s.append(te.decode(c,Z.GB2312))}catch(d){throw new B(d)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new B;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,a--}try{s.append(te.decode(c,Z.SHIFT_JIS))}catch(d){throw new B(d)}}static decodeByteSegment(r,s,a,c,u,d){if(8*a>r.available())throw new B;const h=new Uint8Array(a);for(let w=0;w<a;w++)h[w]=r.readBits(8);let p;c===null?p=Z.guessEncoding(h,d):p=c.getName();try{s.append(te.decode(h,p))}catch(w){throw new B(w)}u.push(h)}static toAlphaNumericChar(r){if(r>=yt.ALPHANUMERIC_CHARS.length)throw new B;return yt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new B;const d=r.readBits(11);s.append(yt.toAlphaNumericChar(Math.floor(d/45))),s.append(yt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(r.available()<6)throw new B;s.append(yt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new B;const c=r.readBits(10);if(c>=1e3)throw new B;s.append(yt.toAlphaNumericChar(Math.floor(c/100))),s.append(yt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(yt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new B;const c=r.readBits(7);if(c>=100)throw new B;s.append(yt.toAlphaNumericChar(Math.floor(c/10))),s.append(yt.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new B;const c=r.readBits(4);if(c>=10)throw new B;s.append(yt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new B}}yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",yt.GB2312_SUBSET=1;class Sh{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class gw{constructor(){this.rsDecoder=new Oe(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(ke.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new hw(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new Sh(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=gu.getDataBlocks(u,a,c);let h=0;for(const E of d)h+=E.getNumDataCodewords();const p=new Uint8Array(h);let w=0;for(const E of d){const C=E.getCodewords(),A=E.getNumDataCodewords();this.correctErrors(C,A);for(let R=0;R<A;R++)p[w++]=C[R]}return yt.decode(p,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new T}for(let c=0;c<s;c++)r[c]=a[c]}}class pu extends fe{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+a)/2;return new pu(c,u,d)}}class Xa{constructor(r,s,a,c,u,d,h){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let p=0;p<s;p++){const w=u+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=r;for(;E<c&&!h.get(E,w);)E++;let C=0;for(;E<c;){if(h.get(E,w))if(C===1)d[1]++;else if(C===2){if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,w,E);if(A!==null)return A}d[0]=d[2],d[1]=1,d[2]=0,C=1}else d[++C]++;else C===1&&C++,d[C]++;E++}if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,w,c);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let p=r;for(;p>=0&&u.get(s,p)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&!u.get(s,p)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(s,p)&&h[1]<=a;)h[1]++,p++;if(p===d||h[1]>a)return NaN;for(;p<d&&!u.get(s,p)&&h[2]<=a;)h[2]++,p++;if(h[2]>a)return NaN;const w=h[0]+h[1]+h[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(h)?Xa.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Xa.centerFromEnd(r,a),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(h,d,u))return w.combineEstimate(d,u,h);const p=new pu(u,d,h);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class mu extends fe{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+a)/c;return new mu(u,d,h,c)}}class pw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class $t{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(z.TRY_HARDER)!==void 0,a=r!=null&&r.get(z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*$t.MAX_MODULES));(h<$t.MIN_SKIP||s)&&(h=$t.MIN_SKIP);let p=!1;const w=new Int32Array(5);for(let C=h-1;C<u&&!p;C+=h){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let A=0;for(let R=0;R<d;R++)if(c.get(R,C))(A&1)===1&&A++,w[A]++;else if(A&1)w[A]++;else if(A===4)if($t.foundPatternCross(w)){if(this.handlePossibleCenter(w,C,R,a)===!0)if(h=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const U=this.findRowSkip();U>w[2]&&(C+=U-w[2]-h,R=d-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;continue}A=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;else w[++A]++;$t.foundPatternCross(w)&&this.handlePossibleCenter(w,C,d,a)===!0&&(h=w[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return fe.orderBestPatterns(E),new pw(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=a;)u[1]++,d++;if(r<d||s<d||u[1]>a)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const p=h.getHeight(),w=h.getWidth();for(d=1;r+d<p&&s+d<w&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=p||s+d>=w)return!1;for(;r+d<p&&s+d<w&&!h.get(s+d,r+d)&&u[3]<a;)u[3]++,d++;if(r+d>=p||s+d>=w||u[3]>=a)return!1;for(;r+d<p&&s+d<w&&h.get(s+d,r+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-c)<2*c&&$t.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(s,p);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(s,p)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&u.get(s,p)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(s,p);)h[2]++,p++;if(p===d)return NaN;for(;p<d&&!u.get(s,p)&&h[3]<a;)h[3]++,p++;if(p===d||h[3]>=a)return NaN;for(;p<d&&u.get(s,p)&&h[4]<a;)h[4]++,p++;if(h[4]>=a)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=2*c?NaN:$t.foundPatternCross(h)?$t.centerFromEnd(h,p):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(p,s);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(p,s)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&u.get(p,s)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(p,s);)h[2]++,p++;if(p===d)return NaN;for(;p<d&&!u.get(p,s)&&h[3]<a;)h[3]++,p++;if(p===d||h[3]>=a)return NaN;for(;p<d&&u.get(p,s)&&h[4]<a;)h[4]++,p++;if(h[4]>=a)return NaN;const w=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(w-c)>=c?NaN:$t.foundPatternCross(h)?$t.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=$t.centerFromEnd(r,a),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const p=u/7;let w=!1;const E=this.possibleCenters;for(let C=0,A=E.length;C<A;C++){const R=E[C];if(R.aboutEquals(p,h,d)){E[C]=R.combineEstimate(h,d,p),w=!0;break}}if(!w){const C=new mu(d,h,p);E.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=$t.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=$t.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new K;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const p of this.possibleCenters){const w=p.getEstimatedModuleSize();c+=w,u+=w*w}a=c/r;let d=Math.sqrt(u/r-a*a);s.sort((p,w)=>{const E=Math.abs(w.getEstimatedModuleSize()-a),C=Math.abs(p.getEstimatedModuleSize()-a);return E<C?-1:E>C?1:0});const h=Math.max(.2*a,d);for(let p=0;p<s.length&&s.length>3;p++){const w=s[p];Math.abs(w.getEstimatedModuleSize()-a)>h&&(s.splice(p,1),p--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-a),p=Math.abs(u.getEstimatedModuleSize()-a);return h<p?1:h>p?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}$t.CENTER_QUORUM=2,$t.MIN_SKIP=3,$t.MAX_MODULES=57;class wo{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(z.NEED_RESULT_POINT_CALLBACK);const a=new $t(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new K("No pattern found in proccess finder.");const d=wo.computeDimension(s,a,c,u),h=_e.getProvisionalVersionForDimension(d),p=h.getDimensionForVersion()-7;let w=null;if(h.getAlignmentPatternCenters().length>0){const R=a.getX()-s.getX()+c.getX(),j=a.getY()-s.getY()+c.getY(),U=1-3/p,V=Math.floor(s.getX()+U*(R-s.getX())),Y=Math.floor(s.getY()+U*(j-s.getY()));for(let ie=4;ie<=16;ie<<=1)try{w=this.findAlignmentInRegion(u,V,Y,ie);break}catch(se){if(!(se instanceof K))throw se}}const E=wo.createTransform(s,a,c,w,d),C=wo.sampleGrid(this.image,E,d);let A;return w===null?A=[c,s,a]:A=[c,s,a,w],new ln(C,A)}static createTransform(r,s,a,c,u){const d=u-3.5;let h,p,w,E;return c!==null?(h=c.getX(),p=c.getY(),w=d-3,E=w):(h=s.getX()-r.getX()+a.getX(),p=s.getY()-r.getY()+a.getY(),w=d,E=d),Ye.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,w,E,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,p,a.getX(),a.getY())}static sampleGrid(r,s,a){return Ft.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=Ee.round(fe.distance(r,s)/c),d=Ee.round(fe.distance(r,a)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new K("Dimensions could be not found.")}return h}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),d=1,h=r-(a-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let p=Math.floor(s-(c-s)*d);return d=1,p<0?(d=s/(s-p),p=0):p>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,p),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let R=r;r=s,s=R,R=a,a=c,c=R}const d=Math.abs(a-r),h=Math.abs(c-s);let p=-d/2;const w=r<a?1:-1,E=s<c?1:-1;let C=0;const A=a+w;for(let R=r,j=s;R!==A;R+=w){const U=u?j:R,V=u?R:j;if(C===1===this.image.get(U,V)){if(C===2)return Ee.distance(R,j,r,s);C++}if(p+=h,p>0){if(j===c)break;j+=E,p-=d}}return C===2?Ee.distance(a+w,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new K("Alignment top exceeds estimated module size.");const p=Math.max(0,a-u),w=Math.min(this.image.getHeight()-1,a+u);if(w-p<r*3)throw new K("Alignment bottom exceeds estimated module size.");return new Xa(this.image,d,p,h-d,w-p,r,this.resultPointCallback).find()}}class Wr{constructor(){this.decoder=new gw}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(z.PURE_BARCODE)!==void 0){const p=Wr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(p,s),c=Wr.NO_POINTS}else{const p=new wo(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(p.getBits(),s),c=p.getPoints()}a.getOther()instanceof Sh&&a.getOther().applyMirroredCorrection(c);const u=new Ie(a.getText(),a.getRawBytes(),void 0,c,ue.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(be.BYTE_SEGMENTS,d);const h=a.getECLevel();return h!==null&&u.putMetadata(be.ERROR_CORRECTION_LEVEL,h),a.hasStructuredAppend()&&(u.putMetadata(be.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(be.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new K;const c=this.moduleSize(s,r);let u=s[1],d=a[1],h=s[0],p=a[0];if(h>=p||u>=d)throw new K;if(d-u!==p-h&&(p=h+(d-u),p>=r.getWidth()))throw new K;const w=Math.round((p-h+1)/c),E=Math.round((d-u+1)/c);if(w<=0||E<=0)throw new K;if(E!==w)throw new K;const C=Math.floor(c/2);u+=C,h+=C;const A=h+Math.floor((w-1)*c)-p;if(A>0){if(A>C)throw new K;h-=A}const R=u+Math.floor((E-1)*c)-d;if(R>0){if(R>C)throw new K;u-=R}const j=new ke(w,E);for(let U=0;U<E;U++){const V=u+Math.floor(U*c);for(let Y=0;Y<w;Y++)r.get(h+Math.floor(Y*c),V)&&j.set(Y,U)}return j}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,p=0;for(;u<c&&d<a;){if(h!==s.get(u,d)){if(++p===5)break;h=!h}u++,d++}if(u===c||d===a)throw new K;return(u-r[0])/7}}Wr.NO_POINTS=new Array;class Te{PDF417Common(){}static getBitCountSum(r){return Ee.sum(r)}static toIntArray(r){if(r==null||!r.length)return Te.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=I.binarySearch(Te.SYMBOL_TABLE,r&262143);return s<0?-1:(Te.CODEWORD_TABLE[s]-1)%Te.NUMBER_OF_CODEWORDS}}Te.NUMBER_OF_CODEWORDS=929,Te.MAX_CODEWORDS_IN_BARCODE=Te.NUMBER_OF_CODEWORDS-1,Te.MIN_ROWS_IN_BARCODE=3,Te.MAX_ROWS_IN_BARCODE=90,Te.MODULES_IN_CODEWORD=17,Te.MODULES_IN_STOP_PATTERN=18,Te.BARS_IN_MODULE=8,Te.EMPTY_INT_ARRAY=new Int32Array([]),Te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class mw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Pe{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=Pe.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Pe.detect(a,c)),new mw(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=Pe.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const p of a)p[1]!=null&&(c=Math.trunc(Math.max(c,p[1].getY()))),p[3]!=null&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=Pe.ROW_STEP;continue}if(d=!0,a.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return Pe.copyToResult(d,Pe.findRowsWithPattern(r,c,u,s,a,Pe.START_PATTERN),Pe.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),Pe.copyToResult(d,Pe.findRowsWithPattern(r,c,u,s,a,Pe.STOP_PATTERN),Pe.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,d){const h=new Array(4);let p=!1;const w=new Int32Array(d.length);for(;c<s;c+=Pe.ROW_STEP){let C=Pe.findGuardPattern(r,u,c,a,!1,d,w);if(C!=null){for(;c>0;){const A=Pe.findGuardPattern(r,u,--c,a,!1,d,w);if(A!=null)C=A;else{c++;break}}h[0]=new fe(C[0],c),h[1]=new fe(C[1],c),p=!0;break}}let E=c+1;if(p){let C=0,A=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;E<s;E++){const R=Pe.findGuardPattern(r,A[0],E,a,!1,d,w);if(R!=null&&Math.abs(A[0]-R[0])<Pe.MAX_PATTERN_DRIFT&&Math.abs(A[1]-R[1])<Pe.MAX_PATTERN_DRIFT)A=R,C=0;else{if(C>Pe.SKIPPED_ROW_COUNT_MAX)break;C++}}E-=C+1,h[2]=new fe(A[0],E),h[3]=new fe(A[1],E)}return E-c<Pe.BARCODE_MIN_HEIGHT&&I.fill(h,null),h}static findGuardPattern(r,s,a,c,u,d,h){I.fillWithin(h,0,h.length,0);let p=s,w=0;for(;r.get(p,a)&&p>0&&w++<Pe.MAX_PIXEL_DRIFT;)p--;let E=p,C=0,A=d.length;for(let R=u;E<c;E++)if(r.get(E,a)!==R)h[C]++;else{if(C===A-1){if(Pe.patternMatchVariance(h,d,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return new Int32Array([p,E]);p+=h[0]+h[1],M.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,R=!R}return C===A-1&&Pe.patternMatchVariance(h,d,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE?new Int32Array([p,E-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,d=0;for(let w=0;w<c;w++)u+=r[w],d+=s[w];if(u<d)return 1/0;let h=u/d;a*=h;let p=0;for(let w=0;w<c;w++){let E=r[w],C=s[w]*h,A=E>C?E-C:C-E;if(A>a)return 1/0;p+=A}return p/u}}Pe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Pe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Pe.MAX_AVG_VARIANCE=.42,Pe.MAX_INDIVIDUAL_VARIANCE=.8,Pe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Pe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Pe.MAX_PIXEL_DRIFT=3,Pe.MAX_PATTERN_DRIFT=5,Pe.SKIPPED_ROW_COUNT_MAX=25,Pe.ROW_STEP=5,Pe.BARCODE_MIN_HEIGHT=10;class Yt{constructor(r,s){if(s.length===0)throw new _;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),M.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let d=s;s=a,a=d}let c=new Int32Array(a.length),u=a.length-s.length;M.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(s[d-u],a[d]);return new Yt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Yt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Yt(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let h=0;h<a;h++){let p=s[h];for(let w=0;w<u;w++)d[h+w]=this.field.add(d[h+w],this.field.multiply(p,c[w]))}return new Yt(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Yt(this.field,s)}multiplyScalar(r){if(r===0)return new Yt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new Yt(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return new Yt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Yt(this.field,c)}toString(){let r=new ae;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class xw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}inverse(r){if(r===0)throw new rt;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class xu extends xw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Yt(this,new Int32Array([0])),this.one=new Yt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new Yt(this,a)}}xu.PDF417_GF=new xu(Te.NUMBER_OF_CODEWORDS,3);class Th{constructor(){this.field=xu.PDF417_GF}decode(r,s,a){let c=new Yt(this.field,r),u=new Int32Array(s),d=!1;for(let j=s;j>0;j--){let U=c.evaluateAt(this.field.exp(j));u[s-j]=U,U!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(a!=null)for(const j of a){let U=this.field.exp(r.length-1-j),V=new Yt(this.field,new Int32Array([this.field.subtract(0,U),1]));h=h.multiply(V)}let p=new Yt(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),E=w[0],C=w[1],A=this.findErrorLocations(E),R=this.findErrorMagnitudes(C,E,A);for(let j=0;j<A.length;j++){let U=r.length-1-this.field.log(A[j]);if(U<0)throw T.getChecksumInstance();r[U]=this.field.subtract(r[U],R[j])}return A.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let A=r;r=s,s=A}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let A=c,R=d;if(c=u,d=h,c.isZero())throw T.getChecksumInstance();u=A;let j=this.field.getZero(),U=c.getCoefficient(c.getDegree()),V=this.field.inverse(U);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let Y=u.getDegree()-c.getDegree(),ie=this.field.multiply(u.getCoefficient(u.getDegree()),V);j=j.add(this.field.buildMonomial(Y,ie)),u=u.subtract(c.multiplyByMonomial(Y,ie))}h=j.multiply(d).subtract(R).negative()}let p=h.getCoefficient(0);if(p===0)throw T.getChecksumInstance();let w=this.field.inverse(p),E=h.multiply(w),C=u.multiply(w);return[E,C]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw T.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let d=new Yt(this.field,u),h=a.length,p=new Int32Array(h);for(let w=0;w<h;w++){let E=this.field.inverse(a[w]),C=this.field.subtract(0,r.evaluateAt(E)),A=this.field.inverse(d.evaluateAt(E));p[w]=this.field.multiply(C,A)}return p}}class ki{constructor(r,s,a,c,u){r instanceof ki?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const d=s==null||a==null,h=c==null||u==null;if(d&&h)throw new K;d?(s=new fe(0,c.getY()),a=new fe(0,u.getY())):h&&(c=new fe(r.getWidth()-1,s.getY()),u=new fe(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new ki(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let p=a?this.topLeft:this.topRight,w=Math.trunc(p.getY()-r);w<0&&(w=0);let E=new fe(p.getX(),w);a?c=E:d=E}if(s>0){let p=a?this.bottomLeft:this.bottomRight,w=Math.trunc(p.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let E=new fe(p.getX(),w);a?u=E:h=E}return new ki(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ww{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class yo{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(d,h,p,w,E,C){if(d==="%%")return"%";if(s[++a]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let A=E?parseInt(E.substr(1)):void 0,R;switch(C){case"s":R=s[a];break;case"c":R=s[a][0];break;case"f":R=parseFloat(s[a]).toFixed(d);break;case"p":R=parseFloat(s[a]).toPrecision(d);break;case"e":R=parseFloat(s[a]).toExponential(d);break;case"x":R=parseInt(s[a]).toString(A||16);break;case"d":R=parseFloat(parseInt(s[a],A||10).toPrecision(d)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(A);let j=parseInt(p),U=p&&p[0]+""=="0"?"0":" ";for(;R.length<j;)R=h!==void 0?R+U:U+R;return R}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=yo.form(r,s)}toString(){return this.buffer}}class vo{constructor(r){this.boundingBox=new ki(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<vo.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new yo;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}vo.MAX_NEARBY_DISTANCE=5;class Eo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return Te.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Ih extends vo{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=-1,w=1,E=0;for(let C=d;C<h;C++){if(s[C]==null)continue;let A=s[C],R=A.getRowNumber()-p;if(R===0)E++;else if(R===1)w=Math.max(w,E),E=1,p=A.getRowNumber();else if(R<0||A.getRowNumber()>=r.getRowCount()||R>C)s[C]=null;else{let j;w>2?j=(w-2)*R:j=R;let U=j>=C;for(let V=1;V<=j&&!U;V++)U=s[C-V]!=null;U?s[C]=null:(p=A.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),p=-1;for(let w=u;w<d;w++){if(h[w]==null)continue;let E=h[w];E.setRowNumberAsRowIndicatorColumn();let C=E.getRowNumber()-p;C===0||(C===1?p=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?h[w]=null:p=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new Eo,a=new Eo,c=new Eo,u=new Eo;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let p=h.getValue()%30,w=h.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:a.setValue(p*3+1);break;case 1:u.setValue(p/3),c.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;let d=new ww(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class _o{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Te.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=_o.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=_o.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=a[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=a[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<a.length-1&&(h[1]=a[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<a.length-2&&(h[9]=a[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let p of h)if(_o.adjustRowNumber(c,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new yo;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class bo{constructor(r,s,a,c){this.rowNumber=bo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==bo.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}bo.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let r=0;r<Te.SYMBOL_TABLE.length;r++){let s=Te.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<Te.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,wn.RATIOS_TABLE[r]||(wn.RATIOS_TABLE[r]=new Array(Te.BARS_IN_MODULE)),wn.RATIOS_TABLE[r][Te.BARS_IN_MODULE-c-1]=Math.fround(u/Te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=wn.getDecodedCodewordValue(wn.sampleBitCounts(r));return s!==-1?s:wn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ee.sum(r),a=new Int32Array(Te.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Te.MODULES_IN_CODEWORD;d++){let h=s/(2*Te.MODULES_IN_CODEWORD)+d*s/Te.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=wn.getBitValue(r);return Te.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ee.sum(r),a=new Array(Te.BARS_IN_MODULE);if(s>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(r[d]/s);let c=Nn.MAX_VALUE,u=-1;this.bSymbolTableReady||wn.initialize();for(let d=0;d<wn.RATIOS_TABLE.length;d++){let h=0,p=wn.RATIOS_TABLE[d];for(let w=0;w<Te.BARS_IN_MODULE;w++){let E=Math.fround(p[w]-a[w]);if(h+=Math.fround(E*E),h>=c)break}h<c&&(c=h,u=Te.SYMBOL_TABLE[d])}return u}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(b=>new Array(Te.BARS_IN_MODULE));class Nh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class kh{static parseLong(r,s=void 0){return parseInt(r,s)}}class Oh extends x{}Oh.kind="NullPointerException";class yw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Oh;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new H;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class vw extends x{}class Ew extends yw{constructor(r=32){if(super(),this.count=0,r<0)throw new _("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new vw;a=N.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new H;this.ensureCapacity(this.count+a),M.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var nt;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(nt||(nt={}));function Rh(){if(typeof window<"u")return window.BigInt||null;if(typeof Gt<"u")return Gt.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let qa;function Gr(b){if(typeof qa>"u"&&(qa=Rh()),qa===null)throw new Error("BigInt is not supported!");return qa(b)}function _w(){let b=[];b[0]=Gr(1);let r=Gr(900);b[1]=r;for(let s=2;s<16;s++)b[s]=b[s-1]*r;return b}class q{static decode(r,s){let a=new ae(""),c=O.ISO8859_1;a.enableDecoding(c);let u=1,d=r[u++],h=new Nh;for(;u<r[0];){switch(d){case q.TEXT_COMPACTION_MODE_LATCH:u=q.textCompaction(r,u,a);break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:u=q.byteCompaction(d,r,c,u,a);break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case q.NUMERIC_COMPACTION_MODE_LATCH:u=q.numericCompaction(r,u,a);break;case q.ECI_CHARSET:O.getCharacterSetECIByValue(r[u++]);break;case q.ECI_GENERAL_PURPOSE:u+=2;break;case q.ECI_USER_DEFINED:u++;break;case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=q.decodeMacroBlock(r,u,h);break;case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:throw new B;default:u--,u=q.textCompaction(r,u,a);break}if(u<r.length)d=r[u++];else throw B.getFormatInstance()}if(a.length()===0)throw B.getFormatInstance();let p=new Le(null,a.toString(),null,s);return p.setOther(h),p}static decodeMacroBlock(r,s,a){if(s+q.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw B.getFormatInstance();let c=new Int32Array(q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<q.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];a.setSegmentIndex(N.parseInt(q.decodeBase900toBase10(c,q.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ae;s=q.textCompaction(r,s,u),a.setFileId(u.toString());let d=-1;for(r[s]===q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ae;s=q.textCompaction(r,s+1,h),a.setFileName(h.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new ae;s=q.textCompaction(r,s+1,p),a.setSender(p.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new ae;s=q.textCompaction(r,s+1,w),a.setAddressee(w.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ae;s=q.numericCompaction(r,s+1,E),a.setSegmentCount(N.parseInt(E.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new ae;s=q.numericCompaction(r,s+1,C),a.setTimestamp(kh.parseLong(C.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new ae;s=q.numericCompaction(r,s+1,A),a.setChecksum(N.parseInt(A.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let R=new ae;s=q.numericCompaction(r,s+1,R),a.setFileSize(kh.parseLong(R.toString()));break;default:throw B.getFormatInstance()}break;case q.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(d!==-1){let h=s-d;a.isLastSegment()&&h--,a.setOptionalData(I.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let p=r[s++];if(p<q.TEXT_COMPACTION_MODE_LATCH)c[d]=p/30,c[d+1]=p%30,d+=2;else switch(p){case q.TEXT_COMPACTION_MODE_LATCH:c[d++]=q.TEXT_COMPACTION_MODE_LATCH;break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],u[d]=p,d++;break}}return q.decodeTextCompaction(c,u,d,a),s}static decodeTextCompaction(r,s,a,c){let u=nt.ALPHA,d=nt.ALPHA,h=0;for(;h<a;){let p=r[h],w="";switch(u){case nt.ALPHA:if(p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case q.LL:u=nt.LOWER;break;case q.ML:u=nt.MIXED;break;case q.PS:d=u,u=nt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break;case nt.LOWER:if(p<26)w=String.fromCharCode(97+p);else switch(p){case 26:w=" ";break;case q.AS:d=u,u=nt.ALPHA_SHIFT;break;case q.ML:u=nt.MIXED;break;case q.PS:d=u,u=nt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break;case nt.MIXED:if(p<q.PL)w=q.MIXED_CHARS[p];else switch(p){case q.PL:u=nt.PUNCT;break;case 26:w=" ";break;case q.LL:u=nt.LOWER;break;case q.AL:u=nt.ALPHA;break;case q.PS:d=u,u=nt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break;case nt.PUNCT:if(p<q.PAL)w=q.PUNCT_CHARS[p];else switch(p){case q.PAL:u=nt.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break;case nt.ALPHA_SHIFT:if(u=d,p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break;case nt.PUNCT_SHIFT:if(u=d,p<q.PAL)w=q.PUNCT_CHARS[p];else switch(p){case q.PAL:u=nt.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=nt.ALPHA;break}break}w!==""&&c.append(w),h++}}static byteCompaction(r,s,a,c,u){let d=new Ew,h=0,p=0,w=!1;switch(r){case q.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),C=s[c++];for(;c<s[0]&&!w;)switch(E[h++]=C,p=900*p+C,C=s[c++],C){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(h%5===0&&h>0){for(let A=0;A<6;++A)d.write(Number(Gr(p)>>Gr(8*(5-A))));p=0,h=0}break}c===s[0]&&C<q.TEXT_COMPACTION_MODE_LATCH&&(E[h++]=C);for(let A=0;A<h;A++)d.write(E[A]);break;case q.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let A=s[c++];if(A<q.TEXT_COMPACTION_MODE_LATCH)h++,p=900*p+A;else switch(A){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(h%5===0&&h>0){for(let R=0;R<6;++R)d.write(Number(Gr(p)>>Gr(8*(5-R))));p=0,h=0}}break}return u.append(te.decode(d.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,d=new Int32Array(q.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<q.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%q.MAX_NUMERIC_CODEWORDS===0||h===q.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(q.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=Gr(0);for(let u=0;u<s;u++)a+=q.EXP900[s-u-1]*Gr(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new B;return c.substring(1)}}q.TEXT_COMPACTION_MODE_LATCH=900,q.BYTE_COMPACTION_MODE_LATCH=901,q.NUMERIC_COMPACTION_MODE_LATCH=902,q.BYTE_COMPACTION_MODE_LATCH_6=924,q.ECI_USER_DEFINED=925,q.ECI_GENERAL_PURPOSE=926,q.ECI_CHARSET=927,q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,q.MACRO_PDF417_TERMINATOR=922,q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,q.MAX_NUMERIC_CODEWORDS=15,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,q.PL=25,q.LL=27,q.AS=27,q.ML=28,q.AL=28,q.PS=29,q.PAL=29,q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",q.EXP900=Rh()?_w():[],q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Me{constructor(){}static decode(r,s,a,c,u,d,h){let p=new ki(r,s,a,c,u),w=null,E=null,C;for(let j=!0;;j=!1){if(s!=null&&(w=Me.getRowIndicatorColumn(r,p,s,!0,d,h)),c!=null&&(E=Me.getRowIndicatorColumn(r,p,c,!1,d,h)),C=Me.merge(w,E),C==null)throw K.getNotFoundInstance();let U=C.getBoundingBox();if(j&&U!=null&&(U.getMinY()<p.getMinY()||U.getMaxY()>p.getMaxY()))p=U;else break}C.setBoundingBox(p);let A=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,w),C.setDetectionResultColumn(A,E);let R=w!=null;for(let j=1;j<=A;j++){let U=R?j:A-j;if(C.getDetectionResultColumn(U)!==void 0)continue;let V;U===0||U===A?V=new Ih(p,U===0):V=new vo(p),C.setDetectionResultColumn(U,V);let Y=-1,ie=Y;for(let se=p.getMinY();se<=p.getMaxY();se++){if(Y=Me.getStartColumn(C,U,se,R),Y<0||Y>p.getMaxX()){if(ie===-1)continue;Y=ie}let J=Me.detectCodeword(r,p.getMinX(),p.getMaxX(),R,Y,se,d,h);J!=null&&(V.setCodeword(se,J),ie=Y,d=Math.min(d,J.getWidth()),h=Math.max(h,J.getWidth()))}}return Me.createDecoderResult(C)}static merge(r,s){if(r==null&&s==null)return null;let a=Me.getBarcodeMetadata(r,s);if(a==null)return null;let c=ki.merge(Me.adjustBoundingBox(r),Me.adjustBoundingBox(s));return new _o(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=Me.getMax(s),c=0;for(let h of s)if(c+=a-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=a-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,d){let h=new Ih(s,c);for(let p=0;p<2;p++){let w=p===0?1:-1,E=Math.trunc(Math.trunc(a.getX()));for(let C=Math.trunc(Math.trunc(a.getY()));C<=s.getMaxY()&&C>=s.getMinY();C+=w){let A=Me.detectCodeword(r,0,r.getWidth(),c,E,C,u,d);A!=null&&(h.setCodeword(C,A),c?E=A.getStartX():E=A.getEndX())}}return h}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Me.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Te.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=Me.createBarcodeMatrix(r);Me.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let w=0;w<r.getBarcodeColumnCount();w++){let E=s[p][w+1].getValue(),C=p*r.getBarcodeColumnCount()+w;E.length===0?a.push(C):E.length===1?c[C]=E[0]:(d.push(C),u.push(E))}let h=new Array(u.length);for(let p=0;p<h.length;p++)h[p]=u[p];return Me.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Te.toIntArray(a),Te.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let p=0;p<d.length;p++)s[c[p]]=u[p][d[p]];try{return Me.decodeCodewords(s,r,a)}catch(p){if(!(p instanceof T))throw p}if(d.length===0)throw T.getChecksumInstance();for(let p=0;p<d.length;p++)if(d[p]<u[p].length-1){d[p]++;break}else if(d[p]=0,p===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new Eo;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,d=null;if(Me.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(Me.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;Me.isValidBarcodeColumn(r,s-u);){s-=u;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(c?p.getEndX():p.getStartX())+u*h*(p.getEndX()-p.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,d,h,p){u=Me.adjustCodewordStartColumn(r,s,a,c,u,d);let w=Me.getModuleBitCount(r,s,a,c,u,d);if(w==null)return null;let E,C=Ee.sum(w);if(c)E=u+C;else{for(let j=0;j<w.length/2;j++){let U=w[j];w[j]=w[w.length-1-j],w[w.length-1-j]=U}E=u,u=E-C}if(!Me.checkCodewordSkew(C,h,p))return null;let A=wn.getDecodedValue(w),R=Te.getCodeword(A);return R===-1?null:new bo(u,E,Me.getCodewordBucketNumber(A),R)}static getModuleBitCount(r,s,a,c,u,d){let h=u,p=new Int32Array(8),w=0,E=c?1:-1,C=c;for(;(c?h<a:h>=s)&&w<p.length;)r.get(h,d)===C?(p[w]++,h+=E):(w++,C=!C);return w===p.length||h===(c?a:s)&&w===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,d){let h=u,p=c?-1:1;for(let w=0;w<2;w++){for(;(c?h>=s:h<a)&&c===r.get(h,d);){if(Math.abs(u-h)>Me.CODEWORD_SKEW_SIZE)return u;h+=p}p=-p,c=!c}return h}static checkCodewordSkew(r,s,a){return s-Me.CODEWORD_SKEW_SIZE<=r&&r<=a+Me.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw B.getFormatInstance();let c=1<<s+1,u=Me.correctErrors(r,a,c);Me.verifyCodewordCount(r,c);let d=q.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+Me.MAX_ERRORS||a<0||a>Me.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Me.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw B.getFormatInstance();let a=r[0];if(a>r.length)throw B.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw B.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Me.getCodewordBucketNumber(Me.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new yo;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Me.CODEWORD_SKEW_SIZE=2,Me.MAX_ERRORS=3,Me.MAX_EC_CODEWORDS=512,Me.errorCorrection=new Th;class Kt{decode(r,s=null){let a=Kt.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw K.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return Kt.decode(r,s,!0)}catch(a){throw a instanceof B||a instanceof T?K.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=Pe.detectMultiple(r,s,a);for(const d of u.getPoints()){const h=Me.decode(u.getBits(),d[4],d[5],d[6],d[7],Kt.getMinCodewordWidth(d),Kt.getMaxCodewordWidth(d)),p=new Ie(h.getText(),h.getRawBytes(),void 0,d,ue.PDF_417);p.putMetadata(be.ERROR_CORRECTION_LEVEL,h.getECLevel());const w=h.getOther();w!=null&&p.putMetadata(be.PDF417_EXTRA_METADATA,w),c.push(p)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?N.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(r[0],r[4]),Kt.getMaxWidth(r[6],r[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(r[1],r[5]),Kt.getMaxWidth(r[7],r[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Kt.getMinWidth(r[0],r[4]),Kt.getMinWidth(r[6],r[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(r[1],r[5]),Kt.getMinWidth(r[7],r[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ya extends x{}Ya.kind="ReaderException";class Ph{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(z.TRY_HARDER)===!0,a=i(r)?null:r.get(z.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(d=>d===ue.UPC_A||d===ue.UPC_E||d===ue.EAN_13||d===ue.EAN_8||d===ue.CODABAR||d===ue.CODE_39||d===ue.CODE_93||d===ue.CODE_128||d===ue.ITF||d===ue.RSS_14||d===ue.RSS_EXPANDED);u&&!s&&c.push(new ls(r,this.verbose)),a.includes(ue.QR_CODE)&&c.push(new Wr),a.includes(ue.DATA_MATRIX)&&c.push(new Hr),a.includes(ue.AZTEC)&&c.push(new nr),a.includes(ue.PDF_417)&&c.push(new Kt),u&&s&&c.push(new ls(r,this.verbose))}c.length===0&&(s||c.push(new ls(r,this.verbose)),c.push(new Wr),c.push(new Hr),c.push(new nr),c.push(new Kt),s&&c.push(new ls(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ya("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Ya)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class bw extends he{constructor(r=null,s=500){const a=new Ph;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Cw extends he{constructor(r=500){super(new Kt,r)}}class Aw extends he{constructor(r=500){super(new Wr,r)}}var wu;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})(wu||(wu={}));var Lt=wu;class yu{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new ve(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=a.multiply(new ve(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),a=d}}return s[r]}encode(r,s){if(s===0)throw new _("No error correction bytes");const a=r.length-s;if(a<=0)throw new _("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);M.arraycopy(r,0,u,0,a);let d=new ve(this.field,u);d=d.multiplyByMonomial(s,1);const p=d.divide(c)[1].getCoefficients(),w=s-p.length;for(let E=0;E<w;E++)r[a+E]=0;M.arraycopy(p,0,r,a+w,p.length)}}class At{constructor(){}static applyMaskPenaltyRule1(r){return At.applyMaskPenaltyRule1Internal(r,!0)+At.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=a[d];for(let p=0;p<c-1;p++){const w=h[p];w===h[p+1]&&w===a[d+1][p]&&w===a[d+1][p+1]&&s++}}return At.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const p=a[d];h+6<c&&p[h]===1&&p[h+1]===0&&p[h+2]===1&&p[h+3]===1&&p[h+4]===1&&p[h+5]===0&&p[h+6]===1&&(At.isWhiteHorizontal(p,h-4,h)||At.isWhiteHorizontal(p,h+7,h+11))&&s++,d+6<u&&a[d][h]===1&&a[d+1][h]===0&&a[d+2][h]===1&&a[d+3][h]===1&&a[d+4][h]===1&&a[d+5][h]===0&&a[d+6][h]===1&&(At.isWhiteVertical(a,h,d-4,d)||At.isWhiteVertical(a,h,d+7,d+11))&&s++}return s*At.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let p=0;p<u;p++){const w=a[p];for(let E=0;E<c;E++)w[E]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*At.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new _("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let p=0,w=-1;for(let E=0;E<u;E++){const C=s?d[h][E]:d[E][h];C===w?p++:(p>=5&&(a+=At.N1+(p-5)),p=1,w=C)}p>=5&&(a+=At.N1+(p-5))}return a}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class Ka{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)I.fill(s,r)}equals(r){if(!(r instanceof Ka))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=s.bytes[a];for(let h=0,p=this.width;h<p;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new ae;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ae;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Oi.NUM_MASK_PATTERNS}}Oi.NUM_MASK_PATTERNS=8;class st extends x{}st.kind="WriterException";class Se{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Se.clearMatrix(u),Se.embedBasicPatterns(a,u),Se.embedTypeInfo(s,c,u),Se.maybeEmbedVersionInfo(a,u),Se.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Se.embedPositionDetectionPatternsAndSeparators(s),Se.embedDarkDotAtLeftBottomCorner(s),Se.maybeEmbedPositionAdjustmentPatterns(r,s),Se.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new F;Se.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),p=Se.TYPE_INFO_COORDINATES[u],w=p[0],E=p[1];if(a.setBoolean(w,E,h),u<8){const C=a.getWidth()-u-1;a.setBoolean(C,8,h)}else{const A=a.getHeight()-7+(u-8);a.setBoolean(8,A,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new F;Se.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,a){let c=0,u=-1,d=a.getWidth()-1,h=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<a.getHeight();){for(let p=0;p<2;++p){const w=d-p;if(!Se.isEmpty(a.get(w,h)))continue;let E;c<r.getSize()?(E=r.get(c),++c):E=!1,s!==255&&At.getDataMaskBit(s,w,h)&&(E=!E),a.setBoolean(w,h,E)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new st("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-N.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new _("0 polynomial");const a=Se.findMSBSet(s);for(r<<=a-1;Se.findMSBSet(r)>=a;)r^=s<<Se.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Oi.isValidMaskPattern(s))throw new st("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Se.calculateBCHCode(c,Se.TYPE_INFO_POLY);a.appendBits(u,10);const d=new F;if(d.appendBits(Se.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new st("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Se.calculateBCHCode(r.getVersionNumber(),Se.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new st("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Se.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Se.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new st;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Se.isEmpty(a.get(r+c,s)))throw new st;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Se.isEmpty(a.get(r,s+c)))throw new st;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Se.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Se.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Se.POSITION_DETECTION_PATTERN[0].length;Se.embedPositionDetectionPattern(0,0,r),Se.embedPositionDetectionPattern(r.getWidth()-s,0,r),Se.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Se.embedHorizontalSeparationPattern(0,a-1,r),Se.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Se.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Se.embedVerticalSeparationPattern(c,0,r),Se.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Se.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let p=0;p!==d;p++){const w=c[p];w>=0&&Se.isEmpty(s.get(w,h))&&Se.embedPositionAdjustmentPattern(w-2,h-2,s)}}}}Se.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Se.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Se.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Se.VERSION_INFO_POLY=7973,Se.TYPE_INFO_POLY=1335,Se.TYPE_INFO_MASK_PATTERN=21522;class Sw{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ft{constructor(){}static calculateMaskPenalty(r){return At.applyMaskPenaltyRule1(r)+At.applyMaskPenaltyRule2(r)+At.applyMaskPenaltyRule3(r)+At.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=ft.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Lt.CHARACTER_SET)!==void 0;u&&(c=a.get(Lt.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new F;if(d===Ce.BYTE&&(u||ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const se=O.getCharacterSetECIByName(c);se!==void 0&&this.appendECI(se,h)}this.appendModeInfo(d,h);const p=new F;this.appendBytes(r,d,p,c);let w;if(a!==null&&a.get(Lt.QR_VERSION)!==void 0){const se=Number.parseInt(a.get(Lt.QR_VERSION).toString(),10);w=_e.getVersionForNumber(se);const J=this.calculateBitsNeeded(d,h,p,w);if(!this.willFit(J,w,s))throw new st("Data too big for requested version")}else w=this.recommendVersion(s,d,h,p);const E=new F;E.appendBitArray(h);const C=d===Ce.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(C,w,d,E),E.appendBitArray(p);const A=w.getECBlocksForLevel(s),R=w.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(R,E);const j=this.interleaveWithECBytes(E,w.getTotalCodewords(),R,A.getNumBlocks()),U=new Oi;U.setECLevel(s),U.setMode(d),U.setVersion(w);const V=w.getDimensionForVersion(),Y=new Ka(V,V),ie=this.chooseMaskPattern(j,s,w,Y);return U.setMaskPattern(ie),Se.buildMatrix(j,s,w,ie,Y),U.setMatrix(Y),U}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,_e.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,a,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<ft.ALPHANUMERIC_TABLE.length?ft.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(O.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Ce.KANJI;let a=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(ft.isDigit(h))a=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return Ce.BYTE}return c?Ce.ALPHANUMERIC:a?Ce.NUMERIC:Ce.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=te.encode(r,O.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<Oi.NUM_MASK_PATTERNS;h++){Se.buildMatrix(r,s,a,h,c);let p=this.calculateMaskPenalty(c);p<u&&(u=p,d=h)}return d}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=_e.getVersionForNumber(a);if(ft.willFit(r,c,s))return c}throw new st("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(a).getTotalECCodewords(),h=c-d,p=(r+7)/8;return h>=p}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new st("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let d=0;d<4&&s.getSize()<a;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==a)throw new st("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,d){if(c>=a)throw new st("Block ID too large");const h=r%a,p=a-h,w=Math.floor(r/a),E=w+1,C=Math.floor(s/a),A=C+1,R=w-C,j=E-A;if(R!==j)throw new st("EC bytes mismatch");if(a!==p+h)throw new st("RS blocks mismatch");if(r!==(C+R)*p+(A+j)*h)throw new st("Total bytes mismatch");c<p?(u[0]=C,d[0]=R):(u[0]=A,d[0]=j)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new st("Number of bits and data bytes does not match");let u=0,d=0,h=0;const p=new Array;for(let E=0;E<c;++E){const C=new Int32Array(1),A=new Int32Array(1);ft.getNumDataBytesAndNumECBytesForBlockID(s,a,c,E,C,A);const R=C[0],j=new Uint8Array(R);r.toBytes(8*u,j,0,R);const U=ft.generateECBytes(j,A[0]);p.push(new Sw(j,U)),d=Math.max(d,R),h=Math.max(h,U.length),u+=C[0]}if(a!==u)throw new st("Data bytes does not match offset");const w=new F;for(let E=0;E<d;++E)for(const C of p){const A=C.getDataBytes();E<A.length&&w.appendBits(A[E],8)}for(let E=0;E<h;++E)for(const C of p){const A=C.getErrorCorrectionBytes();E<A.length&&w.appendBits(A[E],8)}if(s!==w.getSizeInBytes())throw new st("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let d=0;d<a;d++)c[d]=r[d]&255;new yu(Ae.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[a+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new st(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case Ce.NUMERIC:ft.appendNumericBytes(r,a);break;case Ce.ALPHANUMERIC:ft.appendAlphanumericBytes(r,a);break;case Ce.BYTE:ft.append8BitBytes(r,a,c);break;case Ce.KANJI:ft.appendKanjiBytes(r,a);break;default:throw new st("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ft.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=ft.getDigit(r.charAt(c));if(c+2<a){const d=ft.getDigit(r.charAt(c+1)),h=ft.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<a){const d=ft.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=ft.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new st;if(c+1<a){const d=ft.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new st;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=te.encode(r,a)}catch(u){throw new st(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let a;try{a=te.encode(r,O.SJIS)}catch(u){throw new st(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,h=a[u+1]&255,p=d<<8&4294967295|h;let w=-1;if(p>=33088&&p<=40956?w=p-33088:p>=57408&&p<=60351&&(w=p-49472),w===-1)throw new st("Invalid byte sequence");const E=(w>>8)*192+(w&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(Ce.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ft.DEFAULT_BYTE_MODE_ENCODING=O.UTF8.getName();class Ri{write(r,s,a,c=null){if(r.length===0)throw new _("Found empty contents");if(s<0||a<0)throw new _("Requested dimensions are too small: "+s+"x"+a);let u=ct.L,d=Ri.QUIET_ZONE_SIZE;c!==null&&(c.get(Lt.ERROR_CORRECTION)!==void 0&&(u=ct.fromString(c.get(Lt.ERROR_CORRECTION).toString())),c.get(Lt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Lt.MARGIN).toString(),10)));const h=ft.encode(r,u,c);return this.renderResult(h,s,a,d)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,a,c,u);r&&r.appendChild(d)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Be;const d=u.getWidth(),h=u.getHeight(),p=d+c*2,w=h+c*2,E=Math.max(s,p),C=Math.max(a,w),A=Math.min(Math.floor(E/p),Math.floor(C/w)),R=Math.floor((E-d*A)/2),j=Math.floor((C-h*A)/2),U=this.createSVGElement(E,C);for(let V=0,Y=j;V<h;V++,Y+=A)for(let ie=0,se=R;ie<d;ie++,se+=A)if(u.get(ie,V)===1){const J=this.createSvgRectElement(se,Y,A,A);U.appendChild(J)}return U}createSVGElement(r,s){const a=document.createElementNS(Ri.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(Ri.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ri.QUIET_ZONE_SIZE=4,Ri.SVG_NS="http://www.w3.org/2000/svg";class us{encode(r,s,a,c,u){if(r.length===0)throw new _("Found empty contents");if(s!==ue.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new _(`Requested dimensions are too small: ${a}x${c}`);let d=ct.L,h=us.QUIET_ZONE_SIZE;u!==null&&(u.get(Lt.ERROR_CORRECTION)!==void 0&&(d=ct.fromString(u.get(Lt.ERROR_CORRECTION).toString())),u.get(Lt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Lt.MARGIN).toString(),10)));const p=ft.encode(r,d,u);return us.renderResult(p,a,c,h)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Be;const d=u.getWidth(),h=u.getHeight(),p=d+c*2,w=h+c*2,E=Math.max(s,p),C=Math.max(a,w),A=Math.min(Math.floor(E/p),Math.floor(C/w)),R=Math.floor((E-d*A)/2),j=Math.floor((C-h*A)/2),U=new ke(E,C);for(let V=0,Y=j;V<h;V++,Y+=A)for(let ie=0,se=R;ie<d;ie++,se+=A)u.get(ie,V)===1&&U.setRegion(se,Y,A,A);return U}}us.QUIET_ZONE_SIZE=4;class Tw{encode(r,s,a,c,u){let d;switch(s){case ue.QR_CODE:d=new us;break;default:throw new _("No encoder available for format "+s)}return d.encode(r,s,a,c,u)}}class mr extends ne{constructor(r,s,a,c,u,d,h,p){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+d>s||u+h>a)throw new _("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;M.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new mr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/mr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/mr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let p=0;p<r;p++){const w=c[u+p*mr.THUMBNAIL_SCALE_FACTOR]&255;a[h+p]=4278190080|w*65793}u+=this.dataWidth*mr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/mr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/mr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,p=u+r-1;h<d;h++,p--){const w=a[h];a[h]=a[p],a[p]=w}}}invert(){return new ee(this)}}mr.THUMBNAIL_SCALE_FACTOR=2;class vu extends ne{constructor(r,s,a,c,u,d,h){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const p=s*a,w=new Uint8ClampedArray(p);for(let E=0;E<p;E++){const C=r[E],A=C>>16&255,R=C>>7&510,j=C&255;w[E]=(A+R+j)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;M.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new vu(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new ee(this)}}class Dh extends O{static forName(r){return this.getCharacterSetECIByName(r)}}class Eu{}Eu.ISO_8859_1=O.ISO8859_1;class Mh{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Lh{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Iw{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ds extends Iw{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ds(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ds(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+N.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class _u extends ds{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new _u(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Nw(b,r,s){return new _u(b,r,s)}function Co(b,r,s){return new ds(b,r,s)}const kw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xr=0,Za=1,Xn=2,Bh=3,xr=4,Ow=new ds(null,0,0),bu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Rw(b){for(let r of b)I.fill(r,-1);return b[Xr][xr]=0,b[Za][xr]=0,b[Za][Xr]=28,b[Bh][xr]=0,b[Xn][xr]=0,b[Xn][Xr]=15,b}const jh=Rw(I.createInt32Array(6,6));class wr{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let d=bu[this.mode][r];c=Co(c,d&65535,d>>16),a+=d>>16}let u=r===Xn?4:5;return c=Co(c,s,u),new wr(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===Xn?4:5;return a=Co(a,jh[this.mode][r],c),a=Co(a,s,5),new wr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===xr||this.mode===Xn){let h=bu[a][Xr];s=Co(s,h&65535,h>>16),c+=h>>16,a=Xr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new wr(s,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Nw(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new wr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(bu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=wr.calculateBinaryShiftCost(r)-wr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new F;for(const c of s)c.appendTo(a,r);return a}toString(){return Z.format("%s bits=%d bytes=%d",kw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}wr.INITIAL_STATE=new wr(Ow,Xr,0,0);function Pw(b){const r=Z.getCharCode(" "),s=Z.getCharCode("."),a=Z.getCharCode(",");b[Xr][r]=1;const c=Z.getCharCode("Z"),u=Z.getCharCode("A");for(let A=u;A<=c;A++)b[Xr][A]=A-u+2;b[Za][r]=1;const d=Z.getCharCode("z"),h=Z.getCharCode("a");for(let A=h;A<=d;A++)b[Za][A]=A-h+2;b[Xn][r]=1;const p=Z.getCharCode("9"),w=Z.getCharCode("0");for(let A=w;A<=p;A++)b[Xn][A]=A-w+2;b[Xn][a]=12,b[Xn][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<E.length;A++)b[Bh][Z.getCharCode(E[A])]=A;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<C.length;A++)Z.getCharCode(C[A])>0&&(b[xr][Z.getCharCode(C[A])]=A);return b}const Cu=Pw(I.createInt32Array(5,256));class Ao{constructor(r){this.text=r}encode(){const r=Z.getCharCode(" "),s=Z.getCharCode(`
`);let a=Lh.singletonList(wr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Z.getCharCode("\r"):d=h===s?2:0;break;case Z.getCharCode("."):d=h===r?3:0;break;case Z.getCharCode(","):d=h===r?4:0;break;case Z.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(a=Ao.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return Lh.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return Ao.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=Cu[r.getMode()][c]>0,d=null;for(let h=0;h<=xr;h++){let p=Cu[h][c];if(p>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===Xn){const w=d.latchAndAppend(h,p);a.push(w)}if(!u&&jh[r.getMode()][h]>=0){const w=d.shiftAndAppend(h,p);a.push(w)}}}if(r.getBinaryShiftByteCount()>0||Cu[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);a.push(h)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(xr,a)),r.getMode()!==xr&&c.push(u.shiftAndAppend(xr,a)),a===3||a===4){let d=u.latchAndAppend(Xn,16-a).latchAndAppend(Xn,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(a)}return s}}class We{constructor(){}static encodeBytes(r){return We.encode(r,We.DEFAULT_EC_PERCENT,We.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new Ao(r).encode(),u=N.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,p,w,E,C;if(a!==We.DEFAULT_AZTEC_LAYERS){if(h=a<0,p=Math.abs(a),p>(h?We.MAX_NB_BITS_COMPACT:We.MAX_NB_BITS))throw new _(Z.format("Illegal value %s for layers",a));w=We.totalBitsInLayer(p,h),E=We.WORD_SIZE[p];let J=w-w%E;if(C=We.stuffBits(c,E),C.getSize()+u>J)throw new _("Data to large for user specified layer");if(h&&C.getSize()>E*64)throw new _("Data to large for user specified layer")}else{E=0,C=null;for(let J=0;;J++){if(J>We.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(h=J<=3,p=h?J+1:J,w=We.totalBitsInLayer(p,h),d>w)continue;(C==null||E!==We.WORD_SIZE[p])&&(E=We.WORD_SIZE[p],C=We.stuffBits(c,E));let Ue=w-w%E;if(!(h&&C.getSize()>E*64)&&C.getSize()+u<=Ue)break}}let A=We.generateCheckWords(C,w,E),R=C.getSize()/E,j=We.generateModeMessage(h,p,R),U=(h?11:14)+p*4,V=new Int32Array(U),Y;if(h){Y=U;for(let J=0;J<V.length;J++)V[J]=J}else{Y=U+1+2*N.truncDivision(N.truncDivision(U,2)-1,15);let J=N.truncDivision(U,2),Ue=N.truncDivision(Y,2);for(let Ne=0;Ne<J;Ne++){let yn=Ne+N.truncDivision(Ne,15);V[J-Ne-1]=Ue-yn-1,V[J+Ne]=Ue+yn+1}}let ie=new ke(Y);for(let J=0,Ue=0;J<p;J++){let Ne=(p-J)*4+(h?9:12);for(let yn=0;yn<Ne;yn++){let ir=yn*2;for(let vn=0;vn<2;vn++)A.get(Ue+ir+vn)&&ie.set(V[J*2+vn],V[J*2+yn]),A.get(Ue+Ne*2+ir+vn)&&ie.set(V[J*2+yn],V[U-1-J*2-vn]),A.get(Ue+Ne*4+ir+vn)&&ie.set(V[U-1-J*2-vn],V[U-1-J*2-yn]),A.get(Ue+Ne*6+ir+vn)&&ie.set(V[U-1-J*2-yn],V[J*2+vn])}Ue+=Ne*8}if(We.drawModeMessage(ie,h,Y,j),h)We.drawBullsEye(ie,N.truncDivision(Y,2),5);else{We.drawBullsEye(ie,N.truncDivision(Y,2),7);for(let J=0,Ue=0;J<N.truncDivision(U,2)-1;J+=15,Ue+=16)for(let Ne=N.truncDivision(Y,2)&1;Ne<Y;Ne+=2)ie.set(N.truncDivision(Y,2)-Ue,Ne),ie.set(N.truncDivision(Y,2)+Ue,Ne),ie.set(Ne,N.truncDivision(Y,2)-Ue),ie.set(Ne,N.truncDivision(Y,2)+Ue)}let se=new Mh;return se.setCompact(h),se.setSize(Y),se.setLayers(p),se.setCodeWords(R),se.setMatrix(ie),se}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new F;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=We.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=We.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=N.truncDivision(a,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+N.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new yu(We.getGF(a)),d=N.truncDivision(s,a),h=We.bitsToWords(r,a,d);u.encode(h,d-c);let p=s%a,w=new F;w.appendBits(0,p);for(const E of Array.from(h))w.appendBits(E,a);return w}static bitsToWords(r,s,a){let c=new Int32Array(a),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let p=0;p<s;p++)h|=r.get(u*s+p)?1<<s-p-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new _("Unsupported word size "+r)}}static stuffBits(r,s){let a=new F,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let p=0;p<s;p++)(d+p>=c||r.get(d+p))&&(h|=1<<s-1-p);(h&u)===u?(a.appendBits(h&u,s),d--):h&u?a.appendBits(h,s):(a.appendBits(h|1,s),d--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}We.DEFAULT_EC_PERCENT=33,We.DEFAULT_AZTEC_LAYERS=0,We.MAX_NB_BITS=32,We.MAX_NB_BITS_COMPACT=4,We.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qa{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let d=Eu.ISO_8859_1,h=We.DEFAULT_EC_PERCENT,p=We.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Lt.CHARACTER_SET)&&(d=Dh.forName(u.get(Lt.CHARACTER_SET).toString())),u.has(Lt.ERROR_CORRECTION)&&(h=N.parseInt(u.get(Lt.ERROR_CORRECTION).toString())),u.has(Lt.AZTEC_LAYERS)&&(p=N.parseInt(u.get(Lt.AZTEC_LAYERS).toString()))),Qa.encodeLayers(r,s,a,c,d,h,p)}static encodeLayers(r,s,a,c,u,d,h){if(s!==ue.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let p=We.encode(Z.getBytes(r,u),d,h);return Qa.renderResult(p,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new Be;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),p=Math.max(a,d),w=Math.min(h/u,p/d),E=(h-u*w)/2,C=(p-d*w)/2,A=new ke(h,p);for(let R=0,j=C;R<d;R++,j+=w)for(let U=0,V=E;U<u;U++,V+=w)c.get(U,R)&&A.setRegion(V,j,w,w);return A}}n.AbstractExpandedDecoder=cu,n.ArgumentException=v,n.ArithmeticException=rt,n.AztecCode=Mh,n.AztecCodeReader=nr,n.AztecCodeWriter=Qa,n.AztecDecoder=ge,n.AztecDetector=mo,n.AztecDetectorResult=$r,n.AztecEncoder=We,n.AztecHighLevelEncoder=Ao,n.AztecPoint=Pt,n.BarcodeFormat=ue,n.Binarizer=L,n.BinaryBitmap=S,n.BitArray=F,n.BitMatrix=ke,n.BitSource=hu,n.BrowserAztecCodeReader=Vn,n.BrowserBarcodeReader=uw,n.BrowserCodeReader=he,n.BrowserDatamatrixCodeReader=fw,n.BrowserMultiFormatReader=bw,n.BrowserPDF417Reader=Cw,n.BrowserQRCodeReader=Aw,n.BrowserQRCodeSvgWriter=Ri,n.CharacterSetECI=O,n.ChecksumException=T,n.Code128Reader=oe,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=Vr,n.DataMatrixReader=Hr,n.DecodeHintType=z,n.DecoderResult=Le,n.DefaultGridSampler=qt,n.DetectorResult=ln,n.EAN13Reader=Ti,n.EncodeHintType=Lt,n.Exception=x,n.FormatException=B,n.GenericGF=Ae,n.GenericGFPoly=ve,n.GlobalHistogramBinarizer=ze,n.GridSampler=pn,n.GridSamplerInstance=Ft,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=le,n.ITFReader=it,n.IllegalArgumentException=_,n.IllegalStateException=Be,n.InvertedLuminanceSource=ee,n.LuminanceSource=ne,n.MathUtils=Ee,n.MultiFormatOneDReader=ls,n.MultiFormatReader=Ph,n.MultiFormatWriter=Tw,n.NotFoundException=K,n.OneDReader=lt,n.PDF417DecodedBitStreamParser=q,n.PDF417DecoderErrorCorrection=Th,n.PDF417Reader=Kt,n.PDF417ResultMetadata=Nh,n.PerspectiveTransform=Ye,n.PlanarYUVLuminanceSource=mr,n.QRCodeByteMatrix=Ka,n.QRCodeDataMask=Wn,n.QRCodeDecodedBitStreamParser=yt,n.QRCodeDecoderErrorCorrectionLevel=ct,n.QRCodeDecoderFormatInformation=nn,n.QRCodeEncoder=ft,n.QRCodeEncoderQRCode=Oi,n.QRCodeMaskUtil=At,n.QRCodeMatrixUtil=Se,n.QRCodeMode=Ce,n.QRCodeReader=Wr,n.QRCodeVersion=_e,n.QRCodeWriter=us,n.RGBLuminanceSource=vu,n.RSS14Reader=Ct,n.RSSExpandedReader=Q,n.ReaderException=Ya,n.ReedSolomonDecoder=Oe,n.ReedSolomonEncoder=yu,n.ReedSolomonException=He,n.Result=Ie,n.ResultMetadataType=be,n.ResultPoint=fe,n.StringUtils=Z,n.UnsupportedOperationException=G,n.VideoInputDevice=we,n.WhiteRectangleDetector=at,n.WriterException=st,n.ZXingArrays=I,n.ZXingCharset=Dh,n.ZXingInteger=N,n.ZXingStandardCharsets=Eu,n.ZXingStringBuilder=ae,n.ZXingStringEncoding=te,n.ZXingSystem=M,n.createAbstractExpandedDecoder=Ah,Object.defineProperty(n,"__esModule",{value:!0})})})(_0,_0.exports);var gt=_0.exports;const Zb=yc(gt),Qb=tp({__proto__:null,default:Zb},[gt]);var Tg=function(){function t(e,n,i){if(this.formatMap=new Map([[me.QR_CODE,gt.BarcodeFormat.QR_CODE],[me.AZTEC,gt.BarcodeFormat.AZTEC],[me.CODABAR,gt.BarcodeFormat.CODABAR],[me.CODE_39,gt.BarcodeFormat.CODE_39],[me.CODE_93,gt.BarcodeFormat.CODE_93],[me.CODE_128,gt.BarcodeFormat.CODE_128],[me.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[me.MAXICODE,gt.BarcodeFormat.MAXICODE],[me.ITF,gt.BarcodeFormat.ITF],[me.EAN_13,gt.BarcodeFormat.EAN_13],[me.EAN_8,gt.BarcodeFormat.EAN_8],[me.PDF_417,gt.BarcodeFormat.PDF_417],[me.RSS_14,gt.BarcodeFormat.RSS_14],[me.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[me.UPC_A,gt.BarcodeFormat.UPC_A],[me.UPC_E,gt.BarcodeFormat.UPC_E],[me.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Qb)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(gt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new gt.MultiFormatReader(this.verbose,this.hints),i=new gt.HTMLCanvasElementLuminanceSource(e),o=new gt.BinaryBitmap(new gt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:lx.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Jb=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})},eC=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(x){return function(v){return m([x,v])}}function m(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Ig=function(){function t(e,n,i){if(this.formatMap=new Map([[me.QR_CODE,"qr_code"],[me.AZTEC,"aztec"],[me.CODABAR,"codabar"],[me.CODE_39,"code_39"],[me.CODE_93,"code_93"],[me.CODE_128,"code_128"],[me.DATA_MATRIX,"data_matrix"],[me.ITF,"itf"],[me.EAN_13,"ean_13"],[me.EAN_8,"ean_8"],[me.PDF_417,"pdf417"],[me.UPC_A,"upc_a"],[me.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Jb(this,void 0,void 0,function(){var n,i;return eC(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:lx.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Ng=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})},kg=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(x){return function(v){return m([x,v])}}function m(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},tC=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Ig.isSupported()?(this.primaryDecoder=new Ig(e,i,o),this.secondaryDecoder=new Tg(e,i,o)):this.primaryDecoder=new Tg(e,i,o)}return t.prototype.decodeAsync=function(e){return Ng(this,void 0,void 0,function(){var n;return kg(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Ng(this,void 0,void 0,function(){var n,i;return kg(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Bf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),pc=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})},mc=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(x){return function(v){return m([x,v])}}function m(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},ux=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),nC=function(t){Bf(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(ux),rC=function(t){Bf(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(nC),iC=function(t){Bf(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(ux),sC=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new rC(this.track)},t.prototype.torchFeature=function(){return new iC(this.track)},t}(),oC=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return pc(this,void 0,void 0,function(){var l,f;return mc(this,function(g){switch(g.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return pc(this,void 0,void 0,function(){return mc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(g){e.mediaStream.removeTrack(g),g.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new sC(this.getFirstTrackOrFail())},t}(),aC=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return pc(this,void 0,void 0,function(){return mc(this,function(o){return[2,oC.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return pc(this,void 0,void 0,function(){var n,i;return mc(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),Og=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})},Rg=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(x){return function(v){return m([x,v])}}function m(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},lC=function(){function t(){}return t.failIfNotSupported=function(){return Og(this,void 0,void 0,function(){return Rg(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Og(this,void 0,void 0,function(){return Rg(this,function(n){return[2,aC.create(e)]})})},t}(),cC=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{x(i.next(v))}catch(_){f(_)}}function m(v){try{x(i.throw(v))}catch(_){f(_)}}function x(v){v.done?l(v.value):o(v.value).then(g,m)}x((i=i.apply(t,e||[])).next())})},uC=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(x){return function(v){return m([x,v])}}function m(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(t,n)}catch(v){x=[6,v],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},dC=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ls.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ls.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return cC(this,void 0,void 0,function(){var e,n,i,o,l,f,g;return uC(this,function(m){switch(m.label){case 0:return e=function(x){for(var v=x.getVideoTracks(),_=0,S=v;_<S.length;_++){var T=S[_];T.enabled=!1,T.stop(),x.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),o=[],l=0,f=i;l<f.length;l++)g=f[l],g.kind==="videoinput"&&o.push({id:g.deviceId,label:g.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],g=0,m=l;g<m.length;g++){var x=m[g];x.kind==="video"&&f.push({id:x.id,label:x.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),St;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(St||(St={}));var fC=function(){function t(){this.state=St.NOT_STARTED,this.onGoingTransactionNewState=St.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=St.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=St.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==St.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case St.UNKNOWN:throw"Transition from unknown is not allowed";case St.NOT_STARTED:this.failIfNewStateIs(e,[St.PAUSED]);break;case St.SCANNING:break;case St.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),hC=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===St.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==St.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===St.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===St.PAUSED},t}(),gC=function(){function t(){}return t.create=function(){return new hC(new fC)},t}(),pC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pn=function(t){pC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(qb),mC=function(){function t(e,n){this.logger=n,this.fps=Pn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?cx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ir(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Pg=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Kb(this.verbose),this.qrcode=new tC(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gC.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var g=mC.create(n,this.logger);this.clearElement();var m=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=m,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Pn.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var _=this,S=this.stateManagerProxy.startTransition(St.SCANNING);return new Promise(function(T,L){var M=x?g.videoConstraints:_.createVideoConstraints(e);if(!M){S.cancel(),L("videoConstraints should be defined");return}var H={};(!x||g.aspectRatio)&&(H.aspectRatio=g.aspectRatio);var P={onRenderSurfaceReady:function(I,N){_.setupUi(I,N,g),_.isScanning=!0,_.foreverScan(g,i,f)}};lC.failIfNotSupported().then(function(I){I.create(M).then(function(N){return N.render(l.element,H,P).then(function(F){_.renderedCamera=F,S.execute(),T(null)}).catch(function(F){S.cancel(),L(F)})}).catch(function(N){S.cancel(),L(Ls.errorGettingUserMedia(N))})}).catch(function(I){S.cancel(),L(Ls.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(St.PAUSED),this.showPausedState(),(Ir(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(St.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(St.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Pn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ir(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var g=f.width,m=f.height,x=document.getElementById(i.elementId),v=x.clientWidth?x.clientWidth:Pn.DEFAULT_WIDTH,_=Math.max(x.clientHeight?x.clientHeight:m,Pn.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(g,m,v,_);if(n){var T=i.createCanvasElement(v,_,"qr-canvas-visible");T.style.display="inline-block",x.appendChild(T);var L=T.getContext("2d");if(!L)throw"Unable to get 2d context from canvas";L.canvas.width=v,L.canvas.height=_,L.drawImage(f,0,0,g,m,S.x,S.y,S.width,S.height)}var M=Pn.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(f.width,S.width),P=Math.max(f.height,S.height),I=H+2*M,N=P+2*M,F=i.createCanvasElement(I,N);x.appendChild(F);var $=F.getContext("2d");if(!$)throw"Unable to get 2d context from canvas";$.canvas.width=I,$.canvas.height=N,$.drawImage(f,0,0,g,m,M,M,H,P);try{i.qrcode.decodeRobustlyAsync(F).then(function(z){o(Sg.createFromQrcodeResult(z))}).catch(l)}catch(z){l("QR code parse error, error = ".concat(z))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return dC.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!cx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[me.QR_CODE,me.AZTEC,me.CODABAR,me.CODE_39,me.CODE_93,me.CODE_128,me.DATA_MATRIX,me.MAXICODE,me.ITF,me.EAN_13,me.EAN_8,me.PDF_417,me.RSS_14,me.RSS_EXPANDED,me.UPC_A,me.UPC_E,me.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];Xb(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ir(e))return!0;if(!Ir(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ir(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ir(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),g=function(x){if(x<Pn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pn.MIN_QR_BOX_SIZE,"px.")},m=function(x){return x>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};g(f.width),g(f.height),f.width=m(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=Ir(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:e,height:n},m=f?this.getShadedRegionBounds(e,n,l):g,x=this.createCanvasElement(m.width,m.height),v={willReadFrequently:!0},_=x.getContext("2d",v);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(x),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ls.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Sg.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Ls.codeParseError(o);return n(l,Yb.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,x=this.qrRegion.height*g,v=this.qrRegion.x*f,_=this.qrRegion.y*g;this.context.drawImage(l,v,_,m,x,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(T){!T&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){S()})):S()}).catch(function(T){o.logger.logError("Error happend while scanning context",T),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(L){if(L in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(L,"'")},g=Object.keys(e);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var x=e.facingMode;if(typeof x=="string"){if(f(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(f(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof x;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(l in _)return{deviceId:{exact:_["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof _;throw"Invalid type of 'deviceId' = ".concat(S)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var g=e,m=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Pn.BORDER_SHADER_MATCH_COLOR:Pn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Ir(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,g=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Pn.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var m=5,x=40;this.insertShaderBorders(l,x,m,-m,null,0,!0),this.insertShaderBorders(l,x,m,-m,null,0,!1),this.insertShaderBorders(l,x,m,null,-m,0,!0),this.insertShaderBorders(l,x,m,null,-m,0,!1),this.insertShaderBorders(l,m,x+m,-m,null,-m,!0),this.insertShaderBorders(l,m,x+m,null,-m,-m,!0),this.insertShaderBorders(l,m,x+m,-m,null,-m,!1),this.insertShaderBorders(l,m,x+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,g){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Pn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),o!==null&&(m.style.top="".concat(o,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),g?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Dg;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Dg||(Dg={}));const ws={supabase:Ze.supabase,validateTicket:async t=>await Ze.validateTicket(t),tickets:{getAll:async()=>await Ze.tickets.getAll(),getByQrCode:async t=>await Ze.tickets.getByQrCode(t),create:async t=>await Ze.tickets.create(t),update:async(t,e)=>await Ze.tickets.update(t,e),delete:async t=>await Ze.tickets.delete(t),importBulk:async t=>await Ze.tickets.importBulk(t),count:async()=>await Ze.tickets.count(),clearAll:async()=>await Ze.tickets.clearAll()},scans:{getAll:async()=>await Ze.scans.getAll(),record:async t=>await Ze.scans.record(t),clearAll:async()=>await Ze.scans.clearAll()}};class xC{constructor(){ce.log("TicketDatabase initialized")}async validateTicket(e){try{ce.log("DB: Starting ticket validation for:",e);const n=await ws.tickets.getByQrCode(e);if(!n)return ce.log("DB: Ticket not found"),{valid:!1,message:"Ticket not found"};if(ce.log("DB: Ticket found:",n),n.entriesRemaining===0)return ce.log("DB: No entries remaining"),{valid:!1,message:"No entries remaining - access denied",ticket:n};if(n.entriesRemaining<0)return ce.log("DB: Invalid ticket - negative entries"),{valid:!1,message:"Invalid ticket - negative entries",ticket:n};const i=await ws.tickets.update(e,{entriesRemaining:n.entriesRemaining-1,lastScanned:new Date().toISOString()});return ce.log("DB: Ticket updated successfully:",i),{valid:!0,message:`Access granted - ${i.entriesRemaining} entries remaining`,ticket:i}}catch(n){return ce.error("DB: Error validating ticket:",n),{valid:!1,message:`Error processing scan: ${n.message}`}}}async recordScan(e,n,i){const o={qrCode:e,timestamp:new Date().toISOString(),success:n,message:i};try{ce.log("DB: Recording scan in history"),await ws.scans.record(o),ce.log("DB: Scan recorded successfully")}catch(l){throw ce.error("DB: Error recording scan:",l),new Error(`Could not record scan: ${l.message}`)}}async clearAllData(){try{ce.log("DB: Clearing all data"),await ws.tickets.clearAll(),await ws.scans.clearAll(),ce.log("DB: All data cleared successfully")}catch(e){throw ce.error("DB: Error clearing data:",e),e}}async getTicketsCount(){try{return ce.log("DB: Getting ticket count"),await ws.tickets.count()}catch(e){return ce.error("DB: Error getting ticket count:",e),0}}}const Aa=new xC;var La={},wC=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},dx={},zn={};let jf;const yC=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];zn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};zn.getSymbolTotalCodewords=function(e){return yC[e]};zn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};zn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');jf=e};zn.isKanjiModeEnabled=function(){return typeof jf<"u"};zn.toSJIS=function(e){return jf(e)};var Hc={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})(Hc);function fx(){this.buffer=[],this.length=0}fx.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var vC=fx;function Ba(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ba.prototype.set=function(t,e,n,i){const o=t*this.size+e;this.data[o]=n,i&&(this.reservedBit[o]=!0)};Ba.prototype.get=function(t,e){return this.data[t*this.size+e]};Ba.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ba.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var EC=Ba,hx={};(function(t){const e=zn.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),f=l===145?26:Math.ceil((l-13)/(2*o-2))*2,g=[l-7];for(let m=1;m<o-1;m++)g[m]=g[m-1]-f;return g.push(6),g.reverse()},t.getPositions=function(i){const o=[],l=t.getRowColCoords(i),f=l.length;for(let g=0;g<f;g++)for(let m=0;m<f;m++)g===0&&m===0||g===0&&m===f-1||g===f-1&&m===0||o.push([l[g],l[m]]);return o}})(hx);var gx={};const _C=zn.getSymbolSize,Mg=7;gx.getPositions=function(e){const n=_C(e);return[[0,0],[n-Mg,0],[0,n-Mg]]};var px={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const l=o.size;let f=0,g=0,m=0,x=null,v=null;for(let _=0;_<l;_++){g=m=0,x=v=null;for(let S=0;S<l;S++){let T=o.get(_,S);T===x?g++:(g>=5&&(f+=e.N1+(g-5)),x=T,g=1),T=o.get(S,_),T===v?m++:(m>=5&&(f+=e.N1+(m-5)),v=T,m=1)}g>=5&&(f+=e.N1+(g-5)),m>=5&&(f+=e.N1+(m-5))}return f},t.getPenaltyN2=function(o){const l=o.size;let f=0;for(let g=0;g<l-1;g++)for(let m=0;m<l-1;m++){const x=o.get(g,m)+o.get(g,m+1)+o.get(g+1,m)+o.get(g+1,m+1);(x===4||x===0)&&f++}return f*e.N2},t.getPenaltyN3=function(o){const l=o.size;let f=0,g=0,m=0;for(let x=0;x<l;x++){g=m=0;for(let v=0;v<l;v++)g=g<<1&2047|o.get(x,v),v>=10&&(g===1488||g===93)&&f++,m=m<<1&2047|o.get(v,x),v>=10&&(m===1488||m===93)&&f++}return f*e.N3},t.getPenaltyN4=function(o){let l=0;const f=o.data.length;for(let m=0;m<f;m++)l+=o.data[m];return Math.abs(Math.ceil(l*100/f/5)-10)*e.N4};function n(i,o,l){switch(i){case t.Patterns.PATTERN000:return(o+l)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(o+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return o*l%2+o*l%3===0;case t.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case t.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,l){const f=l.size;for(let g=0;g<f;g++)for(let m=0;m<f;m++)l.isReserved(m,g)||l.xor(m,g,n(o,m,g))},t.getBestMask=function(o,l){const f=Object.keys(t.Patterns).length;let g=0,m=1/0;for(let x=0;x<f;x++){l(x),t.applyMask(x,o);const v=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(x,o),v<m&&(m=v,g=x)}return g}})(px);var Wc={};const ai=Hc,El=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Wc.getBlocksCount=function(e,n){switch(n){case ai.L:return El[(e-1)*4+0];case ai.M:return El[(e-1)*4+1];case ai.Q:return El[(e-1)*4+2];case ai.H:return El[(e-1)*4+3];default:return}};Wc.getTotalCodewordsCount=function(e,n){switch(n){case ai.L:return _l[(e-1)*4+0];case ai.M:return _l[(e-1)*4+1];case ai.Q:return _l[(e-1)*4+2];case ai.H:return _l[(e-1)*4+3];default:return}};var mx={},Gc={};const ia=new Uint8Array(512),xc=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)ia[n]=e,xc[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)ia[n]=ia[n-255]})();Gc.log=function(e){if(e<1)throw new Error("log("+e+")");return xc[e]};Gc.exp=function(e){return ia[e]};Gc.mul=function(e,n){return e===0||n===0?0:ia[xc[e]+xc[n]]};(function(t){const e=Gc;t.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let f=0;f<i.length;f++)for(let g=0;g<o.length;g++)l[f+g]^=e.mul(i[f],o[g]);return l},t.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const f=l[0];for(let m=0;m<o.length;m++)l[m]^=e.mul(o[m],f);let g=0;for(;g<l.length&&l[g]===0;)g++;l=l.slice(g)}return l},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=t.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(mx);const xx=mx;function Ff(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ff.prototype.initialize=function(e){this.degree=e,this.genPoly=xx.generateECPolynomial(this.degree)};Ff.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=xx.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i};var bC=Ff,wx={},Ai={},Uf={};Uf.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Tr={};const yx="[0-9]+",CC="[A-Z $%*+\\-./:]+";let Sa="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Sa=Sa.replace(/u/g,"\\u");const AC="(?:(?![A-Z0-9 $%*+\\-./:]|"+Sa+`)(?:.|[\r
]))+`;Tr.KANJI=new RegExp(Sa,"g");Tr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Tr.BYTE=new RegExp(AC,"g");Tr.NUMERIC=new RegExp(yx,"g");Tr.ALPHANUMERIC=new RegExp(CC,"g");const SC=new RegExp("^"+Sa+"$"),TC=new RegExp("^"+yx+"$"),IC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Tr.testKanji=function(e){return SC.test(e)};Tr.testNumeric=function(e){return TC.test(e)};Tr.testAlphanumeric=function(e){return IC.test(e)};(function(t){const e=Uf,n=Tr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return n.testNumeric(l)?t.NUMERIC:n.testAlphanumeric(l)?t.ALPHANUMERIC:n.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(l,f){if(t.isValid(l))return l;try{return i(l)}catch{return f}}})(Ai);(function(t){const e=zn,n=Wc,i=Hc,o=Ai,l=Uf,f=7973,g=e.getBCHDigit(f);function m(S,T,L){for(let M=1;M<=40;M++)if(T<=t.getCapacity(M,L,S))return M}function x(S,T){return o.getCharCountIndicator(S,T)+4}function v(S,T){let L=0;return S.forEach(function(M){const H=x(M.mode,T);L+=H+M.getBitsLength()}),L}function _(S,T){for(let L=1;L<=40;L++)if(v(S,L)<=t.getCapacity(L,T,o.MIXED))return L}t.from=function(T,L){return l.isValid(T)?parseInt(T,10):L},t.getCapacity=function(T,L,M){if(!l.isValid(T))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=o.BYTE);const H=e.getSymbolTotalCodewords(T),P=n.getTotalCodewordsCount(T,L),I=(H-P)*8;if(M===o.MIXED)return I;const N=I-x(M,T);switch(M){case o.NUMERIC:return Math.floor(N/10*3);case o.ALPHANUMERIC:return Math.floor(N/11*2);case o.KANJI:return Math.floor(N/13);case o.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(T,L){let M;const H=i.from(L,i.M);if(Array.isArray(T)){if(T.length>1)return _(T,H);if(T.length===0)return 1;M=T[0]}else M=T;return m(M.mode,M.getLength(),H)},t.getEncodedBits=function(T){if(!l.isValid(T)||T<7)throw new Error("Invalid QR Code version");let L=T<<12;for(;e.getBCHDigit(L)-g>=0;)L^=f<<e.getBCHDigit(L)-g;return T<<12|L}})(wx);var vx={};const b0=zn,Ex=1335,NC=21522,Lg=b0.getBCHDigit(Ex);vx.getEncodedBits=function(e,n){const i=e.bit<<3|n;let o=i<<10;for(;b0.getBCHDigit(o)-Lg>=0;)o^=Ex<<b0.getBCHDigit(o)-Lg;return(i<<10|o)^NC};var _x={};const kC=Ai;function Js(t){this.mode=kC.NUMERIC,this.data=t.toString()}Js.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Js.prototype.getLength=function(){return this.data.length};Js.prototype.getBitsLength=function(){return Js.getBitsLength(this.data.length)};Js.prototype.write=function(e){let n,i,o;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),o=parseInt(i,10),e.put(o,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),o=parseInt(i,10),e.put(o,l*3+1))};var OC=Js;const RC=Ai,id=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function eo(t){this.mode=RC.ALPHANUMERIC,this.data=t}eo.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};eo.prototype.getLength=function(){return this.data.length};eo.prototype.getBitsLength=function(){return eo.getBitsLength(this.data.length)};eo.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=id.indexOf(this.data[n])*45;i+=id.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(id.indexOf(this.data[n]),6)};var PC=eo;const DC=Ai;function to(t){this.mode=DC.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}to.getBitsLength=function(e){return e*8};to.prototype.getLength=function(){return this.data.length};to.prototype.getBitsLength=function(){return to.getBitsLength(this.data.length)};to.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var MC=to;const LC=Ai,BC=zn;function no(t){this.mode=LC.KANJI,this.data=t}no.getBitsLength=function(e){return e*13};no.prototype.getLength=function(){return this.data.length};no.prototype.getBitsLength=function(){return no.getBitsLength(this.data.length)};no.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=BC.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var jC=no,bx={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,o){var l={},f={};f[i]=0;var g=e.PriorityQueue.make();g.push(i,0);for(var m,x,v,_,S,T,L,M,H;!g.empty();){m=g.pop(),x=m.value,_=m.cost,S=n[x]||{};for(v in S)S.hasOwnProperty(v)&&(T=S[v],L=_+T,M=f[v],H=typeof f[v]>"u",(H||M>L)&&(f[v]=L,g.push(v,L),l[v]=x))}if(typeof o<"u"&&typeof f[o]>"u"){var P=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(P)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var o=[],l=i;l;)o.push(l),n[l],l=n[l];return o.reverse(),o},find_path:function(n,i,o){var l=e.single_source_shortest_paths(n,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,o={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=n.sorter||i.default_sorter,o},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var o={value:n,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(bx);var FC=bx.exports;(function(t){const e=Ai,n=OC,i=PC,o=MC,l=jC,f=Tr,g=zn,m=FC;function x(P){return unescape(encodeURIComponent(P)).length}function v(P,I,N){const F=[];let $;for(;($=P.exec(N))!==null;)F.push({data:$[0],index:$.index,mode:I,length:$[0].length});return F}function _(P){const I=v(f.NUMERIC,e.NUMERIC,P),N=v(f.ALPHANUMERIC,e.ALPHANUMERIC,P);let F,$;return g.isKanjiModeEnabled()?(F=v(f.BYTE,e.BYTE,P),$=v(f.KANJI,e.KANJI,P)):(F=v(f.BYTE_KANJI,e.BYTE,P),$=[]),I.concat(N,F,$).sort(function(B,D){return B.index-D.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function S(P,I){switch(I){case e.NUMERIC:return n.getBitsLength(P);case e.ALPHANUMERIC:return i.getBitsLength(P);case e.KANJI:return l.getBitsLength(P);case e.BYTE:return o.getBitsLength(P)}}function T(P){return P.reduce(function(I,N){const F=I.length-1>=0?I[I.length-1]:null;return F&&F.mode===N.mode?(I[I.length-1].data+=N.data,I):(I.push(N),I)},[])}function L(P){const I=[];for(let N=0;N<P.length;N++){const F=P[N];switch(F.mode){case e.NUMERIC:I.push([F,{data:F.data,mode:e.ALPHANUMERIC,length:F.length},{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.ALPHANUMERIC:I.push([F,{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.KANJI:I.push([F,{data:F.data,mode:e.BYTE,length:x(F.data)}]);break;case e.BYTE:I.push([{data:F.data,mode:e.BYTE,length:x(F.data)}])}}return I}function M(P,I){const N={},F={start:{}};let $=["start"];for(let z=0;z<P.length;z++){const B=P[z],D=[];for(let O=0;O<B.length;O++){const G=B[O],te=""+z+O;D.push(te),N[te]={node:G,lastCount:0},F[te]={};for(let Z=0;Z<$.length;Z++){const ae=$[Z];N[ae]&&N[ae].node.mode===G.mode?(F[ae][te]=S(N[ae].lastCount+G.length,G.mode)-S(N[ae].lastCount,G.mode),N[ae].lastCount+=G.length):(N[ae]&&(N[ae].lastCount=G.length),F[ae][te]=S(G.length,G.mode)+4+e.getCharCountIndicator(G.mode,I))}}$=D}for(let z=0;z<$.length;z++)F[$[z]].end=0;return{map:F,table:N}}function H(P,I){let N;const F=e.getBestModeForData(P);if(N=e.from(I,F),N!==e.BYTE&&N.bit<F.bit)throw new Error('"'+P+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(F));switch(N===e.KANJI&&!g.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new n(P);case e.ALPHANUMERIC:return new i(P);case e.KANJI:return new l(P);case e.BYTE:return new o(P)}}t.fromArray=function(I){return I.reduce(function(N,F){return typeof F=="string"?N.push(H(F,null)):F.data&&N.push(H(F.data,F.mode)),N},[])},t.fromString=function(I,N){const F=_(I,g.isKanjiModeEnabled()),$=L(F),z=M($,N),B=m.find_path(z.map,"start","end"),D=[];for(let O=1;O<B.length-1;O++)D.push(z.table[B[O]].node);return t.fromArray(T(D))},t.rawSplit=function(I){return t.fromArray(_(I,g.isKanjiModeEnabled()))}})(_x);const Xc=zn,sd=Hc,UC=vC,$C=EC,zC=hx,VC=gx,C0=px,A0=Wc,HC=bC,wc=wx,WC=vx,GC=Ai,od=_x;function XC(t,e){const n=t.size,i=VC.getPositions(e);for(let o=0;o<i.length;o++){const l=i[o][0],f=i[o][1];for(let g=-1;g<=7;g++)if(!(l+g<=-1||n<=l+g))for(let m=-1;m<=7;m++)f+m<=-1||n<=f+m||(g>=0&&g<=6&&(m===0||m===6)||m>=0&&m<=6&&(g===0||g===6)||g>=2&&g<=4&&m>=2&&m<=4?t.set(l+g,f+m,!0,!0):t.set(l+g,f+m,!1,!0))}}function qC(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function YC(t,e){const n=zC.getPositions(e);for(let i=0;i<n.length;i++){const o=n[i][0],l=n[i][1];for(let f=-2;f<=2;f++)for(let g=-2;g<=2;g++)f===-2||f===2||g===-2||g===2||f===0&&g===0?t.set(o+f,l+g,!0,!0):t.set(o+f,l+g,!1,!0)}}function KC(t,e){const n=t.size,i=wc.getEncodedBits(e);let o,l,f;for(let g=0;g<18;g++)o=Math.floor(g/3),l=g%3+n-8-3,f=(i>>g&1)===1,t.set(o,l,f,!0),t.set(l,o,f,!0)}function ad(t,e,n){const i=t.size,o=WC.getEncodedBits(e,n);let l,f;for(l=0;l<15;l++)f=(o>>l&1)===1,l<6?t.set(l,8,f,!0):l<8?t.set(l+1,8,f,!0):t.set(i-15+l,8,f,!0),l<8?t.set(8,i-l-1,f,!0):l<9?t.set(8,15-l-1+1,f,!0):t.set(8,15-l-1,f,!0);t.set(i-8,8,1,!0)}function ZC(t,e){const n=t.size;let i=-1,o=n-1,l=7,f=0;for(let g=n-1;g>0;g-=2)for(g===6&&g--;;){for(let m=0;m<2;m++)if(!t.isReserved(o,g-m)){let x=!1;f<e.length&&(x=(e[f]>>>l&1)===1),t.set(o,g-m,x),l--,l===-1&&(f++,l=7)}if(o+=i,o<0||n<=o){o-=i,i=-i;break}}}function QC(t,e,n){const i=new UC;n.forEach(function(m){i.put(m.mode.bit,4),i.put(m.getLength(),GC.getCharCountIndicator(m.mode,t)),m.write(i)});const o=Xc.getSymbolTotalCodewords(t),l=A0.getTotalCodewordsCount(t,e),f=(o-l)*8;for(i.getLengthInBits()+4<=f&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const g=(f-i.getLengthInBits())/8;for(let m=0;m<g;m++)i.put(m%2?17:236,8);return JC(i,t,e)}function JC(t,e,n){const i=Xc.getSymbolTotalCodewords(e),o=A0.getTotalCodewordsCount(e,n),l=i-o,f=A0.getBlocksCount(e,n),g=i%f,m=f-g,x=Math.floor(i/f),v=Math.floor(l/f),_=v+1,S=x-v,T=new HC(S);let L=0;const M=new Array(f),H=new Array(f);let P=0;const I=new Uint8Array(t.buffer);for(let B=0;B<f;B++){const D=B<m?v:_;M[B]=I.slice(L,L+D),H[B]=T.encode(M[B]),L+=D,P=Math.max(P,D)}const N=new Uint8Array(i);let F=0,$,z;for($=0;$<P;$++)for(z=0;z<f;z++)$<M[z].length&&(N[F++]=M[z][$]);for($=0;$<S;$++)for(z=0;z<f;z++)N[F++]=H[z][$];return N}function eA(t,e,n,i){let o;if(Array.isArray(t))o=od.fromArray(t);else if(typeof t=="string"){let x=e;if(!x){const v=od.rawSplit(t);x=wc.getBestVersionForData(v,n)}o=od.fromString(t,x||40)}else throw new Error("Invalid data");const l=wc.getBestVersionForData(o,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=l;else if(e<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const f=QC(e,n,o),g=Xc.getSymbolSize(e),m=new $C(g);return XC(m,e),qC(m),YC(m,e),ad(m,n,0),e>=7&&KC(m,e),ZC(m,f),isNaN(i)&&(i=C0.getBestMask(m,ad.bind(null,m,n))),C0.applyMask(i,m),ad(m,n,i),{modules:m,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}dx.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=sd.M,o,l;return typeof n<"u"&&(i=sd.from(n.errorCorrectionLevel,sd.M),o=wc.from(n.version),l=C0.from(n.maskPattern),n.toSJISFunc&&Xc.setToSJISFunction(n.toSJISFunc)),eA(e,o,i,l)};var Cx={},$f={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:l,scale:l?4:f,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const l=t.getScale(i,o);return Math.floor((i+o.margin*2)*l)},t.qrToImageData=function(i,o,l){const f=o.modules.size,g=o.modules.data,m=t.getScale(f,l),x=Math.floor((f+l.margin*2)*m),v=l.margin*m,_=[l.color.light,l.color.dark];for(let S=0;S<x;S++)for(let T=0;T<x;T++){let L=(S*x+T)*4,M=l.color.light;if(S>=v&&T>=v&&S<x-v&&T<x-v){const H=Math.floor((S-v)/m),P=Math.floor((T-v)/m);M=_[g[H*f+P]?1:0]}i[L++]=M.r,i[L++]=M.g,i[L++]=M.b,i[L]=M.a}}})($f);(function(t){const e=$f;function n(o,l,f){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,f,g){let m=g,x=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(x=i()),m=e.getOptions(m);const v=e.getImageWidth(l.modules.size,m),_=x.getContext("2d"),S=_.createImageData(v,v);return e.qrToImageData(S.data,l,m),n(_,x,v),_.putImageData(S,0,0),x},t.renderToDataURL=function(l,f,g){let m=g;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={});const x=t.render(l,f,m),v=m.type||"image/png",_=m.rendererOpts||{};return x.toDataURL(v,_.quality)}})(Cx);var Ax={};const tA=$f;function Bg(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function ld(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function nA(t,e,n){let i="",o=0,l=!1,f=0;for(let g=0;g<t.length;g++){const m=Math.floor(g%e),x=Math.floor(g/e);!m&&!l&&(l=!0),t[g]?(f++,g>0&&m>0&&t[g-1]||(i+=l?ld("M",m+n,.5+x+n):ld("m",o,0),o=0,l=!1),m+1<e&&t[g+1]||(i+=ld("h",f),f=0)):o++}return i}Ax.render=function(e,n,i){const o=tA.getOptions(n),l=e.modules.size,f=e.modules.data,g=l+o.margin*2,m=o.color.light.a?"<path "+Bg(o.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",x="<path "+Bg(o.color.dark,"stroke")+' d="'+nA(f,l,o.margin)+'"/>',v='viewBox="0 0 '+g+" "+g+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+v+' shape-rendering="crispEdges">'+m+x+`</svg>
`;return typeof i=="function"&&i(null,S),S};const rA=wC,S0=dx,Sx=Cx,iA=Ax;function zf(t,e,n,i,o){const l=[].slice.call(arguments,1),f=l.length,g=typeof l[f-1]=="function";if(!g&&!rA())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(o=n,n=e,e=i=void 0):f===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=n,n=e,e=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(n=e,e=i=void 0):f===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(m,x){try{const v=S0.create(n,i);m(t(v,e,i))}catch(v){x(v)}})}try{const m=S0.create(n,i);o(null,t(m,e,i))}catch(m){o(m)}}La.create=S0.create;La.toCanvas=zf.bind(null,Sx.render);La.toDataURL=zf.bind(null,Sx.renderToDataURL);La.toString=zf.bind(null,function(t,e,n){return iA.render(t,n)});var Vf={},qc={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});function sA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var oA=function t(e,n){sA(this,t),this.data=e,this.text=n.text||e,this.options=n};gn.default=oA;Object.defineProperty(qc,"__esModule",{value:!0});qc.CODE39=void 0;var aA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),lA=gn,cA=uA(lA);function uA(t){return t&&t.__esModule?t:{default:t}}function dA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var gA=function(t){hA(e,t);function e(n,i){return dA(this,e),n=n.toUpperCase(),i.mod43&&(n+=xA(wA(n))),fA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return aA(e,[{key:"encode",value:function(){for(var i=cd("*"),o=0;o<this.data.length;o++)i+=cd(this.data[o])+"0";return i+=cd("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(cA.default),Tx=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],pA=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function cd(t){return mA(Ix(t))}function mA(t){return pA[t].toString(2)}function xA(t){return Tx[t]}function Ix(t){return Tx.indexOf(t)}function wA(t){for(var e=0,n=0;n<t.length;n++)e+=Ix(t[n]);return e=e%43,e}qc.CODE39=gA;var br={},Hf={},fo={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});var Mo;function ud(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nx=mt.SET_A=0,kx=mt.SET_B=1,Ox=mt.SET_C=2;mt.SHIFT=98;var yA=mt.START_A=103,vA=mt.START_B=104,EA=mt.START_C=105;mt.MODULO=103;mt.STOP=106;mt.FNC1=207;mt.SET_BY_CODE=(Mo={},ud(Mo,yA,Nx),ud(Mo,vA,kx),ud(Mo,EA,Ox),Mo);mt.SWAP={101:Nx,100:kx,99:Ox};mt.A_START_CHAR="";mt.B_START_CHAR="";mt.C_START_CHAR="";mt.A_CHARS="[\0-_-]";mt.B_CHARS="[ --]";mt.C_CHARS="(*[0-9]{2}*)";mt.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(fo,"__esModule",{value:!0});var _A=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),bA=gn,CA=AA(bA),On=mt;function AA(t){return t&&t.__esModule?t:{default:t}}function SA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function IA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var NA=function(t){IA(e,t);function e(n,i){SA(this,e);var o=TA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return _A(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=On.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(On.FNC1);var f=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+f.result+e.getBar((f.checksum+o)%On.MODULO)+e.getBar(On.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return On.BARS[i]?On.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===On.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===On.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var f=void 0,g=void 0;if(i[0]>=200){g=i.shift()-105;var m=On.SWAP[g];m!==void 0?f=e.next(i,o+1,m):((l===On.SET_A||l===On.SET_B)&&g===On.SHIFT&&(i[0]=l===On.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),f=e.next(i,o+1,l))}else g=e.correctIndex(i,l),f=e.next(i,o+1,l);var x=e.getBar(g),v=g*o;return{result:x+f.result,checksum:v+f.checksum}}}]),e}(CA.default);fo.default=NA;var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});var xi=mt,Rx=function(e){return e.match(new RegExp("^"+xi.A_CHARS+"*"))[0].length},Px=function(e){return e.match(new RegExp("^"+xi.B_CHARS+"*"))[0].length},Dx=function(e){return e.match(new RegExp("^"+xi.C_CHARS+"*"))[0]};function Gf(t,e){var n=e?xi.A_CHARS:xi.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+""+Mx(t.substring(i[1].length));var o=t.match(new RegExp("^"+n+"+"))[0];return o.length===t.length?t:o+String.fromCharCode(e?205:206)+Gf(t.substring(o.length),!e)}function Mx(t){var e=Dx(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var i=Rx(t)>=Px(t);return e+String.fromCharCode(i?206:205)+Gf(t,i)}Wf.default=function(t){var e=void 0,n=Dx(t).length;if(n>=2)e=xi.C_START_CHAR+Mx(t);else{var i=Rx(t)>Px(t);e=(i?xi.A_START_CHAR:xi.B_START_CHAR)+Gf(t,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return""+l})};Object.defineProperty(Hf,"__esModule",{value:!0});var kA=fo,OA=Lx(kA),RA=Wf,PA=Lx(RA);function Lx(t){return t&&t.__esModule?t:{default:t}}function DA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function MA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var LA=function(t){MA(e,t);function e(n,i){if(DA(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=dd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,PA.default)(n),i));else var o=dd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return dd(o)}return e}(OA.default);Hf.default=LA;var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});var BA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),jA=fo,FA=UA(jA),jg=mt;function UA(t){return t&&t.__esModule?t:{default:t}}function $A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function VA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var HA=function(t){VA(e,t);function e(n,i){return $A(this,e),zA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,jg.A_START_CHAR+n,i))}return BA(e,[{key:"valid",value:function(){return new RegExp("^"+jg.A_CHARS+"+$").test(this.data)}}]),e}(FA.default);Xf.default=HA;var qf={};Object.defineProperty(qf,"__esModule",{value:!0});var WA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),GA=fo,XA=qA(GA),Fg=mt;function qA(t){return t&&t.__esModule?t:{default:t}}function YA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QA=function(t){ZA(e,t);function e(n,i){return YA(this,e),KA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Fg.B_START_CHAR+n,i))}return WA(e,[{key:"valid",value:function(){return new RegExp("^"+Fg.B_CHARS+"+$").test(this.data)}}]),e}(XA.default);qf.default=QA;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});var JA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),eS=fo,tS=nS(eS),Ug=mt;function nS(t){return t&&t.__esModule?t:{default:t}}function rS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oS=function(t){sS(e,t);function e(n,i){return rS(this,e),iS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Ug.C_START_CHAR+n,i))}return JA(e,[{key:"valid",value:function(){return new RegExp("^"+Ug.C_CHARS+"+$").test(this.data)}}]),e}(tS.default);Yf.default=oS;Object.defineProperty(br,"__esModule",{value:!0});br.CODE128C=br.CODE128B=br.CODE128A=br.CODE128=void 0;var aS=Hf,lS=Yc(aS),cS=Xf,uS=Yc(cS),dS=qf,fS=Yc(dS),hS=Yf,gS=Yc(hS);function Yc(t){return t&&t.__esModule?t:{default:t}}br.CODE128=lS.default;br.CODE128A=uS.default;br.CODE128B=fS.default;br.CODE128C=gS.default;var Cn={},Kf={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.SIDE_BIN="101";tr.MIDDLE_BIN="01010";tr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};tr.EAN2_STRUCTURE=["LL","LG","GL","GG"];tr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];tr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Kc={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});var pS=tr,mS=function(e,n,i){var o=e.split("").map(function(f,g){return pS.BINARIES[n[g]]}).map(function(f,g){return f?f[e[g]]:""});if(i){var l=e.length-1;o=o.map(function(f,g){return g<l?f+i:f})}return o.join("")};ns.default=mS;Object.defineProperty(Kc,"__esModule",{value:!0});var xS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ys=tr,wS=ns,$g=Bx(wS),yS=gn,vS=Bx(yS);function Bx(t){return t&&t.__esModule?t:{default:t}}function ES(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _S(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var CS=function(t){bS(e,t);function e(n,i){ES(this,e);var o=_S(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return xS(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,$g.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,$g.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:ys.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:ys.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:ys.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[ys.SIDE_BIN,this.leftEncode(),ys.MIDDLE_BIN,this.rightEncode(),ys.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(vS.default);Kc.default=CS;Object.defineProperty(Kf,"__esModule",{value:!0});var AS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Lo=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}else{if("value"in o)return o.value;var f=o.get;return f===void 0?void 0:f.call(i)}},SS=tr,TS=Kc,IS=NS(TS);function NS(t){return t&&t.__esModule?t:{default:t}}function kS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function RS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zg=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},PS=function(t){RS(e,t);function e(n,i){kS(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=zg(n));var o=OS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return AS(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===zg(this.data)}},{key:"leftText",value:function(){return Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=SS.EAN13_STRUCTURE[this.data[0]];return Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(IS.default);Kf.default=PS;var Zf={};Object.defineProperty(Zf,"__esModule",{value:!0});var DS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),bl=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}else{if("value"in o)return o.value;var f=o.get;return f===void 0?void 0:f.call(i)}},MS=Kc,LS=BS(MS);function BS(t){return t&&t.__esModule?t:{default:t}}function jS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function US(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vg=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},$S=function(t){US(e,t);function e(n,i){return jS(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=Vg(n)),FS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return DS(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Vg(this.data)}},{key:"leftText",value:function(){return bl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return bl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return bl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return bl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(LS.default);Zf.default=$S;var Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});var zS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),VS=tr,HS=ns,WS=jx(HS),GS=gn,XS=jx(GS);function jx(t){return t&&t.__esModule?t:{default:t}}function qS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ZS=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},QS=function(t){KS(e,t);function e(n,i){return qS(this,e),YS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return zS(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=VS.EAN5_STRUCTURE[ZS(this.data)];return{data:"1011"+(0,WS.default)(this.data,i,"01"),text:this.text}}}]),e}(XS.default);Qf.default=QS;var Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});var JS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),e4=tr,t4=ns,n4=Fx(t4),r4=gn,i4=Fx(r4);function Fx(t){return t&&t.__esModule?t:{default:t}}function s4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l4=function(t){a4(e,t);function e(n,i){return s4(this,e),o4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return JS(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=e4.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n4.default)(this.data,i,"01"),text:this.text}}}]),e}(i4.default);Jf.default=l4;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});var c4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();ja.checksum=T0;var u4=ns,vs=Ux(u4),d4=gn,f4=Ux(d4);function Ux(t){return t&&t.__esModule?t:{default:t}}function h4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function p4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m4=function(t){p4(e,t);function e(n,i){h4(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=T0(n));var o=g4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return c4(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==T0(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,vs.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,vs.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,vs.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,vs.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,vs.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,vs.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(f4.default);function T0(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}ja.default=m4;var eh={};Object.defineProperty(eh,"__esModule",{value:!0});var x4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),w4=ns,y4=$x(w4),v4=gn,E4=$x(v4),_4=ja;function $x(t){return t&&t.__esModule?t:{default:t}}function b4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function C4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var A4=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],S4=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],T4=function(t){C4(e,t);function e(n,i){b4(this,e);var o=fd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=Hg(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=Hg(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return fd(o);else return fd(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return x4(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=S4[parseInt(o)][parseInt(i)];return(0,y4.default)(this.middleDigits,l)}}]),e}(E4.default);function Hg(t,e){for(var n=parseInt(t[t.length-1]),i=A4[n],o="",l=0,f=0;f<i.length;f++){var g=i[f];g==="X"?o+=t[l++]:o+=g}return o=""+e+o,""+o+(0,_4.checksum)(o)}eh.default=T4;Object.defineProperty(Cn,"__esModule",{value:!0});Cn.UPCE=Cn.UPC=Cn.EAN2=Cn.EAN5=Cn.EAN8=Cn.EAN13=void 0;var I4=Kf,N4=ho(I4),k4=Zf,O4=ho(k4),R4=Qf,P4=ho(R4),D4=Jf,M4=ho(D4),L4=ja,B4=ho(L4),j4=eh,F4=ho(j4);function ho(t){return t&&t.__esModule?t:{default:t}}Cn.EAN13=N4.default;Cn.EAN8=O4.default;Cn.EAN5=P4.default;Cn.EAN2=M4.default;Cn.UPC=B4.default;Cn.UPCE=F4.default;var ro={},Zc={},Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.START_BIN="1010";Fa.END_BIN="11101";Fa.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Zc,"__esModule",{value:!0});var U4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Cl=Fa,$4=gn,z4=V4($4);function V4(t){return t&&t.__esModule?t:{default:t}}function H4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function G4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var X4=function(t){G4(e,t);function e(){return H4(this,e),W4(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return U4(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:Cl.START_BIN+o+Cl.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=Cl.BINARIES[i[1]];return Cl.BINARIES[i[0]].split("").map(function(l,f){return(l==="1"?"111":"1")+(o[f]==="1"?"000":"0")}).join("")}}]),e}(z4.default);Zc.default=X4;var th={};Object.defineProperty(th,"__esModule",{value:!0});var q4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Y4=Zc,K4=Z4(Y4);function Z4(t){return t&&t.__esModule?t:{default:t}}function Q4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function e8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Wg=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},t8=function(t){e8(e,t);function e(n,i){return Q4(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=Wg(n)),J4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return q4(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Wg(this.data)}}]),e}(K4.default);th.default=t8;Object.defineProperty(ro,"__esModule",{value:!0});ro.ITF14=ro.ITF=void 0;var n8=Zc,r8=zx(n8),i8=th,s8=zx(i8);function zx(t){return t&&t.__esModule?t:{default:t}}ro.ITF=r8.default;ro.ITF14=s8.default;var Kn={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});var o8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a8=gn,l8=c8(a8);function c8(t){return t&&t.__esModule?t:{default:t}}function u8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function f8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h8=function(t){f8(e,t);function e(n,i){return u8(this,e),d8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return o8(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),f=l.toString(2);f=g8(f,4-f.length);for(var g=0;g<f.length;g++)i+=f[g]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(l8.default);function g8(t,e){for(var n=0;n<e;n++)t="0"+t;return t}rs.default=h8;var nh={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.mod10=p8;is.mod11=m8;function p8(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);(n+t.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function m8(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var o=parseInt(t[t.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(nh,"__esModule",{value:!0});var x8=rs,w8=v8(x8),y8=is;function v8(t){return t&&t.__esModule?t:{default:t}}function E8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function b8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var C8=function(t){b8(e,t);function e(n,i){return E8(this,e),_8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,y8.mod10)(n),i))}return e}(w8.default);nh.default=C8;var rh={};Object.defineProperty(rh,"__esModule",{value:!0});var A8=rs,S8=I8(A8),T8=is;function I8(t){return t&&t.__esModule?t:{default:t}}function N8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function O8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var R8=function(t){O8(e,t);function e(n,i){return N8(this,e),k8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,T8.mod11)(n),i))}return e}(S8.default);rh.default=R8;var ih={};Object.defineProperty(ih,"__esModule",{value:!0});var P8=rs,D8=M8(P8),Gg=is;function M8(t){return t&&t.__esModule?t:{default:t}}function L8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function j8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var F8=function(t){j8(e,t);function e(n,i){return L8(this,e),n+=(0,Gg.mod10)(n),n+=(0,Gg.mod10)(n),B8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(D8.default);ih.default=F8;var sh={};Object.defineProperty(sh,"__esModule",{value:!0});var U8=rs,$8=z8(U8),Xg=is;function z8(t){return t&&t.__esModule?t:{default:t}}function V8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function W8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var G8=function(t){W8(e,t);function e(n,i){return V8(this,e),n+=(0,Xg.mod11)(n),n+=(0,Xg.mod10)(n),H8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}($8.default);sh.default=G8;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.MSI1110=Kn.MSI1010=Kn.MSI11=Kn.MSI10=Kn.MSI=void 0;var X8=rs,q8=Ua(X8),Y8=nh,K8=Ua(Y8),Z8=rh,Q8=Ua(Z8),J8=ih,eT=Ua(J8),tT=sh,nT=Ua(tT);function Ua(t){return t&&t.__esModule?t:{default:t}}Kn.MSI=q8.default;Kn.MSI10=K8.default;Kn.MSI11=Q8.default;Kn.MSI1010=eT.default;Kn.MSI1110=nT.default;var Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.pharmacode=void 0;var rT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),iT=gn,sT=oT(iT);function oT(t){return t&&t.__esModule?t:{default:t}}function aT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uT=function(t){cT(e,t);function e(n,i){aT(this,e);var o=lT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return rT(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(sT.default);Qc.pharmacode=uT;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.codabar=void 0;var dT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),fT=gn,hT=gT(fT);function gT(t){return t&&t.__esModule?t:{default:t}}function pT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wT=function(t){xT(e,t);function e(n,i){pT(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=mT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return dT(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(hT.default);Jc.codabar=wT;var io={},eu={},$a={};Object.defineProperty($a,"__esModule",{value:!0});$a.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];$a.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];$a.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(eu,"__esModule",{value:!0});var yT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Al=$a,vT=gn,ET=_T(vT);function _T(t){return t&&t.__esModule?t:{default:t}}function bT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function AT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ST=function(t){AT(e,t);function e(n,i){return bT(this,e),CT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return yT(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.data.split("").flatMap(function(g){return Al.MULTI_SYMBOLS[g]||g}),o=i.map(function(g){return e.getEncoding(g)}).join(""),l=e.checksum(i,20),f=e.checksum(i.concat(l),15);return{text:this.text,data:e.getEncoding("")+o+e.getEncoding(l)+e.getEncoding(f)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(i){return Al.BINARIES[e.symbolValue(i)]}},{key:"getSymbol",value:function(i){return Al.SYMBOLS[i]}},{key:"symbolValue",value:function(i){return Al.SYMBOLS.indexOf(i)}},{key:"checksum",value:function(i,o){var l=i.slice().reverse().reduce(function(f,g,m){var x=m%o+1;return f+e.symbolValue(g)*x},0);return e.getSymbol(l%47)}}]),e}(ET.default);eu.default=ST;var oh={};Object.defineProperty(oh,"__esModule",{value:!0});var TT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),IT=eu,NT=kT(IT);function kT(t){return t&&t.__esModule?t:{default:t}}function OT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function PT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DT=function(t){PT(e,t);function e(n,i){return OT(this,e),RT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return TT(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(NT.default);oh.default=DT;Object.defineProperty(io,"__esModule",{value:!0});io.CODE93FullASCII=io.CODE93=void 0;var MT=eu,LT=Vx(MT),BT=oh,jT=Vx(BT);function Vx(t){return t&&t.__esModule?t:{default:t}}io.CODE93=LT.default;io.CODE93FullASCII=jT.default;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.GenericBarcode=void 0;var FT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),UT=gn,$T=zT(UT);function zT(t){return t&&t.__esModule?t:{default:t}}function VT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function WT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var GT=function(t){WT(e,t);function e(n,i){return VT(this,e),HT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return FT(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}($T.default);tu.GenericBarcode=GT;Object.defineProperty(Vf,"__esModule",{value:!0});var XT=qc,Sl=br,Es=Cn,qg=ro,Bo=Kn,qT=Qc,YT=Jc,Yg=io,KT=tu;Vf.default={CODE39:XT.CODE39,CODE128:Sl.CODE128,CODE128A:Sl.CODE128A,CODE128B:Sl.CODE128B,CODE128C:Sl.CODE128C,EAN13:Es.EAN13,EAN8:Es.EAN8,EAN5:Es.EAN5,EAN2:Es.EAN2,UPC:Es.UPC,UPCE:Es.UPCE,ITF14:qg.ITF14,ITF:qg.ITF,MSI:Bo.MSI,MSI10:Bo.MSI10,MSI11:Bo.MSI11,MSI1010:Bo.MSI1010,MSI1110:Bo.MSI1110,pharmacode:qT.pharmacode,codabar:YT.codabar,CODE93:Yg.CODE93,CODE93FullASCII:Yg.CODE93FullASCII,GenericBarcode:KT.GenericBarcode};var go={};Object.defineProperty(go,"__esModule",{value:!0});var ZT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};go.default=function(t,e){return ZT({},t,e)};var ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.default=QT;function QT(t){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(t),e}var lh={};Object.defineProperty(lh,"__esModule",{value:!0});lh.default=JT;function JT(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var ch={},uh={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.default=eI;function eI(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});var tI={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};ru.default=tI;Object.defineProperty(uh,"__esModule",{value:!0});var nI=nu,rI=Hx(nI),iI=ru,Kg=Hx(iI);function Hx(t){return t&&t.__esModule?t:{default:t}}function sI(t){var e={};for(var n in Kg.default)Kg.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,rI.default)(e),e}uh.default=sI;var dh={},fh={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.getTotalWidthOfEncodings=Mn.calculateEncodingAttributes=Mn.getBarcodePadding=Mn.getEncodingHeight=Mn.getMaximumHeightOfEncodings=void 0;var oI=go,aI=lI(oI);function lI(t){return t&&t.__esModule?t:{default:t}}function Wx(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Gx(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function cI(t,e,n){for(var i=0;i<t.length;i++){var o=t[i],l=(0,aI.default)(e,o.options),f;l.displayValue?f=fI(o.text,l,n):f=0;var g=o.data.length*l.width;o.width=Math.ceil(Math.max(f,g)),o.height=Wx(o,l),o.barcodePadding=Gx(f,g,l)}}function uI(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function dI(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function fI(t,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(t);if(!o)return 0;var l=o.width;return l}Mn.getMaximumHeightOfEncodings=dI;Mn.getEncodingHeight=Wx;Mn.getBarcodePadding=Gx;Mn.calculateEncodingAttributes=cI;Mn.getTotalWidthOfEncodings=uI;Object.defineProperty(fh,"__esModule",{value:!0});var hI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),gI=go,pI=mI(gI),hd=Mn;function mI(t){return t&&t.__esModule?t:{default:t}}function xI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wI=function(){function t(e,n,i){xI(this,t),this.canvas=e,this.encodings=n,this.options=i}return hI(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,pI.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,hd.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,hd.getTotalWidthOfEncodings)(this.encodings),o=(0,hd.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,f;n.textPosition=="top"?f=n.marginTop+n.fontSize+n.textMargin:f=n.marginTop,o.fillStyle=n.lineColor;for(var g=0;g<l.length;g++){var m=g*n.width+i.barcodePadding;l[g]==="1"?o.fillRect(m,f,n.width,n.height):l[g]&&o.fillRect(m,f,n.width,n.height*l[g])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var f,g;n.textPosition=="top"?g=n.marginTop+n.fontSize-n.textMargin:g=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(f=0,o.textAlign="left"):n.textAlign=="right"?(f=i.width-1,o.textAlign="right"):(f=i.width/2,o.textAlign="center"),o.fillText(i.text,f,g)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),t}();fh.default=wI;var hh={};Object.defineProperty(hh,"__esModule",{value:!0});var yI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),vI=go,EI=_I(vI),gd=Mn;function _I(t){return t&&t.__esModule?t:{default:t}}function bI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tl="http://www.w3.org/2000/svg",CI=function(){function t(e,n,i){bI(this,t),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return yI(t,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,EI.default)(this.options,o.options),f=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(f,l),this.drawSvgBarcode(f,l,o),this.drawSVGText(f,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,gd.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,gd.getTotalWidthOfEncodings)(this.encodings),i=(0,gd.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,f;i.textPosition=="top"?f=i.fontSize+i.textMargin:f=0;for(var g=0,m=0,x=0;x<l.length;x++)m=x*i.width+o.barcodePadding,l[x]==="1"?g++:g>0&&(this.drawRect(m-i.width*g,f,i.width*g,i.height,n),g=0);g>0&&this.drawRect(m-i.width*(g-1),f,i.width*g,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(Tl,"text");if(i.displayValue){var f,g;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?g=i.fontSize-i.textMargin:g=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(f=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(f=o.width-1,l.setAttribute("text-anchor","end")):(f=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",f),l.setAttribute("y",g),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",Tl),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(Tl,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,f){var g=this.document.createElementNS(Tl,"rect");return g.setAttribute("x",n),g.setAttribute("y",i),g.setAttribute("width",o),g.setAttribute("height",l),f.appendChild(g),g}}]),t}();hh.default=CI;var gh={};Object.defineProperty(gh,"__esModule",{value:!0});var AI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function SI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var TI=function(){function t(e,n,i){SI(this,t),this.object=e,this.encodings=n,this.options=i}return AI(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();gh.default=TI;Object.defineProperty(dh,"__esModule",{value:!0});var II=fh,NI=ph(II),kI=hh,OI=ph(kI),RI=gh,PI=ph(RI);function ph(t){return t&&t.__esModule?t:{default:t}}dh.default={CanvasRenderer:NI.default,SVGRenderer:OI.default,ObjectRenderer:PI.default};var po={};Object.defineProperty(po,"__esModule",{value:!0});function mh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function wh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DI=function(t){wh(e,t);function e(n,i){mh(this,e);var o=xh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),MI=function(t){wh(e,t);function e(){mh(this,e);var n=xh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),LI=function(t){wh(e,t);function e(){mh(this,e);var n=xh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);po.InvalidInputException=DI;po.InvalidElementException=MI;po.NoElementException=LI;Object.defineProperty(ch,"__esModule",{value:!0});var BI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jI=uh,I0=Xx(jI),FI=dh,Wo=Xx(FI),UI=po;function Xx(t){return t&&t.__esModule?t:{default:t}}function yh(t){if(typeof t=="string")return $I(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(yh(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return zI(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,I0.default)(t),renderer:Wo.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,I0.default)(t),renderer:Wo.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Wo.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":BI(t))==="object"&&!t.nodeName)return{element:t,renderer:Wo.default.ObjectRenderer};throw new UI.InvalidElementException}}function $I(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(yh(e[i]));return n}}function zI(t){var e=document.createElement("canvas");return{element:e,options:(0,I0.default)(t),renderer:Wo.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}ch.default=yh;var vh={};Object.defineProperty(vh,"__esModule",{value:!0});var VI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function HI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var WI=function(){function t(e){HI(this,t),this.api=e}return VI(t,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),t}();vh.default=WI;var GI=Vf,Wi=Si(GI),XI=go,za=Si(XI),qI=ah,qx=Si(qI),YI=lh,Zg=Si(YI),KI=ch,ZI=Si(KI),QI=nu,JI=Si(QI),e6=vh,t6=Si(e6),Yx=po,n6=ru,Kx=Si(n6);function Si(t){return t&&t.__esModule?t:{default:t}}var Mr=function(){},iu=function(e,n,i){var o=new Mr;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,ZI.default)(e),o._encodings=[],o._options=Kx.default,o._errorHandler=new t6.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=Qx()),o.options(i)[i.format](n,i).render()),o};iu.getModule=function(t){return Wi.default[t]};for(var Qg in Wi.default)Wi.default.hasOwnProperty(Qg)&&r6(Wi.default,Qg);function r6(t,e){Mr.prototype[e]=Mr.prototype[e.toUpperCase()]=Mr.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,za.default)(o._options,i);l=(0,JI.default)(l);var f=t[e],g=Zx(n,f,l);return o._encodings.push(g),o})}}function Zx(t,e,n){t=""+t;var i=new e(t,n);if(!i.valid())throw new Yx.InvalidInputException(i.constructor.name,t);var o=i.encode();o=(0,qx.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,za.default)(n,o[l].options);return o}function Qx(){return Wi.default.CODE128?"CODE128":Object.keys(Wi.default)[0]}Mr.prototype.options=function(t){return this._options=(0,za.default)(this._options,t),this};Mr.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Mr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,za.default)(this._options,t.options);n.format=="auto"&&(n.format=Qx()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Wi.default[n.format.toUpperCase()],l=Zx(i,o,n);N0(t,l,n)})}}};Mr.prototype.render=function(){if(!this._renderProperties)throw new Yx.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)N0(this._renderProperties[t],this._encodings,this._options);else N0(this._renderProperties,this._encodings,this._options);return this};Mr.prototype._defaults=Kx.default;function N0(t,e,n){e=(0,qx.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,za.default)(n,e[i].options),(0,Zg.default)(e[i].options);(0,Zg.default)(n);var o=t.renderer,l=new o(t.element,e,n);l.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=iu);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),iu(n,t,e)});var i6=iu;const s6=yc(i6),Jx="http://127.0.0.1:17620",o6="<<fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27>>";async function Eh(t=1200){try{const e=new AbortController,n=setTimeout(()=>e.abort(),t),i=await fetch(`${Jx}/health`,{signal:e.signal});if(clearTimeout(n),!i.ok)return!1;const o=await i.json().catch(()=>({}));return!!(o!=null&&o.ok)}catch{return!1}}async function ew(t,e={}){if(!Array.isArray(t)||t.length===0)throw new Error("printReceipt: lines must be a non-empty array");const n={lines:t,cut:e.cut??!0,drawer:e.drawer??!1},i=await fetch(`${Jx}/print/escpos`,{method:"POST",headers:{"Content-Type":"application/json","X-Print-Token":o6},body:JSON.stringify(n)});if(!i.ok){const o=await i.text().catch(()=>"<no details>");throw new Error(`Print failed ${i.status}: ${o}`)}}class a6{constructor(){this.isConnected=!1}async checkConnection(){try{return this.isConnected=await Eh(800),this.isConnected}catch(e){return console.warn("Local print agent not available:",e),this.isConnected=!1,!1}}getConnectionStatus(){return{isAvailable:this.isConnected,isConnected:this.isConnected}}async printReceipt(e,n={}){try{await ew(e,{cut:n.cut!==!1,drawer:n.drawer||!1}),console.log("Receipt printed successfully via print agent")}catch(i){throw console.error("Error printing via print agent:",i),new Error(`Print agent failed: ${i.message}`)}}generateReceiptLines(e){return["\x1B@","\x1Ba","\x1B!0",e.eventName,"\x1B!\0","",e.eventDate,"","================================","","TIP BILET","\x1B! ",e.ticketType,"\x1B!\0","",`Scanat: ${e.scanTime}`,"","\x1B!","INTRARE VERIFICATA","\x1B!\0","","Acces permis",`Bilet: ${e.ticketCode}`,"","================================","Bon de verificare intrare","Valabil doar pentru data evenimentului",`Generat: ${new Date().toLocaleString("ro-RO")}`,"",""]}async printThermalReceipt(e){const n=this.generateReceiptLines(e);await this.printReceipt(n,{cut:!0,drawer:!1})}async testPrint(){const e={eventName:"TEST CLUB",eventDate:new Date().toLocaleDateString("ro-RO"),ticketType:"TEST ENTRY",ticketCode:"TEST123",scanTime:new Date().toLocaleTimeString("ro-RO")};await this.printThermalReceipt(e)}}const Il=new a6;class l6{async isLocalPrintAvailable(){try{return await Il.checkConnection()}catch{return!1}}generateTicketCode(){const e=Date.now().toString(36),n=Math.random().toString(36).substr(2,5);return`${e}${n}`.toUpperCase()}async generateQRCode(e){try{return await La.toDataURL(e,{width:150,height:150,margin:1,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"M"})}catch(n){throw console.error("Error generating QR code:",n),new Error("Failed to generate QR code")}}generateEAN13Barcode(e){try{if(!/^\d{13}$/.test(e))throw new Error("EAN13 code must be exactly 13 digits");const n=document.createElement("canvas");return s6(n,e,{format:"EAN13",width:2,height:50,displayValue:!0,fontSize:10,textMargin:2,margin:5,background:"#ffffff",lineColor:"#000000"}),n.toDataURL()}catch(n){throw console.error("Error generating EAN13 barcode:",n),new Error("Failed to generate EAN13 barcode")}}async createReceiptHTML(e,n=!0){return n&&await this.generateQRCode(e.ticketCode),this.generateEAN13Barcode(e.ean13Barcode),`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Receipt - ${e.ticketCode}</title>
        <style>
          @page {
            size: A4;
            margin: 0;
            padding: 0;
          }
          
          * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
          }
          
          body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 40px;
            width: 210mm;
            height: 297mm;
            font-size: 16px;
            line-height: 1.3;
            color: #000;
            background: #fff;
            min-height: 297mm;
            height: 297mm;
          }
          
          .receipt {
            width: 100%;
            max-width: 170mm;
            margin: 0 auto;
            text-align: center;
            display: block;
            padding: 0;
          }
          
          .header {
            border-bottom: 2px dashed #000;
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          
          .logo {
            max-width: 80mm;
            max-height: 40mm;
            margin-bottom: 15px;
            display: block;
          }
          
          .event-name {
            font-size: 28px;
            font-weight: 900;
            margin: 15px 0;
            color: #000000;
          }
          
          .event-date {
            font-size: 18px;
            margin: 10px 0;
            font-weight: 700;
            color: #000000;
          }
          
          .ticket-type-section {
            background: #e8e8e8;
            border: 2px solid #000;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
          }
          
          .ticket-type {
            font-size: 36px;
            font-weight: 900;
            margin: 20px 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #000000;
          }
          
          .scan-time {
            font-size: 16px;
            font-weight: 700;
            margin: 15px 0;
            color: #000000;
          }
          
          .qr-section {
            margin: 30px 0;
          }
          
          .qr-code {
            width: 80mm;
            height: 80mm;
            margin: 0 auto;
            display: block;
          }
          
          .qr-label {
            font-size: 14px;
            margin-top: 15px;
          }
          
          .footer {
            border-top: 2px dashed #000;
            padding-top: 20px;
            margin-top: 40px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: 600;
            color: #000000;
          }
          
          .footer-line {
            margin: 8px 0;
            font-weight: 600;
          }
          
          .footer-line:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
          }
          
          .ticket-code {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: #e0e0e0;
            padding: 8px 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: 700;
            color: #000000;
          }
          
          .scan-info {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #000;
            border-radius: 10px;
          }
          
          .scan-info .title {
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 10px;
            color: #000000;
          }
          
          .scan-info .subtitle {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #000000;
          }
          
          @media print {
            body {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: 297mm !important;
              min-height: 297mm !important;
            }
            
            @page {
              margin: 0 !important;
              padding: 0 !important;
              size: A4 !important;
            }
            
            .no-print {
              display: none !important;
            }
            
            .receipt {
              page-break-after: avoid;
              break-after: avoid;
            }
            
            .footer {
              page-break-inside: avoid;
              break-inside: avoid;
            }
          }
          
          @media screen {
            body {
              background: #f0f0f0;
              padding: 40px;
            }
            
            .receipt {
              background: white;
              padding: 30px;
              border: 1px solid #ccc;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
              max-width: 170mm;
              margin: 0 auto;
              border-radius: 10px;
            }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <div class="event-name">${e.eventName}</div>
            <div class="event-date">${e.eventDate}</div>
          </div>
          
          <div class="ticket-type-section">
            <div style="font-size: 18px; margin-bottom: 15px; font-weight: 900; color: #000000;">TIP BILET</div>
            <div class="ticket-type">${e.entryType||"STANDARD ENTRY"}</div>
            <div class="scan-time">Scanat: ${new Date().toLocaleString("ro-RO")}</div>
          </div>
          
          <div class="scan-info">
            <div class="title">INTRARE VERIFICATA</div>
            <div class="subtitle">Acces permis</div>
            <div class="ticket-code">Bilet: ${e.ticketCode}</div>
          </div>
          
          <div class="footer">
            <div class="footer-line">Bon de verificare intrare</div>
            <div class="footer-line">Valabil doar pentru data evenimentului</div>
            <div class="footer-line" style="font-size: 12px; margin-top: 15px; font-weight: 600;">
              Generat: ${new Date().toLocaleString("ro-RO")}
            </div>
          </div>
        </div>
      </body>
      </html>
    `}async createMultiTicketReceiptHTML(e){const n=this.generateEAN13Barcode(e.ean13Barcode),i=await Promise.all(e.ticketCodes.map(o=>this.generateQRCode(o)));return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Receipt - ${e.quantity} Tickets</title>
        <style>
          @page {
            size: 72mm auto;
            margin: 0;
            padding: 0;
          }
          
          * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
          }
          
          body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 8px;
            width: 72mm;
            font-size: 12px;
            line-height: 1.3;
            color: #000;
            background: #fff;
            min-height: auto;
            height: auto;
          }
          
          .receipt {
            width: 100%;
            text-align: center;
            display: block;
            margin: 0;
            padding: 0;
          }
          
          .header {
            border-bottom: 2px dashed #000;
            padding-bottom: 8px;
            margin-bottom: 8px;
          }
          
          .logo {
            max-width: 50mm;
            max-height: 20mm;
            margin-bottom: 4px;
            display: block;
          }
          
          .event-name {
            font-size: 16px;
            font-weight: bold;
            margin: 4px 0;
          }
          
          .event-date {
            font-size: 10px;
            margin: 2px 0;
          }
          
          .receipt-info {
            margin: 8px 0;
            text-align: left;
          }
          
          .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
            font-size: 11px;
          }
          
          .info-label {
            font-weight: bold;
          }
          
          .payment-section {
            background: #f0f0f0;
            border: 1px solid #000;
            padding: 6px;
            margin: 8px 0;
          }
          
          .total-amount {
            font-size: 14px;
            font-weight: bold;
            margin: 4px 0;
          }
          
          .tickets-section {
            margin: 10px 0;
            border-top: 1px dashed #000;
            padding-top: 8px;
          }
          
          .tickets-title {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
          }
          
          .ticket-item {
            border: 1px solid #000;
            margin: 8px 0;
            padding: 6px;
            background: #fff;
          }
          
          .ticket-number {
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 4px;
            text-align: center;
          }
          
          .qr-section {
            margin: 6px 0;
          }
          
          .qr-code {
            width: 30mm;
            height: 30mm;
            margin: 0 auto;
            display: block;
          }
          
          .qr-label {
            font-size: 8px;
            margin-top: 2px;
          }
          
          .ticket-code {
            font-family: 'Courier New', monospace;
            font-size: 9px;
            background: #f0f0f0;
            padding: 2px 4px;
            margin: 2px 0;
            text-align: center;
          }
          
          .barcode-section {
            margin: 10px 0;
            border-top: 1px dashed #000;
            padding-top: 8px;
          }
          
          .barcode {
            width: 60mm;
            height: auto;
            margin: 0 auto;
            display: block;
          }
          
          .barcode-label {
            font-size: 9px;
            margin-top: 2px;
          }
          
          .footer {
            border-top: 2px dashed #000;
            padding-top: 8px;
            margin-top: 8px;
            margin-bottom: 0;
            font-size: 10px;
          }
          
          .footer-line {
            margin: 2px 0;
          }
          
          .footer-line:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
          }
          
          @media print {
            body {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: auto !important;
              min-height: auto !important;
            }
            
            @page {
              margin: 0 !important;
              padding: 0 !important;
              size: 72mm auto !important;
            }
            
            .no-print {
              display: none !important;
            }
            
            .receipt {
              page-break-after: avoid;
              break-after: avoid;
            }
            
            .ticket-item {
              page-break-inside: avoid;
              break-inside: avoid;
            }
            
            .footer {
              page-break-inside: avoid;
              break-inside: avoid;
            }
          }
          
          @media screen {
            body {
              background: #f0f0f0;
              padding: 20px;
            }
            
            .receipt {
              background: white;
              padding: 8px;
              border: 1px solid #ccc;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
              width: 72mm;
              margin: 0 auto;
            }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            ${e.logoUrl?`<img src="${e.logoUrl}" alt="Logo" class="logo">`:""}
            <div class="event-name">${e.eventName}</div>
            <div class="event-date">${e.eventDate}</div>
          </div>
          
          <div class="receipt-info">
            <div class="info-row">
              <span class="info-label">Bilete:</span>
              <span>${e.quantity}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Plat:</span>
              <span>${e.paymentMethod==="CASH"?"NUMERAR":"CARD"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Timp:</span>
              <span>${new Date().toLocaleString("ro-RO")}</span>
            </div>
          </div>
          
          <div class="payment-section">
            <div class="total-amount">TOTAL: ${e.totalAmount} RON</div>
            <div style="font-size: 10px;">Prezentai la cas pentru plat</div>
          </div>
          
          <div class="tickets-section">
            <div class="tickets-title">BILETELE DUMNEAVOASTR</div>
            ${e.ticketCodes.map((o,l)=>`
              <div class="ticket-item">
                <div class="ticket-number">BILET ${l+1} din ${e.quantity}</div>
                <div class="qr-section">
                  <img src="${i[l]}" alt="QR Code ${l+1}" class="qr-code">
                  <div class="qr-label">Scanai pentru verificare</div>
                  <div class="ticket-code">Cod: ${o}</div>
                </div>
              </div>
            `).join("")}
          </div>
          
          <div class="barcode-section">
            <img src="${n}" alt="EAN13 Barcode" class="barcode">
            <div class="barcode-label">Pentru sistem de cas</div>
          </div>
          
          <div class="footer">
            <div class="footer-line">Bilete electronice generate</div>
            <div class="footer-line">Valabile doar pentru data specificat</div>
            <div class="footer-line">Nu se restituie banii</div>
            <div class="footer-line" style="font-size: 8px; margin-top: 4px;">
              Generat: ${new Date().toLocaleString("ro-RO")}
            </div>
          </div>
        </div>
      </body>
      </html>
    `}async printMultiTicketReceipt(e){try{const n=await this.createMultiTicketReceiptHTML(e),i=window.open("","_blank","width=400,height=800");if(!i){console.warn("Print window blocked by popup blocker, trying alternative method...");try{const o=new Blob([n],{type:"text/html"}),l=URL.createObjectURL(o),f=window.open(l,"_blank");if(!f){const g=document.body.innerHTML;return document.body.innerHTML=n,window.print(),document.body.innerHTML=g,!0}return setTimeout(()=>URL.revokeObjectURL(l),3e4),new Promise(g=>{const m=()=>{f.closed?g(!0):setTimeout(m,1e3)};m()})}catch{throw new Error("Could not print receipt. Please allow popups for this site or use QZ Tray for direct printing.")}}return i.document.write(n),i.document.close(),await new Promise(o=>setTimeout(o,1500)),new Promise(o=>{const l=()=>{i.removeEventListener("afterprint",l),i.close(),o(!0)};i.addEventListener("afterprint",l),i.focus(),i.print(),setTimeout(()=>{i.removeEventListener("afterprint",l),i.closed||i.close(),o(!0)},15e3)})}catch(n){throw console.error("Error printing multi-ticket receipt:",n),n}}async printReceipt(e,n=!0){try{return await this.isLocalPrintAvailable()?(console.log("Using local print agent for silent thermal printing..."),await Il.printThermalReceipt({eventName:e.eventName,eventDate:e.eventDate,ticketType:e.entryType||"STANDARD ENTRY",ticketCode:e.ticketCode,scanTime:new Date().toLocaleString("ro-RO")}),console.log("Receipt printed successfully via local print agent"),!0):(console.warn("Local print agent not available - skipping print"),!1)}catch(i){return console.error("Error printing receipt via local print agent:",i),!1}}async printQRTicket(e){try{return await this.isLocalPrintAvailable()?(console.log("Using local print agent for QR ticket printing..."),await Il.printThermalReceipt({eventName:e.eventName,eventDate:e.eventDate,ticketType:"VERIFIED ENTRY",ticketCode:e.ticketCode,scanTime:new Date().toLocaleString("ro-RO")}),console.log("QR ticket printed successfully via local print agent"),!0):(console.warn("Local print agent not available - skipping QR ticket print"),!1)}catch(n){return console.error("Error printing QR ticket via local print agent:",n),!1}}async createReceiptPreview(e){return await this.createReceiptHTML(e)}getLocalPrintService(){return Il}}const tw=new l6;class c6{constructor(){this.registration=null,this.deferredPrompt=null,this.updateAvailableCallbacks=[],this.wakeLock=null}async initialize(){if(!this.isServiceWorkerSupported()){console.log("Service Workers not supported in this environment");return}try{this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("Service Worker registered successfully"),this.registration.addEventListener("updatefound",()=>{var n;console.log("New service worker version available");const e=(n=this.registration)==null?void 0:n.installing;e&&(e.postMessage({type:"SKIP_WAITING"}),e.addEventListener("statechange",()=>{e.state==="activated"&&(console.log("New service worker activated, reloading page"),window.location.reload())}))}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Service worker controller changed, reloading page"),window.location.reload()}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&e.data.type==="NEW_VERSION_AVAILABLE"&&(console.log("New version available:",e.data.version),this.notifyUpdateAvailable())}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,console.log("PWA install prompt available")}),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),this.deferredPrompt=null})}catch(e){const n=e.message;this.isUnsupportedEnvironment(n)?console.log("Service Workers not available in this environment, continuing without PWA features"):console.warn("Service Worker registration failed:",n)}}onUpdateAvailable(e){this.updateAvailableCallbacks.push(e)}notifyUpdateAvailable(){this.registration&&this.updateAvailableCallbacks.forEach(e=>{e(this.registration)})}async applyUpdate(){if(this.registration&&this.registration.waiting)return this.registration.waiting.postMessage({type:"SKIP_WAITING"}),new Promise(e=>{navigator.serviceWorker.addEventListener("controllerchange",()=>{e()})})}hasUpdateAvailable(){return!!(this.registration&&this.registration.waiting)}isServiceWorkerSupported(){return!(!("serviceWorker"in navigator)||this.isStackBlitz()||this.isCodeSandbox())}isStackBlitz(){return window.location.hostname.includes("stackblitz")||window.location.hostname.includes("webcontainer")}isCodeSandbox(){return window.location.hostname.includes("codesandbox")||window.location.hostname.includes("csb.app")}isUnsupportedEnvironment(e){return["not yet supported on StackBlitz","Service Workers are not available","WebContainer","not supported in this context"].some(i=>e.toLowerCase().includes(i.toLowerCase()))}async installPrompt(){if(this.deferredPrompt){this.deferredPrompt.prompt();const{outcome:e}=await this.deferredPrompt.userChoice;return this.deferredPrompt=null,e==="accepted"}return!1}isInstallPromptAvailable(){return this.deferredPrompt!==null}isStandalone(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")}async requestNotificationPermission(){if("Notification"in window)try{return await Notification.requestPermission()}catch(e){return console.warn("Notification permission request failed:",e),"denied"}return"denied"}async showNotification(e,n){try{this.registration&&"Notification"in window&&Notification.permission==="granted"&&await this.registration.showNotification(e,{icon:"/pwa-192x192.png",badge:"/pwa-192x192.png",vibrate:[200,100,200],...n})}catch(i){console.warn("Failed to show notification:",i)}}async openFile(e=[".csv"]){try{if("showOpenFilePicker"in window){const n=await window.showOpenFilePicker({types:[{description:"CSV files",accept:{"text/csv":e}}],multiple:!1});if(n.length>0)return await n[0].getFile()}}catch(n){n.name!=="AbortError"&&console.warn("File System Access API failed, falling back to input:",n)}return null}async saveFile(e,n){try{if("showSaveFilePicker"in window){const f=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"CSV files",accept:{"text/csv":[".csv"]}}]})).createWritable();return await f.write(e),await f.close(),!0}}catch(l){l.name!=="AbortError"&&console.warn("File System Access API failed, falling back to download:",l)}const i=URL.createObjectURL(e),o=document.createElement("a");return o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),!1}async requestWakeLock(){try{if("wakeLock"in navigator)return this.wakeLock=await navigator.wakeLock.request("screen"),console.log("Screen wake lock acquired"),!0}catch(e){console.warn("Wake lock failed:",e)}return!1}async releaseWakeLock(){try{this.wakeLock&&(await this.wakeLock.release(),this.wakeLock=null,console.log("Screen wake lock released"))}catch(e){console.warn("Wake lock release failed:",e)}}async shareData(e){try{if("share"in navigator)return await navigator.share(e),!0}catch(n){console.warn("Web Share API failed:",n)}return!1}getPWADisplayMode(){return this.isStandalone()?"standalone":window.matchMedia("(display-mode: minimal-ui)").matches?"minimal-ui":window.matchMedia("(display-mode: fullscreen)").matches?"fullscreen":"browser"}checkInstallability(){const e=[];let n=!0;location.protocol!=="https:"&&location.hostname!=="localhost"&&(n=!1,e.push("Must be served over HTTPS"));const i=document.querySelector('link[rel="manifest"]');i||(n=!1,e.push("Web app manifest is missing")),this.registration||(n=!1,e.push("Service worker is not registered"));try{i&&(i.href||(n=!1,e.push("Manifest link has no href"))),window.isSecureContext||(n=!1,e.push("Not running in secure context")),"serviceWorker"in navigator||(n=!1,e.push("Service Worker not supported")),console.log("PWA Installability Debug:",{protocol:location.protocol,hostname:location.hostname,secureContext:window.isSecureContext,serviceWorkerSupport:"serviceWorker"in navigator,manifestLink:!!i,registration:!!this.registration,standalone:this.isStandalone()})}catch(o){console.warn("Error checking PWA installability:",o),e.push("Error checking PWA requirements")}return{canInstall:n,reasons:e}}}const Wt=new c6,u6=()=>{const{isScanning:t,setIsScanning:e,setLastScanResult:n,addScan:i,backendStatus:o,setFlashColor:l,appSettings:f}=$n(),[g,m]=X.useState(null),[x,v]=X.useState(null),[_,S]=X.useState([]),T=X.useRef(null),L="qr-reader";X.useEffect(()=>(ce.log("QRScanner: Initializing scanner..."),T.current=new Pg(L),Pg.getCameras().then($=>{ce.log("QRScanner: Found cameras:",$.length),$&&$.length>0?(S($),v($[0].id)):m("No cameras found")}).catch($=>{ce.error("QRScanner: Error accessing camera:",$),m("Error accessing camera: "+$.message)}),()=>{T.current&&T.current.isScanning&&T.current.stop().catch($=>ce.error("QRScanner: Error stopping scanner:",$))}),[]);const M=async()=>{if(!(!T.current||!x)){m(null),e(!0);try{Fi()||await Wt.requestWakeLock(),ce.log("QRScanner: Starting camera with ID:",x),await T.current.start(x,{fps:Fi()?5:10,qrbox:{width:300,height:300}},P,N)}catch($){ce.error("QRScanner: Error starting scanner:",$),m("Error starting scanner: "+$.message),e(!1),Fi()||await Wt.releaseWakeLock()}}},H=async()=>{if(!(!T.current||!T.current.isScanning))try{await T.current.stop(),e(!1),Fi()||await Wt.releaseWakeLock(),ce.log("QRScanner: Scanner stopped successfully")}catch($){ce.error("QRScanner: Error stopping scanner:",$)}},P=async $=>{ce.log("QRScanner: QR code scanned:",$),await H();try{const z=await Aa.validateTicket($);try{await Aa.recordScan($,z.valid,z.message),ce.log("QRScanner: Scan recorded successfully")}catch(D){ce.error("QRScanner: Failed to record scan (but validation succeeded):",D)}const B={qrCode:$,timestamp:new Date().toISOString(),success:z.valid,message:z.message,ticket:z.ticket};if(z.valid){l("green"),setTimeout(()=>l(null),5e3);try{fetch("http://localhost:3333/open").then(()=>ce.log("QRScanner: Relay triggered - door/gate opened")).catch(()=>ce.warn("QRScanner: Relay error - could not trigger door/gate"))}catch(D){ce.warn("QRScanner: Relay API call failed:",D)}try{await I(z.ticket,$)}catch(D){ce.warn("QRScanner: Receipt printing failed:",D)}}else l("red"),setTimeout(()=>l(null),5e3);n(B),i(B),Fi()||await Wt.showNotification(z.valid?"Access Granted":"Access Denied",{body:z.message,tag:"scan-result"}),setTimeout(()=>{T.current&&M()},2e3)}catch(z){ce.error("QRScanner: Error processing scan:",z),l("red"),setTimeout(()=>l(null),5e3),m("Error processing scan: Could not connect to Supabase"),setTimeout(M,2e3)}},I=async($,z)=>{try{const B={eventName:`${$.club||"Default Club"} - ${(f==null?void 0:f.clubName)||"Famous Summer Club"}`,eventDate:new Date().toLocaleDateString("ro-RO"),paymentMethod:"CASH",ticketCode:z,entryType:$.entryName,quantity:1,totalAmount:(f==null?void 0:f.ticketPrice)||50,ean13Barcode:(f==null?void 0:f.ean13Barcode)||"1234567890128",logoUrl:(f==null?void 0:f.logoUrl)||void 0};await tw.printReceipt(B,!0),ce.log("QRScanner: Receipt printed successfully")}catch(B){throw ce.error("QRScanner: Error printing receipt:",B),B}},N=$=>{},F=$=>{const z=$.target.value;t?H().then(()=>{v(z),M()}):v(z)};return y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("div",{className:"w-full max-w-lg mb-6 relative",children:[y.jsx("div",{id:L,className:"w-full h-96 overflow-hidden rounded-lg shadow-xl bg-black"}),!t&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm rounded-lg",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx(ig,{className:"h-12 w-12 mx-auto mb-4 text-primary-400"}),y.jsx("p",{className:"text-lg",children:"Start the scanner to begin"})]})}),t&&y.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[y.jsx("div",{className:"h-1 bg-primary-500 opacity-75 animate-scanner-line"}),y.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-primary-500 opacity-50"})]})]}),g&&y.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg relative mb-4 w-full max-w-md",children:y.jsx("span",{className:"block sm:inline",children:g})}),o==="disconnected"&&y.jsx("div",{className:"bg-red-900/30 border-l-4 border-red-500 p-4 mb-4 w-full max-w-md rounded-lg",children:y.jsx("div",{className:"flex",children:y.jsx("div",{className:"ml-3",children:y.jsx("p",{className:"text-sm text-red-200",children:"Cannot scan tickets: Not connected to Supabase backend."})})})}),_.length>1&&y.jsxs("div",{className:"mb-4 w-full max-w-md",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Select Camera"}),y.jsx("select",{className:"block w-full px-3 py-2 bg-dark-800 border border-dark-700 text-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:x||"",onChange:F,disabled:t,children:_.map($=>y.jsx("option",{value:$.id,children:$.label||`Camera ${$.id}`},$.id))})]}),y.jsx("div",{className:"flex justify-center mt-2",children:t?y.jsxs("button",{onClick:H,className:"flex items-center space-x-2 bg-gradient-to-br from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-bold py-3 px-6 rounded-md transition-colors shadow-lg transform hover:scale-105 transition duration-200",children:[y.jsx(P2,{size:24}),y.jsx("span",{children:"Stop Scanner"})]}):y.jsxs("button",{onClick:M,className:"flex items-center space-x-2 bg-gradient-to-br from-primary-500 to-primary-700 hover:from-primary-600 hover:to-primary-800 text-white font-bold py-3 px-6 rounded-md transition-colors shadow-lg transform hover:scale-105 transition duration-200",disabled:!x||o!=="connected",children:[y.jsx(ig,{size:24}),y.jsx("span",{children:"Start Scanner"})]})})]})},d6=()=>{const{setLastScanResult:t,addScan:e,backendStatus:n,appSettings:i,setFlashColor:o}=$n(),[l,f]=X.useState(""),[g,m]=X.useState(!1),[x,v]=X.useState(""),[_,S]=X.useState(null),T=X.useRef(null),L=(i==null?void 0:i.clubName)||"Famous Summer Club";X.useEffect(()=>{const $=()=>{T.current&&document.activeElement!==T.current&&T.current.focus()};$();const z=setInterval($,100);return window.addEventListener("focus",$),document.addEventListener("click",$),()=>{clearInterval(z),window.removeEventListener("focus",$),document.removeEventListener("click",$)}},[]);const M=async $=>{if(!(!$.trim()||g||$===x)){ce.log("DesktopScanner: Processing QR code:",$),m(!0),v($);try{const z=await Aa.validateTicket($);try{await Aa.recordScan($,z.valid,z.message),ce.log("DesktopScanner: Scan recorded successfully")}catch(D){ce.error("DesktopScanner: Failed to record scan (but validation succeeded):",D)}const B={qrCode:$,timestamp:new Date().toISOString(),success:z.valid,message:z.message,ticket:z.ticket};if(z.valid){o("green"),setTimeout(()=>o(null),5e3);try{fetch("http://localhost:3333/open").then(()=>ce.log("DesktopScanner: Relay triggered - door/gate opened")).catch(()=>ce.warn("DesktopScanner: Relay error - could not trigger door/gate"))}catch(D){ce.warn("DesktopScanner: Relay API call failed:",D)}try{await H(z.ticket,$)}catch(D){ce.warn("DesktopScanner: Receipt printing failed:",D)}}else o("red"),setTimeout(()=>o(null),5e3);t(B),e(B)}catch(z){ce.error("DesktopScanner: Error processing scan:",z),o("red"),setTimeout(()=>o(null),5e3);const B={qrCode:$,timestamp:new Date().toISOString(),success:!1,message:"Error processing scan: Could not connect to Supabase"};t(B),e(B)}finally{setTimeout(()=>{m(!1),v("")},2e3)}}},H=async($,z)=>{try{const B={eventName:`${$.club||"Default Club"} - ${(i==null?void 0:i.clubName)||"Famous Summer Club"}`,eventDate:new Date().toLocaleDateString("ro-RO"),paymentMethod:"CASH",ticketCode:z,entryType:$.entryName,quantity:1,totalAmount:(i==null?void 0:i.ticketPrice)||50,ean13Barcode:(i==null?void 0:i.ean13Barcode)||"1234567890128",logoUrl:(i==null?void 0:i.logoUrl)||void 0};await tw.printReceipt(B,!0),ce.log("DesktopScanner: Receipt printed successfully")}catch(B){throw ce.error("DesktopScanner: Error printing receipt:",B),B}},P=$=>{const z=$.target.value;f(z),_&&clearTimeout(_);const B=setTimeout(()=>{z.trim()&&N(z)},300);S(B)},I=$=>{$.key==="Enter"&&($.preventDefault(),N(l))},N=($=l)=>{_&&(clearTimeout(_),S(null)),$.trim()&&!g&&(M($.trim()),f(""))},F=()=>{N()};return y.jsxs("div",{className:"flex flex-col items-center w-full max-w-2xl",children:[y.jsx("div",{className:"mb-8",children:i!=null&&i.logoUrl?y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"glass-card rounded-2xl p-6 shadow-mauve-glow",children:y.jsx("img",{src:i.logoUrl,alt:`${L} Logo`,className:"h-24 w-auto rounded-lg shadow-lg"})})}):y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"glass-card p-8 rounded-2xl shadow-mauve-glow",children:y.jsx("div",{className:"h-16 w-16 bg-mauve-500/20 rounded-lg flex items-center justify-center",children:y.jsx("span",{className:"text-2xl font-bold text-mauve-400",children:L.charAt(0)})})})})}),n!=="connected"&&y.jsx("div",{className:"bg-red-900/30 border-l-4 border-red-500 p-4 mb-6 w-full rounded-lg",children:y.jsx("div",{className:"flex",children:y.jsx("div",{className:"ml-3",children:y.jsx("p",{className:"text-sm text-red-200",children:"Cannot scan tickets: Not connected to Supabase backend."})})})}),y.jsx("div",{className:"w-full mb-6",children:y.jsxs("div",{className:"relative",children:[y.jsx("input",{ref:T,id:"qrcode-input",type:"text",value:l,onChange:P,onKeyPress:I,disabled:g||n!=="connected",placeholder:g?"Processing...":"Scan barcode or type QR code here...",className:`
              w-full px-6 py-6 text-xl bg-dark-800 border-2 rounded-xl text-white 
              focus:outline-none focus:ring-2 transition-all duration-200
              ${g?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500/50":n!=="connected"?"border-red-500 focus:border-red-500 focus:ring-red-500/50 cursor-not-allowed":"border-mauve-500/50 focus:border-mauve-500 focus:ring-mauve-500/50"}
              ${l?"pr-16":""}
            `,inputMode:"none",autoFocus:!1,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false"}),g&&y.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:y.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-yellow-400 border-t-transparent rounded-full"})}),l&&!g&&y.jsx("button",{onClick:F,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-mauve-600 hover:bg-mauve-700 text-white rounded-lg transition-colors",title:"Process QR Code (Enter)",children:y.jsx(M2,{className:"h-5 w-5"})})]})})]})},f6=({result:t})=>{const{success:e,message:n,timestamp:i,ticket:o,qrCode:l}=t,f=new Date(i).toLocaleTimeString();return X.useEffect(()=>{const g=document.getElementById(`scan-result-${i}`);g&&(g.classList.add("animate-appear"),setTimeout(()=>{g.classList.remove("animate-appear")},1e3))},[i]),y.jsxs("div",{id:`scan-result-${i}`,className:`
        glass-card rounded-2xl shadow-2xl transition-all duration-300
        transform motion-safe:animate-bounce-in overflow-hidden border
        ${e?"animate-border-success border-green-500/30":"animate-border-error border-red-500/30"}
      `,children:[y.jsx("div",{className:`
          w-full py-6 px-6 flex items-center justify-center font-bold text-2xl
          ${e?"gradient-mauve-light text-white shadow-inner":"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-inner"}
        `,children:e?y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"btn-square-lg glass bg-green-500/20 border-green-400/30",children:y.jsx(f3,{className:"h-8 w-8 text-green-400"})}),y.jsx("span",{children:"ACCESS GRANTED"})]}):y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"btn-square-lg glass bg-red-500/20 border-red-400/30",children:y.jsx(P2,{className:"h-8 w-8 text-red-400"})}),y.jsx("span",{children:"NO ACCESS"})]})}),y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"flex flex-col space-y-4",children:[y.jsx("p",{className:`text-base ${e?"text-green-300":"text-red-300"}`,children:n}),o&&y.jsxs("div",{className:"glass-card rounded-xl p-4 border border-mauve-500/20",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx("div",{className:"btn-square glass bg-mauve-500/20 border-mauve-400/30",children:y.jsx(b3,{className:"h-4 w-4 text-mauve-400"})}),y.jsx("p",{className:"text-sm font-medium text-mauve-300",children:"Ticket Details"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[y.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[y.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Entry Type"}),y.jsx("p",{className:"text-sm font-semibold text-white",children:o.entryName})]}),y.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[y.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Club"}),y.jsx("p",{className:"text-sm font-semibold text-white",children:o.club})]}),y.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[y.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Entries Remaining"}),y.jsxs("p",{className:"text-sm font-semibold text-white flex items-center",children:[y.jsx(R2,{className:"h-3.5 w-3.5 mr-1 text-gray-400"}),o.entriesRemaining]})]}),y.jsxs("div",{class:"glass rounded-lg p-3 border border-mauve-500/20",children:[y.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"QR Code"}),y.jsx("p",{className:"text-sm font-mono px-2 py-1 rounded text-gray-300 truncate",children:l})]})]})]}),y.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-400",children:[y.jsx(g3,{className:"h-3 w-3 mr-1"}),y.jsx("span",{children:f})]})]})})]})},nw=X.createContext(void 0),h6=({children:t})=>{const[e,n]=X.useState("mobile"),[i,o]=X.useState("mobile");X.useEffect(()=>{const f=()=>{const m="ontouchstart"in window||navigator.maxTouchPoints>0,x=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.innerWidth,_=m&&v<1024||x&&v<768?"mobile":"desktop";o(_);const S=localStorage.getItem("deviceMode");S?n(S):(n(_),localStorage.setItem("deviceMode",_))};f();const g=()=>{f()};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const l=f=>{n(f),localStorage.setItem("deviceMode",f)};return y.jsx(nw.Provider,{value:{mode:e,setMode:l,isMobile:e==="mobile",isDesktop:e==="desktop",autoDetectedMode:i},children:t})},rw=()=>{const t=X.useContext(nw);if(t===void 0)throw new Error("useDevice must be used within a DeviceProvider");return t},Jg=()=>{const{lastScanResult:t,ticketsCount:e,backendStatus:n,appSettings:i}=$n(),{mode:o}=rw(),l=(i==null?void 0:i.clubName)||"Famous Summer Club",f=Ze.getProjectInfo();return X.useEffect(()=>{document.title=`${l} Scan`},[l]),y.jsxs("div",{className:"flex flex-col items-center",children:[!f.isValid,n!=="connected"?y.jsx("div",{className:"glass-card border-l-4 border-red-500 p-6 mb-6 w-full max-w-2xl rounded-2xl border border-red-500/30",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("div",{className:"btn-square glass bg-red-500/20 border-red-400/30",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-red-200",children:[y.jsx("strong",{children:"Not connected to Supabase."})," Please check your credentials in the .env file and go to Settings to configure the database."]})})]})}):e===0?y.jsx("div",{className:"glass-card border-l-4 border-amber-500 p-6 mb-6 w-full max-w-2xl rounded-2xl border border-amber-500/30",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("div",{className:"btn-square glass bg-amber-500/20 border-amber-400/30",children:y.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),y.jsx("div",{className:"ml-3",children:y.jsx("p",{className:"text-sm text-amber-200",children:"No tickets found in database. Please go to Settings to import tickets."})})]})}):null,o==="mobile"?y.jsx(u6,{}):y.jsx(d6,{}),t&&y.jsxs("div",{className:"w-full max-w-2xl mt-6 animate-appear",children:[y.jsx("h2",{className:"text-lg font-medium text-gray-100 mb-2",children:"Last Scan"}),y.jsx(f6,{result:t})]})]})},g6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(!1),[o,l]=X.useState(""),[f,g]=X.useState(null),{appSettings:m,refreshAppSettings:x,backendStatus:v}=$n();D0.useEffect(()=>{l((m==null?void 0:m.logoUrl)||"")},[m]);const _=async()=>{if(!o.trim()){g({text:"Please enter a valid image URL",type:"error"});return}try{new URL(o.trim())}catch{g({text:"Please enter a valid URL",type:"error"});return}e(!0),g({text:"Saving logo URL...",type:"info"});try{if(v!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");m?await Ze.settings.saveSettings({...m,logoUrl:o.trim(),updatedAt:new Date().toISOString()}):await Ze.settings.saveSettings({id:"settings",logoUrl:o.trim(),clubName:"Famous Summer Club",ean13Barcode:"1234567890128",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),g({text:"Logo URL saved successfully",type:"success"}),i(!1),x()}catch(L){g({text:`Save failed: ${L.message}`,type:"error"})}finally{e(!1)}},S=L=>new Promise(M=>{const H=new Vo;H.onload=()=>M(!0),H.onerror=()=>M(!1),H.src=L}),T=async()=>{if(o.trim()){g({text:"Testing image URL...",type:"info"});try{const L=await S(o.trim());g(L?{text:"Image URL is valid and loads successfully",type:"success"}:{text:"Image URL could not be loaded. Please check the URL.",type:"error"})}catch{g({text:"Error testing image URL",type:"error"})}}};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[y.jsx(Vo,{className:"h-6 w-6 mr-2 text-primary-500"}),"Club Logo"]}),(m==null?void 0:m.logoUrl)&&y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"p-2 bg-dark-800 rounded-lg mb-3",children:y.jsx("img",{src:m.logoUrl,alt:"Club Logo",className:"h-32 object-contain rounded",onError:L=>{L.target.style.display="none"}})}),y.jsx("p",{className:"text-sm text-gray-400",children:"Current logo"})]}),y.jsx("div",{className:"mb-4",children:n?y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{htmlFor:"logoUrl",className:"block text-sm font-medium text-gray-300",children:"Logo Image URL"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{type:"url",id:"logoUrl",value:o,onChange:L=>l(L.target.value),placeholder:"https://example.com/logo.png",className:"flex-1 px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:t||v!=="connected"}),y.jsxs("button",{onClick:T,disabled:!o.trim()||t||v!=="connected",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center space-x-2",title:"Test if image URL loads",children:[y.jsx(N2,{className:"h-4 w-4"}),y.jsx("span",{children:"Test"})]})]})]}):y.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-200 font-medium",children:m!=null&&m.logoUrl?"Logo URL configured":"No logo URL set"}),(m==null?void 0:m.logoUrl)&&y.jsx("p",{className:"text-gray-400 text-sm mt-1 truncate max-w-md",children:m.logoUrl})]}),y.jsx("button",{onClick:()=>{i(!0),l((m==null?void 0:m.logoUrl)||"")},disabled:v!=="connected",className:`p-2 rounded-full ${v!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit logo URL",children:y.jsx(Vo,{className:"h-5 w-5"})})]})}),n&&y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{onClick:()=>{i(!1),l((m==null?void 0:m.logoUrl)||""),g(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:t,children:"Cancel"}),y.jsx("button",{onClick:_,disabled:t||v!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${t||v!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Saving..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(kf,{className:"h-4 w-4"}),y.jsx("span",{children:"Save"})]})})]}),f&&y.jsx("div",{className:`
          mt-4 p-4 rounded-md border
          ${f.type==="success"?"bg-green-900/30 text-green-200 border-green-800":f.type==="error"?"bg-red-900/30 text-red-200 border-red-800":"bg-blue-900/30 text-blue-200 border-blue-800"}
        `,children:y.jsxs("div",{className:"flex items-start space-x-3",children:[f.type==="success"?y.jsx(Sr,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}):f.type==="error"?y.jsx(vi,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}):y.jsx(Vo,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),y.jsx("span",{children:f.text})]})}),y.jsxs("div",{className:"mt-6 bg-dark-800 p-4 rounded-md",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Instructions:"}),y.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[y.jsx("li",{children:" Enter a direct URL to an image file (PNG, JPG, GIF)"}),y.jsx("li",{children:" Use public image hosting services like Imgur, CloudFlare, or your own server"}),y.jsx("li",{children:" Recommended size: 200x200 pixels or similar square format"}),y.jsx("li",{children:' Use the "Test" button to verify the image loads correctly'}),y.jsx("li",{children:" The logo will appear in the app header and on printed receipts"})]})]}),v!=="connected"&&y.jsx("div",{className:"mt-4 p-4 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Connection Error:"})," Cannot update logo URL because you are not connected to Supabase. Please check your Supabase credentials and try again."]})})]})},p6=()=>{const{appSettings:t,refreshAppSettings:e,backendStatus:n}=$n(),[i,o]=X.useState(!1),[l,f]=X.useState(""),[g,m]=X.useState(!1),[x,v]=X.useState(null);D0.useEffect(()=>{f((t==null?void 0:t.clubName)||"Famous Summer Club")},[t]);const _=async()=>{if(!l.trim()){v({text:"Club name cannot be empty",type:"error"});return}m(!0),v(null);try{if(n!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");t?await Ze.settings.saveSettings({...t,clubName:l.trim(),updatedAt:new Date().toISOString()}):await Ze.settings.saveSettings({id:"settings",logoUrl:null,clubName:l.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v({text:"Club name updated successfully",type:"success"}),o(!1),await e(),setTimeout(()=>{(t==null?void 0:t.clubName)!==l.trim()&&v({text:"Settings saved but may not be reflected immediately. Please refresh the page.",type:"error"})},1e3)}catch(S){v({text:`Error: ${S.message}`,type:"error"})}finally{m(!1)}};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[y.jsx(ag,{className:"h-6 w-6 mr-2 text-primary-500"}),"Club Name"]}),y.jsx("div",{className:"mb-4",children:i?y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{htmlFor:"clubName\\",className:"block text-sm font-medium text-gray-300",children:"Club Name"}),y.jsx("input",{type:"text",id:"clubName",value:l,onChange:S=>f(S.target.value),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:g||n!=="connected"})]}):y.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[y.jsx("p",{className:"text-gray-200 font-medium",children:(t==null?void 0:t.clubName)||"Famous Summer Club"}),y.jsx("button",{onClick:()=>o(!0),disabled:n!=="connected",className:`p-2 rounded-full ${n!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit club name",children:y.jsx(ag,{className:"h-5 w-5"})})]})}),i&&y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{onClick:()=>{o(!1),f((t==null?void 0:t.clubName)||"Famous Summer Club"),v(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:g,children:"Cancel"}),y.jsx("button",{onClick:_,disabled:g||n!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${g||n!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:g?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Saving..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(kf,{className:"h-4 w-4"}),y.jsx("span",{children:"Save"})]})})]}),x&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${x.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":"bg-red-900/30 text-red-200 border border-red-800"}
        `,children:[x.type==="success"?y.jsx(Sr,{className:"h-5 w-5"}):y.jsx(vi,{className:"h-5 w-5"}),y.jsx("span",{children:x.text})]}),n!=="connected"&&i&&y.jsx("div",{className:"mt-4 p-3 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Connection Error:"})," Cannot update club name because you are not connected to Supabase. Please check your Supabase credentials in the .env file."]})})]})},m6=()=>{const{appSettings:t,refreshAppSettings:e,backendStatus:n}=$n(),[i,o]=X.useState(!1),[l,f]=X.useState((t==null?void 0:t.ean13Barcode)||""),[g,m]=X.useState(!1),[x,v]=X.useState(null),_=()=>{const T=Math.floor(Math.random()*999999999999).toString().padStart(12,"0");let L=0;for(let P=0;P<12;P++){const I=parseInt(T[P]);L+=P%2===0?I:I*3}const M=(10-L%10)%10,H=T+M;f(H)},S=async()=>{if(!l.trim()){v({text:"EAN13 barcode cannot be empty",type:"error"});return}if(!/^\d{13}$/.test(l)){v({text:"EAN13 barcode must be exactly 13 digits",type:"error"});return}m(!0),v(null);try{if(n!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");t?await Ze.settings.saveSettings({...t,ean13Barcode:l.trim(),updatedAt:new Date().toISOString()}):await Ze.settings.saveSettings({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:l.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v({text:"EAN13 barcode updated successfully",type:"success"}),o(!1),await e(),setTimeout(()=>{(t==null?void 0:t.ean13Barcode)!==l.trim()&&v({text:"Settings saved but may not be reflected immediately. Please refresh the page.",type:"error"})},1e3)}catch(T){v({text:`Error: ${T.message}`,type:"error"})}finally{m(!1)}};return y.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[y.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[y.jsx(rg,{className:"h-6 w-6 mr-2 text-primary-500"}),"EAN13 Barcode fr Kassensystem"]}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Dieser EAN13-Code wird auf allen gedruckten Belegen angezeigt und kann vom Kassensystem gescannt werden."}),y.jsx("div",{className:"mb-4",children:i?y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{htmlFor:"ean13Barcode",className:"block text-sm font-medium text-gray-300",children:"EAN13 Barcode (13 Ziffern)"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{type:"text",id:"ean13Barcode",value:l,onChange:T=>f(T.target.value.replace(/\D/g,"").slice(0,13)),placeholder:"1234567890123",className:"flex-1 px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono",disabled:g||n!=="connected"}),y.jsxs("button",{onClick:_,disabled:g||n!=="connected",className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors flex items-center space-x-2",title:"Generate random EAN13 code",children:[y.jsx(Nf,{className:"h-4 w-4"}),y.jsx("span",{children:"Generate"})]})]})]}):y.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-200 font-mono text-lg",children:(t==null?void 0:t.ean13Barcode)||"Not set"}),y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Current EAN13 barcode"})]}),y.jsx("button",{onClick:()=>{o(!0),f((t==null?void 0:t.ean13Barcode)||"")},disabled:n!=="connected",className:`p-2 rounded-full ${n!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit EAN13 barcode",children:y.jsx(rg,{className:"h-5 w-5"})})]})}),i&&y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{onClick:()=>{o(!1),f((t==null?void 0:t.ean13Barcode)||""),v(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:g,children:"Cancel"}),y.jsx("button",{onClick:S,disabled:g||n!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${g||n!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:g?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Saving..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(kf,{className:"h-4 w-4"}),y.jsx("span",{children:"Save"})]})})]}),x&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${x.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":"bg-red-900/30 text-red-200 border border-red-800"}
        `,children:[x.type==="success"?y.jsx(Sr,{className:"h-5 w-5"}):y.jsx(vi,{className:"h-5 w-5"}),y.jsx("span",{children:x.text})]}),n!=="connected"&&i&&y.jsx("div",{className:"mt-4 p-3 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Connection Error:"})," Cannot update EAN13 barcode because you are not connected to Supabase. Please check your Supabase credentials in the .env file."]})}),y.jsxs("div",{className:"mt-4 bg-dark-800 p-4 rounded-md",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Usage:"}),y.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[y.jsx("li",{children:" This barcode appears on all printed receipts"}),y.jsx("li",{children:" Cashiers can scan this code for payment processing"}),y.jsx("li",{children:" Must be exactly 13 digits for EAN13 compatibility"}),y.jsx("li",{children:' Use "Generate" to create a valid random code'})]})]})]})};var iw={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,i)=>{t.exports=i()})(Gt,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,l=!i.document&&!!i.postMessage,f=i.IS_PAPA_WORKER||!1,g={},m=0,x={};function v(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(O){var G=$(O);G.chunkSize=parseInt(G.chunkSize),O.step||O.chunk||(G.chunkSize=null),this._handle=new M(G),(this._handle.streamer=this)._config=G}).call(this,D),this.parseChunk=function(O,G){var te=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<te){let ae=this._config.newline;ae||(Z=this._config.quoteChar||'"',ae=this._handle.guessLineEndings(O,Z)),O=[...O.split(ae).slice(te)].join(ae)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(Z=this._config.beforeFirstChunk(O))!==void 0&&(O=Z),this.isFirstChunk=!1,this._halted=!1;var te=this._partialLine+O,Z=(this._partialLine="",this._handle.parse(te,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(O=Z.meta.cursor,te=(this._finished||(this._partialLine=te.substring(O-this._baseIndex),this._baseIndex=O),Z&&Z.data&&(this._rowCount+=Z.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)i.postMessage({results:Z,workerId:x.WORKER_ID,finished:te});else if(B(this._config.chunk)&&!G){if(this._config.chunk(Z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Z=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Z.data),this._completeResults.errors=this._completeResults.errors.concat(Z.errors),this._completeResults.meta=Z.meta),this._completed||!te||!B(this._config.complete)||Z&&Z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),te||Z&&Z.meta.paused||this._nextChunk(),Z}this._halted=!0},this._sendError=function(O){B(this._config.error)?this._config.error(O):f&&this._config.error&&i.postMessage({workerId:x.WORKER_ID,error:O,finished:!1})}}function _(D){var O;(D=D||{}).chunkSize||(D.chunkSize=x.RemoteChunkSize),v.call(this,D),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(G){this._input=G,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(O=new XMLHttpRequest,this._config.withCredentials&&(O.withCredentials=this._config.withCredentials),l||(O.onload=z(this._chunkLoaded,this),O.onerror=z(this._chunkError,this)),O.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var G,te=this._config.downloadRequestHeaders;for(G in te)O.setRequestHeader(G,te[G])}var Z;this._config.chunkSize&&(Z=this._start+this._config.chunkSize-1,O.setRequestHeader("Range","bytes="+this._start+"-"+Z));try{O.send(this._config.downloadRequestBody)}catch(ae){this._chunkError(ae.message)}l&&O.status===0&&this._chunkError()}},this._chunkLoaded=function(){O.readyState===4&&(O.status<200||400<=O.status?this._chunkError():(this._start+=this._config.chunkSize||O.responseText.length,this._finished=!this._config.chunkSize||this._start>=(G=>(G=G.getResponseHeader("Content-Range"))!==null?parseInt(G.substring(G.lastIndexOf("/")+1)):-1)(O),this.parseChunk(O.responseText)))},this._chunkError=function(G){G=O.statusText||G,this._sendError(new Error(G))}}function S(D){(D=D||{}).chunkSize||(D.chunkSize=x.LocalChunkSize),v.call(this,D);var O,G,te=typeof FileReader<"u";this.stream=function(Z){this._input=Z,G=Z.slice||Z.webkitSlice||Z.mozSlice,te?((O=new FileReader).onload=z(this._chunkLoaded,this),O.onerror=z(this._chunkError,this)):O=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Z=this._input,ae=(this._config.chunkSize&&(ae=Math.min(this._start+this._config.chunkSize,this._input.size),Z=G.call(Z,this._start,ae)),O.readAsText(Z,this._config.encoding));te||this._chunkLoaded({target:{result:ae}})},this._chunkLoaded=function(Z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Z.target.result)},this._chunkError=function(){this._sendError(O.error)}}function T(D){var O;v.call(this,D=D||{}),this.stream=function(G){return O=G,this._nextChunk()},this._nextChunk=function(){var G,te;if(!this._finished)return G=this._config.chunkSize,O=G?(te=O.substring(0,G),O.substring(G)):(te=O,""),this._finished=!O,this.parseChunk(te)}}function L(D){v.call(this,D=D||{});var O=[],G=!0,te=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Z){this._input=Z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){te&&O.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),O.length?this.parseChunk(O.shift()):G=!0},this._streamData=z(function(Z){try{O.push(typeof Z=="string"?Z:Z.toString(this._config.encoding)),G&&(G=!1,this._checkIsFinished(),this.parseChunk(O.shift()))}catch(ae){this._streamError(ae)}},this),this._streamError=z(function(Z){this._streamCleanUp(),this._sendError(Z)},this),this._streamEnd=z(function(){this._streamCleanUp(),te=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function M(D){var O,G,te,Z,ae=Math.pow(2,53),ke=-ae,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ze=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,le=this,ne=0,ee=0,ye=!1,we=!1,de=[],he={data:[],errors:[],meta:{}};function Ie(be){return D.skipEmptyLines==="greedy"?be.join("").trim()==="":be.length===1&&be[0].length===0}function et(){if(he&&te&&(It("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),te=!1),D.skipEmptyLines&&(he.data=he.data.filter(function(ve){return!Ie(ve)})),ue()){let ve=function(rt,Ae){B(D.transformHeader)&&(rt=D.transformHeader(rt,Ae)),de.push(rt)};if(he)if(Array.isArray(he.data[0])){for(var be=0;ue()&&be<he.data.length;be++)he.data[be].forEach(ve);he.data.splice(0,1)}else he.data.forEach(ve)}function Le(ve,rt){for(var Ae=D.header?{}:[],He=0;He<ve.length;He++){var Be=He,Oe=ve[He],Oe=((Qe,ge)=>(Ee=>(D.dynamicTypingFunction&&D.dynamicTyping[Ee]===void 0&&(D.dynamicTyping[Ee]=D.dynamicTypingFunction(Ee)),(D.dynamicTyping[Ee]||D.dynamicTyping)===!0))(Qe)?ge==="true"||ge==="TRUE"||ge!=="false"&&ge!=="FALSE"&&((Ee=>{if(K.test(Ee)&&(Ee=parseFloat(Ee),ke<Ee&&Ee<ae))return 1})(ge)?parseFloat(ge):ze.test(ge)?new Date(ge):ge===""?null:ge):ge)(Be=D.header?He>=de.length?"__parsed_extra":de[He]:Be,Oe=D.transform?D.transform(Oe,Be):Oe);Be==="__parsed_extra"?(Ae[Be]=Ae[Be]||[],Ae[Be].push(Oe)):Ae[Be]=Oe}return D.header&&(He>de.length?It("FieldMismatch","TooManyFields","Too many fields: expected "+de.length+" fields but parsed "+He,ee+rt):He<de.length&&It("FieldMismatch","TooFewFields","Too few fields: expected "+de.length+" fields but parsed "+He,ee+rt)),Ae}var tt;he&&(D.header||D.dynamicTyping||D.transform)&&(tt=1,!he.data.length||Array.isArray(he.data[0])?(he.data=he.data.map(Le),tt=he.data.length):he.data=Le(he.data,0),D.header&&he.meta&&(he.meta.fields=de),ee+=tt)}function ue(){return D.header&&de.length===0}function It(be,Le,tt,ve){be={type:be,code:Le,message:tt},ve!==void 0&&(be.row=ve),he.errors.push(be)}B(D.step)&&(Z=D.step,D.step=function(be){he=be,ue()?et():(et(),he.data.length!==0&&(ne+=be.data.length,D.preview&&ne>D.preview?G.abort():(he.data=he.data[0],Z(he,le))))}),this.parse=function(be,Le,tt){var ve=D.quoteChar||'"',ve=(D.newline||(D.newline=this.guessLineEndings(be,ve)),te=!1,D.delimiter?B(D.delimiter)&&(D.delimiter=D.delimiter(be),he.meta.delimiter=D.delimiter):((ve=((rt,Ae,He,Be,Oe)=>{var Qe,ge,Ee,Nn;Oe=Oe||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var fe=0;fe<Oe.length;fe++){for(var ln,$r=Oe[fe],at=0,pn=0,Ye=0,qt=(Ee=void 0,new P({comments:Be,delimiter:$r,newline:Ae,preview:10}).parse(rt)),Ft=0;Ft<qt.data.length;Ft++)He&&Ie(qt.data[Ft])?Ye++:(ln=qt.data[Ft].length,pn+=ln,Ee===void 0?Ee=ln:0<ln&&(at+=Math.abs(ln-Ee),Ee=ln));0<qt.data.length&&(pn/=qt.data.length-Ye),(ge===void 0||at<=ge)&&(Nn===void 0||Nn<pn)&&1.99<pn&&(ge=at,Qe=$r,Nn=pn)}return{successful:!!(D.delimiter=Qe),bestDelimiter:Qe}})(be,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess)).successful?D.delimiter=ve.bestDelimiter:(te=!0,D.delimiter=x.DefaultDelimiter),he.meta.delimiter=D.delimiter),$(D));return D.preview&&D.header&&ve.preview++,O=be,G=new P(ve),he=G.parse(O,Le,tt),et(),ye?{meta:{paused:!0}}:he||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,G.abort(),O=B(D.chunk)?"":O.substring(G.getCharIndex())},this.resume=function(){le.streamer._halted?(ye=!1,le.streamer.parseChunk(O,!0)):setTimeout(le.resume,3)},this.aborted=function(){return we},this.abort=function(){we=!0,G.abort(),he.meta.aborted=!0,B(D.complete)&&D.complete(he),O=""},this.guessLineEndings=function(rt,ve){rt=rt.substring(0,1048576);var ve=new RegExp(H(ve)+"([^]*?)"+H(ve),"gm"),tt=(rt=rt.replace(ve,"")).split("\r"),ve=rt.split(`
`),rt=1<ve.length&&ve[0].length<tt[0].length;if(tt.length===1||rt)return`
`;for(var Ae=0,He=0;He<tt.length;He++)tt[He][0]===`
`&&Ae++;return Ae>=tt.length/2?`\r
`:"\r"}}function H(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(D){var O=(D=D||{}).delimiter,G=D.newline,te=D.comments,Z=D.step,ae=D.preview,ke=D.fastMode,K=null,ze=!1,le=D.quoteChar==null?'"':D.quoteChar,ne=le;if(D.escapeChar!==void 0&&(ne=D.escapeChar),(typeof O!="string"||-1<x.BAD_DELIMITERS.indexOf(O))&&(O=","),te===O)throw new Error("Comment character same as delimiter");te===!0?te="#":(typeof te!="string"||-1<x.BAD_DELIMITERS.indexOf(te))&&(te=!1),G!==`
`&&G!=="\r"&&G!==`\r
`&&(G=`
`);var ee=0,ye=!1;this.parse=function(we,de,he){if(typeof we!="string")throw new Error("Input must be a string");var Ie=we.length,et=O.length,ue=G.length,It=te.length,be=B(Z),Le=[],tt=[],ve=[],rt=ee=0;if(!we)return at();if(ke||ke!==!1&&we.indexOf(le)===-1){for(var Ae=we.split(G),He=0;He<Ae.length;He++){if(ve=Ae[He],ee+=ve.length,He!==Ae.length-1)ee+=G.length;else if(he)return at();if(!te||ve.substring(0,It)!==te){if(be){if(Le=[],Nn(ve.split(O)),pn(),ye)return at()}else Nn(ve.split(O));if(ae&&ae<=He)return Le=Le.slice(0,ae),at(!0)}}return at()}for(var Be=we.indexOf(O,ee),Oe=we.indexOf(G,ee),Qe=new RegExp(H(ne)+H(le),"g"),ge=we.indexOf(le,ee);;)if(we[ee]===le)for(ge=ee,ee++;;){if((ge=we.indexOf(le,ge+1))===-1)return he||tt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Le.length,index:ee}),ln();if(ge===Ie-1)return ln(we.substring(ee,ge).replace(Qe,le));if(le===ne&&we[ge+1]===ne)ge++;else if(le===ne||ge===0||we[ge-1]!==ne){Be!==-1&&Be<ge+1&&(Be=we.indexOf(O,ge+1));var Ee=fe((Oe=Oe!==-1&&Oe<ge+1?we.indexOf(G,ge+1):Oe)===-1?Be:Math.min(Be,Oe));if(we.substr(ge+1+Ee,et)===O){ve.push(we.substring(ee,ge).replace(Qe,le)),we[ee=ge+1+Ee+et]!==le&&(ge=we.indexOf(le,ee)),Be=we.indexOf(O,ee),Oe=we.indexOf(G,ee);break}if(Ee=fe(Oe),we.substring(ge+1+Ee,ge+1+Ee+ue)===G){if(ve.push(we.substring(ee,ge).replace(Qe,le)),$r(ge+1+Ee+ue),Be=we.indexOf(O,ee),ge=we.indexOf(le,ee),be&&(pn(),ye))return at();if(ae&&Le.length>=ae)return at(!0);break}tt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Le.length,index:ee}),ge++}}else if(te&&ve.length===0&&we.substring(ee,ee+It)===te){if(Oe===-1)return at();ee=Oe+ue,Oe=we.indexOf(G,ee),Be=we.indexOf(O,ee)}else if(Be!==-1&&(Be<Oe||Oe===-1))ve.push(we.substring(ee,Be)),ee=Be+et,Be=we.indexOf(O,ee);else{if(Oe===-1)break;if(ve.push(we.substring(ee,Oe)),$r(Oe+ue),be&&(pn(),ye))return at();if(ae&&Le.length>=ae)return at(!0)}return ln();function Nn(Ye){Le.push(Ye),rt=ee}function fe(Ye){var qt=0;return qt=Ye!==-1&&(Ye=we.substring(ge+1,Ye))&&Ye.trim()===""?Ye.length:qt}function ln(Ye){return he||(Ye===void 0&&(Ye=we.substring(ee)),ve.push(Ye),ee=Ie,Nn(ve),be&&pn()),at()}function $r(Ye){ee=Ye,Nn(ve),ve=[],Oe=we.indexOf(G,ee)}function at(Ye){if(D.header&&!de&&Le.length&&!ze){var qt=Le[0],Ft=Object.create(null),Pt=new Set(qt);let mo=!1;for(let nr=0;nr<qt.length;nr++){let Vn=qt[nr];if(Ft[Vn=B(D.transformHeader)?D.transformHeader(Vn,nr):Vn]){let lt,oe=Ft[Vn];for(;lt=Vn+"_"+oe,oe++,Pt.has(lt););Pt.add(lt),qt[nr]=lt,Ft[Vn]++,mo=!0,(K=K===null?{}:K)[lt]=Vn}else Ft[Vn]=1,qt[nr]=Vn;Pt.add(Vn)}mo&&console.warn("Duplicate headers found and renamed."),ze=!0}return{data:Le,errors:tt,meta:{delimiter:O,linebreak:G,aborted:ye,truncated:!!Ye,cursor:rt+(de||0),renamedHeaders:K}}}function pn(){Z(at()),Le=[],tt=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return ee}}function I(D){var O=D.data,G=g[O.workerId],te=!1;if(O.error)G.userError(O.error,O.file);else if(O.results&&O.results.data){var Z={abort:function(){te=!0,N(O.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(B(G.userStep)){for(var ae=0;ae<O.results.data.length&&(G.userStep({data:O.results.data[ae],errors:O.results.errors,meta:O.results.meta},Z),!te);ae++);delete O.results}else B(G.userChunk)&&(G.userChunk(O.results,Z,O.file),delete O.results)}O.finished&&!te&&N(O.workerId,O.results)}function N(D,O){var G=g[D];B(G.userComplete)&&G.userComplete(O),G.terminate(),delete g[D]}function F(){throw new Error("Not implemented.")}function $(D){if(typeof D!="object"||D===null)return D;var O,G=Array.isArray(D)?[]:{};for(O in D)G[O]=$(D[O]);return G}function z(D,O){return function(){D.apply(O,arguments)}}function B(D){return typeof D=="function"}return x.parse=function(D,O){var G=(O=O||{}).dynamicTyping||!1;if(B(G)&&(O.dynamicTypingFunction=G,G={}),O.dynamicTyping=G,O.transform=!!B(O.transform)&&O.transform,!O.worker||!x.WORKERS_SUPPORTED)return G=null,x.NODE_STREAM_INPUT,typeof D=="string"?(D=(te=>te.charCodeAt(0)!==65279?te:te.slice(1))(D),G=new(O.download?_:T)(O)):D.readable===!0&&B(D.read)&&B(D.on)?G=new L(O):(i.File&&D instanceof File||D instanceof Object)&&(G=new S(O)),G.stream(D);(G=(()=>{var te;return!!x.WORKERS_SUPPORTED&&(te=(()=>{var Z=i.URL||i.webkitURL||null,ae=n.toString();return x.BLOB_URL||(x.BLOB_URL=Z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ae,")();"],{type:"text/javascript"})))})(),(te=new i.Worker(te)).onmessage=I,te.id=m++,g[te.id]=te)})()).userStep=O.step,G.userChunk=O.chunk,G.userComplete=O.complete,G.userError=O.error,O.step=B(O.step),O.chunk=B(O.chunk),O.complete=B(O.complete),O.error=B(O.error),delete O.worker,G.postMessage({input:D,config:O,workerId:G.id})},x.unparse=function(D,O){var G=!1,te=!0,Z=",",ae=`\r
`,ke='"',K=ke+ke,ze=!1,le=null,ne=!1,ee=((()=>{if(typeof O=="object"){if(typeof O.delimiter!="string"||x.BAD_DELIMITERS.filter(function(de){return O.delimiter.indexOf(de)!==-1}).length||(Z=O.delimiter),typeof O.quotes!="boolean"&&typeof O.quotes!="function"&&!Array.isArray(O.quotes)||(G=O.quotes),typeof O.skipEmptyLines!="boolean"&&typeof O.skipEmptyLines!="string"||(ze=O.skipEmptyLines),typeof O.newline=="string"&&(ae=O.newline),typeof O.quoteChar=="string"&&(ke=O.quoteChar),typeof O.header=="boolean"&&(te=O.header),Array.isArray(O.columns)){if(O.columns.length===0)throw new Error("Option columns is empty");le=O.columns}O.escapeChar!==void 0&&(K=O.escapeChar+ke),O.escapeFormulae instanceof RegExp?ne=O.escapeFormulae:typeof O.escapeFormulae=="boolean"&&O.escapeFormulae&&(ne=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(ke),"g"));if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return ye(null,D,ze);if(typeof D[0]=="object")return ye(le||Object.keys(D[0]),D,ze)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||le),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),ye(D.fields||[],D.data||[],ze);throw new Error("Unable to serialize unrecognized input");function ye(de,he,Ie){var et="",ue=(typeof de=="string"&&(de=JSON.parse(de)),typeof he=="string"&&(he=JSON.parse(he)),Array.isArray(de)&&0<de.length),It=!Array.isArray(he[0]);if(ue&&te){for(var be=0;be<de.length;be++)0<be&&(et+=Z),et+=we(de[be],be);0<he.length&&(et+=ae)}for(var Le=0;Le<he.length;Le++){var tt=(ue?de:he[Le]).length,ve=!1,rt=ue?Object.keys(he[Le]).length===0:he[Le].length===0;if(Ie&&!ue&&(ve=Ie==="greedy"?he[Le].join("").trim()==="":he[Le].length===1&&he[Le][0].length===0),Ie==="greedy"&&ue){for(var Ae=[],He=0;He<tt;He++){var Be=It?de[He]:He;Ae.push(he[Le][Be])}ve=Ae.join("").trim()===""}if(!ve){for(var Oe=0;Oe<tt;Oe++){0<Oe&&!rt&&(et+=Z);var Qe=ue&&It?de[Oe]:Oe;et+=we(he[Le][Qe],Oe)}Le<he.length-1&&(!Ie||0<tt&&!rt)&&(et+=ae)}}return et}function we(de,he){var Ie,et;return de==null?"":de.constructor===Date?JSON.stringify(de).slice(1,25):(et=!1,ne&&typeof de=="string"&&ne.test(de)&&(de="'"+de,et=!0),Ie=de.toString().replace(ee,K),(et=et||G===!0||typeof G=="function"&&G(de,he)||Array.isArray(G)&&G[he]||((ue,It)=>{for(var be=0;be<It.length;be++)if(-1<ue.indexOf(It[be]))return!0;return!1})(Ie,x.BAD_DELIMITERS)||-1<Ie.indexOf(Z)||Ie.charAt(0)===" "||Ie.charAt(Ie.length-1)===" ")?ke+Ie+ke:Ie)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!l&&!!i.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=P,x.ParserHandle=M,x.NetworkStreamer=_,x.FileStreamer=S,x.StringStreamer=T,x.ReadableStreamStreamer=L,i.jQuery&&((o=i.jQuery).fn.parse=function(D){var O=D.config||{},G=[];return this.each(function(ae){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ke=0;ke<this.files.length;ke++)G.push({file:this.files[ke],inputElem:this,instanceConfig:o.extend({},O)})}),te(),this;function te(){if(G.length===0)B(D.complete)&&D.complete();else{var ae,ke,K,ze,le=G[0];if(B(D.before)){var ne=D.before(le.file,le.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return ae="AbortError",ke=le.file,K=le.inputElem,ze=ne.reason,void(B(D.error)&&D.error({name:ae},ke,K,ze));if(ne.action==="skip")return void Z();typeof ne.config=="object"&&(le.instanceConfig=o.extend(le.instanceConfig,ne.config))}else if(ne==="skip")return void Z()}var ee=le.instanceConfig.complete;le.instanceConfig.complete=function(ye){B(ee)&&ee(ye,le.file,le.inputElem),Z()},x.parse(le.file,le.instanceConfig)}}function Z(){G.splice(0,1),te()}}),f&&(i.onmessage=function(D){D=D.data,x.WORKER_ID===void 0&&D&&(x.WORKER_ID=D.workerId),typeof D.input=="string"?i.postMessage({workerId:x.WORKER_ID,results:x.parse(D.input,D.config),finished:!0}):(i.File&&D.input instanceof File||D.input instanceof Object)&&(D=x.parse(D.input,D.config))&&i.postMessage({workerId:x.WORKER_ID,results:D,finished:!0})}),(_.prototype=Object.create(v.prototype)).constructor=_,(S.prototype=Object.create(v.prototype)).constructor=S,(T.prototype=Object.create(T.prototype)).constructor=T,(L.prototype=Object.create(v.prototype)).constructor=L,x})})(iw);var x6=iw.exports;const w6=yc(x6),y6=t=>new Promise((e,n)=>{w6.parse(t,{header:!0,skipEmptyLines:!0,complete:i=>{try{const o=i.data.map(l=>{if(!l.qrCode)throw new Error("CSV missing required qrCode field");return{qrCode:(l.qrCode||"").trim(),entryName:(l.entryName||"Default Entry").trim(),entriesRemaining:parseInt((l.entriesRemaining||"1").toString().trim(),10),lastScanned:null,club:(l.club||"Default Club").trim()}});e(o)}catch(o){n(o)}},error:i=>{n(i)}})}),v6=()=>{const t=`qrCode,entryName,entriesRemaining,club
TICKET001,Regular Entry,1,Capricci
TICKET002,VIP Access,3,Intooit
TICKET003,Backstage Pass,2,Capricci`;return new Blob([t],{type:"text/csv;charset=utf-8;"})},sw=async t=>{try{const e=await y6(t);if(e.length===0)return{success:!1,message:"No valid tickets found in the CSV file"};const n=new Map;e.forEach(f=>{n.set(f.qrCode,f)});const i=Array.from(n.values()),o=e.length-i.length;if(o>0&&ce.log(`CSV: Removed ${o} duplicate tickets based on qrCode`),ce.log(`CSV: Parsed ${i.length} unique tickets from CSV`),await Ms.checkConnection())try{ce.log("CSV: Importing tickets via WebView API...");const f=await Ms.importTickets(i);return f.success?{success:!0,message:o>0?`Successfully imported ${f.count} unique tickets to the database (${o} duplicates were skipped)`:`Successfully imported ${f.count} tickets to the database`,count:f.count}:{success:!1,message:"Failed to import tickets to database"}}catch(f){throw ce.error("CSV: Error importing tickets:",f),new Error(`Error importing tickets to backend: ${f.message}`)}else return{success:!1,message:"Supabase backend is not available. Please check your Supabase credentials and try again."}}catch(e){return ce.error("CSV: Error in import process:",e),{success:!1,message:`Error importing tickets: ${e.message}`}}},E6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(null),{refreshTicketsCount:o,backendStatus:l}=$n(),[f]=X.useState("showOpenFilePicker"in window),g=async()=>{if(l!=="connected"){i({text:"Not connected to Supabase. Please check your credentials and try again.",type:"error"});return}e(!0),i({text:"Opening file picker...",type:"info"});try{const m=await Wt.openFile([".csv"]);if(!m){e(!1),i(null);return}i({text:"Processing file...",type:"info"});const x=await sw(m);x.success?(i({text:x.message,type:"success"}),o()):i({text:x.message,type:"error"})}catch(m){i({text:`Error: ${m.message}`,type:"error"})}finally{e(!1)}};return f?y.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-lg shadow-xl p-6 mb-6 border border-blue-800/50",children:[y.jsxs("h2",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[y.jsx(x3,{className:"h-6 w-6 mr-2 text-blue-400"}),"Advanced File Access"]}),y.jsx("p",{className:"text-blue-200 mb-4",children:"Use enhanced file system access to browse and select CSV files from your device."}),y.jsx("button",{onClick:g,disabled:t||l!=="connected",className:`
          flex items-center justify-center space-x-2 py-3 px-6 rounded-lg font-medium
          transition-all duration-200 shadow-lg w-full
          ${t||l!=="connected"?"bg-dark-800 text-gray-400 cursor-not-allowed border border-dark-700":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border border-blue-500 transform hover:scale-105"}
        `,children:t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),y.jsx("span",{children:"Processing..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(m3,{className:"h-5 w-5"}),y.jsx("span",{children:"Browse & Select CSV File"})]})}),n&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-lg flex items-start space-x-3 border
          ${n.type==="success"?"bg-green-900/30 text-green-200 border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border-red-800":"bg-blue-900/30 text-blue-200 border-blue-800"}
        `,children:[n.type==="success"?y.jsx(Sr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?y.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):y.jsx(Of,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:n.text})]}),y.jsxs("div",{className:"mt-4 text-sm text-blue-300 bg-blue-950/50 p-3 rounded-lg",children:[y.jsx("p",{className:"font-medium mb-2",children:"Enhanced Features:"}),y.jsxs("ul",{className:"space-y-1 text-xs",children:[y.jsx("li",{children:" Direct access to your device's file system"}),y.jsx("li",{children:" Better file browsing experience"}),y.jsx("li",{children:" Secure file handling with modern browser APIs"}),y.jsx("li",{children:" Works offline when files are already on device"})]})]})]}):null},_6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(null),o=X.useRef(null),{refreshTicketsCount:l,backendStatus:f}=$n(),g=async v=>{var S;const _=(S=v.target.files)==null?void 0:S[0];if(_){if(_.type!=="text/csv"&&!_.name.endsWith(".csv")){i({text:"Please upload a CSV file",type:"error"});return}e(!0),i({text:"Uploading and processing file...",type:"info"});try{if(f!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");const T=await sw(_);T.success?(i({text:T.message,type:"success"}),l()):i({text:T.message,type:"error"})}catch(T){i({text:`Error: ${T.message}`,type:"error"})}finally{e(!1),o.current&&(o.current.value="")}}},m=()=>{var v;(v=o.current)==null||v.click()},x=()=>{try{const v=v6(),_=URL.createObjectURL(v),S=document.createElement("a");S.href=_,S.download="ticket-template.csv",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(_),i({text:"Template downloaded successfully",type:"success"})}catch(v){i({text:`Error downloading template: ${v.message}`,type:"error"})}};return y.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Import Tickets"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Upload a CSV file containing QR codes and ticket information. The CSV should have the following columns:"}),y.jsx("div",{className:"bg-dark-800 p-3 rounded mb-4 font-mono text-sm text-gray-300",children:y.jsx("code",{children:"qrCode, entryName, entriesRemaining, club"})}),y.jsxs("div",{className:"flex space-x-3 mb-6",children:[y.jsxs("button",{onClick:x,className:`flex items-center justify-center space-x-2 py-2 px-4 
                   bg-dark-800 text-gray-300 hover:bg-dark-700
                   border border-dark-700 rounded-lg transition-colors`,children:[y.jsx(If,{className:"h-5 w-5"}),y.jsx("span",{children:"Download Template"})]}),y.jsx("input",{type:"file",ref:o,onChange:g,accept:".csv",className:"hidden"}),y.jsx("button",{onClick:m,disabled:t||f!=="connected",className:`
            flex-1 flex items-center justify-center space-x-2 py-2 px-4 
            border rounded-lg transition-colors
            ${t||f!=="connected"?"bg-dark-800 text-gray-500 border-dark-700 cursor-not-allowed":"border-primary-700 bg-primary-600 text-white hover:bg-primary-700"}
          `,children:t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Processing..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(Of,{className:"h-5 w-5"}),y.jsx("span",{children:"Upload CSV File"})]})})]}),n&&y.jsxs("div",{className:`
          p-4 rounded-md flex items-start space-x-3
          ${n.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[n.type==="success"?y.jsx(Sr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?y.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):y.jsx(p3,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:n.text})]}),f!=="connected"&&y.jsx("div",{className:"mt-4 p-4 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Connection Error:"})," Cannot upload tickets because you are not connected to Supabase. Please check your Supabase credentials in the .env file and ensure the database tables are created."]})}),y.jsxs("div",{className:"mt-5 pt-5 border-t border-dark-700",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"CSV Format Example:"}),y.jsxs("pre",{className:"bg-dark-800 p-3 rounded text-xs overflow-x-auto text-gray-300",children:["qrCode,entryName,entriesRemaining,club",y.jsx("br",{}),"ABC123,Regular Entry,1,Capricci",y.jsx("br",{}),"XYZ456,VIP Access,3,Intooit",y.jsx("br",{}),"DEF789,Backstage Pass,2,Capricci"]})]})]})},b6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(!1),[o,l]=X.useState(null),{refreshTicketsCount:f}=$n(),g=Ze.getProjectInfo(),m=async()=>{i(!0);try{await Aa.clearAllData(),l({text:"All data has been cleared successfully",type:"success"}),f()}catch(x){l({text:`Error clearing data: ${x.message}`,type:"error"})}finally{i(!1),e(!1)}};return y.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 border border-dark-800",children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Database Management"}),y.jsxs("div",{className:"mb-6 p-4 rounded-lg border bg-blue-900/20 border-blue-800",children:[y.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center text-blue-300",children:[y.jsx(O2,{className:"h-4 w-4 mr-2"}),"Database Connection"]}),y.jsxs("div",{className:"space-y-1 text-xs",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-400",children:"Project ID:"}),y.jsx("span",{className:"font-mono text-blue-200",children:g.projectId})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-400",children:"Status:"}),y.jsx("span",{className:"font-semibold text-blue-200",children:"Your own database"})]})]}),!g.isValid]}),y.jsx("p",{className:"text-gray-300 mb-6",children:"You can clear all ticket data and scan history from your database. This action cannot be undone."}),t?y.jsxs("div",{className:"border border-red-800 rounded-lg p-5 bg-red-900/30",children:[y.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[y.jsx(ng,{className:"h-6 w-6 text-red-400 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium text-red-300",children:"Confirm Data Deletion"}),y.jsx("p",{className:"text-red-200 text-sm mt-1",children:"This will permanently delete all tickets and scan history. This action cannot be undone."})]})]}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{onClick:m,disabled:n,className:`
                flex items-center space-x-2 py-2 px-4 rounded-md font-medium shadow-md
                ${n?"bg-dark-700 text-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}
              `,children:n?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Deleting..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(lg,{className:"h-4 w-4"}),y.jsx("span",{children:"Yes, Delete Everything"})]})}),y.jsx("button",{onClick:()=>e(!1),disabled:n,className:"py-2 px-4 bg-dark-700 hover:bg-dark-600 text-gray-200 rounded-md font-medium transition-colors shadow-md",children:"Cancel"})]})]}):y.jsxs("button",{onClick:()=>e(!0),disabled:!g.isValid,className:`
            flex items-center space-x-2 font-medium py-2 px-4 rounded-md transition-colors shadow-md
            bg-red-600 hover:bg-red-700 text-white
          `,children:[y.jsx(lg,{className:"h-5 w-5"}),y.jsx("span",{children:"Clear All Data"})]}),o&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${o.type==="success"?"bg-green-900/30 text-green-300 border border-green-800":"bg-red-900/30 text-red-300 border border-red-800"}
        `,children:[o.type==="success"?y.jsx(Sr,{className:"h-5 w-5"}):y.jsx(ng,{className:"h-5 w-5"}),y.jsx("span",{children:o.text})]})]})},C6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(null),[o,l]=X.useState({tickets:!1,scanHistory:!1,settings:!1,fiscalnet:!1}),[f,g]=X.useState({bucketExists:!1,bucketPublic:!1,checkComplete:!1}),m=Ze.getProjectInfo();X.useEffect(()=>{x(),v()},[]);const x=async()=>{try{const{error:T}=await je.from("tickets").select("count",{count:"exact",head:!0}),{error:L}=await je.from("scan_history").select("count",{count:"exact",head:!0}),{error:M}=await je.from("app_settings").select("count",{count:"exact",head:!0}),{error:H}=await je.from("fiscalnet_settings").select("count",{count:"exact",head:!0});l({tickets:!T||!T.message.includes("does not exist"),scanHistory:!L||!L.message.includes("does not exist"),settings:!M||!M.message.includes("does not exist"),fiscalnet:!H||!H.message.includes("does not exist")&&!H.message.includes("relation")})}catch(T){console.error("Error checking tables:",T)}},v=async()=>{try{const{data:T,error:L}=await je.storage.listBuckets();if(L){console.error("Error checking storage buckets:",L),g({bucketExists:!1,bucketPublic:!1,checkComplete:!0});return}const M=T==null?void 0:T.find(H=>H.name==="app-assets");g({bucketExists:!!M,bucketPublic:(M==null?void 0:M.public)||!1,checkComplete:!0})}catch(T){console.error("Error checking storage setup:",T),g({bucketExists:!1,bucketPublic:!1,checkComplete:!0})}},_=async()=>{e(!0),i({text:"Setting up Supabase tables...",type:"info"});try{if((await Promise.allSettled([je.rpc("create_tickets_table"),je.rpc("create_scan_history_table"),je.rpc("create_settings_table"),je.rpc("create_fiscalnet_settings_table")])).some(M=>M.status==="fulfilled"))i({text:"Database tables setup completed successfully! All settings tables are now properly configured.",type:"success"});else{console.log("Creating tables directly without functions...");try{await je.from("tickets").select("count",{count:"exact",head:!0})}catch{console.log("Tickets table needs to be created manually via Supabase dashboard")}try{const{error:M}=await je.from("app_settings").upsert({id:"settings",clubName:"Famous Summer Club",ean13Barcode:"1234567890128",logoUrl:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});M&&!M.message.includes("does not exist")&&console.error("Error creating app_settings:",M)}catch(M){console.error("Error with app_settings:",M)}try{const{error:M}=await je.from("fiscalnet_settings").upsert({id:"settings",saveDirectory:"C:\\FiscalNet",fiscalnetEnabled:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});M&&!M.message.includes("does not exist")&&console.error("Error creating fiscalnet_settings:",M)}catch(M){console.error("Error with fiscalnet_settings:",M)}try{await je.from("scan_history").select("count",{count:"exact",head:!0})}catch{console.log("Scan history table needs to be created manually via Supabase dashboard")}i({text:"Tables need to be created manually. Please use the SQL provided in the manual setup section below, or create the tables using the Supabase dashboard.",type:"info"})}await x(),await v()}catch(T){console.error("Error creating Supabase tables:",T),i({text:`Error: ${T.message}`,type:"error"})}finally{e(!1)}},S=()=>f.checkComplete?f.bucketExists?f.bucketPublic?" Storage bucket is properly configured!":" Bucket exists but may not be public. Logo upload may fail if bucket is not set to public.":" Storage bucket 'app-assets' not found. Logo upload will not work until you create it manually.":"Checking storage setup...";return y.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[y.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[y.jsx(sg,{className:"h-6 w-6 mr-2 text-primary-500"}),"Supabase Setup"]}),y.jsxs("div",{className:"mb-6 p-4 rounded-lg border bg-green-900/20 border-green-800",children:[y.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center text-green-300",children:[y.jsx(O2,{className:"h-4 w-4 mr-2"}),"Current Database Connection"]}),y.jsxs("div",{className:"space-y-2 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-400",children:"Project ID:"}),y.jsx("span",{className:"font-mono text-green-200",children:m.projectId})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-400",children:"Database URL:"}),y.jsx("span",{className:"font-mono text-xs text-green-200",children:m.url})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-400",children:"Status:"}),y.jsx("span",{className:"font-semibold text-green-200",children:" Your own database"})]})]}),!m.isValid]}),y.jsxs("div",{className:"mb-6 space-y-3",children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Database Tables"}),y.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.tickets?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[y.jsx("div",{className:"mr-3",children:o.tickets?"":""}),y.jsx("span",{children:"Tickets Table"})]}),y.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.scanHistory?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[y.jsx("div",{className:"mr-3",children:o.scanHistory?"":""}),y.jsx("span",{children:"Scan History Table"})]}),y.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.settings?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[y.jsx("div",{className:"mr-3",children:o.settings?"":""}),y.jsx("span",{children:"App Settings Table"})]}),y.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.fiscalnet?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[y.jsx("div",{className:"mr-3",children:o.fiscalnet?"":""}),y.jsx("span",{children:"FiscalNet Settings Table"})]})]}),y.jsxs("div",{className:"mb-6 space-y-3",children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Storage Setup"}),y.jsxs("div",{className:`flex items-center p-3 rounded-lg ${f.bucketExists?f.bucketPublic?"bg-green-900/20 text-green-200":"bg-yellow-900/20 text-yellow-200":"bg-red-900/20 text-red-200"}`,children:[y.jsx("div",{className:"mr-3",children:f.bucketExists?f.bucketPublic?"":"":""}),y.jsx("span",{children:"Storage Bucket Status"})]}),y.jsx("div",{className:"bg-dark-800 p-3 rounded-lg",children:y.jsx("p",{className:"text-sm text-gray-300",children:S()})})]}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Create the necessary database tables in your Supabase project for storing tickets, scan history, app settings, and FiscalNet settings."}),y.jsxs("div",{className:"bg-dark-800 p-4 rounded-md mb-6 border border-dark-700",children:[y.jsx("h3",{className:"text-sm font-medium text-primary-300 mb-2",children:"Manual Table Creation (If Button Fails)"}),y.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"If the automatic setup fails, you can create these tables manually in your Supabase SQL editor:"}),y.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:y.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create tickets table
CREATE TABLE IF NOT EXISTS tickets (
  "qrCode" TEXT PRIMARY KEY,
  "entryName" TEXT NOT NULL,
  "entriesRemaining" INTEGER NOT NULL,
  "lastScanned" TIMESTAMP WITH TIME ZONE
);

-- Enable RLS
ALTER TABLE tickets ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to tickets" ON tickets FOR ALL TO public USING (true);`})}),y.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:y.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create scan_history table
DROP TABLE IF EXISTS scan_history;

CREATE TABLE scan_history (
  id BIGSERIAL PRIMARY KEY,
  "qrCode" TEXT NOT NULL,
  timestamp TIMESTAMP WITH TIME ZONE NOT NULL,
  success BOOLEAN NOT NULL,
  message TEXT NOT NULL
);

-- Enable RLS
ALTER TABLE scan_history ENABLE ROW LEVEL SECURITY;

-- Create policies for scan_history
CREATE POLICY "Allow public insert access to scan_history"
  ON scan_history
  FOR INSERT
  TO public
  WITH CHECK (true);

CREATE POLICY "Allow public read access to scan_history"
  ON scan_history
  FOR SELECT
  TO public
  USING (true);

CREATE POLICY "Allow public delete access to scan_history"
  ON scan_history
  FOR DELETE
  TO public
  USING (true);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_scan_history_qrcode ON scan_history("qrCode");
CREATE INDEX IF NOT EXISTS idx_scan_history_timestamp ON scan_history(timestamp);`})}),y.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:y.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create app_settings table
CREATE TABLE IF NOT EXISTS app_settings (
  id TEXT PRIMARY KEY,
  "logoUrl" TEXT,
  "clubName" TEXT NOT NULL,
  "ean13Barcode" BIGINT DEFAULT 1234567890128,
  "ticketPrice" INTEGER DEFAULT 50,
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
);

-- Enable RLS
ALTER TABLE app_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to app_settings" ON app_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO app_settings (id, "clubName", "ticketPrice", "ean13Barcode", "logoUrl", "createdAt", "updatedAt")
VALUES ('settings', 'Famous Summer Club', 50, 1234567890128, NULL, NOW(), NOW())
ON CONFLICT (id) DO NOTHING;`})}),y.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:y.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create fiscalnet_settings table
CREATE TABLE IF NOT EXISTS fiscalnet_settings (
  id TEXT PRIMARY KEY DEFAULT 'settings',
  "saveDirectory" TEXT NOT NULL DEFAULT 'C:\\FiscalNet',
  "fiscalnetEnabled" BOOLEAN NOT NULL DEFAULT false,
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE fiscalnet_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to fiscalnet_settings" ON fiscalnet_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO fiscalnet_settings (id, "saveDirectory", "fiscalnetEnabled")
VALUES ('settings', 'C:\\FiscalNet', false)
ON CONFLICT (id) DO NOTHING;`})}),y.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:y.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create printer_settings table
CREATE TABLE IF NOT EXISTS printer_settings (
  id TEXT PRIMARY KEY DEFAULT 'settings',
  "selectedPrinter" TEXT,
  "printerName" TEXT,
  "printerType" TEXT DEFAULT 'thermal',
  "printEnabled" BOOLEAN NOT NULL DEFAULT true,
  "autoprint" BOOLEAN NOT NULL DEFAULT true,
  "paperSize" TEXT DEFAULT '80mm',
  "settings" JSONB DEFAULT '{}',
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE printer_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to printer_settings" ON printer_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO printer_settings (id, "selectedPrinter", "printerName", "printerType", "printEnabled", "autoprint", "paperSize", "settings")
VALUES ('settings', NULL, NULL, 'thermal', true, true, '80mm', '{}')
ON CONFLICT (id) DO NOTHING;`})})]}),y.jsxs("div",{className:`p-4 rounded-md mb-6 border ${f.bucketExists&&f.bucketPublic?"bg-green-900/20 border-green-800":"bg-red-900/20 border-red-800"}`,children:[y.jsxs("h3",{className:`text-sm font-medium mb-2 flex items-center ${f.bucketExists&&f.bucketPublic?"text-green-300":"text-red-300"}`,children:[f.bucketExists&&f.bucketPublic?y.jsx(Sr,{className:"h-4 w-4 mr-2"}):y.jsx(vi,{className:"h-4 w-4 mr-2"}),"Storage Bucket Setup ",f.bucketExists&&f.bucketPublic?"Complete":"Required"]}),!(f.bucketExists&&f.bucketPublic)&&y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-sm text-red-200 mb-3",children:"Logo upload will not work without this bucket! You must manually create it:"}),y.jsxs("ol",{className:"list-decimal list-inside text-sm text-red-200 space-y-2 ml-2",children:[y.jsxs("li",{children:["Go to your ",y.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline inline-flex items-center gap-1",children:["Supabase Dashboard ",y.jsx(N2,{className:"h-3 w-3"})]})]}),y.jsx("li",{children:"Select your project from the list"}),y.jsx("li",{children:'Navigate to the "Storage" section in the sidebar'}),y.jsx("li",{children:'Click "Create new bucket"'}),y.jsxs("li",{children:["Name the bucket exactly: ",y.jsx("span",{className:"bg-red-950 px-2 py-0.5 rounded font-mono",children:"app-assets"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"IMPORTANT:"}),' Enable "Public bucket" option',y.jsx("div",{className:"text-xs mt-1 ml-4 text-red-300",children:"This allows the app to serve logo images publicly"})]}),y.jsxs("li",{children:["Set MIME type restrictions to: ",y.jsx("span",{className:"bg-red-950 px-1 py-0.5 rounded text-xs",children:"image/png, image/jpeg, image/gif"})]}),y.jsx("li",{children:"Create the bucket and refresh this page to verify"})]})]}),f.bucketExists&&f.bucketPublic&&y.jsx("p",{className:"text-sm text-green-200",children:" Storage bucket is properly configured! Logo upload functionality is ready to use."})]}),y.jsx("button",{onClick:_,disabled:t,className:`
          w-full flex items-center justify-center space-x-2 py-3 px-4 
          rounded-lg transition-colors shadow-lg
          ${t?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}
        `,children:t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Setting Up..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(E3,{className:"h-5 w-5"}),y.jsx("span",{children:"Create Database Tables"})]})}),n&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-lg flex items-start space-x-3
          ${n.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[n.type==="success"?y.jsx(Sr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?y.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):y.jsx(sg,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:n.text})]}),y.jsxs("div",{className:"mt-5 pt-5 border-t border-dark-700",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Important Notes:"}),y.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-400 mt-2 space-y-1",children:[y.jsx("li",{children:"Make sure you have set the correct Supabase URL and Anon Key in your environment variables"}),y.jsx("li",{children:"You need to have admin privileges to create these tables"}),y.jsx("li",{children:"This application requires a connection to Supabase to function properly"}),y.jsxs("li",{children:[y.jsx("strong",{children:"The storage bucket MUST be created manually"})," - this cannot be automated through the API"]}),y.jsx("li",{children:"Logo upload functionality depends entirely on the storage bucket being properly configured"}),y.jsx("li",{children:"If logo upload fails, check that the bucket exists and is set to public"})]})]})]})},su=42,Va="\x1B",Di=`${Va}a\0`,A6=`${Va}a`,Yr=`${Va}!\0`,S6=`${Va}!\b`,T6=`${Va}!8`,I6=(t="-")=>t.repeat(su),N6=(t="=")=>t.repeat(su),k6=(t,e)=>{const n=Math.max(0,su-e.length-1);return(t.length>n?t.slice(0,n):t.padEnd(n," "))+" "+e},O6=t=>t.match(new RegExp(`.{1,${su}}`,"g"))||[t],ep=t=>(typeof t=="string"?new Date(t):t).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});class R6{constructor(){this.lines=[]}raw(e=""){return this.lines.push(e),this}br(){return this.lines.push(""),this}left(e,n=Yr){return this.lines.push(Di+n+e+Yr+Di),this}center(e,n=Yr){return this.lines.push(A6+n+e+Yr+Di),this}wrap(e,n=Yr){for(const i of O6(e))this.lines.push(Di+n+i+Yr+Di);return this}cols(e,n,i=Yr){return this.lines.push(Di+i+k6(e,n)+Yr+Di),this}sep(e="-"){return this.lines.push(I6(e)),this}dsep(e="="){return this.lines.push(N6(e)),this}build(){return[...this.lines]}async print(e){if(!await Eh())throw new Error("Local print agent is not available at http://127.0.0.1:17620");await ew(this.lines,e)}}const P6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(!1),[o,l]=X.useState({available:!1}),[f,g]=X.useState(null);X.useEffect(()=>{m()},[]);const m=async()=>{e(!0),g({text:"Verificare agent local...",type:"info"});try{const v=await Eh(1e3);l({available:v,lastChecked:new Date}),g(v?{text:"Agent local conectat i funcional!",type:"success"}:{text:"Agentul local nu rspunde. Verificai c ruleaz pe portul 17620.",type:"error"})}catch(v){l({available:!1,lastChecked:new Date}),g({text:`Eroare: ${v.message}`,type:"error"})}finally{e(!1)}},x=async()=>{i(!0),g({text:"Se trimite test de printare...",type:"info"});try{const v=new R6;v.br().center("TEST BILET",T6).br().center("Famous Summer Club Scan",S6).br().dsep().left(`Data: ${ep(new Date)}`).left("Status: Agent local conectat").dsep().br().center("Test reusit!").br().br(),await v.print({cut:!0,drawer:!1}),g({text:"Test de printare trimis cu succes! Verificai imprimanta.",type:"success"})}catch(v){g({text:`Test euat: ${v.message}`,type:"error"})}finally{i(!1)}};return y.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[y.jsx("div",{className:"flex items-center justify-between mb-4",children:y.jsxs("h2",{className:"text-xl font-semibold flex items-center text-white",children:[y.jsx(u0,{className:"h-6 w-6 mr-2 text-primary-500"}),"Setri Printare"]})}),y.jsx("p",{className:"text-gray-300 mb-6",children:"Configurare agent local de printare ESC/POS (80mm, 42 caractere/linie)."}),y.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-blue-900/20 to-cyan-900/20 rounded-lg border border-blue-800/50",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("h3",{className:"text-lg font-semibold flex items-center text-blue-300",children:[y.jsx(y3,{className:"h-5 w-5 mr-2"}),"Agent Local ESC/POS",o.available&&y.jsx(M2,{className:"h-4 w-4 ml-2 text-yellow-400"})]}),y.jsx("button",{onClick:m,disabled:t,className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium
              ${t?"bg-dark-700 text-gray-400 cursor-not-allowed":o.available?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}
            `,children:t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Verificare..."})]}):o.available?y.jsxs(y.Fragment,{children:[y.jsx(Sr,{className:"h-4 w-4"}),y.jsx("span",{children:"Conectat"})]}):y.jsxs(y.Fragment,{children:[y.jsx(Nf,{className:"h-4 w-4"}),y.jsx("span",{children:"Verific"})]})})]}),o.available?y.jsxs("div",{className:"bg-green-900/20 border border-green-800 rounded-lg p-4",children:[y.jsx("h4",{className:"text-green-300 font-medium mb-2",children:"Agent Activ"}),y.jsxs("div",{className:"text-green-200 text-sm space-y-1",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Status:"})," Funcional"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"URL:"})," http://127.0.0.1:17620"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Token:"})," Configurat (fbbe3ad2...)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Format:"})," ESC/POS 80mm (42 chars)"]})]}),o.lastChecked&&y.jsxs("p",{className:"text-green-300 text-xs mt-2",children:["Verificat: ",ep(o.lastChecked)]})]}):y.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-4",children:[y.jsx("h4",{className:"text-red-300 font-medium mb-2",children:"Agent Indisponibil"}),y.jsxs("div",{className:"text-red-200 text-sm space-y-2",children:[y.jsx("p",{children:"Agentul local nu rspunde. Verificai:"}),y.jsxs("ol",{className:"list-decimal list-inside ml-4 space-y-1",children:[y.jsx("li",{children:"Agentul ruleaz pe portul 17620"}),y.jsxs("li",{children:["GET /health returneaz ",JSON.stringify({ok:!0})]}),y.jsx("li",{children:"CORS permite origin-ul curent"}),y.jsx("li",{children:"Token-ul este corect configurat"})]})]})]}),y.jsxs("div",{className:"mt-4 bg-cyan-950/50 rounded-lg p-4 border border-cyan-800/50",children:[y.jsx("h4",{className:"text-cyan-300 text-sm font-medium mb-2",children:"API Endpoint"}),y.jsxs("div",{className:"text-cyan-200 text-sm space-y-3",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold mb-1",children:"Health Check:"}),y.jsx("div",{className:"bg-cyan-900/30 p-2 rounded font-mono text-xs",children:"GET http://127.0.0.1:17620/health"})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold mb-1",children:"Print Endpoint:"}),y.jsx("div",{className:"bg-cyan-900/30 p-2 rounded font-mono text-xs",children:"POST http://127.0.0.1:17620/print/escpos"})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold mb-1",children:"Headers:"}),y.jsxs("div",{className:"bg-cyan-900/30 p-2 rounded font-mono text-xs",children:["Content-Type: application/json",y.jsx("br",{}),"X-Print-Token: fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27"]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold mb-1",children:"Body Format:"}),y.jsx("div",{className:"bg-cyan-900/30 p-2 rounded font-mono text-xs overflow-x-auto whitespace-pre",children:`{
  "lines": ["line1", "line2", "..."],
  "cut": true,
  "drawer": false
}`})]})]})]}),y.jsxs("div",{className:"mt-4 bg-blue-950/50 rounded-lg p-4",children:[y.jsx("h4",{className:"text-blue-300 text-sm font-medium mb-2",children:"Specificaii"}),y.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[y.jsx("li",{children:"Format: ESC/POS 80mm"}),y.jsx("li",{children:"Lime: 42 caractere/linie"}),y.jsx("li",{children:"Comenzi: ESC/POS native (alignment, font)"}),y.jsx("li",{children:"Opiuni: paper cut, cash drawer"}),y.jsx("li",{children:"Autentificare: X-Print-Token header"})]})]}),o.available&&y.jsx("div",{className:"mt-4 flex justify-center",children:y.jsx("button",{onClick:x,disabled:n,className:`
                flex items-center space-x-2 px-6 py-3 rounded-lg font-medium
                ${n?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}
              `,children:n?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),y.jsx("span",{children:"Se testeaz..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(_3,{className:"h-5 w-5"}),y.jsx("span",{children:"Test Printare"})]})})})]}),f&&y.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-start space-x-3
          ${f.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":f.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[f.type==="success"?y.jsx(Sr,{className:"h-5 w-5 flex-shrink-0"}):f.type==="error"?y.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):y.jsx(u0,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:f.text})]}),y.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-4",children:[y.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Despre Sistemul de Printare"}),y.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[y.jsx("li",{children:"Sistem generic de printare ESC/POS (80mm)"}),y.jsx("li",{children:"Comunicare prin agent local HTTP"}),y.jsx("li",{children:"Suport pentru orice tip de bilet/bon/etichet"}),y.jsx("li",{children:"Builder modular pentru compoziie liber"}),y.jsx("li",{children:"Zero dependene de layout-uri predefinite"})]})]})]})},D6=()=>{const[t,e]=X.useState("general"),{backendStatus:n}=$n(),i=[{id:"general",label:"General",icon:R2},{id:"branding",label:"Logo & Branding",icon:Vo},{id:"printer",label:"Printer",icon:u0},{id:"data",label:"Data Import",icon:Of},{id:"setup",label:"Setup",icon:S3}],o=()=>{switch(t){case"general":return y.jsxs("div",{className:"space-y-6",children:[n==="connected"&&y.jsxs(y.Fragment,{children:[y.jsx(p6,{}),y.jsx(m6,{})]}),n!=="connected"&&y.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:y.jsx("p",{className:"text-red-200",children:"Connect to Supabase to configure general settings."})})]});case"branding":return y.jsxs("div",{className:"space-y-6",children:[n==="connected"&&y.jsx(g6,{}),n!=="connected"&&y.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:y.jsx("p",{className:"text-red-200",children:"Connect to Supabase to configure branding settings."})})]});case"printer":return y.jsx("div",{className:"space-y-6",children:y.jsx(P6,{})});case"data":return y.jsxs("div",{className:"space-y-6",children:[n==="connected"&&y.jsxs(y.Fragment,{children:[y.jsx(E6,{}),y.jsx(_6,{})]}),n!=="connected"&&y.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:y.jsx("p",{className:"text-red-200",children:"Connect to Supabase to import ticket data."})})]});case"database":return y.jsxs("div",{className:"space-y-6",children:[n==="connected"&&y.jsx(y.Fragment,{children:y.jsx(b6,{})}),n!=="connected"&&y.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:y.jsx("p",{className:"text-red-200",children:"Connect to Supabase to manage database settings."})})]});case"setup":return y.jsx("div",{className:"space-y-6",children:y.jsx(C6,{})});default:return null}};return y.jsxs("div",{className:"flex gap-8",children:[y.jsx("div",{className:"w-64 flex-shrink-0",children:y.jsxs("div",{className:"glass-card rounded-xl border border-mauve-500/20 overflow-hidden",children:[y.jsx("div",{className:"p-6 border-b border-mauve-500/20",children:y.jsx("h2",{className:"text-lg font-semibold text-white",children:"Categories"})}),y.jsx("nav",{className:"p-2",children:i.map(l=>{const f=l.icon;return y.jsxs("button",{onClick:()=>e(l.id),className:`
                    w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 text-left
                    ${t===l.id?"bg-gradient-to-r from-mauve-600 to-mauve-700 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-mauve-500/10"}
                  `,children:[y.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{className:"font-medium",children:l.label})]},l.id)})})]})}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsx("div",{className:"glass-card rounded-xl border border-mauve-500/20 p-6",children:o()})})]})},M6=()=>{const{mode:t,setMode:e,autoDetectedMode:n}=rw(),i=()=>{e(t==="mobile"?"desktop":"mobile")};return y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsxs("div",{className:"hidden sm:flex items-center text-xs text-gray-400",children:[y.jsx("span",{className:"mr-1",children:"Auto:"}),y.jsx("div",{className:"btn-square glass border border-mauve-500/30",children:n==="mobile"?y.jsx(d0,{className:"h-3 w-3 text-mauve-400"}):y.jsx(og,{className:"h-3 w-3 text-mauve-400"})})]}),y.jsx("button",{onClick:i,className:"glass-button btn-rect flex items-center space-x-2 text-white transition-all duration-300 hover:scale-105",title:`Switch to ${t==="mobile"?"desktop":"mobile"} mode`,children:t==="mobile"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"btn-square glass bg-mauve-500/20 border-mauve-400/30",children:y.jsx(d0,{className:"h-4 w-4 text-mauve-400"})}),y.jsx("span",{className:"text-sm hidden sm:inline",children:"Mobile"}),y.jsx(C3,{className:"h-5 w-5 text-gray-400"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"btn-square glass bg-blue-500/20 border-blue-400/30",children:y.jsx(og,{className:"h-4 w-4 text-blue-400"})}),y.jsx("span",{className:"text-sm hidden sm:inline",children:"Desktop"}),y.jsx(A3,{className:"h-5 w-5 text-mauve-400"})]})})]})},L6=()=>{const{isLoading:t,ticketsCount:e,backendStatus:n,appSettings:i}=$n(),o=(i==null?void 0:i.clubName)||"Famous Summer Club";return X.useEffect(()=>{document.title=`Settings - ${o} Scan`},[o]),y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-dark-950 via-dark-900 to-dark-800",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"glass-card rounded-xl p-3",children:y.jsx(v3,{className:"h-8 w-8 text-mauve-400"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),y.jsx("p",{className:"text-gray-400",children:o})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx(M6,{}),y.jsx(S2,{to:"/",className:"btn-square glass-button text-gray-300 hover:text-mauve-400 transition-colors",title:"Back to scanner",children:y.jsx(k2,{className:"h-5 w-5"})}),y.jsx("div",{className:`
              flex items-center space-x-3 glass-card rounded-xl px-4 py-3 border
              ${n==="connected"?"border-green-500/30":n==="disconnected"?"border-red-500/30":"border-gray-500/30"}
            `,children:n==="connected"?y.jsxs(y.Fragment,{children:[y.jsx(I2,{className:"h-5 w-5 text-green-400"}),y.jsx("span",{className:"text-green-400 font-medium",children:"Connected"})]}):n==="disconnected"?y.jsxs(y.Fragment,{children:[y.jsx(T2,{className:"h-5 w-5 text-red-400"}),y.jsx("span",{className:"text-red-400 font-medium",children:"Disconnected"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-gray-400 border-t-transparent rounded-full"}),y.jsx("span",{className:"text-gray-400 font-medium",children:"Connecting..."})]})})]})]}),!t&&y.jsx("div",{className:"glass-card rounded-xl p-4 mb-8 border border-mauve-500/20",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Database Status"}),y.jsx("p",{className:"text-gray-300 mt-1",children:e>0?`${e} tickets in database`:n==="connected"?"No tickets found - import CSV to add tickets":"Database connection required"})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-2xl font-bold text-mauve-400",children:e}),y.jsx("div",{className:"text-sm text-gray-400",children:"Tickets"})]})]})}),y.jsx(D6,{})]})})},B6=()=>y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-center px-4",children:[y.jsx("h1",{className:"text-9xl font-bold text-dark-800",children:"404"}),y.jsx("h2",{className:"text-3xl font-bold text-white mt-8 mb-2",children:"Page Not Found"}),y.jsx("p",{className:"text-gray-300 mb-8 max-w-md",children:"Pagina cutat nu exist sau a fost mutat."}),y.jsxs(S2,{to:"/",className:"inline-flex items-center px-5 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors shadow-lg",children:[y.jsx(k2,{className:"h-5 w-5 mr-2"}),"napoi Acas"]})]}),j6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(!1),[o,l]=X.useState(null),[f,g]=X.useState(!1),[m,x]=X.useState(!1);X.useEffect(()=>{const T=/iPad|iPhone|iPod/.test(navigator.userAgent);g(T);const L=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if(x(L),Wt.isStandalone())return;(async()=>{let I="beforeinstallprompt"in window;const N=Wt.checkInstallability();console.log("PWA installability check:",{canInstall:I,criteria:N,isStandalone:Wt.isStandalone(),userAgent:navigator.userAgent}),!N.canInstall&&(L||T)&&setTimeout(()=>{e(!0),i(!0)},3e3)})();const H=I=>{const N=I;I.preventDefault(),console.log("beforeinstallprompt event fired"),l(N),i(!0),localStorage.getItem("pwa-install-prompt-seen")||setTimeout(()=>{e(!0)},5e3)},P=()=>{console.log("App installed event fired"),e(!1),i(!1),l(null)};if(window.addEventListener("beforeinstallprompt",H),window.addEventListener("appinstalled",P),!T){const I=setTimeout(()=>{const N=localStorage.getItem("pwa-install-prompt-seen"),F=Wt.checkInstallability();console.log("PWA test timeout check:",{hasSeenPrompt:N,isStandalone:Wt.isStandalone(),canInstall:F.canInstall,reasons:F.reasons}),!N&&!Wt.isStandalone()&&F.canInstall&&(e(!0),i(!0))},1e4);return()=>{clearTimeout(I),window.removeEventListener("beforeinstallprompt",H),window.removeEventListener("appinstalled",P)}}return()=>{window.removeEventListener("beforeinstallprompt",H),window.removeEventListener("appinstalled",P)}},[]);const v=async()=>{if(o){o.prompt();const{outcome:T}=await o.userChoice;T==="accepted"&&(e(!1),i(!1),l(null))}else e(!1),localStorage.setItem("pwa-install-prompt-seen","true")},_=()=>{e(!1),localStorage.setItem("pwa-install-prompt-seen","true")},S=()=>{e(!1)};return!t||Wt.isStandalone()?null:y.jsx("div",{className:"fixed bottom-4 right-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4 rounded-lg shadow-xl border border-primary-500 max-w-sm z-50 animate-bounce-in",children:y.jsxs("div",{className:"flex items-start space-x-3",children:[m?y.jsx(h3,{className:"h-6 w-6 text-primary-200 flex-shrink-0"}):y.jsx(d0,{className:"h-6 w-6 text-primary-200 flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-bold text-sm mb-1",children:"Install App"}),y.jsx("p",{className:"text-xs text-primary-100 mb-3",children:f?'Tap the share button in Safari and select "Add to Home Screen"':"Install QR Scan for quick access, offline features, and better performance"}),!f&&y.jsxs("div",{className:"flex flex-col space-y-2",children:[y.jsxs("button",{onClick:v,className:"flex items-center justify-center space-x-2 bg-white text-primary-700 px-3 py-2 rounded-md text-xs font-bold hover:bg-gray-100 transition-colors shadow-md",children:[y.jsx(If,{className:"h-3 w-3"}),y.jsx("span",{children:"Install Now"})]}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{onClick:S,className:"flex-1 text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Remind Later"}),y.jsx("button",{onClick:_,className:"flex-1 text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Not Now"})]})]}),f&&y.jsx("button",{onClick:_,className:"text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Got it"})]}),y.jsx("button",{onClick:_,className:"text-primary-200 hover:text-white p-1 rounded hover:bg-primary-800 transition-colors",children:y.jsx(D2,{className:"h-4 w-4"})})]})})},F6=()=>{const[t,e]=X.useState(!1),[n,i]=X.useState(!1);X.useEffect(()=>{Wt.onUpdateAvailable(g=>{console.log("Update available, showing notification"),e(!0)}),Wt.hasUpdateAvailable()&&e(!0)},[]);const o=async()=>{i(!0);try{await Wt.applyUpdate(),setTimeout(()=>{window.location.reload()},1e3)}catch(g){console.error("Error applying update:",g),i(!1),window.location.reload()}},l=()=>{e(!1),localStorage.setItem("pwa-update-dismissed",Date.now().toString())},f=()=>{e(!1),setTimeout(()=>{e(!0)},60*60*1e3)};return t?y.jsx("div",{className:"fixed top-4 right-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-lg shadow-xl border border-blue-500 max-w-sm z-50 animate-bounce-in",children:y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:y.jsx(Nf,{className:"h-5 w-5 text-blue-200"})})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-bold text-sm mb-1",children:"Update Available!"}),y.jsx("p",{className:"text-xs text-blue-100 mb-3",children:"A new version of the app is available with the latest features and improvements."}),y.jsxs("div",{className:"flex flex-col space-y-2",children:[y.jsx("button",{onClick:o,disabled:n,className:"flex items-center justify-center space-x-2 bg-white text-blue-700 px-3 py-2 rounded-md text-xs font-bold hover:bg-gray-100 transition-colors shadow-md disabled:opacity-50",children:n?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-blue-700 border-t-transparent rounded-full"}),y.jsx("span",{children:"Updating..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(If,{className:"h-3 w-3"}),y.jsx("span",{children:"Update Now"})]})}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{onClick:f,disabled:n,className:"flex-1 text-blue-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-blue-800 transition-colors",children:"Later"}),y.jsx("button",{onClick:l,disabled:n,className:"flex-1 text-blue-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-blue-800 transition-colors",children:"Dismiss"})]})]})]}),y.jsx("button",{onClick:l,disabled:n,className:"text-blue-200 hover:text-white p-1 rounded hover:bg-blue-800 transition-colors",children:y.jsx(D2,{className:"h-4 w-4"})})]})}):null};function U6(){return X.useEffect(()=>{Wt.initialize(),Wt.requestNotificationPermission()},[]),y.jsx(h6,{children:y.jsx(o3,{children:y.jsxs(Wb,{children:[y.jsxs(JE,{children:[y.jsx(zo,{path:"/",element:y.jsx(vl,{children:y.jsx(Jg,{})})}),y.jsx(zo,{path:"/scanner",element:y.jsx(vl,{children:y.jsx(Jg,{})})}),y.jsx(zo,{path:"/settings",element:y.jsx(vl,{children:y.jsx(L6,{})})}),y.jsx(zo,{path:"*",element:y.jsx(vl,{children:y.jsx(B6,{})})})]}),y.jsx(j6,{}),y.jsx(F6,{})]})})})}const $6={SUCCESS:"https://assets.mixkit.co/active_storage/sfx/213/213-preview.mp3",ERROR:"https://assets.mixkit.co/active_storage/sfx/178/178-preview.mp3",SCAN:"https://assets.mixkit.co/active_storage/sfx/1234/1234-preview.mp3"},z6=()=>{Object.entries($6).forEach(([t,e])=>{const n=new Audio(e);n.preload="auto",n.load()})};z6();Hb();"serviceWorker"in navigator&&"PushManager"in window&&Wt.isServiceWorkerSupported()&&window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});console.log("Service Worker registered successfully:",t),await t.update(),t.addEventListener("updatefound",()=>{const e=t.installing;console.log("New service worker found"),e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New service worker installed, update available"),window.dispatchEvent(new CustomEvent("sw-update-available")))})})}catch(t){console.error("Service Worker registration failed:",t)}});g2(document.getElementById("root")).render(y.jsx(X.StrictMode,{children:y.jsx(U6,{})}));export{yc as g};
