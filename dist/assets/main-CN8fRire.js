function tp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var np={exports:{}},_c={},rp={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),Lw=Symbol.for("react.portal"),Bw=Symbol.for("react.fragment"),jw=Symbol.for("react.strict_mode"),Fw=Symbol.for("react.profiler"),Uw=Symbol.for("react.provider"),$w=Symbol.for("react.context"),zw=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),Hw=Symbol.for("react.memo"),Ww=Symbol.for("react.lazy"),Uh=Symbol.iterator;function Gw(t){return t===null||typeof t!="object"?null:(t=Uh&&t[Uh]||t["@@iterator"],typeof t=="function"?t:null)}var ip={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sp=Object.assign,op={};function oo(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||ip}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ap(){}ap.prototype=oo.prototype;function P0(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||ip}var D0=P0.prototype=new ap;D0.constructor=P0;sp(D0,oo.prototype);D0.isPureReactComponent=!0;var $h=Array.isArray,lp=Object.prototype.hasOwnProperty,M0={current:null},cp={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)lp.call(e,i)&&!cp.hasOwnProperty(i)&&(o[i]=e[i]);var g=arguments.length-2;if(g===1)o.children=n;else if(1<g){for(var m=Array(g),w=0;w<g;w++)m[w]=arguments[w+2];o.children=m}if(t&&t.defaultProps)for(i in g=t.defaultProps,g)o[i]===void 0&&(o[i]=g[i]);return{$$typeof:ka,type:t,key:l,ref:f,props:o,_owner:M0.current}}function Xw(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function L0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function qw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zh=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qw(""+t.key):e.toString(36)}function kl(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case ka:case Lw:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Tu(f,0):i,$h(o)?(n="",t!=null&&(n=t.replace(zh,"$&/")+"/"),kl(o,e,n,"",function(w){return w})):o!=null&&(L0(o)&&(o=Xw(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(zh,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",$h(t))for(var g=0;g<t.length;g++){l=t[g];var m=i+Tu(l,g);f+=kl(l,e,n,m,o)}else if(m=Gw(t),typeof m=="function")for(t=m.call(t),g=0;!(l=t.next()).done;)l=l.value,m=i+Tu(l,g++),f+=kl(l,e,n,m,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function tl(t,e,n){if(t==null)return t;var i=[],o=0;return kl(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Yw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},Ol={transition:null},Kw={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:M0};function dp(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:tl,forEach:function(t,e,n){tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tl(t,function(){e++}),e},toArray:function(t){return tl(t,function(e){return e})||[]},only:function(t){if(!L0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=oo;$e.Fragment=Bw;$e.Profiler=Fw;$e.PureComponent=P0;$e.StrictMode=jw;$e.Suspense=Vw;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kw;$e.act=dp;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sp({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=M0.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var g=t.type.defaultProps;for(m in e)lp.call(e,m)&&!cp.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&g!==void 0?g[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){g=Array(m);for(var w=0;w<m;w++)g[w]=arguments[w+2];i.children=g}return{$$typeof:ka,type:t.type,key:o,ref:l,props:i,_owner:f}};$e.createContext=function(t){return t={$$typeof:$w,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uw,_context:t},t.Consumer=t};$e.createElement=up;$e.createFactory=function(t){var e=up.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:zw,render:t}};$e.isValidElement=L0;$e.lazy=function(t){return{$$typeof:Ww,_payload:{_status:-1,_result:t},_init:Yw}};$e.memo=function(t,e){return{$$typeof:Hw,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};$e.unstable_act=dp;$e.useCallback=function(t,e){return hn.current.useCallback(t,e)};$e.useContext=function(t){return hn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return hn.current.useEffect(t,e)};$e.useId=function(){return hn.current.useId()};$e.useImperativeHandle=function(t,e,n){return hn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return hn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return hn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return hn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return hn.current.useReducer(t,e,n)};$e.useRef=function(t){return hn.current.useRef(t)};$e.useState=function(t){return hn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return hn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return hn.current.useTransition()};$e.version="18.3.1";rp.exports=$e;var G=rp.exports;const Bs=bc(G),Zw=tp({__proto__:null,default:Bs},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw=G,Jw=Symbol.for("react.element"),ey=Symbol.for("react.fragment"),ty=Object.prototype.hasOwnProperty,ny=Qw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ry={key:!0,ref:!0,__self:!0,__source:!0};function fp(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)ty.call(e,i)&&!ry.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:Jw,type:t,key:l,ref:f,props:o,_owner:ny.current}}_c.Fragment=ey;_c.jsx=fp;_c.jsxs=fp;np.exports=_c;var x=np.exports,hp={exports:{}},Fn={},gp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,te){var ye=ne.length;ne.push(te);e:for(;0<ye;){var he=ye-1>>>1,fe=ne[he];if(0<o(fe,te))ne[he]=te,ne[ye]=fe,ye=he;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var te=ne[0],ye=ne.pop();if(ye!==te){ne[0]=ye;e:for(var he=0,fe=ne.length,ge=fe>>>1;he<ge;){var Oe=2*(he+1)-1,Xe=ne[Oe],de=Oe+1,yt=ne[de];if(0>o(Xe,ye))de<fe&&0>o(yt,Xe)?(ne[he]=yt,ne[de]=ye,he=de):(ne[he]=Xe,ne[Oe]=ye,he=Oe);else if(de<fe&&0>o(yt,ye))ne[he]=yt,ne[de]=ye,he=de;else break e}}return te}function o(ne,te){var ye=ne.sortIndex-te.sortIndex;return ye!==0?ye:ne.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,g=f.now();t.unstable_now=function(){return f.now()-g}}var m=[],w=[],v=1,b=null,A=3,T=!1,L=!1,M=!1,H=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ne){for(var te=n(w);te!==null;){if(te.callback===null)i(w);else if(te.startTime<=ne)i(w),te.sortIndex=te.expirationTime,e(m,te);else break;te=n(w)}}function F(ne){if(M=!1,N(ne),!L)if(n(m)!==null)L=!0,Fe($);else{var te=n(w);te!==null&&le(F,te.startTime-ne)}}function $(ne,te){L=!1,M&&(M=!1,O(P),P=-1),T=!0;var ye=A;try{for(N(te),b=n(m);b!==null&&(!(b.expirationTime>te)||ne&&!re());){var he=b.callback;if(typeof he=="function"){b.callback=null,A=b.priorityLevel;var fe=he(b.expirationTime<=te);te=t.unstable_now(),typeof fe=="function"?b.callback=fe:b===n(m)&&i(m),N(te)}else i(m);b=n(m)}if(b!==null)var ge=!0;else{var Oe=n(w);Oe!==null&&le(F,Oe.startTime-te),ge=!1}return ge}finally{b=null,A=ye,T=!1}}var z=!1,B=null,P=-1,R=5,X=-1;function re(){return!(t.unstable_now()-X<R)}function Q(){if(B!==null){var ne=t.unstable_now();X=ne;var te=!0;try{te=B(!0,ne)}finally{te?ae():(z=!1,B=null)}}else z=!1}var ae;if(typeof I=="function")ae=function(){I(Q)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,K=Re.port2;Re.port1.onmessage=Q,ae=function(){K.postMessage(null)}}else ae=function(){H(Q,0)};function Fe(ne){B=ne,z||(z=!0,ae())}function le(ne,te){P=H(function(){ne(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){L||T||(L=!0,Fe($))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var te=3;break;default:te=A}var ye=A;A=te;try{return ne()}finally{A=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,te){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ye=A;A=ne;try{return te()}finally{A=ye}},t.unstable_scheduleCallback=function(ne,te,ye){var he=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?he+ye:he):ye=he,ne){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ye+fe,ne={id:v++,callback:te,priorityLevel:ne,startTime:ye,expirationTime:fe,sortIndex:-1},ye>he?(ne.sortIndex=ye,e(w,ne),n(m)===null&&ne===n(w)&&(M?(O(P),P=-1):M=!0,le(F,ye-he))):(ne.sortIndex=fe,e(m,ne),L||T||(L=!0,Fe($))),ne},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(ne){var te=A;return function(){var ye=A;A=te;try{return ne.apply(this,arguments)}finally{A=ye}}}})(pp);gp.exports=pp;var iy=gp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=G,jn=iy;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,aa={};function Zi(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(aa[t]=e,t=0;t<e.length;t++)mp.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,oy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vh={},Hh={};function ay(t){return xd.call(Hh,t)?!0:xd.call(Vh,t)?!1:oy.test(t)?Hh[t]=!0:(Vh[t]=!0,!1)}function ly(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cy(t,e,n,i){if(e===null||typeof e>"u"||ly(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var B0=/[\-:]([a-z])/g;function j0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(B0,j0);en[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(B0,j0);en[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(B0,j0);en[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function F0(t,e,n,i){var o=en.hasOwnProperty(e)?en[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cy(e,n,o,i)&&(n=null),i||o===null?ay(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $r=sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nl=Symbol.for("react.element"),_s=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),wd=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),wp=Symbol.for("react.context"),$0=Symbol.for("react.forward_ref"),yd=Symbol.for("react.suspense"),vd=Symbol.for("react.suspense_list"),z0=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),yp=Symbol.for("react.offscreen"),Wh=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=Wh&&t[Wh]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,Iu;function Fo(t){if(Iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Iu=e&&e[1]||""}return`
`+Iu+t}var Nu=!1;function ku(t,e){if(!t||Nu)return"";Nu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var i=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){i=w}t.call(e.prototype)}else{try{throw Error()}catch(w){i=w}t()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var o=w.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,g=l.length-1;1<=f&&0<=g&&o[f]!==l[g];)g--;for(;1<=f&&0<=g;f--,g--)if(o[f]!==l[g]){if(f!==1||g!==1)do if(f--,g--,0>g||o[f]!==l[g]){var m=`
`+o[f].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=f&&0<=g);break}}}finally{Nu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function uy(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=ku(t.type,!1),t;case 11:return t=ku(t.type.render,!1),t;case 1:return t=ku(t.type,!0),t;default:return""}}function Ed(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case _s:return"Portal";case wd:return"Profiler";case U0:return"StrictMode";case yd:return"Suspense";case vd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wp:return(t.displayName||"Context")+".Consumer";case xp:return(t._context.displayName||"Context")+".Provider";case $0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z0:return e=t.displayName||null,e!==null?e:Ed(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return Ed(t(e))}catch{}}return null}function dy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ed(e);case 8:return e===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fy(t){var e=vp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rl(t){t._valueTracker||(t._valueTracker=fy(t))}function Ep(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=vp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bd(t,e){var n=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bp(t,e){e=e.checked,e!=null&&F0(t,"checked",e,!1)}function _d(t,e){bp(t,e);var n=wi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cd(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cd(t,e,n){(e!=="number"||Vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uo=Array.isArray;function js(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Uo(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function _p(t,e){var n=wi(e.value),i=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Yh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,Sp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hy=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){hy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function Ap(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function Tp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Ap(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var gy=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Td(t,e){if(e){if(gy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Id(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=null;function V0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Fs=null,Us=null;function Kh(t){if(t=Pa(t)){if(typeof kd!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Ic(e),kd(t.stateNode,t.type,e))}}function Ip(t){Fs?Us?Us.push(t):Us=[t]:Fs=t}function Np(){if(Fs){var t=Fs,e=Us;if(Us=Fs=null,Kh(t),e)for(t=0;t<e.length;t++)Kh(e[t])}}function kp(t,e){return t(e)}function Op(){}var Ou=!1;function Rp(t,e,n){if(Ou)return t(e,n);Ou=!0;try{return kp(t,e,n)}finally{Ou=!1,(Fs!==null||Us!==null)&&(Op(),Np())}}function ca(t,e){var n=t.stateNode;if(n===null)return null;var i=Ic(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Od=!1;if(Br)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{Od=!1}function py(t,e,n,i,o,l,f,g,m){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(v){this.onError(v)}}var qo=!1,Hl=null,Wl=!1,Rd=null,my={onError:function(t){qo=!0,Hl=t}};function xy(t,e,n,i,o,l,f,g,m){qo=!1,Hl=null,py.apply(my,arguments)}function wy(t,e,n,i,o,l,f,g,m){if(xy.apply(this,arguments),qo){if(qo){var w=Hl;qo=!1,Hl=null}else throw Error(ie(198));Wl||(Wl=!0,Rd=w)}}function Qi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zh(t){if(Qi(t)!==t)throw Error(ie(188))}function yy(t){var e=t.alternate;if(!e){if(e=Qi(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Zh(o),t;if(l===i)return Zh(o),e;l=l.sibling}throw Error(ie(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,g=o.child;g;){if(g===n){f=!0,n=o,i=l;break}if(g===i){f=!0,i=o,n=l;break}g=g.sibling}if(!f){for(g=l.child;g;){if(g===n){f=!0,n=l,i=o;break}if(g===i){f=!0,i=l,n=o;break}g=g.sibling}if(!f)throw Error(ie(189))}}if(n.alternate!==i)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function Dp(t){return t=yy(t),t!==null?Mp(t):null}function Mp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mp(t);if(e!==null)return e;t=t.sibling}return null}var Lp=jn.unstable_scheduleCallback,Qh=jn.unstable_cancelCallback,vy=jn.unstable_shouldYield,Ey=jn.unstable_requestPaint,kt=jn.unstable_now,by=jn.unstable_getCurrentPriorityLevel,H0=jn.unstable_ImmediatePriority,Bp=jn.unstable_UserBlockingPriority,Gl=jn.unstable_NormalPriority,_y=jn.unstable_LowPriority,jp=jn.unstable_IdlePriority,Cc=null,Ar=null;function Cy(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Cc,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:Ty,Sy=Math.log,Ay=Math.LN2;function Ty(t){return t>>>=0,t===0?32:31-(Sy(t)/Ay|0)|0}var sl=64,ol=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var g=f&~o;g!==0?i=$o(g):(l&=f,l!==0&&(i=$o(l)))}else f=n&~o,f!==0?i=$o(f):l!==0&&(i=$o(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ur(e),o=1<<n,i|=t[n],e&=~o;return i}function Iy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ny(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-ur(l),g=1<<f,m=o[f];m===-1?(!(g&n)||g&i)&&(o[f]=Iy(g,e)):m<=e&&(t.expiredLanes|=g),l&=~g}}function Pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fp(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function Ru(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function ky(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-ur(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function W0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ur(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var nt=0;function Up(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $p,G0,zp,Vp,Hp,Dd=!1,al=[],li=null,ci=null,ui=null,ua=new Map,da=new Map,ti=[],Oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jh(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function No(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Pa(e),e!==null&&G0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Ry(t,e,n,i,o){switch(e){case"focusin":return li=No(li,t,e,n,i,o),!0;case"dragenter":return ci=No(ci,t,e,n,i,o),!0;case"mouseover":return ui=No(ui,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return ua.set(l,No(ua.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,da.set(l,No(da.get(l)||null,t,e,n,i,o)),!0}return!1}function Wp(t){var e=Ui(t.target);if(e!==null){var n=Qi(e);if(n!==null){if(e=n.tag,e===13){if(e=Pp(n),e!==null){t.blockedOn=e,Hp(t.priority,function(){zp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nd=i,n.target.dispatchEvent(i),Nd=null}else return e=Pa(n),e!==null&&G0(e),t.blockedOn=n,!1;e.shift()}return!0}function e1(t,e,n){Rl(t)&&n.delete(e)}function Py(){Dd=!1,li!==null&&Rl(li)&&(li=null),ci!==null&&Rl(ci)&&(ci=null),ui!==null&&Rl(ui)&&(ui=null),ua.forEach(e1),da.forEach(e1)}function ko(t,e){t.blockedOn===e&&(t.blockedOn=null,Dd||(Dd=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,Py)))}function fa(t){function e(o){return ko(o,t)}if(0<al.length){ko(al[0],t);for(var n=1;n<al.length;n++){var i=al[n];i.blockedOn===t&&(i.blockedOn=null)}}for(li!==null&&ko(li,t),ci!==null&&ko(ci,t),ui!==null&&ko(ui,t),ua.forEach(e),da.forEach(e),n=0;n<ti.length;n++)i=ti[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&ti.shift()}var $s=$r.ReactCurrentBatchConfig,ql=!0;function Dy(t,e,n,i){var o=nt,l=$s.transition;$s.transition=null;try{nt=1,X0(t,e,n,i)}finally{nt=o,$s.transition=l}}function My(t,e,n,i){var o=nt,l=$s.transition;$s.transition=null;try{nt=4,X0(t,e,n,i)}finally{nt=o,$s.transition=l}}function X0(t,e,n,i){if(ql){var o=Md(t,e,n,i);if(o===null)zu(t,e,i,Yl,n),Jh(t,i);else if(Ry(o,t,e,n,i))i.stopPropagation();else if(Jh(t,i),e&4&&-1<Oy.indexOf(t)){for(;o!==null;){var l=Pa(o);if(l!==null&&$p(l),l=Md(t,e,n,i),l===null&&zu(t,e,i,Yl,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else zu(t,e,i,null,n)}}var Yl=null;function Md(t,e,n,i){if(Yl=null,t=V0(i),t=Ui(t),t!==null)if(e=Qi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yl=t,null}function Gp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(by()){case H0:return 1;case Bp:return 4;case Gl:case _y:return 16;case jp:return 536870912;default:return 16}default:return 16}}var ii=null,q0=null,Pl=null;function Xp(){if(Pl)return Pl;var t,e=q0,n=e.length,i,o="value"in ii?ii.value:ii.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return Pl=o.slice(t,1<i?1-i:void 0)}function Dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ll(){return!0}function t1(){return!1}function Un(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(n=t[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ll:t1,this.isPropagationStopped=t1,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Y0=Un(ao),Ra=_t({},ao,{view:0,detail:0}),Ly=Un(Ra),Pu,Du,Oo,Sc=_t({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(Pu=t.screenX-Oo.screenX,Du=t.screenY-Oo.screenY):Du=Pu=0,Oo=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),n1=Un(Sc),By=_t({},Sc,{dataTransfer:0}),jy=Un(By),Fy=_t({},Ra,{relatedTarget:0}),Mu=Un(Fy),Uy=_t({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),$y=Un(Uy),zy=_t({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vy=Un(zy),Hy=_t({},ao,{data:0}),r1=Un(Hy),Wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xy[t])?!!e[t]:!1}function K0(){return qy}var Yy=_t({},Ra,{key:function(t){if(t.key){var e=Wy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(t){return t.type==="keypress"?Dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ky=Un(Yy),Zy=_t({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i1=Un(Zy),Qy=_t({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),Jy=Un(Qy),ev=_t({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),tv=Un(ev),nv=_t({},Sc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rv=Un(nv),iv=[9,13,27,32],Z0=Br&&"CompositionEvent"in window,Yo=null;Br&&"documentMode"in document&&(Yo=document.documentMode);var sv=Br&&"TextEvent"in window&&!Yo,qp=Br&&(!Z0||Yo&&8<Yo&&11>=Yo),s1=" ",o1=!1;function Yp(t,e){switch(t){case"keyup":return iv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ss=!1;function ov(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(o1=!0,s1);case"textInput":return t=e.data,t===s1&&o1?null:t;default:return null}}function av(t,e){if(Ss)return t==="compositionend"||!Z0&&Yp(t,e)?(t=Xp(),Pl=q0=ii=null,Ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qp&&e.locale!=="ko"?null:e.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lv[t.type]:e==="textarea"}function Zp(t,e,n,i){Ip(i),e=Kl(e,"onChange"),0<e.length&&(n=new Y0("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ko=null,ha=null;function cv(t){lm(t,0)}function Ac(t){var e=Is(t);if(Ep(e))return t}function uv(t,e){if(t==="change")return e}var Qp=!1;if(Br){var Lu;if(Br){var Bu="oninput"in document;if(!Bu){var l1=document.createElement("div");l1.setAttribute("oninput","return;"),Bu=typeof l1.oninput=="function"}Lu=Bu}else Lu=!1;Qp=Lu&&(!document.documentMode||9<document.documentMode)}function c1(){Ko&&(Ko.detachEvent("onpropertychange",Jp),ha=Ko=null)}function Jp(t){if(t.propertyName==="value"&&Ac(ha)){var e=[];Zp(e,ha,t,V0(t)),Rp(cv,e)}}function dv(t,e,n){t==="focusin"?(c1(),Ko=e,ha=n,Ko.attachEvent("onpropertychange",Jp)):t==="focusout"&&c1()}function fv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ac(ha)}function hv(t,e){if(t==="click")return Ac(e)}function gv(t,e){if(t==="input"||t==="change")return Ac(e)}function pv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hr=typeof Object.is=="function"?Object.is:pv;function ga(t,e){if(hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!xd.call(e,o)||!hr(t[o],e[o]))return!1}return!0}function u1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d1(t,e){var n=u1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u1(n)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=Vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vl(t.document)}return e}function Q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mv(t){var e=tm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(i!==null&&Q0(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=d1(n,l);var f=d1(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xv=Br&&"documentMode"in document&&11>=document.documentMode,As=null,Ld=null,Zo=null,Bd=!1;function f1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bd||As==null||As!==Vl(i)||(i=As,"selectionStart"in i&&Q0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Zo&&ga(Zo,i)||(Zo=i,i=Kl(Ld,"onSelect"),0<i.length&&(e=new Y0("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=As)))}function cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},ju={},nm={};Br&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Tc(t){if(ju[t])return ju[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nm)return ju[t]=e[n];return t}var rm=Tc("animationend"),im=Tc("animationiteration"),sm=Tc("animationstart"),om=Tc("transitionend"),am=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){am.set(t,e),Zi(e,[t])}for(var Fu=0;Fu<h1.length;Fu++){var Uu=h1[Fu],wv=Uu.toLowerCase(),yv=Uu[0].toUpperCase()+Uu.slice(1);Ei(wv,"on"+yv)}Ei(rm,"onAnimationEnd");Ei(im,"onAnimationIteration");Ei(sm,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(om,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function g1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,wy(i,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var g=i[f],m=g.instance,w=g.currentTarget;if(g=g.listener,m!==l&&o.isPropagationStopped())break e;g1(o,g,w),l=m}else for(f=0;f<i.length;f++){if(g=i[f],m=g.instance,w=g.currentTarget,g=g.listener,m!==l&&o.isPropagationStopped())break e;g1(o,g,w),l=m}}}if(Wl)throw t=Rd,Wl=!1,Rd=null,t}function ht(t,e){var n=e[zd];n===void 0&&(n=e[zd]=new Set);var i=t+"__bubble";n.has(i)||(cm(e,t,2,!1),n.add(i))}function $u(t,e,n){var i=0;e&&(i|=4),cm(n,t,i,e)}var ul="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[ul]){t[ul]=!0,mp.forEach(function(n){n!=="selectionchange"&&(vv.has(n)||$u(n,!1,t),$u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ul]||(e[ul]=!0,$u("selectionchange",!1,e))}}function cm(t,e,n,i){switch(Gp(e)){case 1:var o=Dy;break;case 4:o=My;break;default:o=X0}n=o.bind(null,e,n,t),o=void 0,!Od||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function zu(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;f=f.return}for(;g!==null;){if(f=Ui(g),f===null)return;if(m=f.tag,m===5||m===6){i=l=f;continue e}g=g.parentNode}}i=i.return}Rp(function(){var w=l,v=V0(n),b=[];e:{var A=am.get(t);if(A!==void 0){var T=Y0,L=t;switch(t){case"keypress":if(Dl(n)===0)break e;case"keydown":case"keyup":T=Ky;break;case"focusin":L="focus",T=Mu;break;case"focusout":L="blur",T=Mu;break;case"beforeblur":case"afterblur":T=Mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=n1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Jy;break;case rm:case im:case sm:T=$y;break;case om:T=tv;break;case"scroll":T=Ly;break;case"wheel":T=rv;break;case"copy":case"cut":case"paste":T=Vy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=i1}var M=(e&4)!==0,H=!M&&t==="scroll",O=M?A!==null?A+"Capture":null:A;M=[];for(var I=w,N;I!==null;){N=I;var F=N.stateNode;if(N.tag===5&&F!==null&&(N=F,O!==null&&(F=ca(I,O),F!=null&&M.push(ma(I,F,N)))),H)break;I=I.return}0<M.length&&(A=new T(A,L,null,n,v),b.push({event:A,listeners:M}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",A&&n!==Nd&&(L=n.relatedTarget||n.fromElement)&&(Ui(L)||L[jr]))break e;if((T||A)&&(A=v.window===v?v:(A=v.ownerDocument)?A.defaultView||A.parentWindow:window,T?(L=n.relatedTarget||n.toElement,T=w,L=L?Ui(L):null,L!==null&&(H=Qi(L),L!==H||L.tag!==5&&L.tag!==6)&&(L=null)):(T=null,L=w),T!==L)){if(M=n1,F="onMouseLeave",O="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(M=i1,F="onPointerLeave",O="onPointerEnter",I="pointer"),H=T==null?A:Is(T),N=L==null?A:Is(L),A=new M(F,I+"leave",T,n,v),A.target=H,A.relatedTarget=N,F=null,Ui(v)===w&&(M=new M(O,I+"enter",L,n,v),M.target=N,M.relatedTarget=H,F=M),H=F,T&&L)t:{for(M=T,O=L,I=0,N=M;N;N=gs(N))I++;for(N=0,F=O;F;F=gs(F))N++;for(;0<I-N;)M=gs(M),I--;for(;0<N-I;)O=gs(O),N--;for(;I--;){if(M===O||O!==null&&M===O.alternate)break t;M=gs(M),O=gs(O)}M=null}else M=null;T!==null&&p1(b,A,T,M,!1),L!==null&&H!==null&&p1(b,H,L,M,!0)}}e:{if(A=w?Is(w):window,T=A.nodeName&&A.nodeName.toLowerCase(),T==="select"||T==="input"&&A.type==="file")var $=uv;else if(a1(A))if(Qp)$=gv;else{$=fv;var z=dv}else(T=A.nodeName)&&T.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&($=hv);if($&&($=$(t,w))){Zp(b,$,n,v);break e}z&&z(t,A,w),t==="focusout"&&(z=A._wrapperState)&&z.controlled&&A.type==="number"&&Cd(A,"number",A.value)}switch(z=w?Is(w):window,t){case"focusin":(a1(z)||z.contentEditable==="true")&&(As=z,Ld=w,Zo=null);break;case"focusout":Zo=Ld=As=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,f1(b,n,v);break;case"selectionchange":if(xv)break;case"keydown":case"keyup":f1(b,n,v)}var B;if(Z0)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ss?Yp(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(qp&&n.locale!=="ko"&&(Ss||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ss&&(B=Xp()):(ii=v,q0="value"in ii?ii.value:ii.textContent,Ss=!0)),z=Kl(w,P),0<z.length&&(P=new r1(P,t,null,n,v),b.push({event:P,listeners:z}),B?P.data=B:(B=Kp(n),B!==null&&(P.data=B)))),(B=sv?ov(t,n):av(t,n))&&(w=Kl(w,"onBeforeInput"),0<w.length&&(v=new r1("onBeforeInput","beforeinput",null,n,v),b.push({event:v,listeners:w}),v.data=B))}lm(b,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kl(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=ca(t,n),l!=null&&i.unshift(ma(t,l,o)),l=ca(t,e),l!=null&&i.push(ma(t,l,o))),t=t.return}return i}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p1(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var g=n,m=g.alternate,w=g.stateNode;if(m!==null&&m===i)break;g.tag===5&&w!==null&&(g=w,o?(m=ca(n,l),m!=null&&f.unshift(ma(n,m,g))):o||(m=ca(n,l),m!=null&&f.push(ma(n,m,g)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var Ev=/\r\n?/g,bv=/\u0000|\uFFFD/g;function m1(t){return(typeof t=="string"?t:""+t).replace(Ev,`
`).replace(bv,"")}function dl(t,e,n){if(e=m1(e),m1(t)!==e&&n)throw Error(ie(425))}function Zl(){}var jd=null,Fd=null;function Ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $d=typeof setTimeout=="function"?setTimeout:void 0,_v=typeof clearTimeout=="function"?clearTimeout:void 0,x1=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof x1<"u"?function(t){return x1.resolve(null).then(t).catch(Sv)}:$d;function Sv(t){setTimeout(function(){throw t})}function Vu(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),fa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);fa(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function w1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),_r="__reactFiber$"+lo,xa="__reactProps$"+lo,jr="__reactContainer$"+lo,zd="__reactEvents$"+lo,Av="__reactListeners$"+lo,Tv="__reactHandles$"+lo;function Ui(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=w1(t);t!==null;){if(n=t[_r])return n;t=w1(t)}return e}t=n,n=t.parentNode}return null}function Pa(t){return t=t[_r]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Ic(t){return t[xa]||null}var Vd=[],Ns=-1;function bi(t){return{current:t}}function pt(t){0>Ns||(t.current=Vd[Ns],Vd[Ns]=null,Ns--)}function dt(t,e){Ns++,Vd[Ns]=t.current,t.current=e}var yi={},an=bi(yi),Tn=bi(!1),Gi=yi;function Gs(t,e){var n=t.type.contextTypes;if(!n)return yi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function In(t){return t=t.childContextTypes,t!=null}function Ql(){pt(Tn),pt(an)}function y1(t,e,n){if(an.current!==yi)throw Error(ie(168));dt(an,e),dt(Tn,n)}function um(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ie(108,dy(t)||"Unknown",o));return _t({},n,i)}function Jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yi,Gi=an.current,dt(an,t),dt(Tn,Tn.current),!0}function v1(t,e,n){var i=t.stateNode;if(!i)throw Error(ie(169));n?(t=um(t,e,Gi),i.__reactInternalMemoizedMergedChildContext=t,pt(Tn),pt(an),dt(an,t)):pt(Tn),dt(Tn,n)}var Rr=null,Nc=!1,Hu=!1;function dm(t){Rr===null?Rr=[t]:Rr.push(t)}function Iv(t){Nc=!0,dm(t)}function _i(){if(!Hu&&Rr!==null){Hu=!0;var t=0,e=nt;try{var n=Rr;for(nt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Rr=null,Nc=!1}catch(o){throw Rr!==null&&(Rr=Rr.slice(t+1)),Lp(H0,_i),o}finally{nt=e,Hu=!1}}return null}var ks=[],Os=0,ec=null,tc=0,qn=[],Yn=0,Xi=null,Pr=1,Dr="";function Mi(t,e){ks[Os++]=tc,ks[Os++]=ec,ec=t,tc=e}function fm(t,e,n){qn[Yn++]=Pr,qn[Yn++]=Dr,qn[Yn++]=Xi,Xi=t;var i=Pr;t=Dr;var o=32-ur(i)-1;i&=~(1<<o),n+=1;var l=32-ur(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Pr=1<<32-ur(e)+o|n<<o|i,Dr=l+t}else Pr=1<<l|n<<o|i,Dr=t}function J0(t){t.return!==null&&(Mi(t,1),fm(t,1,0))}function ef(t){for(;t===ec;)ec=ks[--Os],ks[Os]=null,tc=ks[--Os],ks[Os]=null;for(;t===Xi;)Xi=qn[--Yn],qn[Yn]=null,Dr=qn[--Yn],qn[Yn]=null,Pr=qn[--Yn],qn[Yn]=null}var Bn=null,Ln=null,wt=!1,cr=null;function hm(t,e){var n=Zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:Pr,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,Ln=null,!0):!1;default:return!1}}function Hd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wd(t){if(wt){var e=Ln;if(e){var n=e;if(!E1(t,e)){if(Hd(t))throw Error(ie(418));e=di(n.nextSibling);var i=Bn;e&&E1(t,e)?hm(i,n):(t.flags=t.flags&-4097|2,wt=!1,Bn=t)}}else{if(Hd(t))throw Error(ie(418));t.flags=t.flags&-4097|2,wt=!1,Bn=t}}}function b1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function fl(t){if(t!==Bn)return!1;if(!wt)return b1(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ud(t.type,t.memoizedProps)),e&&(e=Ln)){if(Hd(t))throw gm(),Error(ie(418));for(;e;)hm(t,e),e=di(e.nextSibling)}if(b1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ln=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ln=null}}else Ln=Bn?di(t.stateNode.nextSibling):null;return!0}function gm(){for(var t=Ln;t;)t=di(t.nextSibling)}function Xs(){Ln=Bn=null,wt=!1}function tf(t){cr===null?cr=[t]:cr.push(t)}var Nv=$r.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var i=n.stateNode}if(!i)throw Error(ie(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var g=o.refs;f===null?delete g[l]:g[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function hl(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _1(t){var e=t._init;return e(t._payload)}function pm(t){function e(O,I){if(t){var N=O.deletions;N===null?(O.deletions=[I],O.flags|=16):N.push(I)}}function n(O,I){if(!t)return null;for(;I!==null;)e(O,I),I=I.sibling;return null}function i(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function o(O,I){return O=pi(O,I),O.index=0,O.sibling=null,O}function l(O,I,N){return O.index=N,t?(N=O.alternate,N!==null?(N=N.index,N<I?(O.flags|=2,I):N):(O.flags|=2,I)):(O.flags|=1048576,I)}function f(O){return t&&O.alternate===null&&(O.flags|=2),O}function g(O,I,N,F){return I===null||I.tag!==6?(I=Zu(N,O.mode,F),I.return=O,I):(I=o(I,N),I.return=O,I)}function m(O,I,N,F){var $=N.type;return $===Cs?v(O,I,N.props.children,F,N.key):I!==null&&(I.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Qr&&_1($)===I.type)?(F=o(I,N.props),F.ref=Ro(O,I,N),F.return=O,F):(F=$l(N.type,N.key,N.props,null,O.mode,F),F.ref=Ro(O,I,N),F.return=O,F)}function w(O,I,N,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=Qu(N,O.mode,F),I.return=O,I):(I=o(I,N.children||[]),I.return=O,I)}function v(O,I,N,F,$){return I===null||I.tag!==7?(I=Hi(N,O.mode,F,$),I.return=O,I):(I=o(I,N),I.return=O,I)}function b(O,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Zu(""+I,O.mode,N),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case nl:return N=$l(I.type,I.key,I.props,null,O.mode,N),N.ref=Ro(O,null,I),N.return=O,N;case _s:return I=Qu(I,O.mode,N),I.return=O,I;case Qr:var F=I._init;return b(O,F(I._payload),N)}if(Uo(I)||To(I))return I=Hi(I,O.mode,N,null),I.return=O,I;hl(O,I)}return null}function A(O,I,N,F){var $=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return $!==null?null:g(O,I,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case nl:return N.key===$?m(O,I,N,F):null;case _s:return N.key===$?w(O,I,N,F):null;case Qr:return $=N._init,A(O,I,$(N._payload),F)}if(Uo(N)||To(N))return $!==null?null:v(O,I,N,F,null);hl(O,N)}return null}function T(O,I,N,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return O=O.get(N)||null,g(I,O,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case nl:return O=O.get(F.key===null?N:F.key)||null,m(I,O,F,$);case _s:return O=O.get(F.key===null?N:F.key)||null,w(I,O,F,$);case Qr:var z=F._init;return T(O,I,N,z(F._payload),$)}if(Uo(F)||To(F))return O=O.get(N)||null,v(I,O,F,$,null);hl(I,F)}return null}function L(O,I,N,F){for(var $=null,z=null,B=I,P=I=0,R=null;B!==null&&P<N.length;P++){B.index>P?(R=B,B=null):R=B.sibling;var X=A(O,B,N[P],F);if(X===null){B===null&&(B=R);break}t&&B&&X.alternate===null&&e(O,B),I=l(X,I,P),z===null?$=X:z.sibling=X,z=X,B=R}if(P===N.length)return n(O,B),wt&&Mi(O,P),$;if(B===null){for(;P<N.length;P++)B=b(O,N[P],F),B!==null&&(I=l(B,I,P),z===null?$=B:z.sibling=B,z=B);return wt&&Mi(O,P),$}for(B=i(O,B);P<N.length;P++)R=T(B,O,P,N[P],F),R!==null&&(t&&R.alternate!==null&&B.delete(R.key===null?P:R.key),I=l(R,I,P),z===null?$=R:z.sibling=R,z=R);return t&&B.forEach(function(re){return e(O,re)}),wt&&Mi(O,P),$}function M(O,I,N,F){var $=To(N);if(typeof $!="function")throw Error(ie(150));if(N=$.call(N),N==null)throw Error(ie(151));for(var z=$=null,B=I,P=I=0,R=null,X=N.next();B!==null&&!X.done;P++,X=N.next()){B.index>P?(R=B,B=null):R=B.sibling;var re=A(O,B,X.value,F);if(re===null){B===null&&(B=R);break}t&&B&&re.alternate===null&&e(O,B),I=l(re,I,P),z===null?$=re:z.sibling=re,z=re,B=R}if(X.done)return n(O,B),wt&&Mi(O,P),$;if(B===null){for(;!X.done;P++,X=N.next())X=b(O,X.value,F),X!==null&&(I=l(X,I,P),z===null?$=X:z.sibling=X,z=X);return wt&&Mi(O,P),$}for(B=i(O,B);!X.done;P++,X=N.next())X=T(B,O,P,X.value,F),X!==null&&(t&&X.alternate!==null&&B.delete(X.key===null?P:X.key),I=l(X,I,P),z===null?$=X:z.sibling=X,z=X);return t&&B.forEach(function(Q){return e(O,Q)}),wt&&Mi(O,P),$}function H(O,I,N,F){if(typeof N=="object"&&N!==null&&N.type===Cs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case nl:e:{for(var $=N.key,z=I;z!==null;){if(z.key===$){if($=N.type,$===Cs){if(z.tag===7){n(O,z.sibling),I=o(z,N.props.children),I.return=O,O=I;break e}}else if(z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Qr&&_1($)===z.type){n(O,z.sibling),I=o(z,N.props),I.ref=Ro(O,z,N),I.return=O,O=I;break e}n(O,z);break}else e(O,z);z=z.sibling}N.type===Cs?(I=Hi(N.props.children,O.mode,F,N.key),I.return=O,O=I):(F=$l(N.type,N.key,N.props,null,O.mode,F),F.ref=Ro(O,I,N),F.return=O,O=F)}return f(O);case _s:e:{for(z=N.key;I!==null;){if(I.key===z)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){n(O,I.sibling),I=o(I,N.children||[]),I.return=O,O=I;break e}else{n(O,I);break}else e(O,I);I=I.sibling}I=Qu(N,O.mode,F),I.return=O,O=I}return f(O);case Qr:return z=N._init,H(O,I,z(N._payload),F)}if(Uo(N))return L(O,I,N,F);if(To(N))return M(O,I,N,F);hl(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(n(O,I.sibling),I=o(I,N),I.return=O,O=I):(n(O,I),I=Zu(N,O.mode,F),I.return=O,O=I),f(O)):n(O,I)}return H}var qs=pm(!0),mm=pm(!1),nc=bi(null),rc=null,Rs=null,nf=null;function rf(){nf=Rs=rc=null}function sf(t){var e=nc.current;pt(nc),t._currentValue=e}function Gd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){rc=t,nf=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(nf!==t)if(t={context:t,memoizedValue:e,next:null},Rs===null){if(rc===null)throw Error(ie(308));Rs=t,rc.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return e}var $i=null;function of(t){$i===null?$i=[t]:$i.push(t)}function xm(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,of(e)):(n.next=o.next,o.next=n),e.interleaved=n,Fr(t,i)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Fr(t,n)}return o=i.interleaved,o===null?(e.next=e,of(i)):(e.next=o.next,o.next=e),i.interleaved=e,Fr(t,n)}function Ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,W0(t,n)}}function C1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ic(t,e,n,i){var o=t.updateQueue;Jr=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var m=g,w=m.next;m.next=null,f===null?l=w:f.next=w,f=m;var v=t.alternate;v!==null&&(v=v.updateQueue,g=v.lastBaseUpdate,g!==f&&(g===null?v.firstBaseUpdate=w:g.next=w,v.lastBaseUpdate=m))}if(l!==null){var b=o.baseState;f=0,v=w=m=null,g=l;do{var A=g.lane,T=g.eventTime;if((i&A)===A){v!==null&&(v=v.next={eventTime:T,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var L=t,M=g;switch(A=e,T=n,M.tag){case 1:if(L=M.payload,typeof L=="function"){b=L.call(T,b,A);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=M.payload,A=typeof L=="function"?L.call(T,b,A):L,A==null)break e;b=_t({},b,A);break e;case 2:Jr=!0}}g.callback!==null&&g.lane!==0&&(t.flags|=64,A=o.effects,A===null?o.effects=[g]:A.push(g))}else T={eventTime:T,lane:A,tag:g.tag,payload:g.payload,callback:g.callback,next:null},v===null?(w=v=T,m=b):v=v.next=T,f|=A;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;A=g,g=A.next,A.next=null,o.lastBaseUpdate=A,o.shared.pending=null}}while(!0);if(v===null&&(m=b),o.baseState=m,o.firstBaseUpdate=w,o.lastBaseUpdate=v,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Yi|=f,t.lanes=f,t.memoizedState=b}}function S1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ie(191,o));o.call(i)}}}var Da={},Tr=bi(Da),wa=bi(Da),ya=bi(Da);function zi(t){if(t===Da)throw Error(ie(174));return t}function lf(t,e){switch(dt(ya,e),dt(wa,t),dt(Tr,Da),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ad(e,t)}pt(Tr),dt(Tr,e)}function Ys(){pt(Tr),pt(wa),pt(ya)}function ym(t){zi(ya.current);var e=zi(Tr.current),n=Ad(e,t.type);e!==n&&(dt(wa,t),dt(Tr,n))}function cf(t){wa.current===t&&(pt(Tr),pt(wa))}var Et=bi(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wu=[];function uf(){for(var t=0;t<Wu.length;t++)Wu[t]._workInProgressVersionPrimary=null;Wu.length=0}var Ll=$r.ReactCurrentDispatcher,Gu=$r.ReactCurrentBatchConfig,qi=0,bt=null,Bt=null,Ht=null,oc=!1,Qo=!1,va=0,kv=0;function rn(){throw Error(ie(321))}function df(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hr(t[n],e[n]))return!1;return!0}function ff(t,e,n,i,o,l){if(qi=l,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ll.current=t===null||t.memoizedState===null?Dv:Mv,t=n(i,o),Qo){l=0;do{if(Qo=!1,va=0,25<=l)throw Error(ie(301));l+=1,Ht=Bt=null,e.updateQueue=null,Ll.current=Lv,t=n(i,o)}while(Qo)}if(Ll.current=ac,e=Bt!==null&&Bt.next!==null,qi=0,Ht=Bt=bt=null,oc=!1,e)throw Error(ie(300));return t}function hf(){var t=va!==0;return va=0,t}function br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?bt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function er(){if(Bt===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Ht===null?bt.memoizedState:Ht.next;if(e!==null)Ht=e,Bt=t;else{if(t===null)throw Error(ie(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Ht===null?bt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Ea(t,e){return typeof e=="function"?e(t):e}function Xu(t){var e=er(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var i=Bt,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var g=f=null,m=null,w=l;do{var v=w.lane;if((qi&v)===v)m!==null&&(m=m.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:t(i,w.action);else{var b={lane:v,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};m===null?(g=m=b,f=i):m=m.next=b,bt.lanes|=v,Yi|=v}w=w.next}while(w!==null&&w!==l);m===null?f=i:m.next=g,hr(i,e.memoizedState)||(An=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=m,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,bt.lanes|=l,Yi|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qu(t){var e=er(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);hr(l,e.memoizedState)||(An=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function vm(){}function Em(t,e){var n=bt,i=er(),o=e(),l=!hr(i.memoizedState,o);if(l&&(i.memoizedState=o,An=!0),i=i.queue,gf(Cm.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,ba(9,_m.bind(null,n,i,o,e),void 0,null),Xt===null)throw Error(ie(349));qi&30||bm(n,e,o)}return o}function bm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _m(t,e,n,i){e.value=n,e.getSnapshot=i,Sm(e)&&Am(t)}function Cm(t,e,n){return n(function(){Sm(e)&&Am(t)})}function Sm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hr(t,n)}catch{return!0}}function Am(t){var e=Fr(t,1);e!==null&&dr(e,t,1,-1)}function A1(t){var e=br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=Pv.bind(null,bt,t),[e.memoizedState,t]}function ba(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Tm(){return er().memoizedState}function Bl(t,e,n,i){var o=br();bt.flags|=t,o.memoizedState=ba(1|e,n,void 0,i===void 0?null:i)}function kc(t,e,n,i){var o=er();i=i===void 0?null:i;var l=void 0;if(Bt!==null){var f=Bt.memoizedState;if(l=f.destroy,i!==null&&df(i,f.deps)){o.memoizedState=ba(e,n,l,i);return}}bt.flags|=t,o.memoizedState=ba(1|e,n,l,i)}function T1(t,e){return Bl(8390656,8,t,e)}function gf(t,e){return kc(2048,8,t,e)}function Im(t,e){return kc(4,2,t,e)}function Nm(t,e){return kc(4,4,t,e)}function km(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Om(t,e,n){return n=n!=null?n.concat([t]):null,kc(4,4,km.bind(null,e,t),n)}function pf(){}function Rm(t,e){var n=er();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&df(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Pm(t,e){var n=er();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&df(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Dm(t,e,n){return qi&21?(hr(n,e)||(n=Fp(),bt.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function Ov(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var i=Gu.transition;Gu.transition={};try{t(!1),e()}finally{nt=n,Gu.transition=i}}function Mm(){return er().memoizedState}function Rv(t,e,n){var i=gi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lm(t))Bm(e,n);else if(n=xm(t,e,n,i),n!==null){var o=fn();dr(n,t,i,o),jm(n,e,i)}}function Pv(t,e,n){var i=gi(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lm(t))Bm(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,g=l(f,n);if(o.hasEagerState=!0,o.eagerState=g,hr(g,f)){var m=e.interleaved;m===null?(o.next=o,of(e)):(o.next=m.next,m.next=o),e.interleaved=o;return}}catch{}finally{}n=xm(t,e,o,i),n!==null&&(o=fn(),dr(n,t,i,o),jm(n,e,i))}}function Lm(t){var e=t.alternate;return t===bt||e!==null&&e===bt}function Bm(t,e){Qo=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jm(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,W0(t,n)}}var ac={readContext:Jn,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},Dv={readContext:Jn,useCallback:function(t,e){return br().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:T1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bl(4194308,4,km.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bl(4,2,t,e)},useMemo:function(t,e){var n=br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=br();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Rv.bind(null,bt,t),[i.memoizedState,t]},useRef:function(t){var e=br();return t={current:t},e.memoizedState=t},useState:A1,useDebugValue:pf,useDeferredValue:function(t){return br().memoizedState=t},useTransition:function(){var t=A1(!1),e=t[0];return t=Ov.bind(null,t[1]),br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=bt,o=br();if(wt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Xt===null)throw Error(ie(349));qi&30||bm(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,T1(Cm.bind(null,i,l,t),[t]),i.flags|=2048,ba(9,_m.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=br(),e=Xt.identifierPrefix;if(wt){var n=Dr,i=Pr;n=(i&~(1<<32-ur(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mv={readContext:Jn,useCallback:Rm,useContext:Jn,useEffect:gf,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Pm,useReducer:Xu,useRef:Tm,useState:function(){return Xu(Ea)},useDebugValue:pf,useDeferredValue:function(t){var e=er();return Dm(e,Bt.memoizedState,t)},useTransition:function(){var t=Xu(Ea)[0],e=er().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1},Lv={readContext:Jn,useCallback:Rm,useContext:Jn,useEffect:gf,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Nm,useMemo:Pm,useReducer:qu,useRef:Tm,useState:function(){return qu(Ea)},useDebugValue:pf,useDeferredValue:function(t){var e=er();return Bt===null?e.memoizedState=t:Dm(e,Bt.memoizedState,t)},useTransition:function(){var t=qu(Ea)[0],e=er().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:_t({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oc={isMounted:function(t){return(t=t._reactInternals)?Qi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=fn(),o=gi(t),l=Mr(i,o);l.payload=e,n!=null&&(l.callback=n),e=fi(t,l,o),e!==null&&(dr(e,t,o,i),Ml(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=fn(),o=gi(t),l=Mr(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=fi(t,l,o),e!==null&&(dr(e,t,o,i),Ml(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),i=gi(t),o=Mr(n,i);o.tag=2,e!=null&&(o.callback=e),e=fi(t,o,i),e!==null&&(dr(e,t,i,n),Ml(e,t,i))}};function I1(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!ga(n,i)||!ga(o,l):!0}function Fm(t,e,n){var i=!1,o=yi,l=e.contextType;return typeof l=="object"&&l!==null?l=Jn(l):(o=In(e)?Gi:an.current,i=e.contextTypes,l=(i=i!=null)?Gs(t,o):yi),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function N1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Oc.enqueueReplaceState(e,e.state,null)}function qd(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},af(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Jn(l):(l=In(e)?Gi:an.current,o.context=Gs(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Xd(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Oc.enqueueReplaceState(o,o.state,null),ic(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",i=e;do n+=uy(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Bv=typeof WeakMap=="function"?WeakMap:Map;function Um(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){cc||(cc=!0,s0=i),Yd(t,e)},n}function $m(t,e,n){n=Mr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Yd(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Yd(t,e),typeof i!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function k1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Bv;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=Zv.bind(null,t,e,n),e.then(t,t))}function O1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R1(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var jv=$r.ReactCurrentOwner,An=!1;function dn(t,e,n,i){e.child=t===null?mm(e,null,n,i):qs(e,t.child,n,i)}function P1(t,e,n,i,o){n=n.render;var l=e.ref;return zs(e,o),i=ff(t,e,n,i,l,o),n=hf(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ur(t,e,o)):(wt&&n&&J0(e),e.flags|=1,dn(t,e,i,o),e.child)}function D1(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!_f(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,zm(t,e,l,i,o)):(t=$l(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:ga,n(f,i)&&t.ref===e.ref)return Ur(t,e,o)}return e.flags|=1,t=pi(l,i),t.ref=e.ref,t.return=e,e.child=t}function zm(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(ga(l,i)&&t.ref===e.ref)if(An=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,Ur(t,e,o)}return Kd(t,e,n,i,o)}function Vm(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Ds,Dn),Dn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Ds,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,dt(Ds,Dn),Dn|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,dt(Ds,Dn),Dn|=i;return dn(t,e,o,n),e.child}function Hm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kd(t,e,n,i,o){var l=In(n)?Gi:an.current;return l=Gs(e,l),zs(e,o),n=ff(t,e,n,i,l,o),i=hf(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ur(t,e,o)):(wt&&i&&J0(e),e.flags|=1,dn(t,e,n,o),e.child)}function M1(t,e,n,i,o){if(In(n)){var l=!0;Jl(e)}else l=!1;if(zs(e,o),e.stateNode===null)jl(t,e),Fm(e,n,i),qd(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,g=e.memoizedProps;f.props=g;var m=f.context,w=n.contextType;typeof w=="object"&&w!==null?w=Jn(w):(w=In(n)?Gi:an.current,w=Gs(e,w));var v=n.getDerivedStateFromProps,b=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||m!==w)&&N1(e,f,i,w),Jr=!1;var A=e.memoizedState;f.state=A,ic(e,i,f,o),m=e.memoizedState,g!==i||A!==m||Tn.current||Jr?(typeof v=="function"&&(Xd(e,n,v,i),m=e.memoizedState),(g=Jr||I1(e,n,g,i,A,m,w))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),f.props=i,f.state=m,f.context=w,i=g):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,wm(t,e),g=e.memoizedProps,w=e.type===e.elementType?g:or(e.type,g),f.props=w,b=e.pendingProps,A=f.context,m=n.contextType,typeof m=="object"&&m!==null?m=Jn(m):(m=In(n)?Gi:an.current,m=Gs(e,m));var T=n.getDerivedStateFromProps;(v=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==b||A!==m)&&N1(e,f,i,m),Jr=!1,A=e.memoizedState,f.state=A,ic(e,i,f,o);var L=e.memoizedState;g!==b||A!==L||Tn.current||Jr?(typeof T=="function"&&(Xd(e,n,T,i),L=e.memoizedState),(w=Jr||I1(e,n,w,i,A,L,m)||!1)?(v||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,L,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,L,m)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=L),f.props=i,f.state=L,f.context=m,i=w):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),i=!1)}return Zd(t,e,n,i,l,o)}function Zd(t,e,n,i,o,l){Hm(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&v1(e,n,!1),Ur(t,e,l);i=e.stateNode,jv.current=e;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=qs(e,t.child,null,l),e.child=qs(e,null,g,l)):dn(t,e,g,l),e.memoizedState=i.state,o&&v1(e,n,!0),e.child}function Wm(t){var e=t.stateNode;e.pendingContext?y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y1(t,e.context,!1),lf(t,e.containerInfo)}function L1(t,e,n,i,o){return Xs(),tf(o),e.flags|=256,dn(t,e,n,i),e.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Jd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gm(t,e,n){var i=e.pendingProps,o=Et.current,l=!1,f=(e.flags&128)!==0,g;if((g=f)||(g=t!==null&&t.memoizedState===null?!1:(o&2)!==0),g?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),dt(Et,o&1),t===null)return Wd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Dc(f,i,0,null),t=Hi(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Jd(n),e.memoizedState=Qd,t):mf(e,f));if(o=t.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return Fv(t,e,f,i,g,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,g=o.sibling;var m={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=pi(o,m),i.subtreeFlags=o.subtreeFlags&14680064),g!==null?l=pi(g,l):(l=Hi(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?Jd(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=Qd,i}return l=t.child,t=l.sibling,i=pi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function mf(t,e){return e=Dc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gl(t,e,n,i){return i!==null&&tf(i),qs(e,t.child,null,n),t=mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fv(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=Yu(Error(ie(422))),gl(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Dc({mode:"visible",children:i.children},o,0,null),l=Hi(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&qs(e,t.child,null,f),e.child.memoizedState=Jd(f),e.memoizedState=Qd,l);if(!(e.mode&1))return gl(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var g=i.dgst;return i=g,l=Error(ie(419)),i=Yu(l,i,void 0),gl(t,e,f,i)}if(g=(f&t.childLanes)!==0,An||g){if(i=Xt,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Fr(t,o),dr(i,t,o,-1))}return bf(),i=Yu(Error(ie(421))),gl(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Qv.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,Ln=di(o.nextSibling),Bn=e,wt=!0,cr=null,t!==null&&(qn[Yn++]=Pr,qn[Yn++]=Dr,qn[Yn++]=Xi,Pr=t.id,Dr=t.overflow,Xi=e),e=mf(e,i.children),e.flags|=4096,e)}function B1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gd(t.return,e,n)}function Ku(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function Xm(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(dn(t,e,i.children,n),i=Et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B1(t,n,e);else if(t.tag===19)B1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(dt(Et,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Ku(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&sc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Ku(e,!0,n,null,l);break;case"together":Ku(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Uv(t,e,n){switch(e.tag){case 3:Wm(e),Xs();break;case 5:ym(e);break;case 1:In(e.type)&&Jl(e);break;case 4:lf(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;dt(nc,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(dt(Et,Et.current&1),e.flags|=128,null):n&e.child.childLanes?Gm(t,e,n):(dt(Et,Et.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);dt(Et,Et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Xm(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),dt(Et,Et.current),i)break;return null;case 22:case 23:return e.lanes=0,Vm(t,e,n)}return Ur(t,e,n)}var qm,e0,Ym,Km;qm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e0=function(){};Ym=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,zi(Tr.current);var l=null;switch(n){case"input":o=bd(t,o),i=bd(t,i),l=[];break;case"select":o=_t({},o,{value:void 0}),i=_t({},i,{value:void 0}),l=[];break;case"textarea":o=Sd(t,o),i=Sd(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Zl)}Td(n,i);var f;n=null;for(w in o)if(!i.hasOwnProperty(w)&&o.hasOwnProperty(w)&&o[w]!=null)if(w==="style"){var g=o[w];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(aa.hasOwnProperty(w)?l||(l=[]):(l=l||[]).push(w,null));for(w in i){var m=i[w];if(g=o!=null?o[w]:void 0,i.hasOwnProperty(w)&&m!==g&&(m!=null||g!=null))if(w==="style")if(g){for(f in g)!g.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in m)m.hasOwnProperty(f)&&g[f]!==m[f]&&(n||(n={}),n[f]=m[f])}else n||(l||(l=[]),l.push(w,n)),n=m;else w==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,g=g?g.__html:void 0,m!=null&&g!==m&&(l=l||[]).push(w,m)):w==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(w,""+m):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(aa.hasOwnProperty(w)?(m!=null&&w==="onScroll"&&ht("scroll",t),l||g===m||(l=[])):(l=l||[]).push(w,m))}n&&(l=l||[]).push("style",n);var w=l;(e.updateQueue=w)&&(e.flags|=4)}};Km=function(t,e,n,i){n!==i&&(e.flags|=4)};function Po(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function $v(t,e,n){var i=e.pendingProps;switch(ef(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return In(e.type)&&Ql(),sn(e),null;case 3:return i=e.stateNode,Ys(),pt(Tn),pt(an),uf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cr!==null&&(l0(cr),cr=null))),e0(t,e),sn(e),null;case 5:cf(e);var o=zi(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)Ym(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ie(166));return sn(e),null}if(t=zi(Tr.current),fl(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[_r]=e,i[xa]=l,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",i),ht("close",i);break;case"iframe":case"object":case"embed":ht("load",i);break;case"video":case"audio":for(o=0;o<zo.length;o++)ht(zo[o],i);break;case"source":ht("error",i);break;case"img":case"image":case"link":ht("error",i),ht("load",i);break;case"details":ht("toggle",i);break;case"input":Gh(i,l),ht("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},ht("invalid",i);break;case"textarea":qh(i,l),ht("invalid",i)}Td(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var g=l[f];f==="children"?typeof g=="string"?i.textContent!==g&&(l.suppressHydrationWarning!==!0&&dl(i.textContent,g,t),o=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&dl(i.textContent,g,t),o=["children",""+g]):aa.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&ht("scroll",i)}switch(n){case"input":rl(i),Xh(i,l,!0);break;case"textarea":rl(i),Yh(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Zl)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[_r]=e,t[xa]=i,qm(t,e,!1,!1),e.stateNode=t;e:{switch(f=Id(n,i),n){case"dialog":ht("cancel",t),ht("close",t),o=i;break;case"iframe":case"object":case"embed":ht("load",t),o=i;break;case"video":case"audio":for(o=0;o<zo.length;o++)ht(zo[o],t);o=i;break;case"source":ht("error",t),o=i;break;case"img":case"image":case"link":ht("error",t),ht("load",t),o=i;break;case"details":ht("toggle",t),o=i;break;case"input":Gh(t,i),o=bd(t,i),ht("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=_t({},i,{value:void 0}),ht("invalid",t);break;case"textarea":qh(t,i),o=Sd(t,i),ht("invalid",t);break;default:o=i}Td(n,o),g=o;for(l in g)if(g.hasOwnProperty(l)){var m=g[l];l==="style"?Tp(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Sp(t,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&la(t,m):typeof m=="number"&&la(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(aa.hasOwnProperty(l)?m!=null&&l==="onScroll"&&ht("scroll",t):m!=null&&F0(t,l,m,f))}switch(n){case"input":rl(t),Xh(t,i,!1);break;case"textarea":rl(t),Yh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wi(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?js(t,!!i.multiple,l,!1):i.defaultValue!=null&&js(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ie(166));if(n=zi(ya.current),zi(Tr.current),fl(e)){if(i=e.stateNode,n=e.memoizedProps,i[_r]=e,(l=i.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:dl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[_r]=e,e.stateNode=i}return sn(e),null;case 13:if(pt(Et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Ln!==null&&e.mode&1&&!(e.flags&128))gm(),Xs(),e.flags|=98560,l=!1;else if(l=fl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ie(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ie(317));l[_r]=e}else Xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),l=!1}else cr!==null&&(l0(cr),cr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?jt===0&&(jt=3):bf())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return Ys(),e0(t,e),t===null&&pa(e.stateNode.containerInfo),sn(e),null;case 10:return sf(e.type._context),sn(e),null;case 17:return In(e.type)&&Ql(),sn(e),null;case 19:if(pt(Et),l=e.memoizedState,l===null)return sn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)Po(l,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=sc(t),f!==null){for(e.flags|=128,Po(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(Et,Et.current&1|2),e.child}t=t.sibling}l.tail!==null&&kt()>Zs&&(e.flags|=128,i=!0,Po(l,!1),e.lanes=4194304)}else{if(!i)if(t=sc(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Po(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!wt)return sn(e),null}else 2*kt()-l.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,i=!0,Po(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=kt(),e.sibling=null,n=Et.current,dt(Et,i?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return Ef(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Dn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function zv(t,e){switch(ef(e),e.tag){case 1:return In(e.type)&&Ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),pt(Tn),pt(an),uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cf(e),null;case 13:if(pt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(Et),null;case 4:return Ys(),null;case 10:return sf(e.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var pl=!1,on=!1,Vv=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){It(t,e,i)}else n.current=null}function t0(t,e,n){try{n()}catch(i){It(t,e,i)}}var j1=!1;function Hv(t,e){if(jd=ql,t=tm(),Q0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,g=-1,m=-1,w=0,v=0,b=t,A=null;t:for(;;){for(var T;b!==n||o!==0&&b.nodeType!==3||(g=f+o),b!==l||i!==0&&b.nodeType!==3||(m=f+i),b.nodeType===3&&(f+=b.nodeValue.length),(T=b.firstChild)!==null;)A=b,b=T;for(;;){if(b===t)break t;if(A===n&&++w===o&&(g=f),A===l&&++v===i&&(m=f),(T=b.nextSibling)!==null)break;b=A,A=b.parentNode}b=T}n=g===-1||m===-1?null:{start:g,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fd={focusedElem:t,selectionRange:n},ql=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var M=L.memoizedProps,H=L.memoizedState,O=e.stateNode,I=O.getSnapshotBeforeUpdate(e.elementType===e.type?M:or(e.type,M),H);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(F){It(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return L=j1,j1=!1,L}function Jo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&t0(e,n,l)}o=o.next}while(o!==i)}}function Rc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function n0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zm(t){var e=t.alternate;e!==null&&(t.alternate=null,Zm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[xa],delete e[zd],delete e[Av],delete e[Tv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qm(t){return t.tag===5||t.tag===3||t.tag===4}function F1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(i!==4&&(t=t.child,t!==null))for(r0(t,e,n),t=t.sibling;t!==null;)r0(t,e,n),t=t.sibling}function i0(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(i0(t,e,n),t=t.sibling;t!==null;)i0(t,e,n),t=t.sibling}var Qt=null,ar=!1;function Yr(t,e,n){for(n=n.child;n!==null;)Jm(t,e,n),n=n.sibling}function Jm(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Cc,n)}catch{}switch(n.tag){case 5:on||Ps(n,e);case 6:var i=Qt,o=ar;Qt=null,Yr(t,e,n),Qt=i,ar=o,Qt!==null&&(ar?(t=Qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(ar?(t=Qt,n=n.stateNode,t.nodeType===8?Vu(t.parentNode,n):t.nodeType===1&&Vu(t,n),fa(t)):Vu(Qt,n.stateNode));break;case 4:i=Qt,o=ar,Qt=n.stateNode.containerInfo,ar=!0,Yr(t,e,n),Qt=i,ar=o;break;case 0:case 11:case 14:case 15:if(!on&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&t0(n,e,f),o=o.next}while(o!==i)}Yr(t,e,n);break;case 1:if(!on&&(Ps(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){It(n,e,g)}Yr(t,e,n);break;case 21:Yr(t,e,n);break;case 22:n.mode&1?(on=(i=on)||n.memoizedState!==null,Yr(t,e,n),on=i):Yr(t,e,n);break;default:Yr(t,e,n)}}function U1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vv),e.forEach(function(i){var o=Jv.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function sr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,g=f;e:for(;g!==null;){switch(g.tag){case 5:Qt=g.stateNode,ar=!1;break e;case 3:Qt=g.stateNode.containerInfo,ar=!0;break e;case 4:Qt=g.stateNode.containerInfo,ar=!0;break e}g=g.return}if(Qt===null)throw Error(ie(160));Jm(l,f,o),Qt=null,ar=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(w){It(o,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ex(e,t),e=e.sibling}function ex(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),vr(t),i&4){try{Jo(3,t,t.return),Rc(3,t)}catch(M){It(t,t.return,M)}try{Jo(5,t,t.return)}catch(M){It(t,t.return,M)}}break;case 1:sr(e,t),vr(t),i&512&&n!==null&&Ps(n,n.return);break;case 5:if(sr(e,t),vr(t),i&512&&n!==null&&Ps(n,n.return),t.flags&32){var o=t.stateNode;try{la(o,"")}catch(M){It(t,t.return,M)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,g=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&bp(o,l),Id(g,f);var w=Id(g,l);for(f=0;f<m.length;f+=2){var v=m[f],b=m[f+1];v==="style"?Tp(o,b):v==="dangerouslySetInnerHTML"?Sp(o,b):v==="children"?la(o,b):F0(o,v,b,w)}switch(g){case"input":_d(o,l);break;case"textarea":_p(o,l);break;case"select":var A=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?js(o,!!l.multiple,T,!1):A!==!!l.multiple&&(l.defaultValue!=null?js(o,!!l.multiple,l.defaultValue,!0):js(o,!!l.multiple,l.multiple?[]:"",!1))}o[xa]=l}catch(M){It(t,t.return,M)}}break;case 6:if(sr(e,t),vr(t),i&4){if(t.stateNode===null)throw Error(ie(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(M){It(t,t.return,M)}}break;case 3:if(sr(e,t),vr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(M){It(t,t.return,M)}break;case 4:sr(e,t),vr(t);break;case 13:sr(e,t),vr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(yf=kt())),i&4&&U1(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(on=(w=on)||v,sr(e,t),on=w):sr(e,t),vr(t),i&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!v&&t.mode&1)for(Ee=t,v=t.child;v!==null;){for(b=Ee=v;Ee!==null;){switch(A=Ee,T=A.child,A.tag){case 0:case 11:case 14:case 15:Jo(4,A,A.return);break;case 1:Ps(A,A.return);var L=A.stateNode;if(typeof L.componentWillUnmount=="function"){i=A,n=A.return;try{e=i,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(M){It(i,n,M)}}break;case 5:Ps(A,A.return);break;case 22:if(A.memoizedState!==null){z1(b);continue}}T!==null?(T.return=A,Ee=T):z1(b)}v=v.sibling}e:for(v=null,b=t;;){if(b.tag===5){if(v===null){v=b;try{o=b.stateNode,w?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=b.stateNode,m=b.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,g.style.display=Ap("display",f))}catch(M){It(t,t.return,M)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=w?"":b.memoizedProps}catch(M){It(t,t.return,M)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:sr(e,t),vr(t),i&4&&U1(t);break;case 21:break;default:sr(e,t),vr(t)}}function vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qm(n)){var i=n;break e}n=n.return}throw Error(ie(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(la(o,""),i.flags&=-33);var l=F1(t);i0(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,g=F1(t);r0(t,g,f);break;default:throw Error(ie(161))}}catch(m){It(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wv(t,e,n){Ee=t,tx(t)}function tx(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var o=Ee,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||pl;if(!f){var g=o.alternate,m=g!==null&&g.memoizedState!==null||on;g=pl;var w=on;if(pl=f,(on=m)&&!w)for(Ee=o;Ee!==null;)f=Ee,m=f.child,f.tag===22&&f.memoizedState!==null?V1(o):m!==null?(m.return=f,Ee=m):V1(o);for(;l!==null;)Ee=l,tx(l),l=l.sibling;Ee=o,pl=g,on=w}$1(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,Ee=l):$1(t)}}function $1(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Rc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!on)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&S1(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S1(e,f,n)}break;case 5:var g=e.stateNode;if(n===null&&e.flags&4){n=g;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var v=w.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&fa(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}on||e.flags&512&&n0(e)}catch(A){It(e,e.return,A)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function z1(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function V1(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rc(4,e)}catch(m){It(e,n,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(m){It(e,o,m)}}var l=e.return;try{n0(e)}catch(m){It(e,l,m)}break;case 5:var f=e.return;try{n0(e)}catch(m){It(e,f,m)}}}catch(m){It(e,e.return,m)}if(e===t){Ee=null;break}var g=e.sibling;if(g!==null){g.return=e.return,Ee=g;break}Ee=e.return}}var Gv=Math.ceil,lc=$r.ReactCurrentDispatcher,xf=$r.ReactCurrentOwner,Qn=$r.ReactCurrentBatchConfig,Ge=0,Xt=null,Ot=null,Jt=0,Dn=0,Ds=bi(0),jt=0,_a=null,Yi=0,Pc=0,wf=0,ea=null,_n=null,yf=0,Zs=1/0,kr=null,cc=!1,s0=null,hi=null,ml=!1,si=null,uc=0,ta=0,o0=null,Fl=-1,Ul=0;function fn(){return Ge&6?kt():Fl!==-1?Fl:Fl=kt()}function gi(t){return t.mode&1?Ge&2&&Jt!==0?Jt&-Jt:Nv.transition!==null?(Ul===0&&(Ul=Fp()),Ul):(t=nt,t!==0||(t=window.event,t=t===void 0?16:Gp(t.type)),t):1}function dr(t,e,n,i){if(50<ta)throw ta=0,o0=null,Error(ie(185));Oa(t,n,i),(!(Ge&2)||t!==Xt)&&(t===Xt&&(!(Ge&2)&&(Pc|=n),jt===4&&ni(t,Jt)),Nn(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Zs=kt()+500,Nc&&_i()))}function Nn(t,e){var n=t.callbackNode;Ny(t,e);var i=Xl(t,t===Xt?Jt:0);if(i===0)n!==null&&Qh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Qh(n),e===1)t.tag===0?Iv(H1.bind(null,t)):dm(H1.bind(null,t)),Cv(function(){!(Ge&6)&&_i()}),n=null;else{switch(Up(i)){case 1:n=H0;break;case 4:n=Bp;break;case 16:n=Gl;break;case 536870912:n=jp;break;default:n=Gl}n=cx(n,nx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nx(t,e){if(Fl=-1,Ul=0,Ge&6)throw Error(ie(327));var n=t.callbackNode;if(Vs()&&t.callbackNode!==n)return null;var i=Xl(t,t===Xt?Jt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=dc(t,i);else{e=i;var o=Ge;Ge|=2;var l=ix();(Xt!==t||Jt!==e)&&(kr=null,Zs=kt()+500,Vi(t,e));do try{Yv();break}catch(g){rx(t,g)}while(!0);rf(),lc.current=l,Ge=o,Ot!==null?e=0:(Xt=null,Jt=0,e=jt)}if(e!==0){if(e===2&&(o=Pd(t),o!==0&&(i=o,e=a0(t,o))),e===1)throw n=_a,Vi(t,0),ni(t,i),Nn(t,kt()),n;if(e===6)ni(t,i);else{if(o=t.current.alternate,!(i&30)&&!Xv(o)&&(e=dc(t,i),e===2&&(l=Pd(t),l!==0&&(i=l,e=a0(t,l))),e===1))throw n=_a,Vi(t,0),ni(t,i),Nn(t,kt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ie(345));case 2:Li(t,_n,kr);break;case 3:if(ni(t,i),(i&130023424)===i&&(e=yf+500-kt(),10<e)){if(Xl(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){fn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=$d(Li.bind(null,t,_n,kr),e);break}Li(t,_n,kr);break;case 4:if(ni(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-ur(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Gv(i/1960))-i,10<i){t.timeoutHandle=$d(Li.bind(null,t,_n,kr),i);break}Li(t,_n,kr);break;case 5:Li(t,_n,kr);break;default:throw Error(ie(329))}}}return Nn(t,kt()),t.callbackNode===n?nx.bind(null,t):null}function a0(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=dc(t,e),t!==2&&(e=_n,_n=n,e!==null&&l0(e)),t}function l0(t){_n===null?_n=t:_n.push.apply(_n,t)}function Xv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!hr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~wf,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),i=1<<n;t[n]=-1,e&=~i}}function H1(t){if(Ge&6)throw Error(ie(327));Vs();var e=Xl(t,0);if(!(e&1))return Nn(t,kt()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var i=Pd(t);i!==0&&(e=i,n=a0(t,i))}if(n===1)throw n=_a,Vi(t,0),ni(t,e),Nn(t,kt()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,_n,kr),Nn(t,kt()),null}function vf(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Zs=kt()+500,Nc&&_i())}}function Ki(t){si!==null&&si.tag===0&&!(Ge&6)&&Vs();var e=Ge;Ge|=1;var n=Qn.transition,i=nt;try{if(Qn.transition=null,nt=1,t)return t()}finally{nt=i,Qn.transition=n,Ge=e,!(Ge&6)&&_i()}}function Ef(){Dn=Ds.current,pt(Ds)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_v(n)),Ot!==null)for(n=Ot.return;n!==null;){var i=n;switch(ef(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ql();break;case 3:Ys(),pt(Tn),pt(an),uf();break;case 5:cf(i);break;case 4:Ys();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:sf(i.type._context);break;case 22:case 23:Ef()}n=n.return}if(Xt=t,Ot=t=pi(t.current,null),Jt=Dn=e,jt=0,_a=null,wf=Pc=Yi=0,_n=ea=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}$i=null}return t}function rx(t,e){do{var n=Ot;try{if(rf(),Ll.current=ac,oc){for(var i=bt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}oc=!1}if(qi=0,Ht=Bt=bt=null,Qo=!1,va=0,xf.current=null,n===null||n.return===null){jt=1,_a=e,Ot=null;break}e:{var l=t,f=n.return,g=n,m=e;if(e=Jt,g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var w=m,v=g,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var A=v.alternate;A?(v.updateQueue=A.updateQueue,v.memoizedState=A.memoizedState,v.lanes=A.lanes):(v.updateQueue=null,v.memoizedState=null)}var T=O1(f);if(T!==null){T.flags&=-257,R1(T,f,g,l,e),T.mode&1&&k1(l,w,e),e=T,m=w;var L=e.updateQueue;if(L===null){var M=new Set;M.add(m),e.updateQueue=M}else L.add(m);break e}else{if(!(e&1)){k1(l,w,e),bf();break e}m=Error(ie(426))}}else if(wt&&g.mode&1){var H=O1(f);if(H!==null){!(H.flags&65536)&&(H.flags|=256),R1(H,f,g,l,e),tf(Ks(m,g));break e}}l=m=Ks(m,g),jt!==4&&(jt=2),ea===null?ea=[l]:ea.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var O=Um(l,m,e);C1(l,O);break e;case 1:g=m;var I=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(hi===null||!hi.has(N)))){l.flags|=65536,e&=-e,l.lanes|=e;var F=$m(l,g,e);C1(l,F);break e}}l=l.return}while(l!==null)}ox(n)}catch($){e=$,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function ix(){var t=lc.current;return lc.current=ac,t===null?ac:t}function bf(){(jt===0||jt===3||jt===2)&&(jt=4),Xt===null||!(Yi&268435455)&&!(Pc&268435455)||ni(Xt,Jt)}function dc(t,e){var n=Ge;Ge|=2;var i=ix();(Xt!==t||Jt!==e)&&(kr=null,Vi(t,e));do try{qv();break}catch(o){rx(t,o)}while(!0);if(rf(),Ge=n,lc.current=i,Ot!==null)throw Error(ie(261));return Xt=null,Jt=0,jt}function qv(){for(;Ot!==null;)sx(Ot)}function Yv(){for(;Ot!==null&&!vy();)sx(Ot)}function sx(t){var e=lx(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?ox(t):Ot=e,xf.current=null}function ox(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zv(n,e),n!==null){n.flags&=32767,Ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,Ot=null;return}}else if(n=$v(n,e,Dn),n!==null){Ot=n;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);jt===0&&(jt=5)}function Li(t,e,n){var i=nt,o=Qn.transition;try{Qn.transition=null,nt=1,Kv(t,e,n,i)}finally{Qn.transition=o,nt=i}return null}function Kv(t,e,n,i){do Vs();while(si!==null);if(Ge&6)throw Error(ie(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(ky(t,l),t===Xt&&(Ot=Xt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,cx(Gl,function(){return Vs(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Qn.transition,Qn.transition=null;var f=nt;nt=1;var g=Ge;Ge|=4,xf.current=null,Hv(t,n),ex(n,t),mv(Fd),ql=!!jd,Fd=jd=null,t.current=n,Wv(n),Ey(),Ge=g,nt=f,Qn.transition=l}else t.current=n;if(ml&&(ml=!1,si=t,uc=o),l=t.pendingLanes,l===0&&(hi=null),Cy(n.stateNode),Nn(t,kt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(cc)throw cc=!1,t=s0,s0=null,t;return uc&1&&t.tag!==0&&Vs(),l=t.pendingLanes,l&1?t===o0?ta++:(ta=0,o0=t):ta=0,_i(),null}function Vs(){if(si!==null){var t=Up(uc),e=Qn.transition,n=nt;try{if(Qn.transition=null,nt=16>t?16:t,si===null)var i=!1;else{if(t=si,si=null,uc=0,Ge&6)throw Error(ie(331));var o=Ge;for(Ge|=4,Ee=t.current;Ee!==null;){var l=Ee,f=l.child;if(Ee.flags&16){var g=l.deletions;if(g!==null){for(var m=0;m<g.length;m++){var w=g[m];for(Ee=w;Ee!==null;){var v=Ee;switch(v.tag){case 0:case 11:case 15:Jo(8,v,l)}var b=v.child;if(b!==null)b.return=v,Ee=b;else for(;Ee!==null;){v=Ee;var A=v.sibling,T=v.return;if(Zm(v),v===w){Ee=null;break}if(A!==null){A.return=T,Ee=A;break}Ee=T}}}var L=l.alternate;if(L!==null){var M=L.child;if(M!==null){L.child=null;do{var H=M.sibling;M.sibling=null,M=H}while(M!==null)}}Ee=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ee=f;else e:for(;Ee!==null;){if(l=Ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Jo(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,Ee=O;break e}Ee=l.return}}var I=t.current;for(Ee=I;Ee!==null;){f=Ee;var N=f.child;if(f.subtreeFlags&2064&&N!==null)N.return=f,Ee=N;else e:for(f=I;Ee!==null;){if(g=Ee,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Rc(9,g)}}catch($){It(g,g.return,$)}if(g===f){Ee=null;break e}var F=g.sibling;if(F!==null){F.return=g.return,Ee=F;break e}Ee=g.return}}if(Ge=o,_i(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Cc,t)}catch{}i=!0}return i}finally{nt=n,Qn.transition=e}}return!1}function W1(t,e,n){e=Ks(n,e),e=Um(t,e,1),t=fi(t,e,1),e=fn(),t!==null&&(Oa(t,1,e),Nn(t,e))}function It(t,e,n){if(t.tag===3)W1(t,t,n);else for(;e!==null;){if(e.tag===3){W1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hi===null||!hi.has(i))){t=Ks(n,t),t=$m(e,t,1),e=fi(e,t,1),t=fn(),e!==null&&(Oa(e,1,t),Nn(e,t));break}}e=e.return}}function Zv(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Xt===t&&(Jt&n)===n&&(jt===4||jt===3&&(Jt&130023424)===Jt&&500>kt()-yf?Vi(t,0):wf|=n),Nn(t,e)}function ax(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=fn();t=Fr(t,e),t!==null&&(Oa(t,e,n),Nn(t,n))}function Qv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ax(t,n)}function Jv(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ie(314))}i!==null&&i.delete(e),ax(t,n)}var lx;lx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,Uv(t,e,n);An=!!(t.flags&131072)}else An=!1,wt&&e.flags&1048576&&fm(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;jl(t,e),t=e.pendingProps;var o=Gs(e,an.current);zs(e,n),o=ff(null,e,i,t,o,n);var l=hf();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(i)?(l=!0,Jl(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,af(e),o.updater=Oc,e.stateNode=o,o._reactInternals=e,qd(e,i,t,n),e=Zd(null,e,i,!0,l,n)):(e.tag=0,wt&&l&&J0(e),dn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=tE(i),t=or(i,t),o){case 0:e=Kd(null,e,i,t,n);break e;case 1:e=M1(null,e,i,t,n);break e;case 11:e=P1(null,e,i,t,n);break e;case 14:e=D1(null,e,i,or(i.type,t),n);break e}throw Error(ie(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),Kd(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),M1(t,e,i,o,n);case 3:e:{if(Wm(e),t===null)throw Error(ie(387));i=e.pendingProps,l=e.memoizedState,o=l.element,wm(t,e),ic(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Ks(Error(ie(423)),e),e=L1(t,e,i,n,o);break e}else if(i!==o){o=Ks(Error(ie(424)),e),e=L1(t,e,i,n,o);break e}else for(Ln=di(e.stateNode.containerInfo.firstChild),Bn=e,wt=!0,cr=null,n=mm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xs(),i===o){e=Ur(t,e,n);break e}dn(t,e,i,n)}e=e.child}return e;case 5:return ym(e),t===null&&Wd(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,Ud(i,o)?f=null:l!==null&&Ud(i,l)&&(e.flags|=32),Hm(t,e),dn(t,e,f,n),e.child;case 6:return t===null&&Wd(e),null;case 13:return Gm(t,e,n);case 4:return lf(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=qs(e,null,i,n):dn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),P1(t,e,i,o,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,dt(nc,i._currentValue),i._currentValue=f,l!==null)if(hr(l.value,f)){if(l.children===o.children&&!Tn.current){e=Ur(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var g=l.dependencies;if(g!==null){f=l.child;for(var m=g.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=Mr(-1,n&-n),m.tag=2;var w=l.updateQueue;if(w!==null){w=w.shared;var v=w.pending;v===null?m.next=m:(m.next=v.next,v.next=m),w.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Gd(l.return,n,e),g.lanes|=n;break}m=m.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ie(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),Gd(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}dn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,zs(e,n),o=Jn(o),i=i(o),e.flags|=1,dn(t,e,i,n),e.child;case 14:return i=e.type,o=or(i,e.pendingProps),o=or(i.type,o),D1(t,e,i,o,n);case 15:return zm(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:or(i,o),jl(t,e),e.tag=1,In(i)?(t=!0,Jl(e)):t=!1,zs(e,n),Fm(e,i,o),qd(e,i,o,n),Zd(null,e,i,!0,t,n);case 19:return Xm(t,e,n);case 22:return Vm(t,e,n)}throw Error(ie(156,e.tag))};function cx(t,e){return Lp(t,e)}function eE(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,i){return new eE(t,e,n,i)}function _f(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tE(t){if(typeof t=="function")return _f(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$0)return 11;if(t===z0)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")_f(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Cs:return Hi(n.children,o,l,e);case U0:f=8,o|=8;break;case wd:return t=Zn(12,n,e,o|2),t.elementType=wd,t.lanes=l,t;case yd:return t=Zn(13,n,e,o),t.elementType=yd,t.lanes=l,t;case vd:return t=Zn(19,n,e,o),t.elementType=vd,t.lanes=l,t;case yp:return Dc(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xp:f=10;break e;case wp:f=9;break e;case $0:f=11;break e;case z0:f=14;break e;case Qr:f=16,i=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Zn(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Hi(t,e,n,i){return t=Zn(7,t,i,e),t.lanes=n,t}function Dc(t,e,n,i){return t=Zn(22,t,i,e),t.elementType=yp,t.lanes=n,t.stateNode={isHidden:!1},t}function Zu(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function Qu(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nE(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ru(0),this.expirationTimes=Ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ru(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Cf(t,e,n,i,o,l,f,g,m){return t=new nE(t,e,n,g,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Zn(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},af(l),t}function rE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ux(t){if(!t)return yi;t=t._reactInternals;e:{if(Qi(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(In(n))return um(t,n,e)}return e}function dx(t,e,n,i,o,l,f,g,m){return t=Cf(n,i,!0,t,o,l,f,g,m),t.context=ux(null),n=t.current,i=fn(),o=gi(n),l=Mr(i,o),l.callback=e??null,fi(n,l,o),t.current.lanes=o,Oa(t,o,i),Nn(t,i),t}function Mc(t,e,n,i){var o=e.current,l=fn(),f=gi(o);return n=ux(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=fi(o,e,f),t!==null&&(dr(t,o,f,l),Ml(t,o,f)),f}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sf(t,e){G1(t,e),(t=t.alternate)&&G1(t,e)}function iE(){return null}var fx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Af(t){this._internalRoot=t}Lc.prototype.render=Af.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Mc(t,e,null,null)};Lc.prototype.unmount=Af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){Mc(null,t,null,null)}),e[jr]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&Wp(t)}};function Tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X1(){}function sE(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var w=fc(f);l.call(w)}}var f=dx(e,i,t,0,null,!1,!1,"",X1);return t._reactRootContainer=f,t[jr]=f.current,pa(t.nodeType===8?t.parentNode:t),Ki(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var g=i;i=function(){var w=fc(m);g.call(w)}}var m=Cf(t,0,!1,null,null,!1,!1,"",X1);return t._reactRootContainer=m,t[jr]=m.current,pa(t.nodeType===8?t.parentNode:t),Ki(function(){Mc(e,m,n,i)}),m}function jc(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var g=o;o=function(){var m=fc(f);g.call(m)}}Mc(e,f,t,o)}else f=sE(n,e,t,o,i);return fc(f)}$p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(W0(e,n|1),Nn(e,kt()),!(Ge&6)&&(Zs=kt()+500,_i()))}break;case 13:Ki(function(){var i=Fr(t,1);if(i!==null){var o=fn();dr(i,t,1,o)}}),Sf(t,1)}};G0=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=fn();dr(e,t,134217728,n)}Sf(t,134217728)}};zp=function(t){if(t.tag===13){var e=gi(t),n=Fr(t,e);if(n!==null){var i=fn();dr(n,t,e,i)}Sf(t,e)}};Vp=function(){return nt};Hp=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};kd=function(t,e,n){switch(e){case"input":if(_d(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Ic(i);if(!o)throw Error(ie(90));Ep(i),_d(i,o)}}}break;case"textarea":_p(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};kp=vf;Op=Ki;var oE={usingClientEntryPoint:!1,Events:[Pa,Is,Ic,Ip,Np,vf]},Do={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aE={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||iE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{Cc=xl.inject(aE),Ar=xl}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oE;Fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(e))throw Error(ie(200));return rE(t,e,null,n)};Fn.createRoot=function(t,e){if(!Tf(t))throw Error(ie(299));var n=!1,i="",o=fx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Cf(t,1,!1,null,null,n,!1,i,o),t[jr]=e.current,pa(t.nodeType===8?t.parentNode:t),new Af(e)};Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t){return Ki(t)};Fn.hydrate=function(t,e,n){if(!Bc(e))throw Error(ie(200));return jc(null,t,e,!0,n)};Fn.hydrateRoot=function(t,e,n){if(!Tf(t))throw Error(ie(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=fx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=dx(e,null,t,1,n??null,o,!1,l,f),t[jr]=e.current,pa(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Lc(e)};Fn.render=function(t,e,n){if(!Bc(e))throw Error(ie(200));return jc(null,t,e,!1,n)};Fn.unmountComponentAtNode=function(t){if(!Bc(t))throw Error(ie(40));return t._reactRootContainer?(Ki(function(){jc(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};Fn.unstable_batchedUpdates=vf;Fn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Bc(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return jc(t,e,n,!1,i)};Fn.version="18.3.1-next-f1338f8080-20240426";function hx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hx)}catch(t){console.error(t)}}hx(),hp.exports=Fn;var lE=hp.exports,gx,q1=lE;gx=q1.createRoot,q1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ca.apply(this,arguments)}var oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oi||(oi={}));const Y1="popstate";function cE(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:g}=i.location;return c0("",{pathname:l,search:f,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:hc(o)}return dE(e,n,null,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function px(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uE(){return Math.random().toString(36).substr(2,8)}function K1(t,e){return{usr:t.state,key:t.key,idx:e}}function c0(t,e,n,i){return n===void 0&&(n=null),Ca({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||i||uE()})}function hc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function dE(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,g=oi.Pop,m=null,w=v();w==null&&(w=0,f.replaceState(Ca({},f.state,{idx:w}),""));function v(){return(f.state||{idx:null}).idx}function b(){g=oi.Pop;let H=v(),O=H==null?null:H-w;w=H,m&&m({action:g,location:M.location,delta:O})}function A(H,O){g=oi.Push;let I=c0(M.location,H,O);w=v()+1;let N=K1(I,w),F=M.createHref(I);try{f.pushState(N,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(F)}l&&m&&m({action:g,location:M.location,delta:1})}function T(H,O){g=oi.Replace;let I=c0(M.location,H,O);w=v();let N=K1(I,w),F=M.createHref(I);f.replaceState(N,"",F),l&&m&&m({action:g,location:M.location,delta:0})}function L(H){let O=o.location.origin!=="null"?o.location.origin:o.location.href,I=typeof H=="string"?H:hc(H);return I=I.replace(/ $/,"%20"),Rt(O,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,O)}let M={get action(){return g},get location(){return t(o,f)},listen(H){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Y1,b),m=H,()=>{o.removeEventListener(Y1,b),m=null}},createHref(H){return e(o,H)},createURL:L,encodeLocation(H){let O=L(H);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:A,replace:T,go(H){return f.go(H)}};return M}var Z1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z1||(Z1={}));function fE(t,e,n){return n===void 0&&(n="/"),hE(t,e,n,!1)}function hE(t,e,n,i){let o=typeof e=="string"?co(e):e,l=If(o.pathname||"/",n);if(l==null)return null;let f=mx(t);gE(f);let g=null;for(let m=0;g==null&&m<f.length;++m){let w=SE(l);g=_E(f[m],w,i)}return g}function mx(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,g)=>{let m={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};m.relativePath.startsWith("/")&&(Rt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let w=mi([i,m.relativePath]),v=n.concat(m);l.children&&l.children.length>0&&(Rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),mx(l.children,e,v,w)),!(l.path==null&&!l.index)&&e.push({path:w,score:EE(w,l.index),routesMeta:v})};return t.forEach((l,f)=>{var g;if(l.path===""||!((g=l.path)!=null&&g.includes("?")))o(l,f);else for(let m of xx(l.path))o(l,f,m)}),e}function xx(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=xx(i.join("/")),g=[];return g.push(...f.map(m=>m===""?l:[l,m].join("/"))),o&&g.push(...f),g.map(m=>t.startsWith("/")&&m===""?"/":m)}function gE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const pE=/^:[\w-]+$/,mE=3,xE=2,wE=1,yE=10,vE=-2,Q1=t=>t==="*";function EE(t,e){let n=t.split("/"),i=n.length;return n.some(Q1)&&(i+=vE),e&&(i+=xE),n.filter(o=>!Q1(o)).reduce((o,l)=>o+(pE.test(l)?mE:l===""?wE:yE),i)}function bE(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function _E(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let g=0;g<i.length;++g){let m=i[g],w=g===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=J1({path:m.relativePath,caseSensitive:m.caseSensitive,end:w},v),A=m.route;if(!b&&w&&n&&!i[i.length-1].route.index&&(b=J1({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:mi([l,b.pathname]),pathnameBase:NE(mi([l,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(l=mi([l,b.pathnameBase]))}return f}function J1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=CE(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((w,v,b)=>{let{paramName:A,isOptional:T}=v;if(A==="*"){let M=g[b]||"";f=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const L=g[b];return T&&!L?w[A]=void 0:w[A]=(L||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:f,pattern:t}}function CE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),px(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,m)=>(i.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function SE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return px(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function If(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function AE(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?co(t):t;return{pathname:n?n.startsWith("/")?n:TE(n,e):e,search:kE(i),hash:OE(o)}}function TE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ju(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wx(t,e){let n=IE(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function yx(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=co(t):(o=Ca({},t),Rt(!o.pathname||!o.pathname.includes("?"),Ju("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),Ju("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),Ju("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,g;if(f==null)g=n;else{let b=e.length-1;if(!i&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),b-=1;o.pathname=A.join("/")}g=b>=0?e[b]:"/"}let m=AE(o,g),w=f&&f!=="/"&&f.endsWith("/"),v=(l||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(w||v)&&(m.pathname+="/"),m}const mi=t=>t.join("/").replace(/\/\/+/g,"/"),NE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"];new Set(vx);const PE=["get",...vx];new Set(PE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sa.apply(this,arguments)}const Nf=G.createContext(null),DE=G.createContext(null),Ji=G.createContext(null),Fc=G.createContext(null),es=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Ex=G.createContext(null);function ME(t,e){let{relative:n}=e===void 0?{}:e;Ma()||Rt(!1);let{basename:i,navigator:o}=G.useContext(Ji),{hash:l,pathname:f,search:g}=_x(t,{relative:n}),m=f;return i!=="/"&&(m=f==="/"?i:mi([i,f])),o.createHref({pathname:m,search:g,hash:l})}function Ma(){return G.useContext(Fc)!=null}function La(){return Ma()||Rt(!1),G.useContext(Fc).location}function bx(t){G.useContext(Ji).static||G.useLayoutEffect(t)}function LE(){let{isDataRoute:t}=G.useContext(es);return t?YE():BE()}function BE(){Ma()||Rt(!1);let t=G.useContext(Nf),{basename:e,future:n,navigator:i}=G.useContext(Ji),{matches:o}=G.useContext(es),{pathname:l}=La(),f=JSON.stringify(wx(o,n.v7_relativeSplatPath)),g=G.useRef(!1);return bx(()=>{g.current=!0}),G.useCallback(function(w,v){if(v===void 0&&(v={}),!g.current)return;if(typeof w=="number"){i.go(w);return}let b=yx(w,JSON.parse(f),l,v.relative==="path");t==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:mi([e,b.pathname])),(v.replace?i.replace:i.push)(b,v.state,v)},[e,i,f,l,t])}function _x(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=G.useContext(Ji),{matches:o}=G.useContext(es),{pathname:l}=La(),f=JSON.stringify(wx(o,i.v7_relativeSplatPath));return G.useMemo(()=>yx(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function jE(t,e){return FE(t,e)}function FE(t,e,n,i){Ma()||Rt(!1);let{navigator:o}=G.useContext(Ji),{matches:l}=G.useContext(es),f=l[l.length-1],g=f?f.params:{};f&&f.pathname;let m=f?f.pathnameBase:"/";f&&f.route;let w=La(),v;if(e){var b;let H=typeof e=="string"?co(e):e;m==="/"||(b=H.pathname)!=null&&b.startsWith(m)||Rt(!1),v=H}else v=w;let A=v.pathname||"/",T=A;if(m!=="/"){let H=m.replace(/^\//,"").split("/");T="/"+A.replace(/^\//,"").split("/").slice(H.length).join("/")}let L=fE(t,{pathname:T}),M=HE(L&&L.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:mi([m,o.encodeLocation?o.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?m:mi([m,o.encodeLocation?o.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),l,n,i);return e&&M?G.createElement(Fc.Provider,{value:{location:Sa({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:oi.Pop}},M):M}function UE(){let t=qE(),e=RE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:o},n):null,null)}const $E=G.createElement(UE,null);class zE extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(es.Provider,{value:this.props.routeContext},G.createElement(Ex.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VE(t){let{routeContext:e,match:n,children:i}=t,o=G.useContext(Nf);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(es.Provider,{value:e},i)}function HE(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,g=(o=n)==null?void 0:o.errors;if(g!=null){let v=f.findIndex(b=>b.route.id&&(g==null?void 0:g[b.route.id])!==void 0);v>=0||Rt(!1),f=f.slice(0,Math.min(f.length,v+1))}let m=!1,w=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<f.length;v++){let b=f[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(w=v),b.route.id){let{loaderData:A,errors:T}=n,L=b.route.loader&&A[b.route.id]===void 0&&(!T||T[b.route.id]===void 0);if(b.route.lazy||L){m=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}return f.reduceRight((v,b,A)=>{let T,L=!1,M=null,H=null;n&&(T=g&&b.route.id?g[b.route.id]:void 0,M=b.route.errorElement||$E,m&&(w<0&&A===0?(L=!0,H=null):w===A&&(L=!0,H=b.route.hydrateFallbackElement||null)));let O=e.concat(f.slice(0,A+1)),I=()=>{let N;return T?N=M:L?N=H:b.route.Component?N=G.createElement(b.route.Component,null):b.route.element?N=b.route.element:N=v,G.createElement(VE,{match:b,routeContext:{outlet:v,matches:O,isDataRoute:n!=null},children:N})};return n&&(b.route.ErrorBoundary||b.route.errorElement||A===0)?G.createElement(zE,{location:n.location,revalidation:n.revalidation,component:M,error:T,children:I(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):I()},null)}var Cx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cx||{}),gc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gc||{});function WE(t){let e=G.useContext(Nf);return e||Rt(!1),e}function GE(t){let e=G.useContext(DE);return e||Rt(!1),e}function XE(t){let e=G.useContext(es);return e||Rt(!1),e}function Sx(t){let e=XE(),n=e.matches[e.matches.length-1];return n.route.id||Rt(!1),n.route.id}function qE(){var t;let e=G.useContext(Ex),n=GE(gc.UseRouteError),i=Sx(gc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function YE(){let{router:t}=WE(Cx.UseNavigateStable),e=Sx(gc.UseNavigateStable),n=G.useRef(!1);return bx(()=>{n.current=!0}),G.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Sa({fromRouteId:e},l)))},[t,e])}function KE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vo(t){Rt(!1)}function ZE(t){let{basename:e="/",children:n=null,location:i,navigationType:o=oi.Pop,navigator:l,static:f=!1,future:g}=t;Ma()&&Rt(!1);let m=e.replace(/^\/*/,"/"),w=G.useMemo(()=>({basename:m,navigator:l,static:f,future:Sa({v7_relativeSplatPath:!1},g)}),[m,g,l,f]);typeof i=="string"&&(i=co(i));let{pathname:v="/",search:b="",hash:A="",state:T=null,key:L="default"}=i,M=G.useMemo(()=>{let H=If(v,m);return H==null?null:{location:{pathname:H,search:b,hash:A,state:T,key:L},navigationType:o}},[m,v,b,A,T,L,o]);return M==null?null:G.createElement(Ji.Provider,{value:w},G.createElement(Fc.Provider,{children:n,value:M}))}function QE(t){let{children:e,location:n}=t;return jE(u0(e),n)}new Promise(()=>{});function u0(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(i,o)=>{if(!G.isValidElement(i))return;let l=[...e,o];if(i.type===G.Fragment){n.push.apply(n,u0(i.props.children,l));return}i.type!==Vo&&Rt(!1),!i.props.index||!i.props.children||Rt(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=u0(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d0(){return d0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},d0.apply(this,arguments)}function JE(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function e3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t3(t,e){return t.button===0&&(!e||e==="_self")&&!e3(t)}const n3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],r3="6";try{window.__reactRouterVersion=r3}catch{}const i3="startTransition",eg=Zw[i3];function s3(t){let{basename:e,children:n,future:i,window:o}=t,l=G.useRef();l.current==null&&(l.current=cE({window:o,v5Compat:!0}));let f=l.current,[g,m]=G.useState({action:f.action,location:f.location}),{v7_startTransition:w}=i||{},v=G.useCallback(b=>{w&&eg?eg(()=>m(b)):m(b)},[m,w]);return G.useLayoutEffect(()=>f.listen(v),[f,v]),G.useEffect(()=>KE(i),[i]),G.createElement(ZE,{basename:e,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const o3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=G.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:g,target:m,to:w,preventScrollReset:v,viewTransition:b}=e,A=JE(e,n3),{basename:T}=G.useContext(Ji),L,M=!1;if(typeof w=="string"&&a3.test(w)&&(L=w,o3))try{let N=new URL(window.location.href),F=w.startsWith("//")?new URL(N.protocol+w):new URL(w),$=If(F.pathname,T);F.origin===N.origin&&$!=null?w=$+F.search+F.hash:M=!0}catch{}let H=ME(w,{relative:o}),O=l3(w,{replace:f,state:g,target:m,preventScrollReset:v,relative:o,viewTransition:b});function I(N){i&&i(N),N.defaultPrevented||O(N)}return G.createElement("a",d0({},A,{href:L||H,onClick:M||l?i:I,ref:n,target:m}))});var tg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tg||(tg={}));var ng;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ng||(ng={}));function l3(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:g}=e===void 0?{}:e,m=LE(),w=La(),v=_x(t,{relative:f});return G.useCallback(b=>{if(t3(b,n)){b.preventDefault();let A=i!==void 0?i:hc(w)===hc(v);m(t,{replace:A,state:o,preventScrollReset:l,relative:f,viewTransition:g})}},[w,m,v,i,o,n,t,l,f,g])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(t,e)=>{const n=G.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:g="",children:m,...w},v)=>G.createElement("svg",{ref:v,...c3,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:["lucide",`lucide-${u3(t)}`,g].join(" "),...w},[...e.map(([b,A])=>G.createElement(b,A)),...Array.isArray(m)?m:[m]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=De("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=De("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=De("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=De("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=De("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=De("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=De("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=De("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=De("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=De("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=De("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=De("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=De("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=De("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=De("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=De("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=De("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=De("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=De("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=De("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),T3="modulepreload",I3=function(t,e){return new URL(t,e).href},ug={},Qs=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){const f=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),m=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=Promise.allSettled(n.map(w=>{if(w=I3(w,i),w in ug)return;ug[w]=!0;const v=w.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(!!i)for(let L=f.length-1;L>=0;L--){const M=f[L];if(M.href===w&&(!v||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${b}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":T3,v||(T.as="script"),T.crossOrigin="",T.href=w,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((L,M)=>{T.addEventListener("load",L),T.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${w}`)))})}))}function l(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&l(g.reason);return e().catch(l)})},N3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:i}=await Promise.resolve().then(()=>uo);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Pf extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class k3 extends Pf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class O3 extends Pf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R3 extends Pf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var g0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(g0||(g0={}));var P3=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};class D3{constructor(e,{headers:n={},customFetch:i,region:o=g0.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=N3(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return P3(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:f}=n;let g={},{region:m}=n;m||(m=this.region),m&&m!=="any"&&(g["x-region"]=m);let w;f&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(g["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(g["Content-Type"]="application/json",w=JSON.stringify(f)));const v=yield this.fetch(`${this.url}/${e}`,{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:w}).catch(L=>{throw new k3(L)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new O3(v);if(!v.ok)throw new R3(v);let A=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return A==="application/json"?T=yield v.json():A==="application/octet-stream"?T=yield v.blob():A==="text/event-stream"?T=v:A==="multipart/form-data"?T=yield v.formData():T=yield v.text(),{data:T,error:null}}catch(o){return{data:null,error:o}}})}}var Cn={},Df={},Uc={},Ba={},$c={},zc={},M3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Js=M3();const L3=Js.fetch,Mx=Js.fetch.bind(Js),Lx=Js.Headers,B3=Js.Request,j3=Js.Response,uo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lx,Request:B3,Response:j3,default:Mx,fetch:L3},Symbol.toStringTag,{value:"Module"})),F3=Mw(uo);var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});let U3=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Vc.default=U3;var Bx=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zc,"__esModule",{value:!0});const $3=Bx(F3),z3=Bx(Vc);let V3=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=$3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var f,g,m;let w=null,v=null,b=null,A=l.status,T=l.statusText;if(l.ok){if(this.method!=="HEAD"){const O=await l.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=O:v=JSON.parse(O))}const M=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),H=(g=l.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");M&&H&&H.length>1&&(b=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(w={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,b=null,A=406,T="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const M=await l.text();try{w=JSON.parse(M),Array.isArray(w)&&l.status===404&&(v=[],w=null,A=200,T="OK")}catch{l.status===404&&M===""?(A=204,T="No Content"):w={message:M}}if(w&&this.isMaybeSingle&&(!((m=w==null?void 0:w.details)===null||m===void 0)&&m.includes("0 rows"))&&(w=null,A=200,T="OK"),w&&this.shouldThrowOnError)throw new z3.default(w)}return{error:w,data:v,count:b,status:A,statusText:T}});return this.shouldThrowOnError||(o=o.catch(l=>{var f,g,m;return{error:{message:`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(m=l==null?void 0:l.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};zc.default=V3;var H3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($c,"__esModule",{value:!0});const W3=H3(zc);let G3=class extends W3.default{select(e){let n=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:o,referencedTable:l=o}={}){const f=l?`${l}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"offset":`${o}.offset`,f=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(f,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:o=!1,wal:l=!1,format:f="text"}={}){var g;const m=[e?"analyze":null,n?"verbose":null,i?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),w=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${w}"; options=${m};`,f==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};$c.default=G3;var X3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ba,"__esModule",{value:!0});const q3=X3($c);let Y3=class extends q3.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const f=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${f}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}};Ba.default=Y3;var K3=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uc,"__esModule",{value:!0});const Mo=K3(Ba);let Z3=class{constructor(e,{headers:n={},schema:i,fetch:o}){this.url=e,this.headers=n,this.schema=i,this.fetch=o}select(e,{head:n=!1,count:i}={}){const o=n?"HEAD":"GET";let l=!1;const f=(e??"*").split("").map(g=>/\s/.test(g)&&!l?"":(g==='"'&&(l=!l),g)).join("");return this.url.searchParams.set("select",f),i&&(this.headers.Prefer=`count=${i}`),new Mo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const f=e.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(f.length>0){const g=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new Mo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:o,defaultToNull:l=!0}={}){const f="POST",g=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&g.push(this.headers.Prefer),o&&g.push(`count=${o}`),l||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(e)){const m=e.reduce((w,v)=>w.concat(Object.keys(v)),[]);if(m.length>0){const w=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",w.join(","))}}return new Mo.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new Mo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Mo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Uc.default=Z3;var Hc={},Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.version=void 0;Wc.version="0.0.0-automated";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.DEFAULT_HEADERS=void 0;const Q3=Wc;Hc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Q3.version}`};var jx=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Df,"__esModule",{value:!0});const J3=jx(Uc),eb=jx(Ba),tb=Hc;let nb=class Fx{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},tb.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new J3.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:l}={}){let f;const g=new URL(`${this.url}/rpc/${e}`);let m;i||o?(f=i?"HEAD":"GET",Object.entries(n).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{g.searchParams.append(v,b)})):(f="POST",m=n);const w=Object.assign({},this.headers);return l&&(w.Prefer=`count=${l}`),new eb.default({method:f,url:g,headers:w,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}};Df.default=nb;var fo=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.PostgrestError=Cn.PostgrestBuilder=Cn.PostgrestTransformBuilder=Cn.PostgrestFilterBuilder=Cn.PostgrestQueryBuilder=Cn.PostgrestClient=void 0;const Ux=fo(Df);Cn.PostgrestClient=Ux.default;const $x=fo(Uc);Cn.PostgrestQueryBuilder=$x.default;const zx=fo(Ba);Cn.PostgrestFilterBuilder=zx.default;const Vx=fo($c);Cn.PostgrestTransformBuilder=Vx.default;const Hx=fo(zc);Cn.PostgrestBuilder=Hx.default;const Wx=fo(Vc);Cn.PostgrestError=Wx.default;var rb=Cn.default={PostgrestClient:Ux.default,PostgrestQueryBuilder:$x.default,PostgrestFilterBuilder:zx.default,PostgrestTransformBuilder:Vx.default,PostgrestBuilder:Hx.default,PostgrestError:Wx.default};const{PostgrestClient:ib,PostgrestQueryBuilder:zN,PostgrestFilterBuilder:VN,PostgrestTransformBuilder:HN,PostgrestBuilder:WN,PostgrestError:GN}=rb,sb="2.11.2",ob={"X-Client-Info":`realtime-js/${sb}`},ab="1.0.0",Gx=1e4,lb=1e3;var Hs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Hs||(Hs={}));var Rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Rn||(Rn={}));var lr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(lr||(lr={}));var p0;(function(t){t.websocket="websocket"})(p0||(p0={}));var ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ji||(ji={}));class cb{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const o=n.getUint8(1),l=n.getUint8(2);let f=this.HEADER_LENGTH+2;const g=i.decode(e.slice(f,f+o));f=f+o;const m=i.decode(e.slice(f,f+l));f=f+l;const w=JSON.parse(i.decode(e.slice(f,e.byteLength)));return{ref:null,topic:g,event:m,payload:w}}}class Xx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ut||(ut={}));const dg=(t,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,f)=>(l[f]=ub(f,t,e,o),l),{})},ub=(t,e,n,i)=>{const o=e.find(g=>g.name===t),l=o==null?void 0:o.type,f=n[t];return l&&!i.includes(l)?qx(l,f):m0(f)},qx=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return gb(e,n)}switch(t){case ut.bool:return db(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return fb(e);case ut.json:case ut.jsonb:return hb(e);case ut.timestamp:return pb(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return m0(e);default:return m0(e)}},m0=t=>t,db=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const f=t.slice(1,n);try{l=JSON.parse("["+f+"]")}catch{l=f?f.split(","):[]}return l.map(g=>qx(e,g))}return t},pb=t=>typeof t=="string"?t.replace(" ","T"):t,Yx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ed{constructor(e,n,i={},o=Gx){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(fg||(fg={}));class ra{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ra.syncState(this.state,o,l,f),this.pendingDiffs.forEach(m=>{this.state=ra.syncDiff(this.state,m,l,f)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ra.syncDiff(this.state,o,l,f),g())}),this.onJoin((o,l,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:f})}),this.onLeave((o,l,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const l=this.cloneDeep(e),f=this.transformState(n),g={},m={};return this.map(l,(w,v)=>{f[w]||(m[w]=v)}),this.map(f,(w,v)=>{const b=l[w];if(b){const A=v.map(H=>H.presence_ref),T=b.map(H=>H.presence_ref),L=v.filter(H=>T.indexOf(H.presence_ref)<0),M=b.filter(H=>A.indexOf(H.presence_ref)<0);L.length>0&&(g[w]=L),M.length>0&&(m[w]=M)}else g[w]=v}),this.syncDiff(l,{joins:g,leaves:m},i,o)}static syncDiff(e,n,i,o){const{joins:l,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(g,m)=>{var w;const v=(w=e[g])!==null&&w!==void 0?w:[];if(e[g]=this.cloneDeep(m),v.length>0){const b=e[g].map(T=>T.presence_ref),A=v.filter(T=>b.indexOf(T.presence_ref)<0);e[g].unshift(...A)}i(g,v,m)}),this.map(f,(g,m)=>{let w=e[g];if(!w)return;const v=m.map(b=>b.presence_ref);w=w.filter(b=>v.indexOf(b.presence_ref)<0),e[g]=w,o(g,w,m),w.length===0&&delete e[g]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hg||(hg={}));var gg;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(gg||(gg={}));var Or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Or||(Or={}));class Mf{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ed(this,lr.join,this.params,this.timeout),this.rejoinTimer=new Xx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ra(this),this.broadcastEndpointURL=Yx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:l,presence:f,private:g}}=this.params;this._onError(v=>e==null?void 0:e(Or.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Or.CLOSED));const m={},w={broadcast:l,presence:f,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(v=>v.filter))!==null&&o!==void 0?o:[],private:g};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:w},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket.setAuth(),v===void 0){e==null||e(Or.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,T=(b=A==null?void 0:A.length)!==null&&b!==void 0?b:0,L=[];for(let M=0;M<T;M++){const H=A[M],{filter:{event:O,schema:I,table:N,filter:F}}=H,$=v&&v[M];if($&&$.event===O&&$.schema===I&&$.table===N&&$.filter===F)L.push(Object.assign(Object.assign({},H),{id:$.id}));else{this.unsubscribe(),e==null||e(Or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(Or.SUBSCRIBED);return}}).receive("error",v=>{e==null||e(Or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:f}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:f,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=w.body)===null||o===void 0?void 0:o.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var f,g,m;const w=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),w.receive("ok",()=>l("ok")),w.receive("error",()=>l("error")),w.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const o=new ed(this,lr.leave,{},e);o.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),f=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),f}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ed(this,e,n,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,l;const f=e.toLocaleLowerCase(),{close:g,error:m,leave:w,join:v}=lr;if(i&&[g,m,w,v].indexOf(f)>=0&&i!==this._joinRef())return;let A=this._onMessage(f,n,i);if(n&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(T=>{var L,M,H;return((L=T.filter)===null||L===void 0?void 0:L.event)==="*"||((H=(M=T.filter)===null||M===void 0?void 0:M.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===f}).map(T=>T.callback(A,i)):(l=this.bindings[f])===null||l===void 0||l.filter(T=>{var L,M,H,O,I,N;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in T){const F=T.id,$=(L=T.filter)===null||L===void 0?void 0:L.event;return F&&((M=n.ids)===null||M===void 0?void 0:M.includes(F))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((H=n.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const F=(I=(O=T==null?void 0:T.filter)===null||O===void 0?void 0:O.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return F==="*"||F===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===f}).map(T=>{if(typeof A=="object"&&"ids"in A){const L=A.data,{schema:M,table:H,commit_timestamp:O,type:I,errors:N}=L;A=Object.assign(Object.assign({},{schema:M,table:H,commit_timestamp:O,eventType:I,new:{},old:{},errors:N}),this._getPayloadRecords(L))}T.callback(A,i)})}_isClosed(){return this.state===Rn.closed}_isJoined(){return this.state===Rn.joined}_isJoining(){return this.state===Rn.joining}_isLeaving(){return this.state===Rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Mf.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lr.close,{},e)}_onError(e){this._on(lr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dg(e.columns,e.old_record)),n}}const mb=()=>{},xb=typeof WebSocket<"u",wb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yb{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ob,this.params={},this.timeout=Gx,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=mb,this.conn=null,this.sendBuffer=[],this.serializer=new cb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let f;return l?f=l:typeof fetch>"u"?f=(...g)=>Qs(async()=>{const{default:m}=await Promise.resolve().then(()=>uo);return{default:m}},void 0,import.meta.url).then(({default:m})=>m(...g)):f=fetch,(...g)=>f(...g)},this.endPoint=`${e}/${p0.websocket}`,this.httpEndpoint=Yx(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,f)=>f(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(xb){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new vb(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Qs(async()=>{const{default:e}=await import("./browser-ColmWI-m.js").then(n=>n.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ab}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Hs.connecting:return ji.Connecting;case Hs.open:return ji.Open;case Hs.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}channel(e,n={config:{}}){const i=new Mf(`realtime:${e}`,n,this);return this.channels.push(i),i}push(e){const{topic:n,event:i,payload:o,ref:l}=e,f=()=>{this.encode(e,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let i=null;try{i=JSON.parse(atob(n.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(lr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(lb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:o,payload:l,ref:f}=n;f&&f===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${i} ${o} ${f&&"("+f+")"||""}`,l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,l,f)),this.stateChangeCallbacks.message.forEach(g=>g(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(lr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([wb],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class vb{constructor(e,n,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Hs.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class Lf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Eb extends Lf{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class x0 extends Lf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var bb=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};const Kx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:i}=await Promise.resolve().then(()=>uo);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},_b=()=>bb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>uo),void 0,import.meta.url)).Response:Response}),w0=t=>{if(Array.isArray(t))return t.map(n=>w0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=w0(i)}),e};var ts=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};const td=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cb=(t,e,n)=>ts(void 0,void 0,void 0,function*(){const i=yield _b();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{e(new Eb(td(o),t.status||500))}).catch(o=>{e(new x0(td(o),o))}):e(new x0(td(t),t))}),Sb=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),n))};function ja(t,e,n,i,o,l){return ts(this,void 0,void 0,function*(){return new Promise((f,g)=>{t(n,Sb(e,i,o,l)).then(m=>{if(!m.ok)throw m;return i!=null&&i.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>Cb(m,g,i))})})}function mc(t,e,n,i){return ts(this,void 0,void 0,function*(){return ja(t,"GET",e,n,i)})}function ei(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return ja(t,"POST",e,i,o,n)})}function Ab(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return ja(t,"PUT",e,i,o,n)})}function Tb(t,e,n,i){return ts(this,void 0,void 0,function*(){return ja(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Zx(t,e,n,i,o){return ts(this,void 0,void 0,function*(){return ja(t,"DELETE",e,i,o,n)})}var bn=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};const Ib={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nb{constructor(e,n={},i,o){this.url=e,this.headers=n,this.bucketId=i,this.fetch=Kx(o)}uploadOrUpdate(e,n,i,o){return bn(this,void 0,void 0,function*(){try{let l;const f=Object.assign(Object.assign({},pg),o);let g=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",f.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,m&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o!=null&&o.headers&&(g=Object.assign(Object.assign({},g),o.headers));const w=this._removeEmptyFolders(n),v=this._getFinalPath(w),b=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:e,body:l,headers:g},f!=null&&f.duplex?{duplex:f.duplex}:{})),A=yield b.json();return b.ok?{data:{path:w,id:A.Id,fullPath:A.Key},error:null}:{data:null,error:A}}catch(l){if(Vt(l))return{data:null,error:l};throw l}})}upload(e,n,i){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,o){return bn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),f=this._getFinalPath(l),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",n);try{let m;const w=Object.assign({upsert:pg.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",w.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",w.cacheControl)):(m=i,v["cache-control"]=`max-age=${w.cacheControl}`,v["content-type"]=w.contentType);const b=yield this.fetch(g.toString(),{method:"PUT",body:m,headers:v}),A=yield b.json();return b.ok?{data:{path:l,fullPath:A.Key},error:null}:{data:null,error:A}}catch(m){if(Vt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,n){return bn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const l=yield ei(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),f=new URL(this.url+l.url),g=f.searchParams.get("token");if(!g)throw new Lf("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:g},error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}update(e,n,i){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return bn(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}copy(e,n,i){return bn(this,void 0,void 0,function*(){try{return{data:{path:(yield ei(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,i){return bn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield ei(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${f}`)},{data:l,error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,i){return bn(this,void 0,void 0,function*(){try{const o=yield ei(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${l}`):null})),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}download(e,n){return bn(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),f=l?`?${l}`:"";try{const g=this._getFinalPath(e);return{data:yield(yield mc(this.fetch,`${this.url}/${o}/${g}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(Vt(g))return{data:null,error:g};throw g}})}info(e){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield mc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:w0(i),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}exists(e){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Tb(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Vt(i)&&i instanceof x0){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const g=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});m!==""&&o.push(m);let w=o.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${w}`)}}}remove(e){return bn(this,void 0,void 0,function*(){try{return{data:yield Zx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}list(e,n,i){return bn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Ib),n),{prefix:e||""});return{data:yield ei(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const kb="2.7.1",Ob={"X-Client-Info":`storage-js/${kb}`};var ps=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};class Rb{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},Ob),n),this.fetch=Kx(i)}listBuckets(){return ps(this,void 0,void 0,function*(){try{return{data:yield mc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Vt(e))return{data:null,error:e};throw e}})}getBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield mc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ps(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ps(this,void 0,void 0,function*(){try{return{data:yield Ab(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ps(this,void 0,void 0,function*(){try{return{data:yield Zx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}}class Pb extends Rb{constructor(e,n={},i){super(e,n,i)}from(e){return new Nb(this.url,this.headers,e,this.fetch)}}const Db="2.49.8";let Wo="";typeof Deno<"u"?Wo="deno":typeof document<"u"?Wo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wo="react-native":Wo="node";const Mb={"X-Client-Info":`supabase-js-${Wo}/${Db}`},Lb={headers:Mb},Bb={schema:"public"},jb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fb={};var Ub=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};const $b=t=>{let e;return t?e=t:typeof fetch>"u"?e=Mx:e=fetch,(...n)=>e(...n)},zb=()=>typeof Headers>"u"?Lx:Headers,Vb=(t,e,n)=>{const i=$b(n),o=zb();return(l,f)=>Ub(void 0,void 0,void 0,function*(){var g;const m=(g=yield e())!==null&&g!==void 0?g:t;let w=new o(f==null?void 0:f.headers);return w.has("apikey")||w.set("apikey",t),w.has("Authorization")||w.set("Authorization",`Bearer ${m}`),i(l,Object.assign(Object.assign({},f),{headers:w}))})};var Hb=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};function Wb(t){return t.endsWith("/")?t:t+"/"}function Gb(t,e){var n,i;const{db:o,auth:l,realtime:f,global:g}=t,{db:m,auth:w,realtime:v,global:b}=e,A={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},w),l),realtime:Object.assign(Object.assign({},v),f),global:Object.assign(Object.assign(Object.assign({},b),g),{headers:Object.assign(Object.assign({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(i=g==null?void 0:g.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Hb(this,void 0,void 0,function*(){return""})};return t.accessToken?A.accessToken=t.accessToken:delete A.accessToken,A}const Qx="2.69.1",bs=30*1e3,y0=3,nd=y0*bs,Xb="http://localhost:9999",qb="supabase.auth.token",Yb={"X-Client-Info":`gotrue-js/${Qx}`},v0="X-Supabase-Api-Version",Jx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zb=6e5;class Bf extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Qb extends Bf{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Jb(t){return Me(t)&&t.name==="AuthApiError"}class e2 extends Bf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ci extends Bf{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class Kr extends Ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e_(t){return Me(t)&&t.name==="AuthSessionMissingError"}class rd extends Ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wl extends Ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yl extends Ci{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t_(t){return Me(t)&&t.name==="AuthImplicitGrantRedirectError"}class mg extends Ci{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E0 extends Ci{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function id(t){return Me(t)&&t.name==="AuthRetryableFetchError"}class xg extends Ci{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class ia extends Ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yg=` 	
\r=`.split(""),n_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yg.length;e+=1)t[yg[e].charCodeAt(0)]=-2;for(let e=0;e<wg.length;e+=1)t[wg[e].charCodeAt(0)]=e;return t})();function t2(t,e,n){const i=n_[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function vg(t){const e=[],n=f=>{e.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=f=>{s_(f,i,n)};for(let f=0;f<t.length;f+=1)t2(t.charCodeAt(f),o,l);return e.join("")}function r_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function i_(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}r_(i,e)}}function s_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function o_(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)t2(t.charCodeAt(o),n,i);return new Uint8Array(e)}function a_(t){const e=[];return i_(t,n=>e.push(n)),new Uint8Array(e)}function l_(t){return Math.round(Date.now()/1e3)+t}function c_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Er=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},sa=()=>{if(!Er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function u_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const n2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:i}=await Promise.resolve().then(()=>uo);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},d_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",r2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},El=async(t,e)=>{await t.removeItem(e)};class Gc{constructor(){this.promise=new Gc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Gc.promiseConstructor=Promise;function sd(t){const e=t.split(".");if(e.length!==3)throw new ia("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Kb.test(e[i]))throw new ia("JWT not in base64url format");return{header:JSON.parse(vg(e[0])),payload:JSON.parse(vg(e[1])),signature:o_(e[2]),raw:{header:e[0],payload:e[1]}}}async function f_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h_(t,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const f=await t(l);if(!e(l,null,f)){i(f);return}}catch(f){if(!e(l,f)){o(f);return}}})()})}function g_(t){return("0"+t.toString(16)).substr(-2)}function p_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,g_).join("")}async function m_(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function x_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await m_(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ms(t,e,n=!1){const i=p_();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await r2(t,`${e}-code-verifier`,o);const l=await x_(i);return[l,i===l?"plain":"s256"]}const w_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function y_(t){const e=t.headers.get(v0);if(!e||!e.match(w_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function v_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function E_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var b_=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};const Bi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),__=[502,503,504];async function Eg(t){var e;if(!d_(t))throw new E0(Bi(t),0);if(__.includes(t.status))throw new E0(Bi(t),t.status);let n;try{n=await t.json()}catch(l){throw new e2(Bi(l),l)}let i;const o=y_(t);if(o&&o.getTime()>=Jx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new xg(Bi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Kr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0))throw new xg(Bi(n),t.status,n.weak_password.reasons);throw new Qb(Bi(n),t.status||500,i)}const C_=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ve(t,e,n,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[v0]||(l[v0]=Jx["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const f=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(f.redirect_to=i.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await S_(t,e,n+g,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function S_(t,e,n,i,o,l){const f=C_(e,i,o,l);let g;try{g=await t(n,Object.assign({},f))}catch(m){throw console.error(m),new E0(Bi(m),0)}if(g.ok||await Eg(g),i!=null&&i.noResolveJson)return g;try{return await g.json()}catch(m){await Eg(m)}}function Zr(t){var e;let n=null;N_(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=l_(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function bg(t){const e=Zr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ri(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function A_(t){return{data:t,error:null}}function T_(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=t,f=b_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},f);return{data:{properties:g,user:m},error:null}}function I_(t){return t}function N_(t){return t.access_token&&t.refresh_token&&t.expires_in}var k_=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};class O_{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=n2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Me(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ri})}catch(i){if(Me(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=k_(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:T_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,l,f,g,m;try{const w={nextPage:null,lastPage:0,total:0},v=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:I_});if(v.error)throw v.error;const b=await v.json(),A=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,T=(m=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(L=>{const M=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(L.split(";")[1].split("=")[1]);w[`${H}Page`]=M}),w.total=parseInt(A)),{data:Object.assign(Object.assign({},b),w),error:null}}catch(w){if(Me(w))return{data:{users:[]},error:w};throw w}}async getUserById(e){try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ri})}catch(i){if(Me(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ri})}catch(i){if(Me(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:n,error:i}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const R_={getItem:t=>sa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{sa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{sa()&&globalThis.localStorage.removeItem(t)}};function _g(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function P_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xs={debug:!!(globalThis&&sa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class i2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class D_ extends i2{}async function M_(t,e,n){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new D_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}P_();const L_={url:Xb,storageKey:qb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cg(t,e,n){return await n()}class Aa{constructor(e){var n,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Aa.nextInstanceID,Aa.nextInstanceID+=1,this.instanceID>0&&Er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},L_),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new O_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=n2(o.fetch),this.lock=o.lock||Cg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Er()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=M_:this.lock=Cg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:sa()?this.storage=R_:(this.memoryStorage={},this.storage=_g(this.memoryStorage)):(this.memoryStorage={},this.storage=_g(this.memoryStorage)),Er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=u_(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Er()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),t_(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:f,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Me(n)?{error:n}:{error:new e2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Zr}),{data:f,error:g}=l;if(g||!f)return{data:{user:null,session:null},error:g};const m=f.session,w=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:w,session:m},error:null}}catch(l){if(Me(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,i,o;try{let l;if("email"in e){const{email:v,password:b,options:A}=e;let T=null,L=null;this.flowType==="pkce"&&([T,L]=await ms(this.storage,this.storageKey)),l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:v,password:b,data:(n=A==null?void 0:A.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:T,code_challenge_method:L},xform:Zr})}else if("phone"in e){const{phone:v,password:b,options:A}=e;l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=A==null?void 0:A.data)!==null&&i!==void 0?i:{},channel:(o=A==null?void 0:A.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Zr})}else throw new wl("You must provide either an email or phone number and a password");const{data:f,error:g}=l;if(g||!f)return{data:{user:null,session:null},error:g};const m=f.session,w=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:w,session:m},error:null}}catch(l){if(Me(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:f,options:g}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:bg})}else if("phone"in e){const{phone:l,password:f,options:g}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:bg})}else throw new wl("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new rd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await vl(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:f}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Zr});if(await El(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new rd}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:f})}catch(l){if(Me(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:l,nonce:f}=e,g=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zr}),{data:m,error:w}=g;return w?{data:{user:null,session:null},error:w}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new rd}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:w})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,o,l,f;try{if("email"in e){const{email:g,options:m}=e;let w=null,v=null;this.flowType==="pkce"&&([w,v]=await ms(this.storage,this.storageKey));const{error:b}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:w,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:g,options:m}=e,{data:w,error:v}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(f=m==null?void 0:m.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:w==null?void 0:w.message_id},error:v}}throw new wl("You must provide either an email or phone number.")}catch(g){if(Me(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(e){var n,i;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:g}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Zr});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,w=f.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:w,session:m},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,i,o;try{let l=null,f=null;return this.flowType==="pkce"&&([l,f]=await ms(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:f}),headers:this.headers,xform:A_})}catch(l){if(Me(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Kr;const{error:o}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:f}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:f,error:g}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new wl("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<nd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,w,v)=>(!f&&w==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,w,v))})}return{data:{session:e},error:null}}const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async n=>{var i,o,l;const{data:f,error:g}=n;if(g)throw g;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kr}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:ri})})}catch(n){if(Me(n))return e_(n)&&(await this._removeSession(),await El(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Kr;const f=o.session;let g=null,m=null;this.flowType==="pkce"&&e.email!=null&&([g,m]=await ms(this.storage,this.storageKey));const{data:w,error:v}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:g,code_challenge_method:m}),jwt:f.access_token,xform:ri});if(v)throw v;return f.user=w.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(Me(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kr;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:f}=sd(e.access_token);if(f.exp&&(i=f.exp,o=i<=n),o){const{session:g,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!g)return{data:{user:null,session:null},error:null};l=g}else{const{data:g,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:g.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:f,error:g}=n;if(g)throw g;e=(i=f.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Kr;const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Er())throw new yl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new mg("No code detected.");const{data:I,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:f,expires_in:g,expires_at:m,token_type:w}=e;if(!l||!g||!f||!w)throw new yl("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(g);let A=v+b;m&&(A=parseInt(m));const T=A-v;T*1e3<=bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${b}s`);const L=A-b;v-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,A,v):v-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,A,v);const{data:M,error:H}=await this._getUser(l);if(H)throw H;const O={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:A,refresh_token:f,token_type:w,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:e.type},error:null}}catch(i){if(Me(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{error:l};const f=(i=o.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:g}=await this.admin.signOut(f,e);if(g&&!(Jb(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return e!=="others"&&(await this._removeSession(),await El(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=c_(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:f}=n;if(f)throw f;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ms(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Me(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var f,g,m,w,v;const{data:b,error:A}=l;if(A)throw A;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=e.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(w=b.session)===null||w===void 0?void 0:w.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Er()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Me(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:f}=n;if(f)throw f;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await h_(async o=>(o>0&&await f_(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zr})),(o,l)=>{const f=200*Math.pow(2,o);return l&&id(l)&&Date.now()+f-i<bs})}catch(i){if(this._debug(n,"error",i),Me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Er()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await vl(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<nd;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${nd}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),id(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Gc;const{data:l,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!l.session)throw new Kr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const g={session:l.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(l){if(this._debug(o,"error",l),Me(l)){const f={session:null,error:l};return id(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(e,n)}catch(m){l.push(m)}});if(await Promise.all(f),l.length>0){for(let g=0;g<l.length;g+=1)console.error(l[g]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await r2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await El(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${bs}ms, refresh threshold is ${y0} ticks`),o<=y0&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof i2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,f]=await ms(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(g.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:f}=n;if(f)return{data:null,error:f};const g=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:w}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return w?{data:null,error:w}:(e.factorType==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const{data:f,error:g}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:g})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],o=i.filter(f=>f.factor_type==="totp"&&f.status==="verified"),l=i.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=sd(o.access_token);let g=null;f.aal&&(g=f.aal);let m=g;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const v=f.amr||[];return{data:{currentLevel:g,nextLevel:m,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(f=>f.kid===e);if(i||(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+Zb>Date.now()))return i;const{data:o,error:l}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!o.keys||o.keys.length===0)throw new ia("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),i=o.keys.find(f=>f.kid===e),!i)throw new ia("No matching signing key found in JWKS");return i}async getClaims(e,n={keys:[]}){try{let i=e;if(!i){const{data:T,error:L}=await this.getSession();if(L||!T.session)return{data:null,error:L};i=T.session.access_token}const{header:o,payload:l,signature:f,raw:{header:g,payload:m}}=sd(i);if(v_(l.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:T}=await this.getUser(i);if(T)throw T;return{data:{claims:l,header:o,signature:f},error:null}}const w=E_(o.alg),v=await this.fetchJwk(o.kid,n),b=await crypto.subtle.importKey("jwk",v,w,!0,["verify"]);if(!await crypto.subtle.verify(w,b,f,a_(`${g}.${m}`)))throw new ia("Invalid JWT signature");return{data:{claims:l,header:o,signature:f},error:null}}catch(i){if(Me(i))return{data:null,error:i};throw i}}}Aa.nextInstanceID=0;const B_=Aa;class j_ extends B_{constructor(e){super(e)}}var F_=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})};class U_{constructor(e,n,i){var o,l,f;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const g=Wb(e),m=new URL(g);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const w=`sb-${m.hostname.split(".")[0]}-auth-token`,v={db:Bb,realtime:Fb,auth:Object.assign(Object.assign({},jb),{storageKey:w}),global:Lb},b=Gb(i??{},v);this.storageKey=(o=b.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=b.global.headers)!==null&&l!==void 0?l:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(A,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=b.auth)!==null&&f!==void 0?f:{},this.headers,b.global.fetch),this.fetch=Vb(n,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new ib(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),b.accessToken||this._listenForAuthEvents()}get functions(){return new D3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pb(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return F_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,storageKey:l,flowType:f,lock:g,debug:m},w,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j_({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),w),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,flowType:f,lock:g,debug:m,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new yb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $_=(t,e,n)=>new U_(t,e,n),b0="https://ptbbyqiuczjtyyocjygo.supabase.co",z_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YmJ5cWl1Y3pqdHl5b2NqeWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MDU2NDUsImV4cCI6MjA2ODA4MTY0NX0.wdvVxJzYwpHTbL14GD8GVqqLgPtZmeXjA3p4AFomFnE",Ue=$_(b0,z_),zt={TICKETS:"tickets",SCAN_HISTORY:"scan_history",SETTINGS:"app_settings",PRINTER_SETTINGS:"printer_settings"},tt={supabase:Ue,getProjectInfo:()=>{var n;return{projectId:((n=b0.split(".")[0])==null?void 0:n.split("//")[1])||"unknown",url:b0,isValid:!0}},tickets:{async getAll(){const{data:t,error:e}=await Ue.from(zt.TICKETS).select("*");if(e)throw e;return t||[]},async getByQrCode(t){const e=t.trim(),{data:n,error:i}=await Ue.from(zt.TICKETS).select("*").or(`qrCode.eq.${e},qrCode.eq.${e}
`).maybeSingle();if(i)throw i;return n},async create(t){const{data:e,error:n}=await Ue.from(zt.TICKETS).insert(t).select().single();if(n)throw n;return e},async update(t,e){const{data:n,error:i}=await Ue.from(zt.TICKETS).update(e).eq("qrCode",t).select().single();if(i)throw i;return n},async delete(t){const{error:e}=await Ue.from(zt.TICKETS).delete().eq("qrCode",t);if(e)throw e},async importBulk(t){const{data:e,error:n}=await Ue.from(zt.TICKETS).upsert(t,{onConflict:"qrCode",ignoreDuplicates:!1});if(n)throw n;return{success:!0,count:t.length}},async count(){const{count:t,error:e}=await Ue.from(zt.TICKETS).select("*",{count:"exact",head:!0});if(e)throw e;return t||0},async clearAll(){const{error:t}=await Ue.from(zt.TICKETS).delete().neq("qrCode","impossible_value");if(t)throw t}},scans:{async getAll(){const{data:t,error:e}=await Ue.from(zt.SCAN_HISTORY).select("*").order("timestamp",{ascending:!1});if(e)throw e;return t||[]},async record(t){const{qrCode:e,timestamp:n,success:i,message:o}=t,l={qrCode:e,timestamp:n,success:i,message:o},{data:f,error:g}=await Ue.from(zt.SCAN_HISTORY).insert(l).select().single();if(g)throw g;return f},async clearAll(){const{error:t}=await Ue.from(zt.SCAN_HISTORY).delete().neq("id",-1);if(t)throw t}},settings:{async getSettings(){const{data:t,error:e}=await Ue.from(zt.SETTINGS).select("*").maybeSingle();if(e){if(e.message.includes("does not exist"))return await this.createSettingsTable(),null;throw e}return t},async createSettingsTable(){const{error:t}=await Ue.rpc("create_settings_table");if(t)throw t;await this.getSettings()||await this.saveSettings({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:"1234567890128",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},async saveSettings(t){t.updatedAt=new Date().toISOString();const{data:e,error:n}=await Ue.from(zt.SETTINGS).upsert(t,{onConflict:"id"}).select().single();if(n)throw n;return e},async uploadLogo(t){var f,g,m;try{const{data:w,error:v}=await Ue.storage.listBuckets();if(v)throw new Error(`Failed to check storage buckets: ${v.message}`);const b=w==null?void 0:w.find(A=>A.name==="app-assets");if(!b)throw new Error(`BUCKET_NOT_FOUND: The "app-assets" storage bucket does not exist. Please create it manually in your Supabase dashboard:

1. Go to your Supabase project dashboard
2. Navigate to "Storage" in the sidebar
3. Click "Create new bucket"
4. Name it "app-assets"
5. Enable "Public bucket" option
6. Set MIME types to: image/png, image/jpeg, image/gif`);if(!b.public)throw new Error(`BUCKET_NOT_PUBLIC: The "app-assets" bucket exists but is not public. Please make it public in your Supabase dashboard:

1. Go to Storage > app-assets
2. Click on bucket settings
3. Enable "Public bucket" option`)}catch(w){throw w instanceof Error&&w.message.startsWith("BUCKET_")?w:new Error(`Failed to verify storage bucket: ${w.message}`)}const e=`logo-${Date.now()}`,{data:n,error:i}=await Ue.storage.from("app-assets").upload(`logos/${e}`,t,{cacheControl:"3600",upsert:!1});if(i)throw(f=i.message)!=null&&f.includes("Bucket not found")||(g=i.message)!=null&&g.includes("bucket does not exist")?new Error(`BUCKET_NOT_FOUND: The "app-assets" storage bucket does not exist. Please create it manually in your Supabase dashboard:

1. Go to your Supabase project dashboard
2. Navigate to "Storage" in the sidebar
3. Click "Create new bucket"
4. Name it "app-assets"
5. Enable "Public bucket" option
6. Set MIME types to: image/png, image/jpeg, image/gif`):(m=i.message)!=null&&m.includes("not allowed to perform this operation")?new Error('BUCKET_NOT_PUBLIC: The "app-assets" bucket is not accessible. Please ensure it is set to public in your Supabase dashboard.'):new Error(`Failed to upload logo: ${i.message}`);const{data:o}=Ue.storage.from("app-assets").getPublicUrl(n.path),l=await this.getSettings();return l?await this.saveSettings({...l,logoUrl:o.publicUrl}):await this.saveSettings({id:"settings",logoUrl:o.publicUrl,clubName:"Famous Summer Club",ean13Barcode:"1234567890123",adminPin:"123456",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o.publicUrl}},printer:{async getSettings(){const{data:t,error:e}=await Ue.from(zt.PRINTER_SETTINGS).select("*").eq("id","settings").maybeSingle();if(e){if(e.message.includes("does not exist"))return await this.createPrinterSettingsTable(),null;throw e}return t},async createPrinterSettingsTable(){const{error:t}=await Ue.rpc("create_printer_settings_table");t&&console.warn("Could not create printer_settings table automatically:",t)},async saveSettings(t){const e={...t,id:"settings",updatedAt:new Date().toISOString()},{data:n,error:i}=await Ue.from(zt.PRINTER_SETTINGS).upsert(e,{onConflict:"id"}).select().single();if(i)throw i;return n},async updateSelectedPrinter(t,e,n){const{error:i}=await Ue.from(zt.PRINTER_SETTINGS).upsert({id:"settings",selectedPrinter:t,printerName:e,printerType:n,updatedAt:new Date().toISOString()},{onConflict:"id"});if(i)throw i}},async validateTicket(t){try{const e=t.trim(),{data:n,error:i}=await Ue.from(zt.TICKETS).select("*").or(`qrCode.eq.${e},qrCode.eq.${e}
`).maybeSingle();if(i)throw i;if(!n)return{valid:!1,message:"Ticket not found"};if(n.entriesRemaining===0)return{valid:!1,message:"No entries remaining - access denied",ticket:n};if(n.entriesRemaining<0)return{valid:!1,message:"Invalid ticket - negative entries",ticket:n};const o={entriesRemaining:n.entriesRemaining-1,lastScanned:new Date().toISOString()},{data:l,error:f}=await Ue.from(zt.TICKETS).update(o).eq("qrCode",n.qrCode).select().single();if(f)throw f;return{valid:!0,message:`Access granted - ${l.entriesRemaining} entries remaining`,ticket:l}}catch(e){throw console.error("Error validating ticket:",e),new Error(`Could not validate ticket: ${e.message}`)}}};Promise.allSettled||(Promise.allSettled=function(t){return Promise.all(t.map(e=>e.then(n=>({status:"fulfilled",value:n})).catch(n=>({status:"rejected",reason:n}))))});String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return t instanceof RegExp?this.replace(new RegExp(t.source,t.flags+(t.global?"":"g")),e):this.split(t).join(e)});Array.prototype.at||(Array.prototype.at=function(t){const e=this.length,n=Math.trunc(t)||0,i=n<0?e+n:n;return i>=0&&i<e?this[i]:void 0});const s2=()=>{var e;const t=navigator.userAgent.toLowerCase();return t.includes("wv")||t.includes("webview")||t.includes("android")&&!t.includes("chrome")||window.AndroidInterface!==void 0||((e=window.webkit)==null?void 0:e.messageHandlers)!==void 0},Fi=()=>s2()?!("IntersectionObserver"in window&&"ResizeObserver"in window&&"fetch"in window&&"Promise"in window&&"Map"in window&&"Set"in window):!1,V_=()=>{const t=navigator.userAgent,e=t.match(/Chrome\/(\d+)/),n=t.match(/wv\) AppleWebKit\/[\d.]+ \(KHTML, like Gecko\) Version\/[\d.]+ Chrome\/(\d+)/);let i="unknown",o=!0;return e?(i=e[1],o=parseInt(i)<70):n&&(i=n[1],o=parseInt(i)<70),{version:i,isOld:o}},ue={log:(...t)=>{var e;try{console.log(...t),(e=window.AndroidInterface)!=null&&e.log&&window.AndroidInterface.log(JSON.stringify(t))}catch{try{console.log("Log:",JSON.stringify(t))}catch{}}},error:(...t)=>{var e;try{console.error(...t),(e=window.AndroidInterface)!=null&&e.error&&window.AndroidInterface.error(JSON.stringify(t))}catch{try{console.log("Error:",JSON.stringify(t))}catch{}}},warn:(...t)=>{var e;try{console.warn(...t),(e=window.AndroidInterface)!=null&&e.warn&&window.AndroidInterface.warn(JSON.stringify(t))}catch{try{console.log("Warning:",JSON.stringify(t))}catch{}}}},H_=()=>{ue.log("Initializing WebView compatibility...");const t=V_();if(ue.log("WebView info:",t),s2()&&(document.body.classList.add("webview"),Fi()&&document.body.classList.add("basic-webview")),t.isOld){const e=document.createElement("style");e.textContent=`
      .basic-webview * {
        animation-duration: 0s !important;
        animation-delay: 0s !important;
        transition-duration: 0s !important;
        transition-delay: 0s !important;
      }
      .basic-webview .animate-spin {
        animation: none !important;
      }
      .basic-webview .animate-pulse {
        animation: none !important;
      }
    `,document.head.appendChild(e)}window.addEventListener("error",e=>{ue.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{ue.error("Unhandled promise rejection:",e.reason)}),ue.log("WebView compatibility initialized")},Ms={async checkConnection(){try{ue.log("WebView checking connection...");const t=await tt.tickets.count();return ue.log("WebView connection check successful, ticket count:",t),!0}catch(t){return ue.error("WebView connection check failed:",t),!1}},async recordScan(t,e,n){try{ue.log("WebView recording scan:",{qrCode:t,success:e,message:n});const i={qrCode:t,timestamp:new Date().toISOString(),success:e,message:n};let o;for(let l=0;l<3;l++)try{await tt.scans.record(i),ue.log("WebView scan recorded successfully");return}catch(f){o=f,ue.warn(`WebView scan recording attempt ${l+1} failed:`,f),l<2&&await new Promise(g=>setTimeout(g,1e3*(l+1)))}throw o}catch(i){throw ue.error("WebView scan recording failed:",i),i}},async getTicketCount(){try{ue.log("WebView getting ticket count...");const t=await tt.tickets.count();return ue.log("WebView ticket count:",t),t}catch(t){return ue.error("WebView ticket count failed:",t),0}},async importTickets(t){try{if(ue.log("WebView importing tickets:",t.length),Fi()&&t.length>50){ue.log("Basic WebView detected, using batch import");let e=0;const n=25;for(let i=0;i<t.length;i+=n){const o=t.slice(i,i+n);ue.log(`Importing batch ${Math.floor(i/n)+1}/${Math.ceil(t.length/n)}`);try{const l=await tt.tickets.importBulk(o);e+=l.count}catch(l){ue.error("Batch import failed:",l)}await new Promise(l=>setTimeout(l,500))}return{success:e>0,count:e}}else{const e=await tt.tickets.importBulk(t);return ue.log("WebView tickets imported successfully"),e}}catch(e){throw ue.error("WebView ticket import failed:",e),e}}},o2=G.createContext(void 0),W_=({children:t})=>{const[e,n]=G.useState(!1),[i,o]=G.useState(null),[l,f]=G.useState([]),[g,m]=G.useState(0),[w,v]=G.useState(!0),[b,A]=G.useState("checking"),[T,L]=G.useState(null),[M,H]=G.useState(null);G.useEffect(()=>{O();const z=setInterval(O,3e4);return()=>{clearInterval(z)}},[]),G.useEffect(()=>{b==="connected"&&I()},[b]),G.useEffect(()=>{const z=(M==null?void 0:M.clubName)||"Famous Summer Club";document.title=`${z} Scan`},[M]);const O=async()=>{v(!0),A("checking"),ue.log("AppContext: Checking backend connection..."),tt.getProjectInfo();try{if(await Ms.checkConnection()){const B=await Ms.getTicketCount();m(B),A("connected"),ue.log("AppContext: Backend connected, ticket count:",B)}else ue.error("AppContext: Backend not available"),A("disconnected"),m(0)}catch(z){ue.error("AppContext: Error checking backend:",z),A("disconnected"),m(0)}finally{v(!1)}},I=async()=>{if(b==="connected")try{ue.log("AppContext: Refreshing app settings..."),H(null);const z=await tt.settings.getSettings();H(z||{id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:1234567890128,ticketPrice:50,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),ue.log("AppContext: App settings loaded")}catch(z){ue.error("AppContext: Error loading app settings:",z),H({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:"1234567890128",ticketPrice:50,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}},N=async()=>{v(!0),ue.log("AppContext: Refreshing ticket count...");try{if(await Ms.checkConnection()){const B=await Ms.getTicketCount();m(B),A("connected"),ue.log("AppContext: Ticket count refreshed:",B)}else ue.error("AppContext: Backend not available during refresh"),A("disconnected"),m(0)}catch(z){ue.error("AppContext: Error refreshing ticket count:",z),A("disconnected"),m(0)}finally{v(!1)}},F=z=>{f(B=>[z,...B].slice(0,10))},$=()=>{f([])};return x.jsx(o2.Provider,{value:{isScanning:e,setIsScanning:n,lastScanResult:i,setLastScanResult:o,recentScans:l,addScan:F,clearRecentScans:$,ticketsCount:g,refreshTicketsCount:N,isLoading:w,backendStatus:b,flashColor:T,setFlashColor:L,appSettings:M,setAppSettings:H,refreshAppSettings:I},children:t})},$n=()=>{const t=G.useContext(o2);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},G_=()=>{La();const{ticketsCount:t,backendStatus:e,appSettings:n}=$n(),[i,o]=G.useState(0),[l,f]=G.useState(0),[g,m]=G.useState(!1),w=(n==null?void 0:n.clubName)||"Famous Summer Club";tt.getProjectInfo(),G.useEffect(()=>{console.log("Header: appSettings:",n),console.log("Header: logoUrl:",n==null?void 0:n.logoUrl),m(!1)},[n]);const v=()=>{const T=Date.now();T-l>2e3?o(1):o(L=>L+1),f(T),i+1>=6&&(o(0),window.location.href="/settings")},b=()=>{console.error("Header: Logo failed to load:",n==null?void 0:n.logoUrl),m(!0)},A=()=>{console.log("Header: Logo loaded successfully:",n==null?void 0:n.logoUrl),m(!1)};return x.jsx("header",{className:"glass-card border-b border-mauve-500/20 shadow-mauve-glow",children:x.jsx("div",{className:"container mx-auto px-4 py-4",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("button",{onClick:v,className:"flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity",children:[n!=null&&n.logoUrl&&!g?x.jsx("div",{className:"glass rounded-lg p-2 hover:glass-hover",children:x.jsx("img",{src:n.logoUrl,alt:`${w} Logo`,className:"h-10 w-auto rounded",onError:b,onLoad:A,style:{maxWidth:"200px"}})}):x.jsx("div",{className:"glass rounded-lg p-2 hover:glass-hover",children:x.jsx(x3,{className:"h-9 w-9 text-mauve-500"})}),x.jsxs("span",{className:"text-xl font-bold text-white hidden sm:block",children:[w," Scan"]})]}),!1,x.jsx("div",{className:"flex items-center space-x-4",children:e!=="checking"&&x.jsx("div",{className:"btn-square glass border border-mauve-500/30",children:e==="connected"?x.jsx(Ix,{className:"h-5 w-5 text-green-400",title:"Connected to your Supabase database"}):x.jsx(Tx,{className:"h-5 w-5 text-red-400",title:"Not Connected to Supabase"})})})]})})})},bl=({children:t})=>{const{appSettings:e,flashColor:n}=$n(),i=(e==null?void 0:e.clubName)||"Famous Summer Club";return x.jsxs("div",{className:`min-h-screen gradient-dark relative overflow-hidden ${n?`flash-${n}`:""}`,children:[x.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[x.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-mauve-900/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse"}),x.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-shadow-900/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),x.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col text-gray-100",children:[x.jsx(G_,{}),x.jsx("main",{className:"flex-1 container mx-auto px-4 py-6",children:t}),x.jsx("footer",{className:"glass-card border-t border-mauve-500/20 py-4",children:x.jsxs("div",{className:"container mx-auto px-4 text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," ",i," Scan"]})})]})]})};var we;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var Sg=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ag;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Ag||(Ag={}));function X_(t){return Object.values(we).includes(t)}var xc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xc||(xc={}));var q_=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[xc.SCAN_TYPE_CAMERA,xc.SCAN_TYPE_FILE],t}(),a2=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Sg.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Sg.get(e))},t}(),Tg=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),_0;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_0||(_0={}));var Y_=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:_0.UNKWOWN_ERROR}},t}(),K_=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Nr(t){return typeof t>"u"||t===null}var Ls=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),l2=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),g=0,m=f;g<m.length;g++){var w=m[g];if(l.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t}(),C0={exports:{}};(function(t,e){(function(n,i){i(e)})(Gt,function(n){function i(_){return _==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,r){_.__proto__=r}||function(_,r){for(var s in r)r.hasOwnProperty(s)&&(_[s]=r[s])};function l(_,r){o(_,r);function s(){this.constructor=_}_.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(_,r){var s=Object.setPrototypeOf;s?s(_,r):_.__proto__=r}function g(_,r){r===void 0&&(r=_.constructor);var s=Error.captureStackTrace;s&&s(_,r)}var m=function(_){l(r,_);function r(s){var a=this.constructor,c=_.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),g(c),c}return r}(Error);class w extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class v extends w{}v.kind="ArgumentException";class b extends w{}b.kind="IllegalArgumentException";class A{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new A(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends w{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class L{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class H extends w{}H.kind="IndexOutOfBoundsException";class O extends H{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class I{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){I.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new b("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new O(s);if(a>r)throw new O(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return M.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=I.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=a(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class N{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class F{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=F.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=F.makeArray(r);M.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=~a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new b;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=a;d<=c;d++){const h=d>a?0:r&31,y=(2<<(d<c?31:s&31))-(1<<h);u[d]|=y}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new b;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const p=h>c?0:r&31,E=(2<<(h<u?31:s&31))-(1<<p)&4294967295;if((d[h]&E)!==(a?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[a+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=r[0]>>>u;for(let h=1;h<a;h++){const p=r[h];d|=p<<32-u,r[h-1]=d,d=p>>>u}r[a-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof F))return!1;const s=r;return this.size===s.size&&I.equals(this.bits,s.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new F(this.size,this.bits.slice())}}var $;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var z=$;class B extends w{static getFormatInstance(){return new B}}B.kind="FormatException";var P;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(P||(P={}));class R{constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,R.VALUE_IDENTIFIER_TO_ECI.set(r,this),R.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const p=u[d];R.VALUES_TO_ECI.set(p,this)}for(const d of c)R.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new B("incorect value");const s=R.VALUES_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}static getCharacterSetECIByName(r){const s=R.NAME_TO_ECI.get(r);if(s===void 0)throw new B("incorect value");return s}equals(r){if(!(r instanceof R))return!1;const s=r;return this.getName()===s.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(P.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(P.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(P.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(P.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(P.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(P.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(P.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(P.Big5,28,"Big5"),R.GB18030=new R(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(P.EUC_KR,30,"EUC_KR","EUC-KR");class X extends w{}X.kind="UnsupportedOperationException";class re{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!re.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof R?r:R.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(re.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(a.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new X(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(R.UTF8)||r.equals(R.ISO8859_1)||r.equals(R.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class Q{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return re.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(z.CHARACTER_SET)!==void 0)return s.get(z.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,d=!0,h=0,p=0,y=0,E=0,C=0,S=0,D=0,j=0,U=0,V=0,Y=0;const se=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let oe=0;oe<a&&(c||u||d);oe++){const ee=r[oe]&255;d&&(h>0?ee&128?h--:d=!1:ee&128&&(ee&64?(h++,ee&32?(h++,ee&16?(h++,ee&8?d=!1:E++):y++):p++):d=!1)),c&&(ee>127&&ee<160?c=!1:ee>159&&(ee<192||ee===215||ee===247)&&Y++),u&&(C>0?ee<64||ee===127||ee>252?u=!1:C--:ee===128||ee===160||ee>239?u=!1:ee>160&&ee<224?(S++,j=0,D++,D>U&&(U=D)):ee>127?(C++,D=0,j++,j>V&&(V=j)):(D=0,j=0))}return d&&h>0&&(d=!1),u&&C>0&&(u=!1),d&&(se||p+y+E>0)?Q.UTF8:u&&(Q.ASSUME_SHIFT_JIS||U>=3||V>=3)?Q.SHIFT_JIS:c&&u?U===2&&S===2||Y*10>=a?Q.SHIFT_JIS:Q.ISO88591:c?Q.ISO88591:u?Q.SHIFT_JIS:d?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(d,h,p,y,E,C){if(d==="%%")return"%";if(s[++a]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let S=E?parseInt(E.substr(1)):void 0,D;switch(C){case"s":D=s[a];break;case"c":D=s[a][0];break;case"f":D=parseFloat(s[a]).toFixed(d);break;case"p":D=parseFloat(s[a]).toPrecision(d);break;case"e":D=parseFloat(s[a]).toExponential(d);break;case"x":D=parseInt(s[a]).toString(S||16);break;case"d":D=parseFloat(parseInt(s[a],S||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(S);let j=parseInt(p),U=p&&p[0]+""=="0"?"0":" ";for(;D.length<j;)D=h!==void 0?D+U:U+D;return D}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return re.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}Q.SHIFT_JIS=R.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=R.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=R.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class ae{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Re{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new b("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new Re(a,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<a;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,a){if(r===null)throw new b("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,p=0,y=0;for(;y<r.length;)if(r.charAt(y)===`
`||r.charAt(y)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new b("row lengths do not match");d=u,p++}y++}else if(r.substring(y,y+s.length)===s)y+=s.length,c[u]=!0,u++;else if(r.substring(y,y+a.length)===a)y+=a.length,c[u]=!1,u++;else throw new b("illegal character encountered: "+r.substring(y));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new b("row lengths do not match");p++}const E=new Re(h,p);for(let C=0;C<u;C++)c[C]&&E.set(Math.floor(C%h),Math.floor(C/h));return E}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const s=new F(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*a,p=r.getRow(u,s).getBitArray();for(let y=0;y<a;y++)c[h+y]^=p[y]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new b("Left and top must be nonnegative");if(c<1||a<1)throw new b("Height and width must be at least 1");const u=r+a,d=s+c;if(d>this.height||u>this.width)throw new b("The region must fit inside the matrix");const h=this.rowSize,p=this.bits;for(let y=s;y<d;y++){const E=y*h;for(let C=r;C<u;C++)p[E+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new F(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let d=0;d<a;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){M.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new F(r),c=new F(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,d=s,h=-1,p=-1;for(let y=0;y<s;y++)for(let E=0;E<a;E++){const C=c[y*a+E];if(C!==0){if(y<d&&(d=y),y>p&&(p=y),E*32<u){let S=0;for(;!(C<<31-S&4294967295);)S++;E*32+S<u&&(u=E*32+S)}if(E*32+31>h){let S=31;for(;!(C>>>S);)S--;E*32+S>h&&(h=E*32+S)}}}return h<u||p<d?null:Int32Array.from([u,d,h-u+1,p-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const d=s[a];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const d=s[a];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Re))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&I.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+I.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new ae;for(let u=0,d=this.height;u<d;u++){for(let h=0,p=this.width;h<p;h++)c.append(this.get(h,u)?r:s);c.append(a)}return c.toString()}clone(){return new Re(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends w{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class Fe extends L{constructor(r){super(r),this.luminances=Fe.EMPTY,this.buckets=new Int32Array(Fe.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new F(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),d=this.buckets;for(let p=0;p<c;p++)d[(u[p]&255)>>Fe.LUMINANCE_SHIFT]++;const h=Fe.estimateBlackPoint(d);if(c<3)for(let p=0;p<c;p++)(u[p]&255)<h&&s.set(p);else{let p=u[0]&255,y=u[1]&255;for(let E=1;E<c-1;E++){const C=u[E+1]&255;(y*4-p-C)/2<h&&s.set(E),p=y,y=C}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new Re(s,a);this.initArrays(s);const u=this.buckets;for(let p=1;p<5;p++){const y=Math.floor(a*p/5),E=r.getRow(y,this.luminances),C=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<C;S++){const D=E[S]&255;u[D>>Fe.LUMINANCE_SHIFT]++}}const d=Fe.estimateBlackPoint(u),h=r.getMatrix();for(let p=0;p<a;p++){const y=p*s;for(let E=0;E<s;E++)(h[y+E]&255)<d&&c.set(E,p)}return c}createBinarizer(r){return new Fe(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<Fe.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let E=0;E<s;E++)r[E]>u&&(c=E,u=r[E]),r[E]>a&&(a=r[E]);let d=0,h=0;for(let E=0;E<s;E++){const C=E-c,S=r[E]*C*C;S>h&&(d=E,h=S)}if(c>d){const E=c;c=d,d=E}if(d-c<=s/16)throw new K;let p=d-1,y=-1;for(let E=d-1;E>c;E--){const C=E-c,S=C*C*(d-E)*(a-r[E]);S>y&&(p=E,y=S)}return p<<Fe.LUMINANCE_SHIFT}}Fe.LUMINANCE_BITS=5,Fe.LUMINANCE_SHIFT=8-Fe.LUMINANCE_BITS,Fe.LUMINANCE_BUCKETS=1<<Fe.LUMINANCE_BITS,Fe.EMPTY=Uint8ClampedArray.from([0]);class le extends Fe{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=le.MINIMUM_DIMENSION&&a>=le.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>le.BLOCK_SIZE_POWER;s&le.BLOCK_SIZE_MASK&&u++;let d=a>>le.BLOCK_SIZE_POWER;a&le.BLOCK_SIZE_MASK&&d++;const h=le.calculateBlackPoints(c,u,d,s,a),p=new Re(s,a);le.calculateThresholdForBlock(c,u,d,s,a,h,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new le(r)}static calculateThresholdForBlock(r,s,a,c,u,d,h){const p=u-le.BLOCK_SIZE,y=c-le.BLOCK_SIZE;for(let E=0;E<a;E++){let C=E<<le.BLOCK_SIZE_POWER;C>p&&(C=p);const S=le.cap(E,2,a-3);for(let D=0;D<s;D++){let j=D<<le.BLOCK_SIZE_POWER;j>y&&(j=y);const U=le.cap(D,2,s-3);let V=0;for(let se=-2;se<=2;se++){const oe=d[S+se];V+=oe[U-2]+oe[U-1]+oe[U]+oe[U+1]+oe[U+2]}const Y=V/25;le.thresholdBlock(r,j,C,Y,c,h)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,d){for(let h=0,p=a*u+s;h<le.BLOCK_SIZE;h++,p+=u)for(let y=0;y<le.BLOCK_SIZE;y++)(r[p+y]&255)<=c&&d.set(s+y,a+h)}static calculateBlackPoints(r,s,a,c,u){const d=u-le.BLOCK_SIZE,h=c-le.BLOCK_SIZE,p=new Array(a);for(let y=0;y<a;y++){p[y]=new Int32Array(s);let E=y<<le.BLOCK_SIZE_POWER;E>d&&(E=d);for(let C=0;C<s;C++){let S=C<<le.BLOCK_SIZE_POWER;S>h&&(S=h);let D=0,j=255,U=0;for(let Y=0,se=E*c+S;Y<le.BLOCK_SIZE;Y++,se+=c){for(let oe=0;oe<le.BLOCK_SIZE;oe++){const ee=r[se+oe]&255;D+=ee,ee<j&&(j=ee),ee>U&&(U=ee)}if(U-j>le.MIN_DYNAMIC_RANGE)for(Y++,se+=c;Y<le.BLOCK_SIZE;Y++,se+=c)for(let oe=0;oe<le.BLOCK_SIZE;oe++)D+=r[se+oe]&255}let V=D>>le.BLOCK_SIZE_POWER*2;if(U-j<=le.MIN_DYNAMIC_RANGE&&(V=j/2,y>0&&C>0)){const Y=(p[y-1][C]+2*p[y][C-1]+p[y-1][C-1])/4;j<Y&&(V=Y)}p[y][C]=V}}return p}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class ne{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new X("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new X("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new X("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ae;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class te extends ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new te(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class ye extends ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ye.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let p;if(r[u+3]===0)p=255;else{const E=r[u],C=r[u+1],S=r[u+2];p=306*E+601*C+117*S+512>>10}c[d]=p}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*ye.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),p=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=p,a.translate(h/2,p/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=ye.makeBufferFromCanvasImageData(s),this}invert(){return new te(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class he{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var fe=(globalThis||Gt||self||window||void 0)&&(globalThis||Gt||self||window||void 0).__awaiter||function(_,r,s,a){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(E){try{y(a.next(E))}catch(C){d(C)}}function p(E){try{y(a.throw(E))}catch(C){d(C)}}function y(E){E.done?u(E.value):c(E.value).then(h,p)}y((a=a.apply(_,r||[])).next())})};class ge{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${s.length+1}`,h=a.groupId,p={deviceId:u,label:d,kind:c,groupId:h};s.push(p)}return s})}getVideoInputDevices(){return fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new he(s.deviceId,s.label))})}findDeviceById(r){return fe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return fe(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return fe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return fe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return fe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return fe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return fe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return fe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new v(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new v(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new v("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new v("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const p=s&&h instanceof K,E=(h instanceof T||h instanceof B)&&a;if(p||E)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof T||c instanceof B,d=c instanceof K;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new ye(s),c=new le(a);return new A(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(r,s,a=s==null?0:8*s.length,c,u,d=M.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=M.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);M.arraycopy(s,0,a,0,s.length),M.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Xe;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var de=Xe,yt;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(yt||(yt={}));var _e=yt;class Le{constructor(r,s,a,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class qe{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class be{constructor(r,s){if(s.length===0)throw new b;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),M.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let d=0,h=s.length;d!==h;d++){const p=s[d];a=qe.addOrSubtract(a,p)}return a}a=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)a=qe.addOrSubtract(u.multiply(r,a),s[d]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const d=s;s=a,a=d}let c=new Int32Array(a.length);const u=a.length-s.length;M.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=qe.addOrSubtract(s[d-u],a[d]);return new be(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1),h=this.field;for(let p=0;p<a;p++){const y=s[p];for(let E=0;E<u;E++)d[p+E]=qe.addOrSubtract(d[p+E],h.multiply(y,c[E]))}return new be(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=a.multiply(u[d],r);return new be(a,c)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(a[h],s);return new be(d,u)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),p=s.multiply(c.getCoefficient(c.getDegree()),d),y=r.multiplyByMonomial(h,p),E=s.buildMonomial(h,p);a=a.addOrSubtract(E),c=c.addOrSubtract(y)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Qe extends w{}Qe.kind="ArithmeticException";class Se extends qe{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new be(this,Int32Array.from([0])),this.one=new be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new be(this,a)}inverse(r){if(r===0)throw new Qe;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Se.AZTEC_DATA_12=new Se(4201,4096,1),Se.AZTEC_DATA_10=new Se(1033,1024,1),Se.AZTEC_DATA_6=new Se(67,64,1),Se.AZTEC_PARAM=new Se(19,16,1),Se.QR_CODE_FIELD_256=new Se(285,256,0),Se.DATA_MATRIX_FIELD_256=new Se(301,256,1),Se.AZTEC_DATA_8=Se.DATA_MATRIX_FIELD_256,Se.MAXICODE_FIELD_64=Se.AZTEC_DATA_6;class Z extends w{}Z.kind="ReedSolomonException";class Te extends w{}Te.kind="IllegalStateException";class Ne{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new be(a,r),u=new Int32Array(s);let d=!0;for(let D=0;D<s;D++){const j=c.evaluateAt(a.exp(D+a.getGeneratorBase()));u[u.length-1-D]=j,j!==0&&(d=!1)}if(d)return;const h=new be(a,u),p=this.runEuclideanAlgorithm(a.buildMonomial(s,1),h,s),y=p[0],E=p[1],C=this.findErrorLocations(y),S=this.findErrorMagnitudes(E,C);for(let D=0;D<C.length;D++){const j=r.length-1-a.log(C[D]);if(j<0)throw new Z("Bad error location");r[j]=Se.addOrSubtract(r[j],S[D])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const D=r;r=s,s=D}const c=this.field;let u=r,d=s,h=c.getZero(),p=c.getOne();for(;d.getDegree()>=(a/2|0);){let D=u,j=h;if(u=d,h=p,u.isZero())throw new Z("r_{i-1} was zero");d=D;let U=c.getZero();const V=u.getCoefficient(u.getDegree()),Y=c.inverse(V);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const se=d.getDegree()-u.getDegree(),oe=c.multiply(d.getCoefficient(d.getDegree()),Y);U=U.addOrSubtract(c.buildMonomial(se,oe)),d=d.addOrSubtract(u.multiplyByMonomial(se,oe))}if(p=U.multiply(h).addOrSubtract(j),d.getDegree()>=u.getDegree())throw new Te("Division algorithm failed to reduce polynomial?")}const y=p.getCoefficient(0);if(y===0)throw new Z("sigmaTilde(0) was zero");const E=c.inverse(y),C=p.multiplyScalar(E),S=d.multiplyScalar(E);return[C,S]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==s)throw new Z("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const h=u.inverse(s[d]);let p=1;for(let y=0;y<a;y++)if(d!==y){const E=u.multiply(s[y],h),C=E&1?E&-2:E|1;p=u.multiply(p,C)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(p)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var Ye;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Ye||(Ye={}));class pe{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=pe.convertBoolArrayToByteArray(c),d=pe.getEncodedData(c),h=new Le(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Ye.UPPER,c=Ye.UPPER,u="",d=0;for(;d<s;)if(c===Ye.BINARY){if(s-d<5)break;let h=pe.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=pe.readCode(r,d,11)+31,d+=11}for(let p=0;p<h;p++){if(s-d<8){d=s;break}const y=pe.readCode(r,d,8);u+=Q.castAsNonUtf8Char(y),d+=8}c=a}else{let h=c===Ye.DIGIT?4:5;if(s-d<h)break;let p=pe.readCode(r,d,h);d+=h;let y=pe.getCharacter(c,p);y.startsWith("CTRL_")?(a=c,c=pe.getTable(y.charAt(5)),y.charAt(6)==="L"&&(a=c)):(u+=y,c=a)}return u}static getTable(r){switch(r){case"L":return Ye.LOWER;case"P":return Ye.PUNCT;case"M":return Ye.MIXED;case"D":return Ye.DIGIT;case"B":return Ye.BINARY;case"U":default:return Ye.UPPER}}static getCharacter(r,s){switch(r){case Ye.UPPER:return pe.UPPER_TABLE[s];case Ye.LOWER:return pe.LOWER_TABLE[s];case Ye.MIXED:return pe.MIXED_TABLE[s];case Ye.PUNCT:return pe.PUNCT_TABLE[s];case Ye.DIGIT:return pe.DIGIT_TABLE[s];default:throw new Te("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Se.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Se.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Se.AZTEC_DATA_10):(a=12,s=Se.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new B;let d=r.length%a,h=new Int32Array(u);for(let S=0;S<u;S++,d+=a)h[S]=pe.readCode(r,d,a);try{new Ne(s).decode(h,u-c)}catch(S){throw new B(S)}let p=(1<<a)-1,y=0;for(let S=0;S<c;S++){let D=h[S];if(D===0||D===p)throw new B;(D===1||D===p-1)&&y++}let E=new Array(c*a-y),C=0;for(let S=0;S<c;S++){let D=h[S];if(D===1||D===p-1)E.fill(D>1,C,C+a-1),C+=a-1;else for(let j=a-1;j>=0;--j)E[C++]=(D&1<<j)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*N.truncDivision(N.truncDivision(c,2)-1,15),p=c/2,y=N.truncDivision(h,2);for(let E=0;E<p;E++){let C=E+N.truncDivision(E,15);u[p-E-1]=y-C-1,u[p+E]=y+C+1}}for(let h=0,p=0;h<a;h++){let y=(a-h)*4+(s?9:12),E=h*2,C=c-1-E;for(let S=0;S<y;S++){let D=S*2;for(let j=0;j<2;j++)d[p+D+j]=r.get(u[E+j],u[E+S]),d[p+2*y+D+j]=r.get(u[E+S],u[C-j]),d[p+4*y+D+j]=r.get(u[C-j],u[C-S]),d[p+6*y+D+j]=r.get(u[C-S],u[E+j])}p+=y*8}return d}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?pe.readCode(r,s,8):pe.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=pe.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}pe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],pe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],pe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],pe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],pe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ve{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class ln{static floatToIntBits(r){return r}}ln.MAX_VALUE=Number.MAX_SAFE_INTEGER;class me{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof me){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ln.floatToIntBits(this.x)+ln.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(a>=s&&a>=c?(d=r[0],u=r[1],h=r[2]):c>=a&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const p=u;u=h,h=p}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return ve.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class cn{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class zr extends cn{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class at{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=at.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,p=!1,y=!1,E=!1,C=!1;const S=this.width,D=this.height;for(;d;){d=!1;let j=!0;for(;(j||!p)&&s<S;)j=this.containsBlackPoint(a,c,s,!1),j?(s++,d=!0,p=!0):p||s++;if(s>=S){u=!0;break}let U=!0;for(;(U||!y)&&c<D;)U=this.containsBlackPoint(r,s,c,!0),U?(c++,d=!0,y=!0):y||c++;if(c>=D){u=!0;break}let V=!0;for(;(V||!E)&&r>=0;)V=this.containsBlackPoint(a,c,r,!1),V?(r--,d=!0,E=!0):E||r--;if(r<0){u=!0;break}let Y=!0;for(;(Y||!C)&&a>=0;)Y=this.containsBlackPoint(r,s,a,!0),Y?(a--,d=!0,C=!0):C||a--;if(a<0){u=!0;break}d&&(h=!0)}if(!u&&h){const j=s-r;let U=null;for(let oe=1;U===null&&oe<j;oe++)U=this.getBlackPointOnSegment(r,c-oe,r+oe,c);if(U==null)throw new K;let V=null;for(let oe=1;V===null&&oe<j;oe++)V=this.getBlackPointOnSegment(r,a+oe,r+oe,a);if(V==null)throw new K;let Y=null;for(let oe=1;Y===null&&oe<j;oe++)Y=this.getBlackPointOnSegment(s,a+oe,s-oe,a);if(Y==null)throw new K;let se=null;for(let oe=1;se===null&&oe<j;oe++)se=this.getBlackPointOnSegment(s,c-oe,s-oe,c);if(se==null)throw new K;return this.centerEdges(se,U,Y,V)}else throw new K}getBlackPointOnSegment(r,s,a,c){const u=ve.round(ve.distance(r,s,a,c)),d=(a-r)/u,h=(c-s)/u,p=this.image;for(let y=0;y<u;y++){const E=ve.round(r+y*d),C=ve.round(s+y*h);if(p.get(E,C))return new me(E,C)}return null}centerEdges(r,s,a,c){const u=r.getX(),d=r.getY(),h=s.getX(),p=s.getY(),y=a.getX(),E=a.getY(),C=c.getX(),S=c.getY(),D=at.CORR;return u<this.width/2?[new me(C-D,S+D),new me(h+D,p+D),new me(y-D,E-D),new me(u+D,d-D)]:[new me(C+D,S+D),new me(h+D,p-D),new me(y-D,E+D),new me(u-D,d-D)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,a))return!0}else for(let d=r;d<=s;d++)if(u.get(a,d))return!0;return!1}}at.INIT_SIZE=10,at.CORR=1;class mn{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),p=Math.floor(s[d+1]);if(h<-1||h>a||p<-1||p>c)throw new K;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),p===-1?(s[d+1]=0,u=!0):p===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),p=Math.floor(s[d+1]);if(h<-1||h>a||p<-1||p>c)throw new K;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),p===-1?(s[d+1]=0,u=!0):p===c&&(s[d+1]=c-1,u=!0)}}}class Je{constructor(r,s,a,c,u,d,h,p,y){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=p,this.a33=y}static quadrilateralToQuadrilateral(r,s,a,c,u,d,h,p,y,E,C,S,D,j,U,V){const Y=Je.quadrilateralToSquare(r,s,a,c,u,d,h,p);return Je.squareToQuadrilateral(y,E,C,S,D,j,U,V).times(Y)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,y=this.a31,E=this.a32,C=this.a33;for(let S=0;S<s;S+=2){const D=r[S],j=r[S+1],U=u*D+p*j+C;r[S]=(a*D+d*j+y)/U,r[S+1]=(c*D+h*j+E)/U}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,y=this.a31,E=this.a32,C=this.a33,S=r.length;for(let D=0;D<S;D++){const j=r[D],U=s[D],V=u*j+p*U+C;r[D]=(a*j+d*U+y)/V,s[D]=(c*j+h*U+E)/V}}static squareToQuadrilateral(r,s,a,c,u,d,h,p){const y=r-a+u-h,E=s-c+d-p;if(y===0&&E===0)return new Je(a-r,u-a,r,c-s,d-c,s,0,0,1);{const C=a-u,S=h-u,D=c-d,j=p-d,U=C*j-S*D,V=(y*j-S*E)/U,Y=(C*E-y*D)/U;return new Je(a-r+V*a,h-r+Y*h,r,c-s+V*c,p-s+Y*p,s,V,Y,1)}}static quadrilateralToSquare(r,s,a,c,u,d,h,p){return Je.squareToQuadrilateral(r,s,a,c,u,d,h,p).buildAdjoint()}buildAdjoint(){return new Je(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Je(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class qt extends mn{sampleGrid(r,s,a,c,u,d,h,p,y,E,C,S,D,j,U,V,Y,se,oe){const ee=Je.quadrilateralToQuadrilateral(c,u,d,h,p,y,E,C,S,D,j,U,V,Y,se,oe);return this.sampleGridWithTransform(r,s,a,ee)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new K;const u=new Re(s,a),d=new Float32Array(2*s);for(let h=0;h<a;h++){const p=d.length,y=h+.5;for(let E=0;E<p;E+=2)d[E]=E/2+.5,d[E+1]=y;c.transformPoints(d),mn.checkAndNudgePoints(r,d);try{for(let E=0;E<p;E+=2)r.get(Math.floor(d[E]),Math.floor(d[E+1]))&&u.set(E/2,h)}catch{throw new K}}return u}}class Ft{static setGridSampler(r){Ft.gridSampler=r}static getInstance(){return Ft.gridSampler}}Ft.gridSampler=new qt;class Pt{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class xo{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new zr(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new K;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let d=0;d<4;d++){let h=a[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);a=(a<<3)+h}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(N.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new K}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let p=a-1;p>=0;--p)d[p]=r&15,r>>=4;try{new Ne(Se.AZTEC_PARAM).decode(d,u)}catch{throw new K}let h=0;for(let p=0;p<c;p++)h=(h<<4)+d[p];return h}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(s,d,1,-1),S=this.getFirstDifferent(a,d,1,1),D=this.getFirstDifferent(c,d,-1,1),j=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let U=this.distancePoint(j,C)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(U<.75||U>1.25||!this.isWhiteOrBlackRectangle(C,S,D,j))break}s=C,a=S,c=D,u=j,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let h=new me(s.getX()+.5,s.getY()-.5),p=new me(a.getX()+.5,a.getY()+.5),y=new me(c.getX()-.5,c.getY()+.5),E=new me(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,p,y,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let h=new at(this.image).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{let p=this.image.getWidth()/2,y=this.image.getHeight()/2;r=this.getFirstDifferent(new Pt(p+7,y-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pt(p+7,y+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Pt(p-7,y+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pt(p-7,y-7),!1,-1,-1).toResultPoint()}let u=ve.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=ve.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let h=new at(this.image,15,u,d).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Pt(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pt(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Pt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Pt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=ve.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=ve.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Pt(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let d=Ft.getInstance(),h=this.getDimension(),p=h/2-this.nbCenterLayers,y=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,p,p,y,p,y,y,p,y,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),d=u/a,h=r.getX(),p=r.getY(),y=d*(s.getX()-r.getX())/u,E=d*(s.getY()-r.getY())/u;for(let C=0;C<a;C++)this.image.get(ve.round(h+C*y),ve.round(p+C*E))&&(c|=1<<a-C-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Pt(r.getX()-u,r.getY()+u),s=new Pt(s.getX()-u,s.getY()-u),a=new Pt(a.getX()+u,a.getY()-u),c=new Pt(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,a),h!==d)?!1:(h=this.getColor(a,c),h===d)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,d=0,h=r.getX(),p=r.getY(),y=this.image.get(r.getX(),r.getY()),E=Math.ceil(a);for(let S=0;S<E;S++)h+=c,p+=u,this.image.get(ve.round(h),ve.round(p))!==y&&d++;let C=d/a;return C>.1&&C<.9?0:C<=.1===y?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Pt(u,d)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,y=new me(h+c*u,p+c*d),E=new me(h-c*u,p-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let C=new me(h+c*u,p+c*d),S=new me(h-c*u,p-c*d);return[y,C,E,S]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ve.round(r.getX()),a=ve.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class nr{decode(r,s=null){let a=null,c=new xo(r.getBlackMatrix()),u=null,d=null;try{let E=c.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(s,u),d=new pe().decode(E)}catch(E){a=E}if(d==null)try{let E=c.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(s,u),d=new pe().decode(E)}catch(E){throw a??E}let h=new Oe(d.getText(),d.getRawBytes(),d.getNumBits(),u,de.AZTEC,M.currentTimeMillis()),p=d.getByteSegments();p!=null&&h.putMetadata(_e.BYTE_SEGMENTS,p);let y=d.getECLevel();return y!=null&&h.putMetadata(_e.ERROR_CORRECTION_LEVEL,y),h}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(z.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Vn extends ge{constructor(r=500){super(new nr,r)}}class lt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let p=270;h!==null&&h.get(_e.ORIENTATION)===!0&&(p=p+h.get(_e.ORIENTATION)%360),d.putMetadata(_e.ORIENTATION,p);const y=d.getResultPoints();if(y!==null){const E=u.getHeight();for(let C=0;C<y.length;C++)y[C]=new me(E-y[C].getY()-1,y[C].getX())}return d}else throw new K}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new F(a);const d=s&&s.get(z.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let p;d?p=c:p=15;const y=Math.trunc(c/2);for(let E=0;E<p;E++){const C=Math.trunc((E+1)/2),S=(E&1)===0,D=y+h*(S?C:-C);if(D<0||D>=c)break;try{u=r.getBlackRow(D,u)}catch{continue}for(let j=0;j<2;j++){if(j===1&&(u.reverse(),s&&s.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const U=new Map;s.forEach((V,Y)=>U.set(Y,V)),U.delete(z.NEED_RESULT_POINT_CALLBACK),s=U}try{const U=this.decodeRow(D,u,s);if(j===1){U.putMetadata(_e.ORIENTATION,180);const V=U.getResultPoints();V!==null&&(V[0]=new me(a-V[0].getX()-1,V[0].getY()),V[1]=new me(a-V[1].getX()-1,V[1].getY()))}return U}catch{}}}throw new K}static recordPattern(r,s,a){const c=a.length;for(let y=0;y<c;y++)a[y]=0;const u=r.getSize();if(s>=u)throw new K;let d=!r.get(s),h=0,p=s;for(;p<u;){if(r.get(p)!==d)a[h]++;else{if(++h===c)break;a[h]=1,d=!d}p++}if(!(h===c||h===c-1&&p===u))throw new K}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new K;lt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,d=0;for(let y=0;y<c;y++)u+=r[y],d+=s[y];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;a*=h;let p=0;for(let y=0;y<c;y++){const E=r[y],C=s[y]*h,S=E>C?E-C:C-E;if(S>a)return Number.POSITIVE_INFINITY;p+=S}return p/u}}class ce extends lt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1;const p=6;for(let y=a;y<s;y++)if(r.get(y)!==h)u[c]++;else{if(c===p-1){let E=ce.MAX_AVG_VARIANCE,C=-1;for(let S=ce.CODE_START_A;S<=ce.CODE_START_C;S++){const D=lt.patternMatchVariance(u,ce.CODE_PATTERNS[S],ce.MAX_INDIVIDUAL_VARIANCE);D<E&&(E=D,C=S)}if(C>=0&&r.isRange(Math.max(0,d-(y-d)/2),d,!1))return Int32Array.from([d,y,C]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new K}static decodeCode(r,s,a){lt.recordPattern(r,a,s);let c=ce.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ce.CODE_PATTERNS.length;d++){const h=ce.CODE_PATTERNS[d],p=this.patternMatchVariance(s,h,ce.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,u=d)}if(u>=0)return u;throw new K}decodeRow(r,s,a){const c=a&&a.get(z.ASSUME_GS1)===!0,u=ce.findStartPattern(s),d=u[2];let h=0;const p=new Uint8Array(20);p[h++]=d;let y;switch(d){case ce.CODE_START_A:y=ce.CODE_CODE_A;break;case ce.CODE_START_B:y=ce.CODE_CODE_B;break;case ce.CODE_START_C:y=ce.CODE_CODE_C;break;default:throw new B}let E=!1,C=!1,S="",D=u[0],j=u[1];const U=Int32Array.from([0,0,0,0,0,0]);let V=0,Y=0,se=d,oe=0,ee=!0,ze=!1,Pe=!1;for(;!E;){const hs=C;switch(C=!1,V=Y,Y=ce.decodeCode(s,U,j),p[h++]=Y,Y!==ce.CODE_STOP&&(ee=!0),Y!==ce.CODE_STOP&&(oe++,se+=oe*Y),D=j,j+=U.reduce((Pw,Dw)=>Pw+Dw,0),Y){case ce.CODE_START_A:case ce.CODE_START_B:case ce.CODE_START_C:throw new B}switch(y){case ce.CODE_CODE_A:if(Y<64)Pe===ze?S+=String.fromCharCode(32+Y):S+=String.fromCharCode(32+Y+128),Pe=!1;else if(Y<96)Pe===ze?S+=String.fromCharCode(Y-64):S+=String.fromCharCode(Y+64),Pe=!1;else switch(Y!==ce.CODE_STOP&&(ee=!1),Y){case ce.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_A:!ze&&Pe?(ze=!0,Pe=!1):ze&&Pe?(ze=!1,Pe=!1):Pe=!0;break;case ce.CODE_SHIFT:C=!0,y=ce.CODE_CODE_B;break;case ce.CODE_CODE_B:y=ce.CODE_CODE_B;break;case ce.CODE_CODE_C:y=ce.CODE_CODE_C;break;case ce.CODE_STOP:E=!0;break}break;case ce.CODE_CODE_B:if(Y<96)Pe===ze?S+=String.fromCharCode(32+Y):S+=String.fromCharCode(32+Y+128),Pe=!1;else switch(Y!==ce.CODE_STOP&&(ee=!1),Y){case ce.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_B:!ze&&Pe?(ze=!0,Pe=!1):ze&&Pe?(ze=!1,Pe=!1):Pe=!0;break;case ce.CODE_SHIFT:C=!0,y=ce.CODE_CODE_A;break;case ce.CODE_CODE_A:y=ce.CODE_CODE_A;break;case ce.CODE_CODE_C:y=ce.CODE_CODE_C;break;case ce.CODE_STOP:E=!0;break}break;case ce.CODE_CODE_C:if(Y<100)Y<10&&(S+="0"),S+=Y;else switch(Y!==ce.CODE_STOP&&(ee=!1),Y){case ce.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case ce.CODE_CODE_A:y=ce.CODE_CODE_A;break;case ce.CODE_CODE_B:y=ce.CODE_CODE_B;break;case ce.CODE_STOP:E=!0;break}break}hs&&(y=y===ce.CODE_CODE_A?ce.CODE_CODE_B:ce.CODE_CODE_A)}const vn=j-D;if(j=s.getNextUnset(j),!s.isRange(j,Math.min(s.getSize(),j+(j-D)/2),!1))throw new K;if(se-=oe*V,se%103!==V)throw new T;const ir=S.length;if(ir===0)throw new K;ir>0&&ee&&(y===ce.CODE_CODE_C?S=S.substring(0,ir-2):S=S.substring(0,ir-1));const En=(u[1]+u[0])/2,ot=D+vn/2,Zt=p.length,kn=new Uint8Array(Zt);for(let hs=0;hs<Zt;hs++)kn[hs]=p[hs];const fs=[new me(En,r),new me(ot,r)];return new Oe(S,kn,0,fs,de.CODE_128,new Date().getTime())}}ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ce.MAX_AVG_VARIANCE=.25,ce.MAX_INDIVIDUAL_VARIANCE=.7,ce.CODE_SHIFT=98,ce.CODE_CODE_C=99,ce.CODE_CODE_B=100,ce.CODE_CODE_A=101,ce.CODE_FNC_1=102,ce.CODE_FNC_2=97,ce.CODE_FNC_3=96,ce.CODE_FNC_4_A=101,ce.CODE_FNC_4_B=100,ce.CODE_START_A=103,ce.CODE_START_B=104,ce.CODE_START_C=105,ce.CODE_STOP=106;class Dt extends lt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Dt.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),p,y;do{Dt.recordPattern(s,d,c);let U=Dt.toNarrowWidePattern(c);if(U<0)throw new K;p=Dt.patternToChar(U),this.decodeRowResult+=p,y=d;for(let V of c)d+=V;d=s.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let U of c)E+=U;let C=d-y-E;if(d!==h&&C*2<E)throw new K;if(this.usingCheckDigit){let U=this.decodeRowResult.length-1,V=0;for(let Y=0;Y<U;Y++)V+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Y));if(this.decodeRowResult.charAt(U)!==Dt.ALPHABET_STRING.charAt(V%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new K;let S;this.extendedMode?S=Dt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let D=(u[1]+u[0])/2,j=y+E/2;return new Oe(S,null,0,[new me(D,r),new me(j,r)],de.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,p=s.length;for(let y=c;y<a;y++)if(r.get(y)!==h)s[u]++;else{if(u===p-1){if(this.toNarrowWidePattern(s)===Dt.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((y-d)/2)),d,!1))return[d,y];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new K}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let p of r)p<u&&p>a&&(u=p);a=u,c=0;let d=0,h=0;for(let p=0;p<s;p++){let y=r[p];y>a&&(h|=1<<s-1-p,c++,d+=y)}if(c===3){for(let p=0;p<s&&c>0;p++){let y=r[p];if(y>a&&(c--,y*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Dt.CHARACTER_ENCODINGS.length;s++)if(Dt.CHARACTER_ENCODINGS[s]===r)return Dt.ALPHABET_STRING.charAt(s);if(r===Dt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new B;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new B;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new B;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new B;break}a+=h,c++}else a+=u}return a}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class it extends lt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new ae;it.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),p=null;a!=null&&(p=a.get(z.ALLOWED_LENGTHS)),p==null&&(p=it.DEFAULT_ALLOWED_LENGTHS);let y=h.length,E=!1,C=0;for(let j of p){if(y===j){E=!0;break}j>C&&(C=j)}if(!E&&y>C&&(E=!0),!E)throw new B;const S=[new me(c[1],r),new me(u[0],r)];return new Oe(h,null,0,S,de.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<a;){lt.recordPattern(r,s,u);for(let y=0;y<5;y++){let E=2*y;d[y]=u[E],h[y]=u[E+1]}let p=it.decodeDigit(d);c.append(p.toString()),p=this.decodeDigit(h),c.append(p.toString()),u.forEach(function(y){s+=y})}}decodeStart(r){let s=it.skipWhiteSpace(r),a=it.findGuardPattern(r,s,it.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new K}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new K;return a}decodeEnd(r){r.reverse();try{let s=it.skipWhiteSpace(r),a;try{a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[0])}catch(u){u instanceof K&&(a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),d=r.getSize(),h=!1,p=0,y=s;u.fill(0);for(let E=s;E<d;E++)if(r.get(E)!==h)u[p]++;else{if(p===c-1){if(lt.patternMatchVariance(u,a,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[y,E];y+=u[0]+u[1],M.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,h=!h}throw new K}static decodeDigit(r){let s=it.MAX_AVG_VARIANCE,a=-1,c=it.PATTERNS.length;for(let u=0;u<c;u++){let d=it.PATTERNS[u],h=lt.patternMatchVariance(r,d,it.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,a=u):h===s&&(a=-1)}if(a>=0)return a%10;throw new K}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends lt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=Ct.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return a}static checkChecksum(r){return Ct.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Ct.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return Ct.findGuardPattern(r,s,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let d=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let h=0,p=s,y=c.length,E=a;for(let C=s;C<d;C++)if(r.get(C)!==E)u[h]++;else{if(h===y-1){if(lt.patternMatchVariance(u,c,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([p,C]);p+=u[0]+u[1];let S=u.slice(2,u.length-1);for(let D=0;D<h-1;D++)u[D]=S[D];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,E=!E}throw new K}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let p=0;p<h;p++){let y=c[p],E=lt.patternMatchVariance(s,y,Ct.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,d=p)}if(d>=0)return d;throw new K}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class wo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=wo.parseExtensionString(d),p=[new me((a[0]+a[1])/2,r),new me(u,r)],y=new Oe(d,null,0,p,de.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&y.putAllMetadata(h),y}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let y=0;y<5&&d<u;y++){let E=Ct.decodeDigit(r,c,d,Ct.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<4-y),y!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==5)throw new K;let p=this.determineCheckDigit(h);if(wo.extensionChecksum(a.toString())!==p)throw new K;return d}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new K}static parseExtensionString(r){if(r.length!==5)return null;let s=wo.parseExtension5String(r);return s==null?null:new Map([[_e.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class lu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=lu.parseExtensionString(d),p=[new me((a[0]+a[1])/2,r),new me(u,r)],y=new Oe(d,null,0,p,de.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&y.putAllMetadata(h),y}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let p=0;p<2&&d<u;p++){let y=Ct.decodeDigit(r,c,d,Ct.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let E of c)d+=E;y>=10&&(h|=1<<1-p),p!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==2)throw new K;if(parseInt(a.toString())%4!==h)throw new K;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[_e.ISSUE_NUMBER,parseInt(r)]])}}class _h{static decodeRow(r,s,a){let c=Ct.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new wo().decodeRow(r,s,c)}catch{return new lu().decodeRow(r,s,c)}}}_h.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ke extends Ct{constructor(){super(),this.decodeRowStringBuffer="",Ke.L_AND_G_PATTERNS=Ke.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Ke.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];Ke.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=Ke.findStartGuardPattern(s),u=a==null?null:a.get(z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ee=new me((c[0]+c[1])/2,r);u.foundPossibleResultPoint(ee)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,p=d.resultString;if(u!=null){const ee=new me(h,r);u.foundPossibleResultPoint(ee)}let y=this.decodeEnd(s,h);if(u!=null){const ee=new me((y[0]+y[1])/2,r);u.foundPossibleResultPoint(ee)}let E=y[1],C=E+(E-y[0]);if(C>=s.getSize()||!s.isRange(E,C,!1))throw new K;let S=p.toString();if(S.length<8)throw new B;if(!Ke.checkChecksum(S))throw new T;let D=(c[1]+c[0])/2,j=(y[1]+y[0])/2,U=this.getBarcodeFormat(),V=[new me(D,r),new me(j,r)],Y=new Oe(S,null,0,V,U,new Date().getTime()),se=0;try{let ee=_h.decodeRow(r,s,y[1]);Y.putMetadata(_e.UPC_EAN_EXTENSION,ee.getText()),Y.putAllMetadata(ee.getResultMetadata()),Y.addResultPoints(ee.getResultPoints()),se=ee.getText().length}catch{}let oe=a==null?null:a.get(z.ALLOWED_EAN_EXTENSIONS);if(oe!=null){let ee=!1;for(let ze in oe)if(se.toString()===ze){ee=!0;break}if(!ee)throw new K}return Y}decodeEnd(r,s){return Ke.findGuardPattern(r,s,!1,Ke.START_END_PATTERN,new Int32Array(Ke.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Ke.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Ke.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new B;a+=u}return(1e3-a)%10}}class Ti extends Ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let y=0;y<6&&d<u;y++){let E=Ke.decodeDigit(r,c,d,Ke.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<5-y)}a=Ti.determineFirstDigit(a,h),d=Ke.findGuardPattern(r,d,!0,Ke.MIDDLE_PATTERN,new Int32Array(Ke.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&d<u;y++){let E=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+E);for(let C of c)d+=C}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return de.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new K}}Ti.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ch extends Ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let p=0;p<4&&d<u;p++){let y=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+y);for(let E of c)d+=E}d=Ke.findGuardPattern(r,d,!0,Ke.MIDDLE_PATTERN,new Int32Array(Ke.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&d<u;p++){let y=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+y);for(let E of c)d+=E}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return de.EAN_8}}class Sh extends Ke{constructor(){super(...arguments),this.ean13Reader=new Ti}getBarcodeFormat(){return de.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new Oe(s.substring(1),null,null,r.getResultPoints(),de.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new K}reset(){this.ean13Reader.reset()}}class rr extends Ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(y=>y);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let y=0;y<6&&d<u;y++){const E=rr.decodeDigit(r,c,d,rr.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(h|=1<<5-y)}let p=rr.determineNumSysAndCheckDigit(a,h);return{rowOffset:d,resultString:p}}decodeEnd(r,s){return rr.findGuardPatternWithoutCounters(r,s,!0,rr.MIDDLE_END_PATTERN)}checkChecksum(r){return Ke.checkChecksum(rr.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+r+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return de.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new ae;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}rr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class cu extends lt{constructor(r){super();let s=r==null?null:r.get(z.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new Ti),a.push(new Sh),a.push(new Ch),a.push(new rr)):(s.indexOf(de.EAN_13)>-1&&a.push(new Ti),s.indexOf(de.UPC_A)>-1&&a.push(new Sh),s.indexOf(de.EAN_8)>-1&&a.push(new Ch),s.indexOf(de.UPC_E)>-1&&a.push(new rr)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),d=u.getBarcodeFormat()===de.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(z.POSSIBLE_FORMATS),p=h==null||h.includes(de.UPC_A);if(d&&p){const y=u.getRawBytes(),E=new Oe(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),de.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new K}reset(){for(let r of this.readers)r.reset()}}class tn extends lt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(lt.patternMatchVariance(r,s[a],tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return a;throw new K}static count(r){return ve.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=tn.MIN_FINDER_PATTERN_RATIO&&c<=tn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}tn.MAX_AVG_VARIANCE=.2,tn.MAX_INDIVIDUAL_VARIANCE=.45,tn.MIN_FINDER_PATTERN_RATIO=9.5/12,tn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ss{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof ss))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ga{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new me(a,u)),this.resultPoints.push(new me(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ga))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class gr{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let p of r)c+=p;let u=0,d=0,h=r.length;for(let p=0;p<h-1;p++){let y;for(y=1,d|=1<<p;y<r[p];y++,d&=~(1<<p)){let E=gr.combins(c-y-1,h-p-2);if(a&&d===0&&c-y-(h-p-1)>=h-p-1&&(E-=gr.combins(c-y-(h-p),h-p-2)),h-p-1>1){let C=0;for(let S=c-y-(h-p-2);S>s;S--)C+=gr.combins(c-y-S-1,h-p-3);E-=C*(h-1-p)}else c-y>s&&E--;u+=E}c-=y}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,d=1;for(let h=r;h>a;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class sw{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new F(a),u=0,h=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)h&1<<p&&c.set(u),u++;for(let p=1;p<r.length;++p){let y=r[p],E=y.getLeftChar().getValue();for(let C=11;C>=0;--C)E&1<<C&&c.set(u),u++;if(y.getRightChar()!=null){let C=y.getRightChar().getValue();for(let S=11;S>=0;--S)C&1<<S&&c.set(u),u++}}return c}}class Ii{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class uu{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class xn extends uu{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===xn.FNC1}}xn.FNC1="$";class Ni extends uu{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Hn extends uu{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new B;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Hn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Hn.FNC1}isAnyFNC1(){return this.firstDigit===Hn.FNC1||this.secondDigit===Hn.FNC1}}Hn.FNC1=10;class xe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new K;let s=r.substring(0,2);for(let u of xe.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(2,u[2],r):xe.processFixedAI(2,u[1],r);if(r.length<3)throw new K;let a=r.substring(0,3);for(let u of xe.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(3,u[2],r):xe.processFixedAI(3,u[1],r);for(let u of xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,u[2],r):xe.processFixedAI(4,u[1],r);if(r.length<4)throw new K;let c=r.substring(0,4);for(let u of xe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,u[2],r):xe.processFixedAI(4,u[1],r);throw new K}static processFixedAI(r,s,a){if(a.length<r)throw new K;let c=a.substring(0,r);if(a.length<r+s)throw new K;let u=a.substring(r,r+s),d=a.substring(r+s),h="("+c+")"+u,p=xe.parseFieldsInGeneralPurpose(d);return p==null?h:h+p}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let d=a.substring(r,u),h=a.substring(u),p="("+c+")"+d,y=xe.parseFieldsInGeneralPurpose(h);return y==null?p:p+y}}xe.VARIABLE_LENGTH=[],xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xe.VARIABLE_LENGTH,20],["22",xe.VARIABLE_LENGTH,29],["30",xe.VARIABLE_LENGTH,8],["37",xe.VARIABLE_LENGTH,8],["90",xe.VARIABLE_LENGTH,30],["91",xe.VARIABLE_LENGTH,30],["92",xe.VARIABLE_LENGTH,30],["93",xe.VARIABLE_LENGTH,30],["94",xe.VARIABLE_LENGTH,30],["95",xe.VARIABLE_LENGTH,30],["96",xe.VARIABLE_LENGTH,30],["97",xe.VARIABLE_LENGTH,3],["98",xe.VARIABLE_LENGTH,30],["99",xe.VARIABLE_LENGTH,30]],xe.THREE_DIGIT_DATA_LENGTH=[["240",xe.VARIABLE_LENGTH,30],["241",xe.VARIABLE_LENGTH,30],["242",xe.VARIABLE_LENGTH,6],["250",xe.VARIABLE_LENGTH,30],["251",xe.VARIABLE_LENGTH,30],["253",xe.VARIABLE_LENGTH,17],["254",xe.VARIABLE_LENGTH,20],["400",xe.VARIABLE_LENGTH,30],["401",xe.VARIABLE_LENGTH,30],["402",17],["403",xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xe.VARIABLE_LENGTH,20],["421",xe.VARIABLE_LENGTH,15],["422",3],["423",xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xe.VARIABLE_LENGTH,15],["391",xe.VARIABLE_LENGTH,18],["392",xe.VARIABLE_LENGTH,15],["393",xe.VARIABLE_LENGTH,18],["703",xe.VARIABLE_LENGTH,30]],xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xe.VARIABLE_LENGTH,20],["8003",xe.VARIABLE_LENGTH,30],["8004",xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xe.VARIABLE_LENGTH,30],["8008",xe.VARIABLE_LENGTH,12],["8018",18],["8020",xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xe.VARIABLE_LENGTH,70],["8200",xe.VARIABLE_LENGTH,70]];class os{constructor(r){this.buffer=new ae,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=xe.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Hn(this.information.getSize(),Hn.FNC1,Hn.FNC1):new Hn(this.information.getSize(),u-1,Hn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new Hn(r+7,a,c)}extractNumericValueFromBitArray(r,s){return os.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ni(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ni(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ni(this.current.getPosition(),this.buffer.toString()):s=new Ni(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ii(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ii(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ii(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ni(this.current.getPosition(),this.buffer.toString());return new Ii(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ii(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new xn(r+5,xn.FNC1);if(s>=5&&s<15)return new xn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new xn(r+7,""+(a+1));if(a>=90&&a<116)return new xn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new B}return new xn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new xn(r+5,xn.FNC1);if(s>=5&&s<15)return new xn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new xn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Te("Decoding invalid alphanumeric value: "+a)}return new xn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class du{constructor(r){this.information=r,this.generalDecoder=new os(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends du{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}wn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}wn.GTIN_SIZE=40;class as extends wn{constructor(r){super(r)}parseInformation(){let r=new ae;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(as.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,as.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,as.HEADER_SIZE+44)}}as.HEADER_SIZE=4;class Xa extends du{constructor(r){super(r)}parseInformation(){let r=new ae;return this.getGeneralDecoder().decodeAllCodes(r,Xa.HEADER_SIZE)}}Xa.HEADER_SIZE=5;class qa extends wn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class pr extends qa{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=pr.HEADER_SIZE+qa.GTIN_SIZE+pr.WEIGHT_SIZE)throw new K;let r=new ae;return this.encodeCompressedGtin(r,pr.HEADER_SIZE),this.encodeCompressedWeight(r,pr.HEADER_SIZE+qa.GTIN_SIZE,pr.WEIGHT_SIZE),r.toString()}}pr.HEADER_SIZE=5,pr.WEIGHT_SIZE=15;class ow extends pr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class aw extends pr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class mr extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<mr.HEADER_SIZE+wn.GTIN_SIZE)throw new K;let r=new ae;this.encodeCompressedGtin(r,mr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(mr.HEADER_SIZE+wn.GTIN_SIZE,mr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(mr.HEADER_SIZE+wn.GTIN_SIZE+mr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}mr.HEADER_SIZE=8,mr.LAST_DIGIT_SIZE=2;class un extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+wn.GTIN_SIZE)throw new K;let r=new ae;this.encodeCompressedGtin(r,un.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+wn.GTIN_SIZE,un.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+wn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+wn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}un.HEADER_SIZE=8,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class xt extends qa{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE+xt.DATE_SIZE)throw new K;let r=new ae;return this.encodeCompressedGtin(r,xt.HEADER_SIZE),this.encodeCompressedWeight(r,xt.HEADER_SIZE+xt.GTIN_SIZE,xt.WEIGHT_SIZE),this.encodeCompressedDate(r,xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,xt.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}xt.HEADER_SIZE=8,xt.WEIGHT_SIZE=20,xt.DATE_SIZE=16;function Ah(_){try{if(_.get(1))return new as(_);if(!_.get(2))return new Xa(_);switch(os.extractNumericValueFromBitArray(_,1,4)){case 4:return new ow(_);case 5:return new aw(_)}switch(os.extractNumericValueFromBitArray(_,1,5)){case 12:return new mr(_);case 13:return new un(_)}switch(os.extractNumericValueFromBitArray(_,1,7)){case 56:return new xt(_,"310","11");case 57:return new xt(_,"320","11");case 58:return new xt(_,"310","13");case 59:return new xt(_,"320","13");case 60:return new xt(_,"310","15");case 61:return new xt(_,"320","15");case 62:return new xt(_,"310","17");case 63:return new xt(_,"320","17")}}catch(r){throw console.log(r),new Te("unknown decoder: "+_)}}class Vr{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Vr?Vr.equalsOrNull(r.leftchar,s.leftchar)&&Vr.equalsOrNull(r.rightchar,s.rightchar)&&Vr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Vr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class fu{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof fu?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class J extends tn{constructor(r){super(...arguments),this.pairs=new Array(J.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return J.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,J.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof K){if(!this.pairs.length)throw new K;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new K}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!J.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(r){for(let s of J.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||J.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new fu(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(Vr.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let d=!1;for(let h of a.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=sw.buildBitArray(r),c=Ah(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new Oe(c,null,null,h,de.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let p=this.pairs.get(h);c+=p.getLeftChar().getChecksumPortion(),u++;let y=p.getRightChar();y!=null&&(c+=y.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,a,c),u==null?h=J.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let p=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new K;let y;try{y=this.decodeDataCharacter(r,u,c,!1)}catch(E){y=null,this.verbose&&console.log(E)}return new Vr(p,y,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;a>=0?d=a:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let p=!1;for(;d<u&&(p=!r.get(d),!!p);)d++;let y=0,E=d;for(let C=d;C<u;C++)if(r.get(C)!=p)c[y]++;else{if(y==3){if(h&&J.reverseCounters(c),J.isFinderPattern(c)){this.startEnd[0]=E,this.startEnd[1]=C;return}h&&J.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,p=!p}throw new K}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,d;if(a){let y=this.startEnd[0]-1;for(;y>=0&&!r.get(y);)y--;y++,c=this.startEnd[0]-y,u=y,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();M.arraycopy(h,0,h,1,h.length-1),h[0]=c;let p;try{p=this.parseFinderValue(h,J.FINDER_PATTERNS)}catch{return null}return new Ga(p,[u,d],u,d,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let ot=0;ot<u.length;ot++)u[ot]=0;if(c)J.recordPatternInReverse(r,s.getStartEnd()[0],u);else{J.recordPattern(r,s.getStartEnd()[1],u);for(let ot=0,Zt=u.length-1;ot<Zt;ot++,Zt--){let kn=u[ot];u[ot]=u[Zt],u[Zt]=kn}}let d=17,h=ve.sum(new Int32Array(u))/d,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new K;let y=this.getOddCounts(),E=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let ot=0;ot<u.length;ot++){let Zt=1*u[ot]/h,kn=Zt+.5;if(kn<1){if(Zt<.3)throw new K;kn=1}else if(kn>8){if(Zt>8.7)throw new K;kn=8}let fs=ot/2;ot&1?(E[fs]=kn,S[fs]=Zt-kn):(y[fs]=kn,C[fs]=Zt-kn)}this.adjustOddEvenCounts(d);let D=4*s.getValue()+(a?0:2)+(c?0:1)-1,j=0,U=0;for(let ot=y.length-1;ot>=0;ot--){if(J.isNotA1left(s,a,c)){let Zt=J.WEIGHTS[D][2*ot];U+=y[ot]*Zt}j+=y[ot]}let V=0;for(let ot=E.length-1;ot>=0;ot--)if(J.isNotA1left(s,a,c)){let Zt=J.WEIGHTS[D][2*ot+1];V+=E[ot]*Zt}let Y=U+V;if(j&1||j>13||j<4)throw new K;let se=(13-j)/2,oe=J.SYMBOL_WIDEST[se],ee=9-oe,ze=gr.getRSSvalue(y,oe,!0),Pe=gr.getRSSvalue(E,ee,!1),vn=J.EVEN_TOTAL_SUBSET[se],ir=J.GSUM[se],En=ze*vn+Pe+ir;return new ss(En,Y)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=ve.sum(new Int32Array(this.getOddCounts())),a=ve.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let p=s+a-r,y=(s&1)==1,E=(a&1)==0;if(p==1)if(y){if(E)throw new K;u=!0}else{if(!E)throw new K;h=!0}else if(p==-1)if(y){if(E)throw new K;c=!0}else{if(!E)throw new K;d=!0}else if(p==0){if(y){if(!E)throw new K;s<a?(c=!0,h=!0):(u=!0,d=!0)}else if(E)throw new K}else throw new K;if(c){if(u)throw new K;J.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&J.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new K;J.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&J.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}J.SYMBOL_WIDEST=[7,5,4,3,1],J.EVEN_TOTAL_SUBSET=[4,20,52,104,204],J.GSUM=[0,348,1388,2948,3988],J.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],J.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],J.FINDER_PAT_A=0,J.FINDER_PAT_B=1,J.FINDER_PAT_C=2,J.FINDER_PAT_D=3,J.FINDER_PAT_E=4,J.FINDER_PAT_F=5,J.FINDER_PATTERN_SEQUENCES=[[J.FINDER_PAT_A,J.FINDER_PAT_A],[J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B],[J.FINDER_PAT_A,J.FINDER_PAT_C,J.FINDER_PAT_B,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_C],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F]],J.MAX_PAIRS=11;class lw extends ss{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class St extends tn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);St.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);St.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&St.checkChecksum(d,h))return St.constructResult(d,h)}throw new K}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new ae;for(let y=13-c.length;y>0;y--)u.append("0");u.append(c);let d=0;for(let y=0;y<13;y++){let E=u.charAt(y).charCodeAt(0)-48;d+=y&1?E:3*E}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new Oe(u.toString(),null,0,[h[0],h[1],p[0],p[1]],de.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,a,s,u),h=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(h!=null){let E=(u[0]+u[1])/2;s&&(E=r.getSize()-1-E),h.foundPossibleResultPoint(new me(E,a))}let p=this.decodeDataCharacter(r,d,!0),y=this.decodeDataCharacter(r,d,!1);return new lw(1597*p.getValue()+y.getValue(),p.getChecksumPortion()+4*y.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let V=0;V<c.length;V++)c[V]=0;if(a)lt.recordPatternInReverse(r,s.getStartEnd()[0],c);else{lt.recordPattern(r,s.getStartEnd()[1]+1,c);for(let V=0,Y=c.length-1;V<Y;V++,Y--){let se=c[V];c[V]=c[Y],c[Y]=se}}let u=a?16:15,d=ve.sum(new Int32Array(c))/u,h=this.getOddCounts(),p=this.getEvenCounts(),y=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let V=0;V<c.length;V++){let Y=c[V]/d,se=Math.floor(Y+.5);se<1?se=1:se>8&&(se=8);let oe=Math.floor(V/2);V&1?(p[oe]=se,E[oe]=Y-se):(h[oe]=se,y[oe]=Y-se)}this.adjustOddEvenCounts(a,u);let C=0,S=0;for(let V=h.length-1;V>=0;V--)S*=9,S+=h[V],C+=h[V];let D=0,j=0;for(let V=p.length-1;V>=0;V--)D*=9,D+=p[V],j+=p[V];let U=S+3*D;if(a){if(C&1||C>12||C<4)throw new K;let V=(12-C)/2,Y=St.OUTSIDE_ODD_WIDEST[V],se=9-Y,oe=gr.getRSSvalue(h,Y,!1),ee=gr.getRSSvalue(p,se,!0),ze=St.OUTSIDE_EVEN_TOTAL_SUBSET[V],Pe=St.OUTSIDE_GSUM[V];return new ss(oe*ze+ee+Pe,U)}else{if(j&1||j>10||j<4)throw new K;let V=(10-j)/2,Y=St.INSIDE_ODD_WIDEST[V],se=9-Y,oe=gr.getRSSvalue(h,Y,!0),ee=gr.getRSSvalue(p,se,!1),ze=St.INSIDE_ODD_TOTAL_SUBSET[V],Pe=St.INSIDE_GSUM[V];return new ss(ee*ze+oe+Pe,U)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,p=d;for(let y=d;y<c;y++)if(r.get(y)!==u)a[h]++;else{if(h===3){if(tn.isFinderPattern(a))return[p,y];p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,u=!u}throw new K}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,p=this.getDecodeFinderCounters(),y=new Int32Array(p.length);M.arraycopy(p,0,y,1,p.length-1),y[0]=h;const E=this.parseFinderValue(y,St.FINDER_PATTERNS);let C=d,S=c[1];return a&&(C=r.getSize()-1-C,S=r.getSize()-1-S),new Ga(E,[d,c[1]],C,S,s)}adjustOddEvenCounts(r,s){let a=ve.sum(new Int32Array(this.getOddCounts())),c=ve.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,p=!1;r?(a>12?d=!0:a<4&&(u=!0),c>12?p=!0:c<4&&(h=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?p=!0:c<4&&(h=!0));let y=a+c-s,E=(a&1)===(r?1:0),C=(c&1)===1;if(y===1)if(E){if(C)throw new K;d=!0}else{if(!C)throw new K;p=!0}else if(y===-1)if(E){if(C)throw new K;u=!0}else{if(!C)throw new K;h=!0}else if(y===0){if(E){if(!C)throw new K;a<c?(u=!0,p=!0):(d=!0,h=!0)}else if(C)throw new K}else throw new K;if(u){if(d)throw new K;tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new K;tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}St.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],St.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],St.OUTSIDE_GSUM=[0,161,961,2015,2715],St.INSIDE_GSUM=[0,336,1036,1516],St.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],St.INSIDE_ODD_WIDEST=[2,4,6,8],St.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ls extends lt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(z.POSSIBLE_FORMATS):null,c=r&&r.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(de.EAN_13)||a.includes(de.UPC_A)||a.includes(de.EAN_8)||a.includes(de.UPC_E))&&this.readers.push(new cu(r)),a.includes(de.CODE_39)&&this.readers.push(new Dt(c)),a.includes(de.CODE_128)&&this.readers.push(new ce),a.includes(de.ITF)&&this.readers.push(new it),a.includes(de.RSS_14)&&this.readers.push(new St),a.includes(de.RSS_EXPANDED)&&this.readers.push(new J(this.verbose))):(this.readers.push(new cu(r)),this.readers.push(new Dt),this.readers.push(new cu(r)),this.readers.push(new ce),this.readers.push(new it),this.readers.push(new St),this.readers.push(new J(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new K}reset(){this.readers.forEach(r=>r.reset())}}class cw extends ge{constructor(r=500,s){super(new ls(s),r,s)}}class et{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ze{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(r,s,a,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const p=d.getECCodewords(),y=d.getECBlocks();for(let E of y)h+=E.getCount()*(E.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new B;for(let a of He.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new He(1,10,10,8,8,new et(5,new Ze(1,3))),new He(2,12,12,10,10,new et(7,new Ze(1,5))),new He(3,14,14,12,12,new et(10,new Ze(1,8))),new He(4,16,16,14,14,new et(12,new Ze(1,12))),new He(5,18,18,16,16,new et(14,new Ze(1,18))),new He(6,20,20,18,18,new et(18,new Ze(1,22))),new He(7,22,22,20,20,new et(20,new Ze(1,30))),new He(8,24,24,22,22,new et(24,new Ze(1,36))),new He(9,26,26,24,24,new et(28,new Ze(1,44))),new He(10,32,32,14,14,new et(36,new Ze(1,62))),new He(11,36,36,16,16,new et(42,new Ze(1,86))),new He(12,40,40,18,18,new et(48,new Ze(1,114))),new He(13,44,44,20,20,new et(56,new Ze(1,144))),new He(14,48,48,22,22,new et(68,new Ze(1,174))),new He(15,52,52,24,24,new et(42,new Ze(2,102))),new He(16,64,64,14,14,new et(56,new Ze(2,140))),new He(17,72,72,16,16,new et(36,new Ze(4,92))),new He(18,80,80,18,18,new et(48,new Ze(4,114))),new He(19,88,88,20,20,new et(56,new Ze(4,144))),new He(20,96,96,22,22,new et(68,new Ze(4,174))),new He(21,104,104,24,24,new et(56,new Ze(6,136))),new He(22,120,120,18,18,new et(68,new Ze(6,175))),new He(23,132,132,20,20,new et(62,new Ze(8,163))),new He(24,144,144,22,22,new et(62,new Ze(8,156),new Ze(2,155))),new He(25,8,18,6,16,new et(7,new Ze(1,5))),new He(26,8,32,6,14,new et(11,new Ze(1,10))),new He(27,12,26,10,24,new et(14,new Ze(1,16))),new He(28,12,36,10,16,new et(18,new Ze(1,22))),new He(29,16,36,14,16,new et(24,new Ze(1,32))),new He(30,16,48,14,22,new et(28,new Ze(1,49)))]}}He.VERSIONS=He.buildVersions();class hu{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new B;this.version=hu.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return He.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,p=!1,y=!1,E=!1;do if(a===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,a-=2,c+=2,h=!0;else if(a===u-2&&c===0&&d&3&&!p)r[s++]=this.readCorner2(u,d)&255,a-=2,c+=2,p=!0;else if(a===u+4&&c===2&&!(d&7)&&!y)r[s++]=this.readCorner3(u,d)&255,a-=2,c+=2,y=!0;else if(a===u-2&&c===0&&(d&7)===4&&!E)r[s++]=this.readCorner4(u,d)&255,a-=2,c+=2,E=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(s!==this.version.getTotalCodewords())throw new B;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new b("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=a/u|0,p=d*c,y=h*u,E=new Re(y,p);for(let C=0;C<d;++C){const S=C*c;for(let D=0;D<h;++D){const j=D*u;for(let U=0;U<c;++U){const V=C*(c+2)+1+U,Y=S+U;for(let se=0;se<u;++se){const oe=D*(u+2)+1+se;if(r.get(oe,V)){const ee=j+se;E.set(ee,Y)}}}}}return E}}class gu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let U of u)c+=U.getCount();const d=new Array(c);let h=0;for(let U of u)for(let V=0;V<U.getCount();V++){const Y=U.getDataCodewords(),se=a.getECCodewords()+Y;d[h++]=new gu(Y,new Uint8Array(se))}const y=d[0].codewords.length-a.getECCodewords(),E=y-1;let C=0;for(let U=0;U<E;U++)for(let V=0;V<h;V++)d[V].codewords[U]=r[C++];const S=s.getVersionNumber()===24,D=S?8:h;for(let U=0;U<D;U++)d[U].codewords[y-1]=r[C++];const j=d[0].codewords.length;for(let U=y;U<j;U++)for(let V=0;V<h;V++){const Y=S?(V+8)%h:V,se=S&&Y>7?U-1:U;d[Y].codewords[se]=r[C++]}if(C!==r.length)throw new b;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pu{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,h=r<d?r:d,p=d-h,y=255>>8-h<<p;s=(u[c]&y)>>p,r-=h,a+=h,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mt;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mt||(Mt={}));class Hr{static decode(r){const s=new pu(r),a=new ae,c=new ae,u=new Array;let d=Mt.ASCII_ENCODE;do if(d===Mt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,a,c);else{switch(d){case Mt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Mt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Mt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Mt.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new B}d=Mt.ASCII_ENCODE}while(d!==Mt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Le(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new B;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Mt.ASCII_ENCODE;if(u===129)return Mt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Mt.C40_ENCODE;case 231:return Mt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Mt.ANSIX12_ENCODE;case 239:return Mt.TEXT_ENCODE;case 240:return Mt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new B;break}}while(r.available()>0);return Mt.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):s.append(y)}else throw new B;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):s.append(y)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new B}u=0;break;case 3:a?(s.append(String.fromCharCode(p+224)),a=!1):s.append(String.fromCharCode(p+96)),u=0;break;default:throw new B}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[p];a?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):s.append(y)}else throw new B;break;case 1:a?(s.append(String.fromCharCode(p+128)),a=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[p];a?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):s.append(y)}else switch(p){case 27:s.append("");break;case 30:a=!0;break;default:throw new B}u=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[p];a?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):s.append(y),u=0}else throw new B;break;default:throw new B}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new B;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new B;const h=new Uint8Array(d);for(let p=0;p<d;p++){if(r.available()<8)throw new B;h[p]=this.unrandomize255State(r.readBits(8),c++)}a.push(h);try{s.append(re.decode(h,Q.ISO88591))}catch(p){throw new Te("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}Hr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hr.TEXT_SHIFT2_SET_CHARS=Hr.C40_SHIFT2_SET_CHARS,Hr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class uw{constructor(){this.rsDecoder=new Ne(Se.DATA_MATRIX_FIELD_256)}decode(r){const s=new hu(r),a=s.getVersion(),c=s.readCodewords(),u=gu.getDataBlocks(c,a);let d=0;for(let y of u)d+=y.getNumDataCodewords();const h=new Uint8Array(d),p=u.length;for(let y=0;y<p;y++){const E=u[y],C=E.getCodewords(),S=E.getNumDataCodewords();this.correctErrors(C,S);for(let D=0;D<S;D++)h[D*p+y]=C[D]}return Hr.decode(h)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new T}for(let c=0;c<s;c++)r[c]=a[c]}}class Nt{constructor(r){this.image=r,this.rectangleDetector=new at(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new K;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(p&1)===1&&(p+=1),4*h<7*p&&4*p<7*h&&(h=p=Math.max(h,p));let y=Nt.sampleGrid(this.image,a,c,u,d,h,p);return new cn(y,[a,c,u,d])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new me(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new me(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,a),h=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),y=this.transitionsBetween(u,s),E=d,C=[u,s,a,c];return E>h&&(E=h,C[0]=s,C[1]=a,C[2]=c,C[3]=u),E>p&&(E=p,C[0]=a,C[1]=c,C[2]=u,C[3]=s),E>y&&(C[0]=c,C[1]=u,C[2]=s,C[3]=a),C}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=Nt.shiftPoint(a,c,(d+1)*4),p=Nt.shiftPoint(c,a,(d+1)*4),y=this.transitionsBetween(h,s),E=this.transitionsBetween(p,u);return y<E?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(a,u),p=Nt.shiftPoint(s,a,(h+1)*4),y=Nt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(p,u),h=this.transitionsBetween(y,u);let E=new me(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),C=new me(u.getX()+(s.getX()-a.getX())/(h+1),u.getY()+(s.getY()-a.getY())/(h+1));if(!this.isValid(E))return this.isValid(C)?C:null;if(!this.isValid(C))return E;let S=this.transitionsBetween(p,E)+this.transitionsBetween(y,E),D=this.transitionsBetween(p,C)+this.transitionsBetween(y,C);return S>D?E:C}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,p=Nt.shiftPoint(s,a,h*4),y=Nt.shiftPoint(c,a,d*4);d=this.transitionsBetween(p,u)+1,h=this.transitionsBetween(y,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let E=(s.getX()+a.getX()+c.getX()+u.getX())/4,C=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Nt.moveAway(s,E,C),a=Nt.moveAway(a,E,C),c=Nt.moveAway(c,E,C),u=Nt.moveAway(u,E,C);let S,D;return p=Nt.shiftPoint(s,a,h*4),p=Nt.shiftPoint(p,u,d*4),S=Nt.shiftPoint(a,s,h*4),S=Nt.shiftPoint(S,c,d*4),y=Nt.shiftPoint(c,u,h*4),y=Nt.shiftPoint(y,a,d*4),D=Nt.shiftPoint(u,c,h*4),D=Nt.shiftPoint(D,s,d*4),[p,S,y,D]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,d,h){return Ft.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-a);if(h){let U=a;a=c,c=U,U=u,u=d,d=U}let p=Math.abs(u-a),y=Math.abs(d-c),E=-p/2,C=c<d?1:-1,S=a<u?1:-1,D=0,j=this.image.get(h?c:a,h?a:c);for(let U=a,V=c;U!==u;U+=S){let Y=this.image.get(h?V:U,h?U:V);if(Y!==j&&(D++,j=Y),E+=y,E>0){if(V===d)break;V+=C,E-=p}}return D}}class Wr{constructor(){this.decoder=new uw}decode(r,s=null){let a,c;if(s!=null&&s.has(z.PURE_BARCODE)){const y=Wr.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(y),c=Wr.NO_POINTS}else{const y=new Nt(r.getBlackMatrix()).detect();a=this.decoder.decode(y.getBits()),c=y.getPoints()}const u=a.getRawBytes(),d=new Oe(a.getText(),u,8*u.length,c,de.DATA_MATRIX,M.currentTimeMillis()),h=a.getByteSegments();h!=null&&d.putMetadata(_e.BYTE_SEGMENTS,h);const p=a.getECLevel();return p!=null&&d.putMetadata(_e.ERROR_CORRECTION_LEVEL,p),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new K;const c=this.moduleSize(s,r);let u=s[1];const d=a[1];let h=s[0];const y=(a[0]-h+1)/c,E=(d-u+1)/c;if(y<=0||E<=0)throw new K;const C=c/2;u+=C,h+=C;const S=new Re(y,E);for(let D=0;D<E;D++){const j=u+D*c;for(let U=0;U<y;U++)r.get(h+U*c,j)&&S.set(U,D)}return S}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new K;const d=c-r[0];if(d===0)throw new K;return d}}Wr.NO_POINTS=[];class dw extends ge{constructor(r=500){super(new Wr,r)}}var cs;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(cs||(cs={}));class ct{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,ct.FOR_BITS.set(a,this),ct.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return ct.L;case"M":return ct.M;case"Q":return ct.Q;case"H":return ct.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof ct))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=ct.FOR_BITS.size)throw new b;return ct.FOR_BITS.get(r)}}ct.FOR_BITS=new Map,ct.FOR_VALUE=new Map,ct.L=new ct(cs.L,"L",1),ct.M=new ct(cs.M,"M",0),ct.Q=new ct(cs.Q,"Q",3),ct.H=new ct(cs.H,"H",2);class nn{constructor(r){this.errorCorrectionLevel=ct.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return N.bitCount(r^s)}static decodeFormatInformation(r,s){const a=nn.doDecodeFormatInformation(r,s);return a!==null?a:nn.doDecodeFormatInformation(r^nn.FORMAT_INFO_MASK_QR,s^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of nn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new nn(u[1]);let h=nn.numBitsDiffering(r,d);h<a&&(c=u[1],a=h),r!==s&&(h=nn.numBitsDiffering(s,d),h<a&&(c=u[1],a=h))}return a<=3?new nn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof nn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ce{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new B;try{return this.getVersionForNumber((r-17)/4)}catch{throw new B}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return Ce.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Ce.VERSION_DECODE_INFO.length;c++){const u=Ce.VERSION_DECODE_INFO[c];if(u===r)return Ce.getVersionForNumber(c+7);const d=nn.numBitsDiffering(r,u);d<s&&(a=c+7,s=d)}return s<=3?Ce.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Re(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ce.VERSIONS=[new Ce(1,new Int32Array(0),new W(7,new k(1,19)),new W(10,new k(1,16)),new W(13,new k(1,13)),new W(17,new k(1,9))),new Ce(2,Int32Array.from([6,18]),new W(10,new k(1,34)),new W(16,new k(1,28)),new W(22,new k(1,22)),new W(28,new k(1,16))),new Ce(3,Int32Array.from([6,22]),new W(15,new k(1,55)),new W(26,new k(1,44)),new W(18,new k(2,17)),new W(22,new k(2,13))),new Ce(4,Int32Array.from([6,26]),new W(20,new k(1,80)),new W(18,new k(2,32)),new W(26,new k(2,24)),new W(16,new k(4,9))),new Ce(5,Int32Array.from([6,30]),new W(26,new k(1,108)),new W(24,new k(2,43)),new W(18,new k(2,15),new k(2,16)),new W(22,new k(2,11),new k(2,12))),new Ce(6,Int32Array.from([6,34]),new W(18,new k(2,68)),new W(16,new k(4,27)),new W(24,new k(4,19)),new W(28,new k(4,15))),new Ce(7,Int32Array.from([6,22,38]),new W(20,new k(2,78)),new W(18,new k(4,31)),new W(18,new k(2,14),new k(4,15)),new W(26,new k(4,13),new k(1,14))),new Ce(8,Int32Array.from([6,24,42]),new W(24,new k(2,97)),new W(22,new k(2,38),new k(2,39)),new W(22,new k(4,18),new k(2,19)),new W(26,new k(4,14),new k(2,15))),new Ce(9,Int32Array.from([6,26,46]),new W(30,new k(2,116)),new W(22,new k(3,36),new k(2,37)),new W(20,new k(4,16),new k(4,17)),new W(24,new k(4,12),new k(4,13))),new Ce(10,Int32Array.from([6,28,50]),new W(18,new k(2,68),new k(2,69)),new W(26,new k(4,43),new k(1,44)),new W(24,new k(6,19),new k(2,20)),new W(28,new k(6,15),new k(2,16))),new Ce(11,Int32Array.from([6,30,54]),new W(20,new k(4,81)),new W(30,new k(1,50),new k(4,51)),new W(28,new k(4,22),new k(4,23)),new W(24,new k(3,12),new k(8,13))),new Ce(12,Int32Array.from([6,32,58]),new W(24,new k(2,92),new k(2,93)),new W(22,new k(6,36),new k(2,37)),new W(26,new k(4,20),new k(6,21)),new W(28,new k(7,14),new k(4,15))),new Ce(13,Int32Array.from([6,34,62]),new W(26,new k(4,107)),new W(22,new k(8,37),new k(1,38)),new W(24,new k(8,20),new k(4,21)),new W(22,new k(12,11),new k(4,12))),new Ce(14,Int32Array.from([6,26,46,66]),new W(30,new k(3,115),new k(1,116)),new W(24,new k(4,40),new k(5,41)),new W(20,new k(11,16),new k(5,17)),new W(24,new k(11,12),new k(5,13))),new Ce(15,Int32Array.from([6,26,48,70]),new W(22,new k(5,87),new k(1,88)),new W(24,new k(5,41),new k(5,42)),new W(30,new k(5,24),new k(7,25)),new W(24,new k(11,12),new k(7,13))),new Ce(16,Int32Array.from([6,26,50,74]),new W(24,new k(5,98),new k(1,99)),new W(28,new k(7,45),new k(3,46)),new W(24,new k(15,19),new k(2,20)),new W(30,new k(3,15),new k(13,16))),new Ce(17,Int32Array.from([6,30,54,78]),new W(28,new k(1,107),new k(5,108)),new W(28,new k(10,46),new k(1,47)),new W(28,new k(1,22),new k(15,23)),new W(28,new k(2,14),new k(17,15))),new Ce(18,Int32Array.from([6,30,56,82]),new W(30,new k(5,120),new k(1,121)),new W(26,new k(9,43),new k(4,44)),new W(28,new k(17,22),new k(1,23)),new W(28,new k(2,14),new k(19,15))),new Ce(19,Int32Array.from([6,30,58,86]),new W(28,new k(3,113),new k(4,114)),new W(26,new k(3,44),new k(11,45)),new W(26,new k(17,21),new k(4,22)),new W(26,new k(9,13),new k(16,14))),new Ce(20,Int32Array.from([6,34,62,90]),new W(28,new k(3,107),new k(5,108)),new W(26,new k(3,41),new k(13,42)),new W(30,new k(15,24),new k(5,25)),new W(28,new k(15,15),new k(10,16))),new Ce(21,Int32Array.from([6,28,50,72,94]),new W(28,new k(4,116),new k(4,117)),new W(26,new k(17,42)),new W(28,new k(17,22),new k(6,23)),new W(30,new k(19,16),new k(6,17))),new Ce(22,Int32Array.from([6,26,50,74,98]),new W(28,new k(2,111),new k(7,112)),new W(28,new k(17,46)),new W(30,new k(7,24),new k(16,25)),new W(24,new k(34,13))),new Ce(23,Int32Array.from([6,30,54,78,102]),new W(30,new k(4,121),new k(5,122)),new W(28,new k(4,47),new k(14,48)),new W(30,new k(11,24),new k(14,25)),new W(30,new k(16,15),new k(14,16))),new Ce(24,Int32Array.from([6,28,54,80,106]),new W(30,new k(6,117),new k(4,118)),new W(28,new k(6,45),new k(14,46)),new W(30,new k(11,24),new k(16,25)),new W(30,new k(30,16),new k(2,17))),new Ce(25,Int32Array.from([6,32,58,84,110]),new W(26,new k(8,106),new k(4,107)),new W(28,new k(8,47),new k(13,48)),new W(30,new k(7,24),new k(22,25)),new W(30,new k(22,15),new k(13,16))),new Ce(26,Int32Array.from([6,30,58,86,114]),new W(28,new k(10,114),new k(2,115)),new W(28,new k(19,46),new k(4,47)),new W(28,new k(28,22),new k(6,23)),new W(30,new k(33,16),new k(4,17))),new Ce(27,Int32Array.from([6,34,62,90,118]),new W(30,new k(8,122),new k(4,123)),new W(28,new k(22,45),new k(3,46)),new W(30,new k(8,23),new k(26,24)),new W(30,new k(12,15),new k(28,16))),new Ce(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new k(3,117),new k(10,118)),new W(28,new k(3,45),new k(23,46)),new W(30,new k(4,24),new k(31,25)),new W(30,new k(11,15),new k(31,16))),new Ce(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new k(7,116),new k(7,117)),new W(28,new k(21,45),new k(7,46)),new W(30,new k(1,23),new k(37,24)),new W(30,new k(19,15),new k(26,16))),new Ce(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new k(5,115),new k(10,116)),new W(28,new k(19,47),new k(10,48)),new W(30,new k(15,24),new k(25,25)),new W(30,new k(23,15),new k(25,16))),new Ce(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new k(13,115),new k(3,116)),new W(28,new k(2,46),new k(29,47)),new W(30,new k(42,24),new k(1,25)),new W(30,new k(23,15),new k(28,16))),new Ce(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new k(17,115)),new W(28,new k(10,46),new k(23,47)),new W(30,new k(10,24),new k(35,25)),new W(30,new k(19,15),new k(35,16))),new Ce(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new k(17,115),new k(1,116)),new W(28,new k(14,46),new k(21,47)),new W(30,new k(29,24),new k(19,25)),new W(30,new k(11,15),new k(46,16))),new Ce(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new k(13,115),new k(6,116)),new W(28,new k(14,46),new k(23,47)),new W(30,new k(44,24),new k(7,25)),new W(30,new k(59,16),new k(1,17))),new Ce(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new k(12,121),new k(7,122)),new W(28,new k(12,47),new k(26,48)),new W(30,new k(39,24),new k(14,25)),new W(30,new k(22,15),new k(41,16))),new Ce(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new k(6,121),new k(14,122)),new W(28,new k(6,47),new k(34,48)),new W(30,new k(46,24),new k(10,25)),new W(30,new k(2,15),new k(64,16))),new Ce(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new k(17,122),new k(4,123)),new W(28,new k(29,46),new k(14,47)),new W(30,new k(49,24),new k(10,25)),new W(30,new k(24,15),new k(46,16))),new Ce(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new k(4,122),new k(18,123)),new W(28,new k(13,46),new k(32,47)),new W(30,new k(48,24),new k(14,25)),new W(30,new k(42,15),new k(32,16))),new Ce(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new k(20,117),new k(4,118)),new W(28,new k(40,47),new k(7,48)),new W(30,new k(43,24),new k(22,25)),new W(30,new k(10,15),new k(67,16))),new Ce(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new k(19,118),new k(6,119)),new W(28,new k(18,47),new k(31,48)),new W(30,new k(34,24),new k(34,25)),new W(30,new k(20,15),new k(61,16)))];var Ut;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(Ut||(Ut={}));class Wn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}Wn.values=new Map([[Ut.DATA_MASK_000,new Wn(Ut.DATA_MASK_000,(_,r)=>(_+r&1)===0)],[Ut.DATA_MASK_001,new Wn(Ut.DATA_MASK_001,(_,r)=>(_&1)===0)],[Ut.DATA_MASK_010,new Wn(Ut.DATA_MASK_010,(_,r)=>r%3===0)],[Ut.DATA_MASK_011,new Wn(Ut.DATA_MASK_011,(_,r)=>(_+r)%3===0)],[Ut.DATA_MASK_100,new Wn(Ut.DATA_MASK_100,(_,r)=>(Math.floor(_/2)+Math.floor(r/3)&1)===0)],[Ut.DATA_MASK_101,new Wn(Ut.DATA_MASK_101,(_,r)=>_*r%6===0)],[Ut.DATA_MASK_110,new Wn(Ut.DATA_MASK_110,(_,r)=>_*r%6<3)],[Ut.DATA_MASK_111,new Wn(Ut.DATA_MASK_111,(_,r)=>(_+r+_*r%3&1)===0)]]);class fw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new B;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=nn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Ce.getVersionForNumber(s);let a=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(h,d,a);let u=Ce.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(d,h,a);if(u=Ce.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new B}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=Wn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let p=0,y=0,E=0;for(let C=c-1;C>0;C-=2){C===6&&C--;for(let S=0;S<c;S++){const D=d?c-1-S:S;for(let j=0;j<2;j++)u.get(C-j,D)||(E++,y<<=1,this.bitMatrix.get(C-j,D)&&(y|=1),E===8&&(h[p++]=y,E=0,y=0))}d=!d}if(p!==s.getTotalCodewords())throw new B;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Wn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class mu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new b;const c=s.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const j of d)u+=j.getCount();const h=new Array(u);let p=0;for(const j of d)for(let U=0;U<j.getCount();U++){const V=j.getDataCodewords(),Y=c.getECCodewordsPerBlock()+V;h[p++]=new mu(V,new Uint8Array(Y))}const y=h[0].codewords.length;let E=h.length-1;for(;E>=0&&h[E].codewords.length!==y;)E--;E++;const C=y-c.getECCodewordsPerBlock();let S=0;for(let j=0;j<C;j++)for(let U=0;U<p;U++)h[U].codewords[j]=r[S++];for(let j=E;j<p;j++)h[j].codewords[C]=r[S++];const D=h[0].codewords.length;for(let j=C;j<D;j++)for(let U=0;U<p;U++){const V=U<E?j:j+1;h[U].codewords[V]=r[S++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Gn;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(Gn||(Gn={}));class Ae{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Ae.FOR_BITS.set(c,this),Ae.FOR_VALUE.set(r,this)}static forBits(r){const s=Ae.FOR_BITS.get(r);if(s===void 0)throw new b;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ae))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Ae.FOR_BITS=new Map,Ae.FOR_VALUE=new Map,Ae.TERMINATOR=new Ae(Gn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ae.NUMERIC=new Ae(Gn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ae.ALPHANUMERIC=new Ae(Gn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ae.STRUCTURED_APPEND=new Ae(Gn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ae.BYTE=new Ae(Gn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ae.ECI=new Ae(Gn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ae.KANJI=new Ae(Gn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ae.FNC1_FIRST_POSITION=new Ae(Gn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ae.FNC1_SECOND_POSITION=new Ae(Gn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ae.HANZI=new Ae(Gn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class vt{static decode(r,s,a,c){const u=new pu(r);let d=new ae;const h=new Array;let p=-1,y=-1;try{let E=null,C=!1,S;do{if(u.available()<4)S=Ae.TERMINATOR;else{const D=u.readBits(4);S=Ae.forBits(D)}switch(S){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:C=!0;break;case Ae.STRUCTURED_APPEND:if(u.available()<16)throw new B;p=u.readBits(8),y=u.readBits(8);break;case Ae.ECI:const D=vt.parseECIValue(u);if(E=R.getCharacterSetECIByValue(D),E===null)throw new B;break;case Ae.HANZI:const j=u.readBits(4),U=u.readBits(S.getCharacterCountBits(s));j===vt.GB2312_SUBSET&&vt.decodeHanziSegment(u,d,U);break;default:const V=u.readBits(S.getCharacterCountBits(s));switch(S){case Ae.NUMERIC:vt.decodeNumericSegment(u,d,V);break;case Ae.ALPHANUMERIC:vt.decodeAlphanumericSegment(u,d,V,C);break;case Ae.BYTE:vt.decodeByteSegment(u,d,V,E,h,c);break;case Ae.KANJI:vt.decodeKanjiSegment(u,d,V);break;default:throw new B}break}}while(S!==Ae.TERMINATOR)}catch{throw new B}return new Le(r,d.toString(),h.length===0?null:h,a===null?null:a.toString(),p,y)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new B;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,a--}try{s.append(re.decode(c,Q.GB2312))}catch(d){throw new B(d)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new B;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,a--}try{s.append(re.decode(c,Q.SHIFT_JIS))}catch(d){throw new B(d)}}static decodeByteSegment(r,s,a,c,u,d){if(8*a>r.available())throw new B;const h=new Uint8Array(a);for(let y=0;y<a;y++)h[y]=r.readBits(8);let p;c===null?p=Q.guessEncoding(h,d):p=c.getName();try{s.append(re.decode(h,p))}catch(y){throw new B(y)}u.push(h)}static toAlphaNumericChar(r){if(r>=vt.ALPHANUMERIC_CHARS.length)throw new B;return vt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new B;const d=r.readBits(11);s.append(vt.toAlphaNumericChar(Math.floor(d/45))),s.append(vt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(r.available()<6)throw new B;s.append(vt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new B;const c=r.readBits(10);if(c>=1e3)throw new B;s.append(vt.toAlphaNumericChar(Math.floor(c/100))),s.append(vt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(vt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new B;const c=r.readBits(7);if(c>=100)throw new B;s.append(vt.toAlphaNumericChar(Math.floor(c/10))),s.append(vt.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new B;const c=r.readBits(4);if(c>=10)throw new B;s.append(vt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new B}}vt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",vt.GB2312_SUBSET=1;class Th{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class hw{constructor(){this.rsDecoder=new Ne(Se.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Re.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new fw(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new Th(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=mu.getDataBlocks(u,a,c);let h=0;for(const E of d)h+=E.getNumDataCodewords();const p=new Uint8Array(h);let y=0;for(const E of d){const C=E.getCodewords(),S=E.getNumDataCodewords();this.correctErrors(C,S);for(let D=0;D<S;D++)p[y++]=C[D]}return vt.decode(p,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new T}for(let c=0;c<s;c++)r[c]=a[c]}}class xu extends me{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+a)/2;return new xu(c,u,d)}}class Ya{constructor(r,s,a,c,u,d,h){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let p=0;p<s;p++){const y=u+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=r;for(;E<c&&!h.get(E,y);)E++;let C=0;for(;E<c;){if(h.get(E,y))if(C===1)d[1]++;else if(C===2){if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,y,E);if(S!==null)return S}d[0]=d[2],d[1]=1,d[2]=0,C=1}else d[++C]++;else C===1&&C++,d[C]++;E++}if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,y,c);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let p=r;for(;p>=0&&u.get(s,p)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&!u.get(s,p)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(s,p)&&h[1]<=a;)h[1]++,p++;if(p===d||h[1]>a)return NaN;for(;p<d&&!u.get(s,p)&&h[2]<=a;)h[2]++,p++;if(h[2]>a)return NaN;const y=h[0]+h[1]+h[2];return 5*Math.abs(y-c)>=2*c?NaN:this.foundPatternCross(h)?Ya.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Ya.centerFromEnd(r,a),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(h,d,u))return y.combineEstimate(d,u,h);const p=new xu(u,d,h);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class wu extends me{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+a)/c;return new wu(u,d,h,c)}}class gw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class $t{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(z.TRY_HARDER)!==void 0,a=r!=null&&r.get(z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*$t.MAX_MODULES));(h<$t.MIN_SKIP||s)&&(h=$t.MIN_SKIP);let p=!1;const y=new Int32Array(5);for(let C=h-1;C<u&&!p;C+=h){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let S=0;for(let D=0;D<d;D++)if(c.get(D,C))(S&1)===1&&S++,y[S]++;else if(S&1)y[S]++;else if(S===4)if($t.foundPatternCross(y)){if(this.handlePossibleCenter(y,C,D,a)===!0)if(h=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const U=this.findRowSkip();U>y[2]&&(C+=U-y[2]-h,D=d-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,S=3;continue}S=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,S=3;else y[++S]++;$t.foundPatternCross(y)&&this.handlePossibleCenter(y,C,d,a)===!0&&(h=y[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return me.orderBestPatterns(E),new gw(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=a;)u[1]++,d++;if(r<d||s<d||u[1]>a)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const p=h.getHeight(),y=h.getWidth();for(d=1;r+d<p&&s+d<y&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=p||s+d>=y)return!1;for(;r+d<p&&s+d<y&&!h.get(s+d,r+d)&&u[3]<a;)u[3]++,d++;if(r+d>=p||s+d>=y||u[3]>=a)return!1;for(;r+d<p&&s+d<y&&h.get(s+d,r+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-c)<2*c&&$t.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(s,p);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(s,p)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&u.get(s,p)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(s,p);)h[2]++,p++;if(p===d)return NaN;for(;p<d&&!u.get(s,p)&&h[3]<a;)h[3]++,p++;if(p===d||h[3]>=a)return NaN;for(;p<d&&u.get(s,p)&&h[4]<a;)h[4]++,p++;if(h[4]>=a)return NaN;const y=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(y-c)>=2*c?NaN:$t.foundPatternCross(h)?$t.centerFromEnd(h,p):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(p,s);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(p,s)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&u.get(p,s)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=r+1;p<d&&u.get(p,s);)h[2]++,p++;if(p===d)return NaN;for(;p<d&&!u.get(p,s)&&h[3]<a;)h[3]++,p++;if(p===d||h[3]>=a)return NaN;for(;p<d&&u.get(p,s)&&h[4]<a;)h[4]++,p++;if(h[4]>=a)return NaN;const y=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(y-c)>=c?NaN:$t.foundPatternCross(h)?$t.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=$t.centerFromEnd(r,a),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const p=u/7;let y=!1;const E=this.possibleCenters;for(let C=0,S=E.length;C<S;C++){const D=E[C];if(D.aboutEquals(p,h,d)){E[C]=D.combineEstimate(h,d,p),y=!0;break}}if(!y){const C=new wu(d,h,p);E.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=$t.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=$t.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new K;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const p of this.possibleCenters){const y=p.getEstimatedModuleSize();c+=y,u+=y*y}a=c/r;let d=Math.sqrt(u/r-a*a);s.sort((p,y)=>{const E=Math.abs(y.getEstimatedModuleSize()-a),C=Math.abs(p.getEstimatedModuleSize()-a);return E<C?-1:E>C?1:0});const h=Math.max(.2*a,d);for(let p=0;p<s.length&&s.length>3;p++){const y=s[p];Math.abs(y.getEstimatedModuleSize()-a)>h&&(s.splice(p,1),p--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-a),p=Math.abs(u.getEstimatedModuleSize()-a);return h<p?1:h>p?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}$t.CENTER_QUORUM=2,$t.MIN_SKIP=3,$t.MAX_MODULES=57;class yo{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(z.NEED_RESULT_POINT_CALLBACK);const a=new $t(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new K("No pattern found in proccess finder.");const d=yo.computeDimension(s,a,c,u),h=Ce.getProvisionalVersionForDimension(d),p=h.getDimensionForVersion()-7;let y=null;if(h.getAlignmentPatternCenters().length>0){const D=a.getX()-s.getX()+c.getX(),j=a.getY()-s.getY()+c.getY(),U=1-3/p,V=Math.floor(s.getX()+U*(D-s.getX())),Y=Math.floor(s.getY()+U*(j-s.getY()));for(let se=4;se<=16;se<<=1)try{y=this.findAlignmentInRegion(u,V,Y,se);break}catch(oe){if(!(oe instanceof K))throw oe}}const E=yo.createTransform(s,a,c,y,d),C=yo.sampleGrid(this.image,E,d);let S;return y===null?S=[c,s,a]:S=[c,s,a,y],new cn(C,S)}static createTransform(r,s,a,c,u){const d=u-3.5;let h,p,y,E;return c!==null?(h=c.getX(),p=c.getY(),y=d-3,E=y):(h=s.getX()-r.getX()+a.getX(),p=s.getY()-r.getY()+a.getY(),y=d,E=d),Je.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,y,E,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,p,a.getX(),a.getY())}static sampleGrid(r,s,a){return Ft.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=ve.round(me.distance(r,s)/c),d=ve.round(me.distance(r,a)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new K("Dimensions could be not found.")}return h}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),d=1,h=r-(a-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let p=Math.floor(s-(c-s)*d);return d=1,p<0?(d=s/(s-p),p=0):p>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,p),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let D=r;r=s,s=D,D=a,a=c,c=D}const d=Math.abs(a-r),h=Math.abs(c-s);let p=-d/2;const y=r<a?1:-1,E=s<c?1:-1;let C=0;const S=a+y;for(let D=r,j=s;D!==S;D+=y){const U=u?j:D,V=u?D:j;if(C===1===this.image.get(U,V)){if(C===2)return ve.distance(D,j,r,s);C++}if(p+=h,p>0){if(j===c)break;j+=E,p-=d}}return C===2?ve.distance(a+y,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new K("Alignment top exceeds estimated module size.");const p=Math.max(0,a-u),y=Math.min(this.image.getHeight()-1,a+u);if(y-p<r*3)throw new K("Alignment bottom exceeds estimated module size.");return new Ya(this.image,d,p,h-d,y-p,r,this.resultPointCallback).find()}}class Gr{constructor(){this.decoder=new hw}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(z.PURE_BARCODE)!==void 0){const p=Gr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(p,s),c=Gr.NO_POINTS}else{const p=new yo(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(p.getBits(),s),c=p.getPoints()}a.getOther()instanceof Th&&a.getOther().applyMirroredCorrection(c);const u=new Oe(a.getText(),a.getRawBytes(),void 0,c,de.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(_e.BYTE_SEGMENTS,d);const h=a.getECLevel();return h!==null&&u.putMetadata(_e.ERROR_CORRECTION_LEVEL,h),a.hasStructuredAppend()&&(u.putMetadata(_e.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(_e.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new K;const c=this.moduleSize(s,r);let u=s[1],d=a[1],h=s[0],p=a[0];if(h>=p||u>=d)throw new K;if(d-u!==p-h&&(p=h+(d-u),p>=r.getWidth()))throw new K;const y=Math.round((p-h+1)/c),E=Math.round((d-u+1)/c);if(y<=0||E<=0)throw new K;if(E!==y)throw new K;const C=Math.floor(c/2);u+=C,h+=C;const S=h+Math.floor((y-1)*c)-p;if(S>0){if(S>C)throw new K;h-=S}const D=u+Math.floor((E-1)*c)-d;if(D>0){if(D>C)throw new K;u-=D}const j=new Re(y,E);for(let U=0;U<E;U++){const V=u+Math.floor(U*c);for(let Y=0;Y<y;Y++)r.get(h+Math.floor(Y*c),V)&&j.set(Y,U)}return j}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,p=0;for(;u<c&&d<a;){if(h!==s.get(u,d)){if(++p===5)break;h=!h}u++,d++}if(u===c||d===a)throw new K;return(u-r[0])/7}}Gr.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(r){return ve.sum(r)}static toIntArray(r){if(r==null||!r.length)return ke.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=I.binarySearch(ke.SYMBOL_TABLE,r&262143);return s<0?-1:(ke.CODEWORD_TABLE[s]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class pw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Be{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=Be.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Be.detect(a,c)),new pw(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=Be.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const p of a)p[1]!=null&&(c=Math.trunc(Math.max(c,p[1].getY()))),p[3]!=null&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=Be.ROW_STEP;continue}if(d=!0,a.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return Be.copyToResult(d,Be.findRowsWithPattern(r,c,u,s,a,Be.START_PATTERN),Be.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),Be.copyToResult(d,Be.findRowsWithPattern(r,c,u,s,a,Be.STOP_PATTERN),Be.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,d){const h=new Array(4);let p=!1;const y=new Int32Array(d.length);for(;c<s;c+=Be.ROW_STEP){let C=Be.findGuardPattern(r,u,c,a,!1,d,y);if(C!=null){for(;c>0;){const S=Be.findGuardPattern(r,u,--c,a,!1,d,y);if(S!=null)C=S;else{c++;break}}h[0]=new me(C[0],c),h[1]=new me(C[1],c),p=!0;break}}let E=c+1;if(p){let C=0,S=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;E<s;E++){const D=Be.findGuardPattern(r,S[0],E,a,!1,d,y);if(D!=null&&Math.abs(S[0]-D[0])<Be.MAX_PATTERN_DRIFT&&Math.abs(S[1]-D[1])<Be.MAX_PATTERN_DRIFT)S=D,C=0;else{if(C>Be.SKIPPED_ROW_COUNT_MAX)break;C++}}E-=C+1,h[2]=new me(S[0],E),h[3]=new me(S[1],E)}return E-c<Be.BARCODE_MIN_HEIGHT&&I.fill(h,null),h}static findGuardPattern(r,s,a,c,u,d,h){I.fillWithin(h,0,h.length,0);let p=s,y=0;for(;r.get(p,a)&&p>0&&y++<Be.MAX_PIXEL_DRIFT;)p--;let E=p,C=0,S=d.length;for(let D=u;E<c;E++)if(r.get(E,a)!==D)h[C]++;else{if(C===S-1){if(Be.patternMatchVariance(h,d,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return new Int32Array([p,E]);p+=h[0]+h[1],M.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,D=!D}return C===S-1&&Be.patternMatchVariance(h,d,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE?new Int32Array([p,E-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,d=0;for(let y=0;y<c;y++)u+=r[y],d+=s[y];if(u<d)return 1/0;let h=u/d;a*=h;let p=0;for(let y=0;y<c;y++){let E=r[y],C=s[y]*h,S=E>C?E-C:C-E;if(S>a)return 1/0;p+=S}return p/u}}Be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Be.MAX_AVG_VARIANCE=.42,Be.MAX_INDIVIDUAL_VARIANCE=.8,Be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Be.MAX_PIXEL_DRIFT=3,Be.MAX_PATTERN_DRIFT=5,Be.SKIPPED_ROW_COUNT_MAX=25,Be.ROW_STEP=5,Be.BARCODE_MIN_HEIGHT=10;class Yt{constructor(r,s){if(s.length===0)throw new b;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),M.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let d=s;s=a,a=d}let c=new Int32Array(a.length),u=a.length-s.length;M.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(s[d-u],a[d]);return new Yt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Yt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Yt(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let h=0;h<a;h++){let p=s[h];for(let y=0;y<u;y++)d[h+y]=this.field.add(d[h+y],this.field.multiply(p,c[y]))}return new Yt(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Yt(this.field,s)}multiplyScalar(r){if(r===0)return new Yt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new Yt(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return new Yt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Yt(this.field,c)}toString(){let r=new ae;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class mw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new Qe;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class yu extends mw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Yt(this,new Int32Array([0])),this.one=new Yt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new Yt(this,a)}}yu.PDF417_GF=new yu(ke.NUMBER_OF_CODEWORDS,3);class Ih{constructor(){this.field=yu.PDF417_GF}decode(r,s,a){let c=new Yt(this.field,r),u=new Int32Array(s),d=!1;for(let j=s;j>0;j--){let U=c.evaluateAt(this.field.exp(j));u[s-j]=U,U!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(a!=null)for(const j of a){let U=this.field.exp(r.length-1-j),V=new Yt(this.field,new Int32Array([this.field.subtract(0,U),1]));h=h.multiply(V)}let p=new Yt(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),E=y[0],C=y[1],S=this.findErrorLocations(E),D=this.findErrorMagnitudes(C,E,S);for(let j=0;j<S.length;j++){let U=r.length-1-this.field.log(S[j]);if(U<0)throw T.getChecksumInstance();r[U]=this.field.subtract(r[U],D[j])}return S.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let S=r;r=s,s=S}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let S=c,D=d;if(c=u,d=h,c.isZero())throw T.getChecksumInstance();u=S;let j=this.field.getZero(),U=c.getCoefficient(c.getDegree()),V=this.field.inverse(U);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let Y=u.getDegree()-c.getDegree(),se=this.field.multiply(u.getCoefficient(u.getDegree()),V);j=j.add(this.field.buildMonomial(Y,se)),u=u.subtract(c.multiplyByMonomial(Y,se))}h=j.multiply(d).subtract(D).negative()}let p=h.getCoefficient(0);if(p===0)throw T.getChecksumInstance();let y=this.field.inverse(p),E=h.multiply(y),C=u.multiply(y);return[E,C]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw T.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let y=1;y<=c;y++)u[c-y]=this.field.multiply(y,s.getCoefficient(y));let d=new Yt(this.field,u),h=a.length,p=new Int32Array(h);for(let y=0;y<h;y++){let E=this.field.inverse(a[y]),C=this.field.subtract(0,r.evaluateAt(E)),S=this.field.inverse(d.evaluateAt(E));p[y]=this.field.multiply(C,S)}return p}}class ki{constructor(r,s,a,c,u){r instanceof ki?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const d=s==null||a==null,h=c==null||u==null;if(d&&h)throw new K;d?(s=new me(0,c.getY()),a=new me(0,u.getY())):h&&(c=new me(r.getWidth()-1,s.getY()),u=new me(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new ki(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let p=a?this.topLeft:this.topRight,y=Math.trunc(p.getY()-r);y<0&&(y=0);let E=new me(p.getX(),y);a?c=E:d=E}if(s>0){let p=a?this.bottomLeft:this.bottomRight,y=Math.trunc(p.getY()+s);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let E=new me(p.getX(),y);a?u=E:h=E}return new ki(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class xw{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class vo{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(d,h,p,y,E,C){if(d==="%%")return"%";if(s[++a]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let S=E?parseInt(E.substr(1)):void 0,D;switch(C){case"s":D=s[a];break;case"c":D=s[a][0];break;case"f":D=parseFloat(s[a]).toFixed(d);break;case"p":D=parseFloat(s[a]).toPrecision(d);break;case"e":D=parseFloat(s[a]).toExponential(d);break;case"x":D=parseInt(s[a]).toString(S||16);break;case"d":D=parseFloat(parseInt(s[a],S||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(S);let j=parseInt(p),U=p&&p[0]+""=="0"?"0":" ";for(;D.length<j;)D=h!==void 0?D+U:U+D;return D}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=vo.form(r,s)}toString(){return this.buffer}}class Eo{constructor(r){this.boundingBox=new ki(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<Eo.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new vo;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}Eo.MAX_NEARBY_DISTANCE=5;class bo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return ke.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Nh extends Eo{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=-1,y=1,E=0;for(let C=d;C<h;C++){if(s[C]==null)continue;let S=s[C],D=S.getRowNumber()-p;if(D===0)E++;else if(D===1)y=Math.max(y,E),E=1,p=S.getRowNumber();else if(D<0||S.getRowNumber()>=r.getRowCount()||D>C)s[C]=null;else{let j;y>2?j=(y-2)*D:j=D;let U=j>=C;for(let V=1;V<=j&&!U;V++)U=s[C-V]!=null;U?s[C]=null:(p=S.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),p=-1;for(let y=u;y<d;y++){if(h[y]==null)continue;let E=h[y];E.setRowNumberAsRowIndicatorColumn();let C=E.getRowNumber()-p;C===0||(C===1?p=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?h[y]=null:p=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new bo,a=new bo,c=new bo,u=new bo;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let p=h.getValue()%30,y=h.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:a.setValue(p*3+1);break;case 1:u.setValue(p/3),c.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let d=new xw(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class _o{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ke.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=_o.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=_o.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=a[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=a[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<a.length-1&&(h[1]=a[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<a.length-2&&(h[9]=a[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let p of h)if(_o.adjustRowNumber(c,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new vo;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class Co{constructor(r,s,a,c){this.rowNumber=Co.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Co.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Co.BARCODE_ROW_UNKNOWN=-1;class yn{static initialize(){for(let r=0;r<ke.SYMBOL_TABLE.length;r++){let s=ke.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<ke.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,yn.RATIOS_TABLE[r]||(yn.RATIOS_TABLE[r]=new Array(ke.BARS_IN_MODULE)),yn.RATIOS_TABLE[r][ke.BARS_IN_MODULE-c-1]=Math.fround(u/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=yn.getDecodedCodewordValue(yn.sampleBitCounts(r));return s!==-1?s:yn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ve.sum(r),a=new Int32Array(ke.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<ke.MODULES_IN_CODEWORD;d++){let h=s/(2*ke.MODULES_IN_CODEWORD)+d*s/ke.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=yn.getBitValue(r);return ke.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ve.sum(r),a=new Array(ke.BARS_IN_MODULE);if(s>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(r[d]/s);let c=ln.MAX_VALUE,u=-1;this.bSymbolTableReady||yn.initialize();for(let d=0;d<yn.RATIOS_TABLE.length;d++){let h=0,p=yn.RATIOS_TABLE[d];for(let y=0;y<ke.BARS_IN_MODULE;y++){let E=Math.fround(p[y]-a[y]);if(h+=Math.fround(E*E),h>=c)break}h<c&&(c=h,u=ke.SYMBOL_TABLE[d])}return u}}yn.bSymbolTableReady=!1,yn.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(_=>new Array(ke.BARS_IN_MODULE));class kh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Oh{static parseLong(r,s=void 0){return parseInt(r,s)}}class Rh extends w{}Rh.kind="NullPointerException";class ww{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Rh;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new H;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class yw extends w{}class vw extends ww{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new yw;a=N.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new H;this.ensureCapacity(this.count+a),M.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var rt;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(rt||(rt={}));function Ph(){if(typeof window<"u")return window.BigInt||null;if(typeof Gt<"u")return Gt.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ka;function Xr(_){if(typeof Ka>"u"&&(Ka=Ph()),Ka===null)throw new Error("BigInt is not supported!");return Ka(_)}function Ew(){let _=[];_[0]=Xr(1);let r=Xr(900);_[1]=r;for(let s=2;s<16;s++)_[s]=_[s-1]*r;return _}class q{static decode(r,s){let a=new ae(""),c=R.ISO8859_1;a.enableDecoding(c);let u=1,d=r[u++],h=new kh;for(;u<r[0];){switch(d){case q.TEXT_COMPACTION_MODE_LATCH:u=q.textCompaction(r,u,a);break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:u=q.byteCompaction(d,r,c,u,a);break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case q.NUMERIC_COMPACTION_MODE_LATCH:u=q.numericCompaction(r,u,a);break;case q.ECI_CHARSET:R.getCharacterSetECIByValue(r[u++]);break;case q.ECI_GENERAL_PURPOSE:u+=2;break;case q.ECI_USER_DEFINED:u++;break;case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=q.decodeMacroBlock(r,u,h);break;case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:throw new B;default:u--,u=q.textCompaction(r,u,a);break}if(u<r.length)d=r[u++];else throw B.getFormatInstance()}if(a.length()===0)throw B.getFormatInstance();let p=new Le(null,a.toString(),null,s);return p.setOther(h),p}static decodeMacroBlock(r,s,a){if(s+q.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw B.getFormatInstance();let c=new Int32Array(q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<q.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];a.setSegmentIndex(N.parseInt(q.decodeBase900toBase10(c,q.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ae;s=q.textCompaction(r,s,u),a.setFileId(u.toString());let d=-1;for(r[s]===q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ae;s=q.textCompaction(r,s+1,h),a.setFileName(h.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new ae;s=q.textCompaction(r,s+1,p),a.setSender(p.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new ae;s=q.textCompaction(r,s+1,y),a.setAddressee(y.toString());break;case q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ae;s=q.numericCompaction(r,s+1,E),a.setSegmentCount(N.parseInt(E.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new ae;s=q.numericCompaction(r,s+1,C),a.setTimestamp(Oh.parseLong(C.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new ae;s=q.numericCompaction(r,s+1,S),a.setChecksum(N.parseInt(S.toString()));break;case q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new ae;s=q.numericCompaction(r,s+1,D),a.setFileSize(Oh.parseLong(D.toString()));break;default:throw B.getFormatInstance()}break;case q.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(d!==-1){let h=s-d;a.isLastSegment()&&h--,a.setOptionalData(I.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let p=r[s++];if(p<q.TEXT_COMPACTION_MODE_LATCH)c[d]=p/30,c[d+1]=p%30,d+=2;else switch(p){case q.TEXT_COMPACTION_MODE_LATCH:c[d++]=q.TEXT_COMPACTION_MODE_LATCH;break;case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],u[d]=p,d++;break}}return q.decodeTextCompaction(c,u,d,a),s}static decodeTextCompaction(r,s,a,c){let u=rt.ALPHA,d=rt.ALPHA,h=0;for(;h<a;){let p=r[h],y="";switch(u){case rt.ALPHA:if(p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case q.LL:u=rt.LOWER;break;case q.ML:u=rt.MIXED;break;case q.PS:d=u,u=rt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.LOWER:if(p<26)y=String.fromCharCode(97+p);else switch(p){case 26:y=" ";break;case q.AS:d=u,u=rt.ALPHA_SHIFT;break;case q.ML:u=rt.MIXED;break;case q.PS:d=u,u=rt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.MIXED:if(p<q.PL)y=q.MIXED_CHARS[p];else switch(p){case q.PL:u=rt.PUNCT;break;case 26:y=" ";break;case q.LL:u=rt.LOWER;break;case q.AL:u=rt.ALPHA;break;case q.PS:d=u,u=rt.PUNCT_SHIFT;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.PUNCT:if(p<q.PAL)y=q.PUNCT_CHARS[p];else switch(p){case q.PAL:u=rt.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.ALPHA_SHIFT:if(u=d,p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.PUNCT_SHIFT:if(u=d,p<q.PAL)y=q.PUNCT_CHARS[p];else switch(p){case q.PAL:u=rt.ALPHA;break;case q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case q.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break}y!==""&&c.append(y),h++}}static byteCompaction(r,s,a,c,u){let d=new vw,h=0,p=0,y=!1;switch(r){case q.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),C=s[c++];for(;c<s[0]&&!y;)switch(E[h++]=C,p=900*p+C,C=s[c++],C){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,y=!0;break;default:if(h%5===0&&h>0){for(let S=0;S<6;++S)d.write(Number(Xr(p)>>Xr(8*(5-S))));p=0,h=0}break}c===s[0]&&C<q.TEXT_COMPACTION_MODE_LATCH&&(E[h++]=C);for(let S=0;S<h;S++)d.write(E[S]);break;case q.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!y;){let S=s[c++];if(S<q.TEXT_COMPACTION_MODE_LATCH)h++,p=900*p+S;else switch(S){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.NUMERIC_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:c--,y=!0;break}if(h%5===0&&h>0){for(let D=0;D<6;++D)d.write(Number(Xr(p)>>Xr(8*(5-D))));p=0,h=0}}break}return u.append(re.decode(d.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,d=new Int32Array(q.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<q.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case q.TEXT_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH:case q.BYTE_COMPACTION_MODE_LATCH_6:case q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case q.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%q.MAX_NUMERIC_CODEWORDS===0||h===q.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(q.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=Xr(0);for(let u=0;u<s;u++)a+=q.EXP900[s-u-1]*Xr(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new B;return c.substring(1)}}q.TEXT_COMPACTION_MODE_LATCH=900,q.BYTE_COMPACTION_MODE_LATCH=901,q.NUMERIC_COMPACTION_MODE_LATCH=902,q.BYTE_COMPACTION_MODE_LATCH_6=924,q.ECI_USER_DEFINED=925,q.ECI_GENERAL_PURPOSE=926,q.ECI_CHARSET=927,q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,q.MACRO_PDF417_TERMINATOR=922,q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,q.MAX_NUMERIC_CODEWORDS=15,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,q.PL=25,q.LL=27,q.AS=27,q.ML=28,q.AL=28,q.PS=29,q.PAL=29,q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",q.EXP900=Ph()?Ew():[],q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class je{constructor(){}static decode(r,s,a,c,u,d,h){let p=new ki(r,s,a,c,u),y=null,E=null,C;for(let j=!0;;j=!1){if(s!=null&&(y=je.getRowIndicatorColumn(r,p,s,!0,d,h)),c!=null&&(E=je.getRowIndicatorColumn(r,p,c,!1,d,h)),C=je.merge(y,E),C==null)throw K.getNotFoundInstance();let U=C.getBoundingBox();if(j&&U!=null&&(U.getMinY()<p.getMinY()||U.getMaxY()>p.getMaxY()))p=U;else break}C.setBoundingBox(p);let S=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,y),C.setDetectionResultColumn(S,E);let D=y!=null;for(let j=1;j<=S;j++){let U=D?j:S-j;if(C.getDetectionResultColumn(U)!==void 0)continue;let V;U===0||U===S?V=new Nh(p,U===0):V=new Eo(p),C.setDetectionResultColumn(U,V);let Y=-1,se=Y;for(let oe=p.getMinY();oe<=p.getMaxY();oe++){if(Y=je.getStartColumn(C,U,oe,D),Y<0||Y>p.getMaxX()){if(se===-1)continue;Y=se}let ee=je.detectCodeword(r,p.getMinX(),p.getMaxX(),D,Y,oe,d,h);ee!=null&&(V.setCodeword(oe,ee),se=Y,d=Math.min(d,ee.getWidth()),h=Math.max(h,ee.getWidth()))}}return je.createDecoderResult(C)}static merge(r,s){if(r==null&&s==null)return null;let a=je.getBarcodeMetadata(r,s);if(a==null)return null;let c=ki.merge(je.adjustBoundingBox(r),je.adjustBoundingBox(s));return new _o(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=je.getMax(s),c=0;for(let h of s)if(c+=a-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=a-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,d){let h=new Nh(s,c);for(let p=0;p<2;p++){let y=p===0?1:-1,E=Math.trunc(Math.trunc(a.getX()));for(let C=Math.trunc(Math.trunc(a.getY()));C<=s.getMaxY()&&C>=s.getMinY();C+=y){let S=je.detectCodeword(r,0,r.getWidth(),c,E,C,u,d);S!=null&&(h.setCodeword(C,S),c?E=S.getStartX():E=S.getEndX())}}return h}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-je.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>ke.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=je.createBarcodeMatrix(r);je.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let y=0;y<r.getBarcodeColumnCount();y++){let E=s[p][y+1].getValue(),C=p*r.getBarcodeColumnCount()+y;E.length===0?a.push(C):E.length===1?c[C]=E[0]:(d.push(C),u.push(E))}let h=new Array(u.length);for(let p=0;p<h.length;p++)h[p]=u[p];return je.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,ke.toIntArray(a),ke.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let p=0;p<d.length;p++)s[c[p]]=u[p][d[p]];try{return je.decodeCodewords(s,r,a)}catch(p){if(!(p instanceof T))throw p}if(d.length===0)throw T.getChecksumInstance();for(let p=0;p<d.length;p++)if(d[p]<u[p].length-1){d[p]++;break}else if(d[p]=0,p===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new bo;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,d=null;if(je.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(je.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;je.isValidBarcodeColumn(r,s-u);){s-=u;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(c?p.getEndX():p.getStartX())+u*h*(p.getEndX()-p.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,d,h,p){u=je.adjustCodewordStartColumn(r,s,a,c,u,d);let y=je.getModuleBitCount(r,s,a,c,u,d);if(y==null)return null;let E,C=ve.sum(y);if(c)E=u+C;else{for(let j=0;j<y.length/2;j++){let U=y[j];y[j]=y[y.length-1-j],y[y.length-1-j]=U}E=u,u=E-C}if(!je.checkCodewordSkew(C,h,p))return null;let S=yn.getDecodedValue(y),D=ke.getCodeword(S);return D===-1?null:new Co(u,E,je.getCodewordBucketNumber(S),D)}static getModuleBitCount(r,s,a,c,u,d){let h=u,p=new Int32Array(8),y=0,E=c?1:-1,C=c;for(;(c?h<a:h>=s)&&y<p.length;)r.get(h,d)===C?(p[y]++,h+=E):(y++,C=!C);return y===p.length||h===(c?a:s)&&y===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,d){let h=u,p=c?-1:1;for(let y=0;y<2;y++){for(;(c?h>=s:h<a)&&c===r.get(h,d);){if(Math.abs(u-h)>je.CODEWORD_SKEW_SIZE)return u;h+=p}p=-p,c=!c}return h}static checkCodewordSkew(r,s,a){return s-je.CODEWORD_SKEW_SIZE<=r&&r<=a+je.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw B.getFormatInstance();let c=1<<s+1,u=je.correctErrors(r,a,c);je.verifyCodewordCount(r,c);let d=q.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+je.MAX_ERRORS||a<0||a>je.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return je.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw B.getFormatInstance();let a=r[0];if(a>r.length)throw B.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw B.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return je.getCodewordBucketNumber(je.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new vo;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}je.CODEWORD_SKEW_SIZE=2,je.MAX_ERRORS=3,je.MAX_EC_CODEWORDS=512,je.errorCorrection=new Ih;class Kt{decode(r,s=null){let a=Kt.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw K.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return Kt.decode(r,s,!0)}catch(a){throw a instanceof B||a instanceof T?K.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=Be.detectMultiple(r,s,a);for(const d of u.getPoints()){const h=je.decode(u.getBits(),d[4],d[5],d[6],d[7],Kt.getMinCodewordWidth(d),Kt.getMaxCodewordWidth(d)),p=new Oe(h.getText(),h.getRawBytes(),void 0,d,de.PDF_417);p.putMetadata(_e.ERROR_CORRECTION_LEVEL,h.getECLevel());const y=h.getOther();y!=null&&p.putMetadata(_e.PDF417_EXTRA_METADATA,y),c.push(p)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?N.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(r[0],r[4]),Kt.getMaxWidth(r[6],r[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(r[1],r[5]),Kt.getMaxWidth(r[7],r[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Kt.getMinWidth(r[0],r[4]),Kt.getMinWidth(r[6],r[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(r[1],r[5]),Kt.getMinWidth(r[7],r[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class Za extends w{}Za.kind="ReaderException";class Dh{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(z.TRY_HARDER)===!0,a=i(r)?null:r.get(z.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(d=>d===de.UPC_A||d===de.UPC_E||d===de.EAN_13||d===de.EAN_8||d===de.CODABAR||d===de.CODE_39||d===de.CODE_93||d===de.CODE_128||d===de.ITF||d===de.RSS_14||d===de.RSS_EXPANDED);u&&!s&&c.push(new ls(r,this.verbose)),a.includes(de.QR_CODE)&&c.push(new Gr),a.includes(de.DATA_MATRIX)&&c.push(new Wr),a.includes(de.AZTEC)&&c.push(new nr),a.includes(de.PDF_417)&&c.push(new Kt),u&&s&&c.push(new ls(r,this.verbose))}c.length===0&&(s||c.push(new ls(r,this.verbose)),c.push(new Gr),c.push(new Wr),c.push(new nr),c.push(new Kt),s&&c.push(new ls(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Za("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Za)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class bw extends ge{constructor(r=null,s=500){const a=new Dh;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class _w extends ge{constructor(r=500){super(new Kt,r)}}class Cw extends ge{constructor(r=500){super(new Gr,r)}}var vu;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(vu||(vu={}));var Lt=vu;class Eu{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new be(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=a.multiply(new be(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),a=d}}return s[r]}encode(r,s){if(s===0)throw new b("No error correction bytes");const a=r.length-s;if(a<=0)throw new b("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);M.arraycopy(r,0,u,0,a);let d=new be(this.field,u);d=d.multiplyByMonomial(s,1);const p=d.divide(c)[1].getCoefficients(),y=s-p.length;for(let E=0;E<y;E++)r[a+E]=0;M.arraycopy(p,0,r,a+y,p.length)}}class At{constructor(){}static applyMaskPenaltyRule1(r){return At.applyMaskPenaltyRule1Internal(r,!0)+At.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=a[d];for(let p=0;p<c-1;p++){const y=h[p];y===h[p+1]&&y===a[d+1][p]&&y===a[d+1][p+1]&&s++}}return At.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const p=a[d];h+6<c&&p[h]===1&&p[h+1]===0&&p[h+2]===1&&p[h+3]===1&&p[h+4]===1&&p[h+5]===0&&p[h+6]===1&&(At.isWhiteHorizontal(p,h-4,h)||At.isWhiteHorizontal(p,h+7,h+11))&&s++,d+6<u&&a[d][h]===1&&a[d+1][h]===0&&a[d+2][h]===1&&a[d+3][h]===1&&a[d+4][h]===1&&a[d+5][h]===0&&a[d+6][h]===1&&(At.isWhiteVertical(a,h,d-4,d)||At.isWhiteVertical(a,h,d+7,d+11))&&s++}return s*At.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let p=0;p<u;p++){const y=a[p];for(let E=0;E<c;E++)y[E]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*At.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let p=0,y=-1;for(let E=0;E<u;E++){const C=s?d[h][E]:d[E][h];C===y?p++:(p>=5&&(a+=At.N1+(p-5)),p=1,y=C)}p>=5&&(a+=At.N1+(p-5))}return a}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class Qa{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)I.fill(s,r)}equals(r){if(!(r instanceof Qa))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=s.bytes[a];for(let h=0,p=this.width;h<p;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new ae;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ae;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Oi.NUM_MASK_PATTERNS}}Oi.NUM_MASK_PATTERNS=8;class st extends w{}st.kind="WriterException";class Ie{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Ie.clearMatrix(u),Ie.embedBasicPatterns(a,u),Ie.embedTypeInfo(s,c,u),Ie.maybeEmbedVersionInfo(a,u),Ie.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Ie.embedPositionDetectionPatternsAndSeparators(s),Ie.embedDarkDotAtLeftBottomCorner(s),Ie.maybeEmbedPositionAdjustmentPatterns(r,s),Ie.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new F;Ie.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),p=Ie.TYPE_INFO_COORDINATES[u],y=p[0],E=p[1];if(a.setBoolean(y,E,h),u<8){const C=a.getWidth()-u-1;a.setBoolean(C,8,h)}else{const S=a.getHeight()-7+(u-8);a.setBoolean(8,S,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new F;Ie.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,a){let c=0,u=-1,d=a.getWidth()-1,h=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<a.getHeight();){for(let p=0;p<2;++p){const y=d-p;if(!Ie.isEmpty(a.get(y,h)))continue;let E;c<r.getSize()?(E=r.get(c),++c):E=!1,s!==255&&At.getDataMaskBit(s,y,h)&&(E=!E),a.setBoolean(y,h,E)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new st("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-N.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new b("0 polynomial");const a=Ie.findMSBSet(s);for(r<<=a-1;Ie.findMSBSet(r)>=a;)r^=s<<Ie.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Oi.isValidMaskPattern(s))throw new st("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Ie.calculateBCHCode(c,Ie.TYPE_INFO_POLY);a.appendBits(u,10);const d=new F;if(d.appendBits(Ie.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new st("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ie.calculateBCHCode(r.getVersionNumber(),Ie.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new st("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ie.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ie.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new st;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Ie.isEmpty(a.get(r+c,s)))throw new st;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Ie.isEmpty(a.get(r,s+c)))throw new st;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Ie.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Ie.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ie.POSITION_DETECTION_PATTERN[0].length;Ie.embedPositionDetectionPattern(0,0,r),Ie.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ie.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ie.embedHorizontalSeparationPattern(0,a-1,r),Ie.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ie.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Ie.embedVerticalSeparationPattern(c,0,r),Ie.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Ie.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let p=0;p!==d;p++){const y=c[p];y>=0&&Ie.isEmpty(s.get(y,h))&&Ie.embedPositionAdjustmentPattern(y-2,h-2,s)}}}}Ie.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ie.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ie.VERSION_INFO_POLY=7973,Ie.TYPE_INFO_POLY=1335,Ie.TYPE_INFO_MASK_PATTERN=21522;class Sw{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ft{constructor(){}static calculateMaskPenalty(r){return At.applyMaskPenaltyRule1(r)+At.applyMaskPenaltyRule2(r)+At.applyMaskPenaltyRule3(r)+At.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=ft.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Lt.CHARACTER_SET)!==void 0;u&&(c=a.get(Lt.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new F;if(d===Ae.BYTE&&(u||ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const oe=R.getCharacterSetECIByName(c);oe!==void 0&&this.appendECI(oe,h)}this.appendModeInfo(d,h);const p=new F;this.appendBytes(r,d,p,c);let y;if(a!==null&&a.get(Lt.QR_VERSION)!==void 0){const oe=Number.parseInt(a.get(Lt.QR_VERSION).toString(),10);y=Ce.getVersionForNumber(oe);const ee=this.calculateBitsNeeded(d,h,p,y);if(!this.willFit(ee,y,s))throw new st("Data too big for requested version")}else y=this.recommendVersion(s,d,h,p);const E=new F;E.appendBitArray(h);const C=d===Ae.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(C,y,d,E),E.appendBitArray(p);const S=y.getECBlocksForLevel(s),D=y.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,E);const j=this.interleaveWithECBytes(E,y.getTotalCodewords(),D,S.getNumBlocks()),U=new Oi;U.setECLevel(s),U.setMode(d),U.setVersion(y);const V=y.getDimensionForVersion(),Y=new Qa(V,V),se=this.chooseMaskPattern(j,s,y,Y);return U.setMaskPattern(se),Ie.buildMatrix(j,s,y,se,Y),U.setMatrix(Y),U}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,Ce.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,a,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<ft.ALPHANUMERIC_TABLE.length?ft.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(R.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Ae.KANJI;let a=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(ft.isDigit(h))a=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return Ae.BYTE}return c?Ae.ALPHANUMERIC:a?Ae.NUMERIC:Ae.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=re.encode(r,R.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<Oi.NUM_MASK_PATTERNS;h++){Ie.buildMatrix(r,s,a,h,c);let p=this.calculateMaskPenalty(c);p<u&&(u=p,d=h)}return d}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=Ce.getVersionForNumber(a);if(ft.willFit(r,c,s))return c}throw new st("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(a).getTotalECCodewords(),h=c-d,p=(r+7)/8;return h>=p}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new st("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let d=0;d<4&&s.getSize()<a;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==a)throw new st("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,d){if(c>=a)throw new st("Block ID too large");const h=r%a,p=a-h,y=Math.floor(r/a),E=y+1,C=Math.floor(s/a),S=C+1,D=y-C,j=E-S;if(D!==j)throw new st("EC bytes mismatch");if(a!==p+h)throw new st("RS blocks mismatch");if(r!==(C+D)*p+(S+j)*h)throw new st("Total bytes mismatch");c<p?(u[0]=C,d[0]=D):(u[0]=S,d[0]=j)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new st("Number of bits and data bytes does not match");let u=0,d=0,h=0;const p=new Array;for(let E=0;E<c;++E){const C=new Int32Array(1),S=new Int32Array(1);ft.getNumDataBytesAndNumECBytesForBlockID(s,a,c,E,C,S);const D=C[0],j=new Uint8Array(D);r.toBytes(8*u,j,0,D);const U=ft.generateECBytes(j,S[0]);p.push(new Sw(j,U)),d=Math.max(d,D),h=Math.max(h,U.length),u+=C[0]}if(a!==u)throw new st("Data bytes does not match offset");const y=new F;for(let E=0;E<d;++E)for(const C of p){const S=C.getDataBytes();E<S.length&&y.appendBits(S[E],8)}for(let E=0;E<h;++E)for(const C of p){const S=C.getErrorCorrectionBytes();E<S.length&&y.appendBits(S[E],8)}if(s!==y.getSizeInBytes())throw new st("Interleaving error: "+s+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let d=0;d<a;d++)c[d]=r[d]&255;new Eu(Se.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[a+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new st(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case Ae.NUMERIC:ft.appendNumericBytes(r,a);break;case Ae.ALPHANUMERIC:ft.appendAlphanumericBytes(r,a);break;case Ae.BYTE:ft.append8BitBytes(r,a,c);break;case Ae.KANJI:ft.appendKanjiBytes(r,a);break;default:throw new st("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ft.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=ft.getDigit(r.charAt(c));if(c+2<a){const d=ft.getDigit(r.charAt(c+1)),h=ft.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<a){const d=ft.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=ft.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new st;if(c+1<a){const d=ft.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new st;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=re.encode(r,a)}catch(u){throw new st(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let a;try{a=re.encode(r,R.SJIS)}catch(u){throw new st(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,h=a[u+1]&255,p=d<<8&4294967295|h;let y=-1;if(p>=33088&&p<=40956?y=p-33088:p>=57408&&p<=60351&&(y=p-49472),y===-1)throw new st("Invalid byte sequence");const E=(y>>8)*192+(y&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(Ae.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ft.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class Ri{write(r,s,a,c=null){if(r.length===0)throw new b("Found empty contents");if(s<0||a<0)throw new b("Requested dimensions are too small: "+s+"x"+a);let u=ct.L,d=Ri.QUIET_ZONE_SIZE;c!==null&&(c.get(Lt.ERROR_CORRECTION)!==void 0&&(u=ct.fromString(c.get(Lt.ERROR_CORRECTION).toString())),c.get(Lt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Lt.MARGIN).toString(),10)));const h=ft.encode(r,u,c);return this.renderResult(h,s,a,d)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,a,c,u);r&&r.appendChild(d)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Te;const d=u.getWidth(),h=u.getHeight(),p=d+c*2,y=h+c*2,E=Math.max(s,p),C=Math.max(a,y),S=Math.min(Math.floor(E/p),Math.floor(C/y)),D=Math.floor((E-d*S)/2),j=Math.floor((C-h*S)/2),U=this.createSVGElement(E,C);for(let V=0,Y=j;V<h;V++,Y+=S)for(let se=0,oe=D;se<d;se++,oe+=S)if(u.get(se,V)===1){const ee=this.createSvgRectElement(oe,Y,S,S);U.appendChild(ee)}return U}createSVGElement(r,s){const a=document.createElementNS(Ri.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(Ri.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ri.QUIET_ZONE_SIZE=4,Ri.SVG_NS="http://www.w3.org/2000/svg";class us{encode(r,s,a,c,u){if(r.length===0)throw new b("Found empty contents");if(s!==de.QR_CODE)throw new b("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new b(`Requested dimensions are too small: ${a}x${c}`);let d=ct.L,h=us.QUIET_ZONE_SIZE;u!==null&&(u.get(Lt.ERROR_CORRECTION)!==void 0&&(d=ct.fromString(u.get(Lt.ERROR_CORRECTION).toString())),u.get(Lt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Lt.MARGIN).toString(),10)));const p=ft.encode(r,d,u);return us.renderResult(p,a,c,h)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Te;const d=u.getWidth(),h=u.getHeight(),p=d+c*2,y=h+c*2,E=Math.max(s,p),C=Math.max(a,y),S=Math.min(Math.floor(E/p),Math.floor(C/y)),D=Math.floor((E-d*S)/2),j=Math.floor((C-h*S)/2),U=new Re(E,C);for(let V=0,Y=j;V<h;V++,Y+=S)for(let se=0,oe=D;se<d;se++,oe+=S)u.get(se,V)===1&&U.setRegion(oe,Y,S,S);return U}}us.QUIET_ZONE_SIZE=4;class Aw{encode(r,s,a,c,u){let d;switch(s){case de.QR_CODE:d=new us;break;default:throw new b("No encoder available for format "+s)}return d.encode(r,s,a,c,u)}}class xr extends ne{constructor(r,s,a,c,u,d,h,p){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+d>s||u+h>a)throw new b("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;M.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new xr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/xr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/xr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let p=0;p<r;p++){const y=c[u+p*xr.THUMBNAIL_SCALE_FACTOR]&255;a[h+p]=4278190080|y*65793}u+=this.dataWidth*xr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/xr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/xr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,p=u+r-1;h<d;h++,p--){const y=a[h];a[h]=a[p],a[p]=y}}}invert(){return new te(this)}}xr.THUMBNAIL_SCALE_FACTOR=2;class bu extends ne{constructor(r,s,a,c,u,d,h){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const p=s*a,y=new Uint8ClampedArray(p);for(let E=0;E<p;E++){const C=r[E],S=C>>16&255,D=C>>7&510,j=C&255;y[E]=(S+D+j)/4&255}this.luminances=y}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;M.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new bu(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new te(this)}}class Mh extends R{static forName(r){return this.getCharacterSetECIByName(r)}}class _u{}_u.ISO_8859_1=R.ISO8859_1;class Lh{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Bh{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Tw{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ds extends Tw{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ds(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ds(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+N.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Cu extends ds{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new Cu(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Iw(_,r,s){return new Cu(_,r,s)}function So(_,r,s){return new ds(_,r,s)}const Nw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qr=0,Ja=1,Xn=2,jh=3,wr=4,kw=new ds(null,0,0),Su=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ow(_){for(let r of _)I.fill(r,-1);return _[qr][wr]=0,_[Ja][wr]=0,_[Ja][qr]=28,_[jh][wr]=0,_[Xn][wr]=0,_[Xn][qr]=15,_}const Fh=Ow(I.createInt32Array(6,6));class yr{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let d=Su[this.mode][r];c=So(c,d&65535,d>>16),a+=d>>16}let u=r===Xn?4:5;return c=So(c,s,u),new yr(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===Xn?4:5;return a=So(a,Fh[this.mode][r],c),a=So(a,s,5),new yr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===wr||this.mode===Xn){let h=Su[a][qr];s=So(s,h&65535,h>>16),c+=h>>16,a=qr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new yr(s,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Iw(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new yr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Su[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=yr.calculateBinaryShiftCost(r)-yr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new F;for(const c of s)c.appendTo(a,r);return a}toString(){return Q.format("%s bits=%d bytes=%d",Nw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}yr.INITIAL_STATE=new yr(kw,qr,0,0);function Rw(_){const r=Q.getCharCode(" "),s=Q.getCharCode("."),a=Q.getCharCode(",");_[qr][r]=1;const c=Q.getCharCode("Z"),u=Q.getCharCode("A");for(let S=u;S<=c;S++)_[qr][S]=S-u+2;_[Ja][r]=1;const d=Q.getCharCode("z"),h=Q.getCharCode("a");for(let S=h;S<=d;S++)_[Ja][S]=S-h+2;_[Xn][r]=1;const p=Q.getCharCode("9"),y=Q.getCharCode("0");for(let S=y;S<=p;S++)_[Xn][S]=S-y+2;_[Xn][a]=12,_[Xn][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<E.length;S++)_[jh][Q.getCharCode(E[S])]=S;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<C.length;S++)Q.getCharCode(C[S])>0&&(_[wr][Q.getCharCode(C[S])]=S);return _}const Au=Rw(I.createInt32Array(5,256));class Ao{constructor(r){this.text=r}encode(){const r=Q.getCharCode(" "),s=Q.getCharCode(`
`);let a=Bh.singletonList(yr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Q.getCharCode("\r"):d=h===s?2:0;break;case Q.getCharCode("."):d=h===r?3:0;break;case Q.getCharCode(","):d=h===r?4:0;break;case Q.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(a=Ao.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return Bh.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return Ao.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=Au[r.getMode()][c]>0,d=null;for(let h=0;h<=wr;h++){let p=Au[h][c];if(p>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===Xn){const y=d.latchAndAppend(h,p);a.push(y)}if(!u&&Fh[r.getMode()][h]>=0){const y=d.shiftAndAppend(h,p);a.push(y)}}}if(r.getBinaryShiftByteCount()>0||Au[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);a.push(h)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(wr,a)),r.getMode()!==wr&&c.push(u.shiftAndAppend(wr,a)),a===3||a===4){let d=u.latchAndAppend(Xn,16-a).latchAndAppend(Xn,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(a)}return s}}class We{constructor(){}static encodeBytes(r){return We.encode(r,We.DEFAULT_EC_PERCENT,We.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new Ao(r).encode(),u=N.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,p,y,E,C;if(a!==We.DEFAULT_AZTEC_LAYERS){if(h=a<0,p=Math.abs(a),p>(h?We.MAX_NB_BITS_COMPACT:We.MAX_NB_BITS))throw new b(Q.format("Illegal value %s for layers",a));y=We.totalBitsInLayer(p,h),E=We.WORD_SIZE[p];let ee=y-y%E;if(C=We.stuffBits(c,E),C.getSize()+u>ee)throw new b("Data to large for user specified layer");if(h&&C.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,C=null;for(let ee=0;;ee++){if(ee>We.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(h=ee<=3,p=h?ee+1:ee,y=We.totalBitsInLayer(p,h),d>y)continue;(C==null||E!==We.WORD_SIZE[p])&&(E=We.WORD_SIZE[p],C=We.stuffBits(c,E));let ze=y-y%E;if(!(h&&C.getSize()>E*64)&&C.getSize()+u<=ze)break}}let S=We.generateCheckWords(C,y,E),D=C.getSize()/E,j=We.generateModeMessage(h,p,D),U=(h?11:14)+p*4,V=new Int32Array(U),Y;if(h){Y=U;for(let ee=0;ee<V.length;ee++)V[ee]=ee}else{Y=U+1+2*N.truncDivision(N.truncDivision(U,2)-1,15);let ee=N.truncDivision(U,2),ze=N.truncDivision(Y,2);for(let Pe=0;Pe<ee;Pe++){let vn=Pe+N.truncDivision(Pe,15);V[ee-Pe-1]=ze-vn-1,V[ee+Pe]=ze+vn+1}}let se=new Re(Y);for(let ee=0,ze=0;ee<p;ee++){let Pe=(p-ee)*4+(h?9:12);for(let vn=0;vn<Pe;vn++){let ir=vn*2;for(let En=0;En<2;En++)S.get(ze+ir+En)&&se.set(V[ee*2+En],V[ee*2+vn]),S.get(ze+Pe*2+ir+En)&&se.set(V[ee*2+vn],V[U-1-ee*2-En]),S.get(ze+Pe*4+ir+En)&&se.set(V[U-1-ee*2-En],V[U-1-ee*2-vn]),S.get(ze+Pe*6+ir+En)&&se.set(V[U-1-ee*2-vn],V[ee*2+En])}ze+=Pe*8}if(We.drawModeMessage(se,h,Y,j),h)We.drawBullsEye(se,N.truncDivision(Y,2),5);else{We.drawBullsEye(se,N.truncDivision(Y,2),7);for(let ee=0,ze=0;ee<N.truncDivision(U,2)-1;ee+=15,ze+=16)for(let Pe=N.truncDivision(Y,2)&1;Pe<Y;Pe+=2)se.set(N.truncDivision(Y,2)-ze,Pe),se.set(N.truncDivision(Y,2)+ze,Pe),se.set(Pe,N.truncDivision(Y,2)-ze),se.set(Pe,N.truncDivision(Y,2)+ze)}let oe=new Lh;return oe.setCompact(h),oe.setSize(Y),oe.setLayers(p),oe.setCodeWords(D),oe.setMatrix(se),oe}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new F;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=We.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=We.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=N.truncDivision(a,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+N.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new Eu(We.getGF(a)),d=N.truncDivision(s,a),h=We.bitsToWords(r,a,d);u.encode(h,d-c);let p=s%a,y=new F;y.appendBits(0,p);for(const E of Array.from(h))y.appendBits(E,a);return y}static bitsToWords(r,s,a){let c=new Int32Array(a),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let p=0;p<s;p++)h|=r.get(u*s+p)?1<<s-p-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return Se.AZTEC_PARAM;case 6:return Se.AZTEC_DATA_6;case 8:return Se.AZTEC_DATA_8;case 10:return Se.AZTEC_DATA_10;case 12:return Se.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,s){let a=new F,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let p=0;p<s;p++)(d+p>=c||r.get(d+p))&&(h|=1<<s-1-p);(h&u)===u?(a.appendBits(h&u,s),d--):h&u?a.appendBits(h,s):(a.appendBits(h|1,s),d--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}We.DEFAULT_EC_PERCENT=33,We.DEFAULT_AZTEC_LAYERS=0,We.MAX_NB_BITS=32,We.MAX_NB_BITS_COMPACT=4,We.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class el{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let d=_u.ISO_8859_1,h=We.DEFAULT_EC_PERCENT,p=We.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Lt.CHARACTER_SET)&&(d=Mh.forName(u.get(Lt.CHARACTER_SET).toString())),u.has(Lt.ERROR_CORRECTION)&&(h=N.parseInt(u.get(Lt.ERROR_CORRECTION).toString())),u.has(Lt.AZTEC_LAYERS)&&(p=N.parseInt(u.get(Lt.AZTEC_LAYERS).toString()))),el.encodeLayers(r,s,a,c,d,h,p)}static encodeLayers(r,s,a,c,u,d,h){if(s!==de.AZTEC)throw new b("Can only encode AZTEC, but got "+s);let p=We.encode(Q.getBytes(r,u),d,h);return el.renderResult(p,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new Te;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),p=Math.max(a,d),y=Math.min(h/u,p/d),E=(h-u*y)/2,C=(p-d*y)/2,S=new Re(h,p);for(let D=0,j=C;D<d;D++,j+=y)for(let U=0,V=E;U<u;U++,V+=y)c.get(U,D)&&S.setRegion(V,j,y,y);return S}}n.AbstractExpandedDecoder=du,n.ArgumentException=v,n.ArithmeticException=Qe,n.AztecCode=Lh,n.AztecCodeReader=nr,n.AztecCodeWriter=el,n.AztecDecoder=pe,n.AztecDetector=xo,n.AztecDetectorResult=zr,n.AztecEncoder=We,n.AztecHighLevelEncoder=Ao,n.AztecPoint=Pt,n.BarcodeFormat=de,n.Binarizer=L,n.BinaryBitmap=A,n.BitArray=F,n.BitMatrix=Re,n.BitSource=pu,n.BrowserAztecCodeReader=Vn,n.BrowserBarcodeReader=cw,n.BrowserCodeReader=ge,n.BrowserDatamatrixCodeReader=dw,n.BrowserMultiFormatReader=bw,n.BrowserPDF417Reader=_w,n.BrowserQRCodeReader=Cw,n.BrowserQRCodeSvgWriter=Ri,n.CharacterSetECI=R,n.ChecksumException=T,n.Code128Reader=ce,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=Hr,n.DataMatrixReader=Wr,n.DecodeHintType=z,n.DecoderResult=Le,n.DefaultGridSampler=qt,n.DetectorResult=cn,n.EAN13Reader=Ti,n.EncodeHintType=Lt,n.Exception=w,n.FormatException=B,n.GenericGF=Se,n.GenericGFPoly=be,n.GlobalHistogramBinarizer=Fe,n.GridSampler=mn,n.GridSamplerInstance=Ft,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=le,n.ITFReader=it,n.IllegalArgumentException=b,n.IllegalStateException=Te,n.InvertedLuminanceSource=te,n.LuminanceSource=ne,n.MathUtils=ve,n.MultiFormatOneDReader=ls,n.MultiFormatReader=Dh,n.MultiFormatWriter=Aw,n.NotFoundException=K,n.OneDReader=lt,n.PDF417DecodedBitStreamParser=q,n.PDF417DecoderErrorCorrection=Ih,n.PDF417Reader=Kt,n.PDF417ResultMetadata=kh,n.PerspectiveTransform=Je,n.PlanarYUVLuminanceSource=xr,n.QRCodeByteMatrix=Qa,n.QRCodeDataMask=Wn,n.QRCodeDecodedBitStreamParser=vt,n.QRCodeDecoderErrorCorrectionLevel=ct,n.QRCodeDecoderFormatInformation=nn,n.QRCodeEncoder=ft,n.QRCodeEncoderQRCode=Oi,n.QRCodeMaskUtil=At,n.QRCodeMatrixUtil=Ie,n.QRCodeMode=Ae,n.QRCodeReader=Gr,n.QRCodeVersion=Ce,n.QRCodeWriter=us,n.RGBLuminanceSource=bu,n.RSS14Reader=St,n.RSSExpandedReader=J,n.ReaderException=Za,n.ReedSolomonDecoder=Ne,n.ReedSolomonEncoder=Eu,n.ReedSolomonException=Z,n.Result=Oe,n.ResultMetadataType=_e,n.ResultPoint=me,n.StringUtils=Q,n.UnsupportedOperationException=X,n.VideoInputDevice=he,n.WhiteRectangleDetector=at,n.WriterException=st,n.ZXingArrays=I,n.ZXingCharset=Mh,n.ZXingInteger=N,n.ZXingStandardCharsets=_u,n.ZXingStringBuilder=ae,n.ZXingStringEncoding=re,n.ZXingSystem=M,n.createAbstractExpandedDecoder=Ah,Object.defineProperty(n,"__esModule",{value:!0})})})(C0,C0.exports);var gt=C0.exports;const Z_=bc(gt),Q_=tp({__proto__:null,default:Z_},[gt]);var Ig=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,gt.BarcodeFormat.QR_CODE],[we.AZTEC,gt.BarcodeFormat.AZTEC],[we.CODABAR,gt.BarcodeFormat.CODABAR],[we.CODE_39,gt.BarcodeFormat.CODE_39],[we.CODE_93,gt.BarcodeFormat.CODE_93],[we.CODE_128,gt.BarcodeFormat.CODE_128],[we.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,gt.BarcodeFormat.MAXICODE],[we.ITF,gt.BarcodeFormat.ITF],[we.EAN_13,gt.BarcodeFormat.EAN_13],[we.EAN_8,gt.BarcodeFormat.EAN_8],[we.PDF_417,gt.BarcodeFormat.PDF_417],[we.RSS_14,gt.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,gt.BarcodeFormat.UPC_A],[we.UPC_E,gt.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Q_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(gt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new gt.MultiFormatReader(this.verbose,this.hints),i=new gt.HTMLCanvasElementLuminanceSource(e),o=new gt.BinaryBitmap(new gt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:a2.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),J_=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})},eC=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(w){return function(v){return m([w,v])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(v){w=[6,v],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ng=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return J_(this,void 0,void 0,function(){var n,i;return eC(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:a2.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),kg=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})},Og=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(w){return function(v){return m([w,v])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(v){w=[6,v],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},tC=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Ng.isSupported()?(this.primaryDecoder=new Ng(e,i,o),this.secondaryDecoder=new Ig(e,i,o)):this.primaryDecoder=new Ig(e,i,o)}return t.prototype.decodeAsync=function(e){return kg(this,void 0,void 0,function(){var n;return Og(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return kg(this,void 0,void 0,function(){var n,i;return Og(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),jf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),wc=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})},yc=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(w){return function(v){return m([w,v])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(v){w=[6,v],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},c2=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),nC=function(t){jf(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(c2),rC=function(t){jf(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(nC),iC=function(t){jf(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(c2),sC=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new rC(this.track)},t.prototype.torchFeature=function(){return new iC(this.track)},t}(),oC=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return wc(this,void 0,void 0,function(){var l,f;return yc(this,function(g){switch(g.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return wc(this,void 0,void 0,function(){return yc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(g){e.mediaStream.removeTrack(g),g.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new sC(this.getFirstTrackOrFail())},t}(),aC=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return wc(this,void 0,void 0,function(){return yc(this,function(o){return[2,oC.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return wc(this,void 0,void 0,function(){var n,i;return yc(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),Rg=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})},Pg=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(w){return function(v){return m([w,v])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(v){w=[6,v],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},lC=function(){function t(){}return t.failIfNotSupported=function(){return Rg(this,void 0,void 0,function(){return Pg(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Rg(this,void 0,void 0,function(){return Pg(this,function(n){return[2,aC.create(e)]})})},t}(),cC=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function g(v){try{w(i.next(v))}catch(b){f(b)}}function m(v){try{w(i.throw(v))}catch(b){f(b)}}function w(v){v.done?l(v.value):o(v.value).then(g,m)}w((i=i.apply(t,e||[])).next())})},uC=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(w){return function(v){return m([w,v])}}function m(w){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,w[0]&&(n=0)),n;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,o=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(v){w=[6,v],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},dC=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ls.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ls.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return cC(this,void 0,void 0,function(){var e,n,i,o,l,f,g;return uC(this,function(m){switch(m.label){case 0:return e=function(w){for(var v=w.getVideoTracks(),b=0,A=v;b<A.length;b++){var T=A[b];T.enabled=!1,T.stop(),w.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),o=[],l=0,f=i;l<f.length;l++)g=f[l],g.kind==="videoinput"&&o.push({id:g.deviceId,label:g.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],g=0,m=l;g<m.length;g++){var w=m[g];w.kind==="video"&&f.push({id:w.id,label:w.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Tt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Tt||(Tt={}));var fC=function(){function t(){this.state=Tt.NOT_STARTED,this.onGoingTransactionNewState=Tt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Tt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Tt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Tt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Tt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Tt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Tt.UNKNOWN:throw"Transition from unknown is not allowed";case Tt.NOT_STARTED:this.failIfNewStateIs(e,[Tt.PAUSED]);break;case Tt.SCANNING:break;case Tt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),hC=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Tt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Tt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Tt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Tt.PAUSED},t}(),gC=function(){function t(){}return t.create=function(){return new hC(new fC)},t}(),pC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pn=function(t){pC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(q_),mC=function(){function t(e,n){this.logger=n,this.fps=Pn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?l2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Nr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Dg=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new K_(this.verbose),this.qrcode=new tC(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gC.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var g=mC.create(n,this.logger);this.clearElement();var m=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=m,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Pn.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var b=this,A=this.stateManagerProxy.startTransition(Tt.SCANNING);return new Promise(function(T,L){var M=w?g.videoConstraints:b.createVideoConstraints(e);if(!M){A.cancel(),L("videoConstraints should be defined");return}var H={};(!w||g.aspectRatio)&&(H.aspectRatio=g.aspectRatio);var O={onRenderSurfaceReady:function(I,N){b.setupUi(I,N,g),b.isScanning=!0,b.foreverScan(g,i,f)}};lC.failIfNotSupported().then(function(I){I.create(M).then(function(N){return N.render(l.element,H,O).then(function(F){b.renderedCamera=F,A.execute(),T(null)}).catch(function(F){A.cancel(),L(F)})}).catch(function(N){A.cancel(),L(Ls.errorGettingUserMedia(N))})}).catch(function(I){A.cancel(),L(Ls.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Tt.PAUSED),this.showPausedState(),(Nr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Tt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Tt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Pn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Nr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var g=f.width,m=f.height,w=document.getElementById(i.elementId),v=w.clientWidth?w.clientWidth:Pn.DEFAULT_WIDTH,b=Math.max(w.clientHeight?w.clientHeight:m,Pn.FILE_SCAN_MIN_HEIGHT),A=i.computeCanvasDrawConfig(g,m,v,b);if(n){var T=i.createCanvasElement(v,b,"qr-canvas-visible");T.style.display="inline-block",w.appendChild(T);var L=T.getContext("2d");if(!L)throw"Unable to get 2d context from canvas";L.canvas.width=v,L.canvas.height=b,L.drawImage(f,0,0,g,m,A.x,A.y,A.width,A.height)}var M=Pn.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(f.width,A.width),O=Math.max(f.height,A.height),I=H+2*M,N=O+2*M,F=i.createCanvasElement(I,N);w.appendChild(F);var $=F.getContext("2d");if(!$)throw"Unable to get 2d context from canvas";$.canvas.width=I,$.canvas.height=N,$.drawImage(f,0,0,g,m,M,M,H,O);try{i.qrcode.decodeRobustlyAsync(F).then(function(z){o(Tg.createFromQrcodeResult(z))}).catch(l)}catch(z){l("QR code parse error, error = ".concat(z))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return dC.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!l2.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];X_(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Nr(e))return!0;if(!Nr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Nr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Nr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),g=function(w){if(w<Pn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pn.MIN_QR_BOX_SIZE,"px.")},m=function(w){return w>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};g(f.width),g(f.height),f.width=m(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=Nr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:e,height:n},m=f?this.getShadedRegionBounds(e,n,l):g,w=this.createCanvasElement(m.width,m.height),v={willReadFrequently:!0},b=w.getContext("2d",v);b.canvas.width=m.width,b.canvas.height=m.height,this.element.append(w),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=b,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ls.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Tg.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Ls.codeParseError(o);return n(l,Y_.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,w=this.qrRegion.height*g,v=this.qrRegion.x*f,b=this.qrRegion.y*g;this.context.drawImage(l,v,b,m,w,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(T){!T&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){A()})):A()}).catch(function(T){o.logger.logError("Error happend while scanning context",T),A()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(L){if(L in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(L,"'")},g=Object.keys(e);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var w=e.facingMode;if(typeof w=="string"){if(f(w))return{facingMode:w}}else if(typeof w=="object")if(l in w){if(f(w["".concat(l)]))return{facingMode:{exact:w["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof w;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=e.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(l in b)return{deviceId:{exact:b["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var A=typeof b;throw"Invalid type of 'deviceId' = ".concat(A)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var g=e,m=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Pn.BORDER_SHADER_MATCH_COLOR:Pn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Nr(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,g=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Pn.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var m=5,w=40;this.insertShaderBorders(l,w,m,-m,null,0,!0),this.insertShaderBorders(l,w,m,-m,null,0,!1),this.insertShaderBorders(l,w,m,null,-m,0,!0),this.insertShaderBorders(l,w,m,null,-m,0,!1),this.insertShaderBorders(l,m,w+m,-m,null,-m,!0),this.insertShaderBorders(l,m,w+m,null,-m,-m,!0),this.insertShaderBorders(l,m,w+m,-m,null,-m,!1),this.insertShaderBorders(l,m,w+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,g){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Pn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),o!==null&&(m.style.top="".concat(o,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),g?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Mg;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Mg||(Mg={}));const ws={supabase:tt.supabase,validateTicket:async t=>await tt.validateTicket(t),tickets:{getAll:async()=>await tt.tickets.getAll(),getByQrCode:async t=>await tt.tickets.getByQrCode(t),create:async t=>await tt.tickets.create(t),update:async(t,e)=>await tt.tickets.update(t,e),delete:async t=>await tt.tickets.delete(t),importBulk:async t=>await tt.tickets.importBulk(t),count:async()=>await tt.tickets.count(),clearAll:async()=>await tt.tickets.clearAll()},scans:{getAll:async()=>await tt.scans.getAll(),record:async t=>await tt.scans.record(t),clearAll:async()=>await tt.scans.clearAll()}};class xC{constructor(){ue.log("TicketDatabase initialized")}async validateTicket(e){try{ue.log("DB: Starting ticket validation for:",e);const n=await ws.tickets.getByQrCode(e);if(!n)return ue.log("DB: Ticket not found"),{valid:!1,message:"Ticket not found"};if(ue.log("DB: Ticket found:",n),n.entriesRemaining===0)return ue.log("DB: No entries remaining"),{valid:!1,message:"No entries remaining - access denied",ticket:n};if(n.entriesRemaining<0)return ue.log("DB: Invalid ticket - negative entries"),{valid:!1,message:"Invalid ticket - negative entries",ticket:n};const i=await ws.tickets.update(e,{entriesRemaining:n.entriesRemaining-1,lastScanned:new Date().toISOString()});return ue.log("DB: Ticket updated successfully:",i),{valid:!0,message:`Access granted - ${i.entriesRemaining} entries remaining`,ticket:i}}catch(n){return ue.error("DB: Error validating ticket:",n),{valid:!1,message:`Error processing scan: ${n.message}`}}}async recordScan(e,n,i){const o={qrCode:e,timestamp:new Date().toISOString(),success:n,message:i};try{ue.log("DB: Recording scan in history"),await ws.scans.record(o),ue.log("DB: Scan recorded successfully")}catch(l){throw ue.error("DB: Error recording scan:",l),new Error(`Could not record scan: ${l.message}`)}}async clearAllData(){try{ue.log("DB: Clearing all data"),await ws.tickets.clearAll(),await ws.scans.clearAll(),ue.log("DB: All data cleared successfully")}catch(e){throw ue.error("DB: Error clearing data:",e),e}}async getTicketsCount(){try{return ue.log("DB: Getting ticket count"),await ws.tickets.count()}catch(e){return ue.error("DB: Error getting ticket count:",e),0}}}const Ta=new xC;var Fa={},wC=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},u2={},zn={};let Ff;const yC=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];zn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};zn.getSymbolTotalCodewords=function(e){return yC[e]};zn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};zn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ff=e};zn.isKanjiModeEnabled=function(){return typeof Ff<"u"};zn.toSJIS=function(e){return Ff(e)};var Xc={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})(Xc);function d2(){this.buffer=[],this.length=0}d2.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var vC=d2;function Ua(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ua.prototype.set=function(t,e,n,i){const o=t*this.size+e;this.data[o]=n,i&&(this.reservedBit[o]=!0)};Ua.prototype.get=function(t,e){return this.data[t*this.size+e]};Ua.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ua.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var EC=Ua,f2={};(function(t){const e=zn.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),f=l===145?26:Math.ceil((l-13)/(2*o-2))*2,g=[l-7];for(let m=1;m<o-1;m++)g[m]=g[m-1]-f;return g.push(6),g.reverse()},t.getPositions=function(i){const o=[],l=t.getRowColCoords(i),f=l.length;for(let g=0;g<f;g++)for(let m=0;m<f;m++)g===0&&m===0||g===0&&m===f-1||g===f-1&&m===0||o.push([l[g],l[m]]);return o}})(f2);var h2={};const bC=zn.getSymbolSize,Lg=7;h2.getPositions=function(e){const n=bC(e);return[[0,0],[n-Lg,0],[0,n-Lg]]};var g2={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const l=o.size;let f=0,g=0,m=0,w=null,v=null;for(let b=0;b<l;b++){g=m=0,w=v=null;for(let A=0;A<l;A++){let T=o.get(b,A);T===w?g++:(g>=5&&(f+=e.N1+(g-5)),w=T,g=1),T=o.get(A,b),T===v?m++:(m>=5&&(f+=e.N1+(m-5)),v=T,m=1)}g>=5&&(f+=e.N1+(g-5)),m>=5&&(f+=e.N1+(m-5))}return f},t.getPenaltyN2=function(o){const l=o.size;let f=0;for(let g=0;g<l-1;g++)for(let m=0;m<l-1;m++){const w=o.get(g,m)+o.get(g,m+1)+o.get(g+1,m)+o.get(g+1,m+1);(w===4||w===0)&&f++}return f*e.N2},t.getPenaltyN3=function(o){const l=o.size;let f=0,g=0,m=0;for(let w=0;w<l;w++){g=m=0;for(let v=0;v<l;v++)g=g<<1&2047|o.get(w,v),v>=10&&(g===1488||g===93)&&f++,m=m<<1&2047|o.get(v,w),v>=10&&(m===1488||m===93)&&f++}return f*e.N3},t.getPenaltyN4=function(o){let l=0;const f=o.data.length;for(let m=0;m<f;m++)l+=o.data[m];return Math.abs(Math.ceil(l*100/f/5)-10)*e.N4};function n(i,o,l){switch(i){case t.Patterns.PATTERN000:return(o+l)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(o+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return o*l%2+o*l%3===0;case t.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case t.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,l){const f=l.size;for(let g=0;g<f;g++)for(let m=0;m<f;m++)l.isReserved(m,g)||l.xor(m,g,n(o,m,g))},t.getBestMask=function(o,l){const f=Object.keys(t.Patterns).length;let g=0,m=1/0;for(let w=0;w<f;w++){l(w),t.applyMask(w,o);const v=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(w,o),v<m&&(m=v,g=w)}return g}})(g2);var qc={};const ai=Xc,_l=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Cl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];qc.getBlocksCount=function(e,n){switch(n){case ai.L:return _l[(e-1)*4+0];case ai.M:return _l[(e-1)*4+1];case ai.Q:return _l[(e-1)*4+2];case ai.H:return _l[(e-1)*4+3];default:return}};qc.getTotalCodewordsCount=function(e,n){switch(n){case ai.L:return Cl[(e-1)*4+0];case ai.M:return Cl[(e-1)*4+1];case ai.Q:return Cl[(e-1)*4+2];case ai.H:return Cl[(e-1)*4+3];default:return}};var p2={},Yc={};const oa=new Uint8Array(512),vc=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)oa[n]=e,vc[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)oa[n]=oa[n-255]})();Yc.log=function(e){if(e<1)throw new Error("log("+e+")");return vc[e]};Yc.exp=function(e){return oa[e]};Yc.mul=function(e,n){return e===0||n===0?0:oa[vc[e]+vc[n]]};(function(t){const e=Yc;t.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let f=0;f<i.length;f++)for(let g=0;g<o.length;g++)l[f+g]^=e.mul(i[f],o[g]);return l},t.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const f=l[0];for(let m=0;m<o.length;m++)l[m]^=e.mul(o[m],f);let g=0;for(;g<l.length&&l[g]===0;)g++;l=l.slice(g)}return l},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=t.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(p2);const m2=p2;function Uf(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Uf.prototype.initialize=function(e){this.degree=e,this.genPoly=m2.generateECPolynomial(this.degree)};Uf.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=m2.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i};var _C=Uf,x2={},Si={},$f={};$f.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ir={};const w2="[0-9]+",CC="[A-Z $%*+\\-./:]+";let Ia="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ia=Ia.replace(/u/g,"\\u");const SC="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ia+`)(?:.|[\r
]))+`;Ir.KANJI=new RegExp(Ia,"g");Ir.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ir.BYTE=new RegExp(SC,"g");Ir.NUMERIC=new RegExp(w2,"g");Ir.ALPHANUMERIC=new RegExp(CC,"g");const AC=new RegExp("^"+Ia+"$"),TC=new RegExp("^"+w2+"$"),IC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ir.testKanji=function(e){return AC.test(e)};Ir.testNumeric=function(e){return TC.test(e)};Ir.testAlphanumeric=function(e){return IC.test(e)};(function(t){const e=$f,n=Ir;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return n.testNumeric(l)?t.NUMERIC:n.testAlphanumeric(l)?t.ALPHANUMERIC:n.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(l,f){if(t.isValid(l))return l;try{return i(l)}catch{return f}}})(Si);(function(t){const e=zn,n=qc,i=Xc,o=Si,l=$f,f=7973,g=e.getBCHDigit(f);function m(A,T,L){for(let M=1;M<=40;M++)if(T<=t.getCapacity(M,L,A))return M}function w(A,T){return o.getCharCountIndicator(A,T)+4}function v(A,T){let L=0;return A.forEach(function(M){const H=w(M.mode,T);L+=H+M.getBitsLength()}),L}function b(A,T){for(let L=1;L<=40;L++)if(v(A,L)<=t.getCapacity(L,T,o.MIXED))return L}t.from=function(T,L){return l.isValid(T)?parseInt(T,10):L},t.getCapacity=function(T,L,M){if(!l.isValid(T))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=o.BYTE);const H=e.getSymbolTotalCodewords(T),O=n.getTotalCodewordsCount(T,L),I=(H-O)*8;if(M===o.MIXED)return I;const N=I-w(M,T);switch(M){case o.NUMERIC:return Math.floor(N/10*3);case o.ALPHANUMERIC:return Math.floor(N/11*2);case o.KANJI:return Math.floor(N/13);case o.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(T,L){let M;const H=i.from(L,i.M);if(Array.isArray(T)){if(T.length>1)return b(T,H);if(T.length===0)return 1;M=T[0]}else M=T;return m(M.mode,M.getLength(),H)},t.getEncodedBits=function(T){if(!l.isValid(T)||T<7)throw new Error("Invalid QR Code version");let L=T<<12;for(;e.getBCHDigit(L)-g>=0;)L^=f<<e.getBCHDigit(L)-g;return T<<12|L}})(x2);var y2={};const S0=zn,v2=1335,NC=21522,Bg=S0.getBCHDigit(v2);y2.getEncodedBits=function(e,n){const i=e.bit<<3|n;let o=i<<10;for(;S0.getBCHDigit(o)-Bg>=0;)o^=v2<<S0.getBCHDigit(o)-Bg;return(i<<10|o)^NC};var E2={};const kC=Si;function eo(t){this.mode=kC.NUMERIC,this.data=t.toString()}eo.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};eo.prototype.getLength=function(){return this.data.length};eo.prototype.getBitsLength=function(){return eo.getBitsLength(this.data.length)};eo.prototype.write=function(e){let n,i,o;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),o=parseInt(i,10),e.put(o,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),o=parseInt(i,10),e.put(o,l*3+1))};var OC=eo;const RC=Si,od=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function to(t){this.mode=RC.ALPHANUMERIC,this.data=t}to.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};to.prototype.getLength=function(){return this.data.length};to.prototype.getBitsLength=function(){return to.getBitsLength(this.data.length)};to.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=od.indexOf(this.data[n])*45;i+=od.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(od.indexOf(this.data[n]),6)};var PC=to;const DC=Si;function no(t){this.mode=DC.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}no.getBitsLength=function(e){return e*8};no.prototype.getLength=function(){return this.data.length};no.prototype.getBitsLength=function(){return no.getBitsLength(this.data.length)};no.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var MC=no;const LC=Si,BC=zn;function ro(t){this.mode=LC.KANJI,this.data=t}ro.getBitsLength=function(e){return e*13};ro.prototype.getLength=function(){return this.data.length};ro.prototype.getBitsLength=function(){return ro.getBitsLength(this.data.length)};ro.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=BC.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var jC=ro,b2={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,o){var l={},f={};f[i]=0;var g=e.PriorityQueue.make();g.push(i,0);for(var m,w,v,b,A,T,L,M,H;!g.empty();){m=g.pop(),w=m.value,b=m.cost,A=n[w]||{};for(v in A)A.hasOwnProperty(v)&&(T=A[v],L=b+T,M=f[v],H=typeof f[v]>"u",(H||M>L)&&(f[v]=L,g.push(v,L),l[v]=w))}if(typeof o<"u"&&typeof f[o]>"u"){var O=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(O)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var o=[],l=i;l;)o.push(l),n[l],l=n[l];return o.reverse(),o},find_path:function(n,i,o){var l=e.single_source_shortest_paths(n,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,o={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=n.sorter||i.default_sorter,o},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var o={value:n,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(b2);var FC=b2.exports;(function(t){const e=Si,n=OC,i=PC,o=MC,l=jC,f=Ir,g=zn,m=FC;function w(O){return unescape(encodeURIComponent(O)).length}function v(O,I,N){const F=[];let $;for(;($=O.exec(N))!==null;)F.push({data:$[0],index:$.index,mode:I,length:$[0].length});return F}function b(O){const I=v(f.NUMERIC,e.NUMERIC,O),N=v(f.ALPHANUMERIC,e.ALPHANUMERIC,O);let F,$;return g.isKanjiModeEnabled()?(F=v(f.BYTE,e.BYTE,O),$=v(f.KANJI,e.KANJI,O)):(F=v(f.BYTE_KANJI,e.BYTE,O),$=[]),I.concat(N,F,$).sort(function(B,P){return B.index-P.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function A(O,I){switch(I){case e.NUMERIC:return n.getBitsLength(O);case e.ALPHANUMERIC:return i.getBitsLength(O);case e.KANJI:return l.getBitsLength(O);case e.BYTE:return o.getBitsLength(O)}}function T(O){return O.reduce(function(I,N){const F=I.length-1>=0?I[I.length-1]:null;return F&&F.mode===N.mode?(I[I.length-1].data+=N.data,I):(I.push(N),I)},[])}function L(O){const I=[];for(let N=0;N<O.length;N++){const F=O[N];switch(F.mode){case e.NUMERIC:I.push([F,{data:F.data,mode:e.ALPHANUMERIC,length:F.length},{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.ALPHANUMERIC:I.push([F,{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.KANJI:I.push([F,{data:F.data,mode:e.BYTE,length:w(F.data)}]);break;case e.BYTE:I.push([{data:F.data,mode:e.BYTE,length:w(F.data)}])}}return I}function M(O,I){const N={},F={start:{}};let $=["start"];for(let z=0;z<O.length;z++){const B=O[z],P=[];for(let R=0;R<B.length;R++){const X=B[R],re=""+z+R;P.push(re),N[re]={node:X,lastCount:0},F[re]={};for(let Q=0;Q<$.length;Q++){const ae=$[Q];N[ae]&&N[ae].node.mode===X.mode?(F[ae][re]=A(N[ae].lastCount+X.length,X.mode)-A(N[ae].lastCount,X.mode),N[ae].lastCount+=X.length):(N[ae]&&(N[ae].lastCount=X.length),F[ae][re]=A(X.length,X.mode)+4+e.getCharCountIndicator(X.mode,I))}}$=P}for(let z=0;z<$.length;z++)F[$[z]].end=0;return{map:F,table:N}}function H(O,I){let N;const F=e.getBestModeForData(O);if(N=e.from(I,F),N!==e.BYTE&&N.bit<F.bit)throw new Error('"'+O+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(F));switch(N===e.KANJI&&!g.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new n(O);case e.ALPHANUMERIC:return new i(O);case e.KANJI:return new l(O);case e.BYTE:return new o(O)}}t.fromArray=function(I){return I.reduce(function(N,F){return typeof F=="string"?N.push(H(F,null)):F.data&&N.push(H(F.data,F.mode)),N},[])},t.fromString=function(I,N){const F=b(I,g.isKanjiModeEnabled()),$=L(F),z=M($,N),B=m.find_path(z.map,"start","end"),P=[];for(let R=1;R<B.length-1;R++)P.push(z.table[B[R]].node);return t.fromArray(T(P))},t.rawSplit=function(I){return t.fromArray(b(I,g.isKanjiModeEnabled()))}})(E2);const Kc=zn,ad=Xc,UC=vC,$C=EC,zC=f2,VC=h2,A0=g2,T0=qc,HC=_C,Ec=x2,WC=y2,GC=Si,ld=E2;function XC(t,e){const n=t.size,i=VC.getPositions(e);for(let o=0;o<i.length;o++){const l=i[o][0],f=i[o][1];for(let g=-1;g<=7;g++)if(!(l+g<=-1||n<=l+g))for(let m=-1;m<=7;m++)f+m<=-1||n<=f+m||(g>=0&&g<=6&&(m===0||m===6)||m>=0&&m<=6&&(g===0||g===6)||g>=2&&g<=4&&m>=2&&m<=4?t.set(l+g,f+m,!0,!0):t.set(l+g,f+m,!1,!0))}}function qC(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function YC(t,e){const n=zC.getPositions(e);for(let i=0;i<n.length;i++){const o=n[i][0],l=n[i][1];for(let f=-2;f<=2;f++)for(let g=-2;g<=2;g++)f===-2||f===2||g===-2||g===2||f===0&&g===0?t.set(o+f,l+g,!0,!0):t.set(o+f,l+g,!1,!0)}}function KC(t,e){const n=t.size,i=Ec.getEncodedBits(e);let o,l,f;for(let g=0;g<18;g++)o=Math.floor(g/3),l=g%3+n-8-3,f=(i>>g&1)===1,t.set(o,l,f,!0),t.set(l,o,f,!0)}function cd(t,e,n){const i=t.size,o=WC.getEncodedBits(e,n);let l,f;for(l=0;l<15;l++)f=(o>>l&1)===1,l<6?t.set(l,8,f,!0):l<8?t.set(l+1,8,f,!0):t.set(i-15+l,8,f,!0),l<8?t.set(8,i-l-1,f,!0):l<9?t.set(8,15-l-1+1,f,!0):t.set(8,15-l-1,f,!0);t.set(i-8,8,1,!0)}function ZC(t,e){const n=t.size;let i=-1,o=n-1,l=7,f=0;for(let g=n-1;g>0;g-=2)for(g===6&&g--;;){for(let m=0;m<2;m++)if(!t.isReserved(o,g-m)){let w=!1;f<e.length&&(w=(e[f]>>>l&1)===1),t.set(o,g-m,w),l--,l===-1&&(f++,l=7)}if(o+=i,o<0||n<=o){o-=i,i=-i;break}}}function QC(t,e,n){const i=new UC;n.forEach(function(m){i.put(m.mode.bit,4),i.put(m.getLength(),GC.getCharCountIndicator(m.mode,t)),m.write(i)});const o=Kc.getSymbolTotalCodewords(t),l=T0.getTotalCodewordsCount(t,e),f=(o-l)*8;for(i.getLengthInBits()+4<=f&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const g=(f-i.getLengthInBits())/8;for(let m=0;m<g;m++)i.put(m%2?17:236,8);return JC(i,t,e)}function JC(t,e,n){const i=Kc.getSymbolTotalCodewords(e),o=T0.getTotalCodewordsCount(e,n),l=i-o,f=T0.getBlocksCount(e,n),g=i%f,m=f-g,w=Math.floor(i/f),v=Math.floor(l/f),b=v+1,A=w-v,T=new HC(A);let L=0;const M=new Array(f),H=new Array(f);let O=0;const I=new Uint8Array(t.buffer);for(let B=0;B<f;B++){const P=B<m?v:b;M[B]=I.slice(L,L+P),H[B]=T.encode(M[B]),L+=P,O=Math.max(O,P)}const N=new Uint8Array(i);let F=0,$,z;for($=0;$<O;$++)for(z=0;z<f;z++)$<M[z].length&&(N[F++]=M[z][$]);for($=0;$<A;$++)for(z=0;z<f;z++)N[F++]=H[z][$];return N}function eS(t,e,n,i){let o;if(Array.isArray(t))o=ld.fromArray(t);else if(typeof t=="string"){let w=e;if(!w){const v=ld.rawSplit(t);w=Ec.getBestVersionForData(v,n)}o=ld.fromString(t,w||40)}else throw new Error("Invalid data");const l=Ec.getBestVersionForData(o,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=l;else if(e<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const f=QC(e,n,o),g=Kc.getSymbolSize(e),m=new $C(g);return XC(m,e),qC(m),YC(m,e),cd(m,n,0),e>=7&&KC(m,e),ZC(m,f),isNaN(i)&&(i=A0.getBestMask(m,cd.bind(null,m,n))),A0.applyMask(i,m),cd(m,n,i),{modules:m,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}u2.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=ad.M,o,l;return typeof n<"u"&&(i=ad.from(n.errorCorrectionLevel,ad.M),o=Ec.from(n.version),l=A0.from(n.maskPattern),n.toSJISFunc&&Kc.setToSJISFunction(n.toSJISFunc)),eS(e,o,i,l)};var _2={},zf={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:l,scale:l?4:f,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const l=t.getScale(i,o);return Math.floor((i+o.margin*2)*l)},t.qrToImageData=function(i,o,l){const f=o.modules.size,g=o.modules.data,m=t.getScale(f,l),w=Math.floor((f+l.margin*2)*m),v=l.margin*m,b=[l.color.light,l.color.dark];for(let A=0;A<w;A++)for(let T=0;T<w;T++){let L=(A*w+T)*4,M=l.color.light;if(A>=v&&T>=v&&A<w-v&&T<w-v){const H=Math.floor((A-v)/m),O=Math.floor((T-v)/m);M=b[g[H*f+O]?1:0]}i[L++]=M.r,i[L++]=M.g,i[L++]=M.b,i[L]=M.a}}})(zf);(function(t){const e=zf;function n(o,l,f){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,f,g){let m=g,w=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(w=i()),m=e.getOptions(m);const v=e.getImageWidth(l.modules.size,m),b=w.getContext("2d"),A=b.createImageData(v,v);return e.qrToImageData(A.data,l,m),n(b,w,v),b.putImageData(A,0,0),w},t.renderToDataURL=function(l,f,g){let m=g;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={});const w=t.render(l,f,m),v=m.type||"image/png",b=m.rendererOpts||{};return w.toDataURL(v,b.quality)}})(_2);var C2={};const tS=zf;function jg(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function ud(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function nS(t,e,n){let i="",o=0,l=!1,f=0;for(let g=0;g<t.length;g++){const m=Math.floor(g%e),w=Math.floor(g/e);!m&&!l&&(l=!0),t[g]?(f++,g>0&&m>0&&t[g-1]||(i+=l?ud("M",m+n,.5+w+n):ud("m",o,0),o=0,l=!1),m+1<e&&t[g+1]||(i+=ud("h",f),f=0)):o++}return i}C2.render=function(e,n,i){const o=tS.getOptions(n),l=e.modules.size,f=e.modules.data,g=l+o.margin*2,m=o.color.light.a?"<path "+jg(o.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",w="<path "+jg(o.color.dark,"stroke")+' d="'+nS(f,l,o.margin)+'"/>',v='viewBox="0 0 '+g+" "+g+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+v+' shape-rendering="crispEdges">'+m+w+`</svg>
`;return typeof i=="function"&&i(null,A),A};const rS=wC,I0=u2,S2=_2,iS=C2;function Vf(t,e,n,i,o){const l=[].slice.call(arguments,1),f=l.length,g=typeof l[f-1]=="function";if(!g&&!rS())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(o=n,n=e,e=i=void 0):f===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=n,n=e,e=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(n=e,e=i=void 0):f===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(m,w){try{const v=I0.create(n,i);m(t(v,e,i))}catch(v){w(v)}})}try{const m=I0.create(n,i);o(null,t(m,e,i))}catch(m){o(m)}}Fa.create=I0.create;Fa.toCanvas=Vf.bind(null,S2.render);Fa.toDataURL=Vf.bind(null,S2.renderToDataURL);Fa.toString=Vf.bind(null,function(t,e,n){return iS.render(t,n)});var Hf={},Zc={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});function sS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var oS=function t(e,n){sS(this,t),this.data=e,this.text=n.text||e,this.options=n};pn.default=oS;Object.defineProperty(Zc,"__esModule",{value:!0});Zc.CODE39=void 0;var aS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),lS=pn,cS=uS(lS);function uS(t){return t&&t.__esModule?t:{default:t}}function dS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var gS=function(t){hS(e,t);function e(n,i){return dS(this,e),n=n.toUpperCase(),i.mod43&&(n+=xS(wS(n))),fS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return aS(e,[{key:"encode",value:function(){for(var i=dd("*"),o=0;o<this.data.length;o++)i+=dd(this.data[o])+"0";return i+=dd("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(cS.default),A2=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],pS=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function dd(t){return mS(T2(t))}function mS(t){return pS[t].toString(2)}function xS(t){return A2[t]}function T2(t){return A2.indexOf(t)}function wS(t){for(var e=0,n=0;n<t.length;n++)e+=T2(t[n]);return e=e%43,e}Zc.CODE39=gS;var Sr={},Wf={},ho={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});var Lo;function fd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I2=mt.SET_A=0,N2=mt.SET_B=1,k2=mt.SET_C=2;mt.SHIFT=98;var yS=mt.START_A=103,vS=mt.START_B=104,ES=mt.START_C=105;mt.MODULO=103;mt.STOP=106;mt.FNC1=207;mt.SET_BY_CODE=(Lo={},fd(Lo,yS,I2),fd(Lo,vS,N2),fd(Lo,ES,k2),Lo);mt.SWAP={101:I2,100:N2,99:k2};mt.A_START_CHAR="";mt.B_START_CHAR="";mt.C_START_CHAR="";mt.A_CHARS="[\0-_-]";mt.B_CHARS="[ --]";mt.C_CHARS="(*[0-9]{2}*)";mt.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(ho,"__esModule",{value:!0});var bS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_S=pn,CS=SS(_S),On=mt;function SS(t){return t&&t.__esModule?t:{default:t}}function AS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function IS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var NS=function(t){IS(e,t);function e(n,i){AS(this,e);var o=TS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(l){return l.charCodeAt(0)}),o}return bS(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,o=i.shift()-105,l=On.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(On.FNC1);var f=e.next(i,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(o)+f.result+e.getBar((f.checksum+o)%On.MODULO)+e.getBar(On.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return On.BARS[i]?On.BARS[i].toString():""}},{key:"correctIndex",value:function(i,o){if(o===On.SET_A){var l=i.shift();return l<32?l+64:l-32}else return o===On.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,o,l){if(!i.length)return{result:"",checksum:0};var f=void 0,g=void 0;if(i[0]>=200){g=i.shift()-105;var m=On.SWAP[g];m!==void 0?f=e.next(i,o+1,m):((l===On.SET_A||l===On.SET_B)&&g===On.SHIFT&&(i[0]=l===On.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),f=e.next(i,o+1,l))}else g=e.correctIndex(i,l),f=e.next(i,o+1,l);var w=e.getBar(g),v=g*o;return{result:w+f.result,checksum:v+f.checksum}}}]),e}(CS.default);ho.default=NS;var Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});var xi=mt,O2=function(e){return e.match(new RegExp("^"+xi.A_CHARS+"*"))[0].length},R2=function(e){return e.match(new RegExp("^"+xi.B_CHARS+"*"))[0].length},P2=function(e){return e.match(new RegExp("^"+xi.C_CHARS+"*"))[0]};function Xf(t,e){var n=e?xi.A_CHARS:xi.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+""+D2(t.substring(i[1].length));var o=t.match(new RegExp("^"+n+"+"))[0];return o.length===t.length?t:o+String.fromCharCode(e?205:206)+Xf(t.substring(o.length),!e)}function D2(t){var e=P2(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var i=O2(t)>=R2(t);return e+String.fromCharCode(i?206:205)+Xf(t,i)}Gf.default=function(t){var e=void 0,n=P2(t).length;if(n>=2)e=xi.C_START_CHAR+D2(t);else{var i=O2(t)>R2(t);e=(i?xi.A_START_CHAR:xi.B_START_CHAR)+Xf(t,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return""+l})};Object.defineProperty(Wf,"__esModule",{value:!0});var kS=ho,OS=M2(kS),RS=Gf,PS=M2(RS);function M2(t){return t&&t.__esModule?t:{default:t}}function DS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function MS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var LS=function(t){MS(e,t);function e(n,i){if(DS(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=hd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,PS.default)(n),i));else var o=hd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return hd(o)}return e}(OS.default);Wf.default=LS;var qf={};Object.defineProperty(qf,"__esModule",{value:!0});var BS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),jS=ho,FS=US(jS),Fg=mt;function US(t){return t&&t.__esModule?t:{default:t}}function $S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function VS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var HS=function(t){VS(e,t);function e(n,i){return $S(this,e),zS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Fg.A_START_CHAR+n,i))}return BS(e,[{key:"valid",value:function(){return new RegExp("^"+Fg.A_CHARS+"+$").test(this.data)}}]),e}(FS.default);qf.default=HS;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});var WS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),GS=ho,XS=qS(GS),Ug=mt;function qS(t){return t&&t.__esModule?t:{default:t}}function YS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KS(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QS=function(t){ZS(e,t);function e(n,i){return YS(this,e),KS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Ug.B_START_CHAR+n,i))}return WS(e,[{key:"valid",value:function(){return new RegExp("^"+Ug.B_CHARS+"+$").test(this.data)}}]),e}(XS.default);Yf.default=QS;var Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});var JS=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),eA=ho,tA=nA(eA),$g=mt;function nA(t){return t&&t.__esModule?t:{default:t}}function rA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oA=function(t){sA(e,t);function e(n,i){return rA(this,e),iA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,$g.C_START_CHAR+n,i))}return JS(e,[{key:"valid",value:function(){return new RegExp("^"+$g.C_CHARS+"+$").test(this.data)}}]),e}(tA.default);Kf.default=oA;Object.defineProperty(Sr,"__esModule",{value:!0});Sr.CODE128C=Sr.CODE128B=Sr.CODE128A=Sr.CODE128=void 0;var aA=Wf,lA=Qc(aA),cA=qf,uA=Qc(cA),dA=Yf,fA=Qc(dA),hA=Kf,gA=Qc(hA);function Qc(t){return t&&t.__esModule?t:{default:t}}Sr.CODE128=lA.default;Sr.CODE128A=uA.default;Sr.CODE128B=fA.default;Sr.CODE128C=gA.default;var Sn={},Zf={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.SIDE_BIN="101";tr.MIDDLE_BIN="01010";tr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};tr.EAN2_STRUCTURE=["LL","LG","GL","GG"];tr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];tr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Jc={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});var pA=tr,mA=function(e,n,i){var o=e.split("").map(function(f,g){return pA.BINARIES[n[g]]}).map(function(f,g){return f?f[e[g]]:""});if(i){var l=e.length-1;o=o.map(function(f,g){return g<l?f+i:f})}return o.join("")};ns.default=mA;Object.defineProperty(Jc,"__esModule",{value:!0});var xA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ys=tr,wA=ns,zg=L2(wA),yA=pn,vA=L2(yA);function L2(t){return t&&t.__esModule?t:{default:t}}function EA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _A(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var CA=function(t){_A(e,t);function e(n,i){EA(this,e);var o=bA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return xA(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,o){return this.text.substr(i,o)}},{key:"leftEncode",value:function(i,o){return(0,zg.default)(i,o)}},{key:"rightText",value:function(i,o){return this.text.substr(i,o)}},{key:"rightEncode",value:function(i,o){return(0,zg.default)(i,o)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:ys.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:i},{data:ys.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:i},{data:ys.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var i=[ys.SIDE_BIN,this.leftEncode(),ys.MIDDLE_BIN,this.rightEncode(),ys.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(vA.default);Jc.default=CA;Object.defineProperty(Zf,"__esModule",{value:!0});var SA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Bo=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}else{if("value"in o)return o.value;var f=o.get;return f===void 0?void 0:f.call(i)}},AA=tr,TA=Jc,IA=NA(TA);function NA(t){return t&&t.__esModule?t:{default:t}}function kA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function RA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vg=function(e){var n=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*3:i+o},0);return(10-n%10)%10},PA=function(t){RA(e,t);function e(n,i){kA(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=Vg(n));var o=OA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return SA(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===Vg(this.data)}},{key:"leftText",value:function(){return Bo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),o=AA.EAN13_STRUCTURE[this.data[0]];return Bo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,o)}},{key:"rightText",value:function(){return Bo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return Bo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=Bo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(IA.default);Zf.default=PA;var Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});var DA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Sl=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}else{if("value"in o)return o.value;var f=o.get;return f===void 0?void 0:f.call(i)}},MA=Jc,LA=BA(MA);function BA(t){return t&&t.__esModule?t:{default:t}}function jA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function UA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Hg=function(e){var n=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o:i+o*3},0);return(10-n%10)%10},$A=function(t){UA(e,t);function e(n,i){return jA(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=Hg(n)),FA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return DA(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Hg(this.data)}},{key:"leftText",value:function(){return Sl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return Sl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return Sl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return Sl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(LA.default);Qf.default=$A;var Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});var zA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),VA=tr,HA=ns,WA=B2(HA),GA=pn,XA=B2(GA);function B2(t){return t&&t.__esModule?t:{default:t}}function qA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YA(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ZA=function(e){var n=e.split("").map(function(i){return+i}).reduce(function(i,o,l){return l%2?i+o*9:i+o*3},0);return n%10},QA=function(t){KA(e,t);function e(n,i){return qA(this,e),YA(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return zA(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=VA.EAN5_STRUCTURE[ZA(this.data)];return{data:"1011"+(0,WA.default)(this.data,i,"01"),text:this.text}}}]),e}(XA.default);Jf.default=QA;var eh={};Object.defineProperty(eh,"__esModule",{value:!0});var JA=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),e4=tr,t4=ns,n4=j2(t4),r4=pn,i4=j2(r4);function j2(t){return t&&t.__esModule?t:{default:t}}function s4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l4=function(t){a4(e,t);function e(n,i){return s4(this,e),o4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return JA(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=e4.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n4.default)(this.data,i,"01"),text:this.text}}}]),e}(i4.default);eh.default=l4;var $a={};Object.defineProperty($a,"__esModule",{value:!0});var c4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();$a.checksum=N0;var u4=ns,vs=F2(u4),d4=pn,f4=F2(d4);function F2(t){return t&&t.__esModule?t:{default:t}}function h4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function p4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m4=function(t){p4(e,t);function e(n,i){h4(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=N0(n));var o=g4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return c4(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==N0(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,vs.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,vs.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,vs.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,vs.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,vs.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,vs.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(f4.default);function N0(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}$a.default=m4;var th={};Object.defineProperty(th,"__esModule",{value:!0});var x4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),w4=ns,y4=U2(w4),v4=pn,E4=U2(v4),b4=$a;function U2(t){return t&&t.__esModule?t:{default:t}}function _4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function C4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var S4=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],A4=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],T4=function(t){C4(e,t);function e(n,i){_4(this,e);var o=gd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=Wg(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=Wg(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return gd(o);else return gd(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return x4(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],o=this.upcA[this.upcA.length-1],l=A4[parseInt(o)][parseInt(i)];return(0,y4.default)(this.middleDigits,l)}}]),e}(E4.default);function Wg(t,e){for(var n=parseInt(t[t.length-1]),i=S4[n],o="",l=0,f=0;f<i.length;f++){var g=i[f];g==="X"?o+=t[l++]:o+=g}return o=""+e+o,""+o+(0,b4.checksum)(o)}th.default=T4;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.UPCE=Sn.UPC=Sn.EAN2=Sn.EAN5=Sn.EAN8=Sn.EAN13=void 0;var I4=Zf,N4=go(I4),k4=Qf,O4=go(k4),R4=Jf,P4=go(R4),D4=eh,M4=go(D4),L4=$a,B4=go(L4),j4=th,F4=go(j4);function go(t){return t&&t.__esModule?t:{default:t}}Sn.EAN13=N4.default;Sn.EAN8=O4.default;Sn.EAN5=P4.default;Sn.EAN2=M4.default;Sn.UPC=B4.default;Sn.UPCE=F4.default;var io={},eu={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.START_BIN="1010";za.END_BIN="11101";za.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(eu,"__esModule",{value:!0});var U4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Al=za,$4=pn,z4=V4($4);function V4(t){return t&&t.__esModule?t:{default:t}}function H4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function G4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var X4=function(t){G4(e,t);function e(){return H4(this,e),W4(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return U4(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,o=this.data.match(/.{2}/g).map(function(l){return i.encodePair(l)}).join("");return{data:Al.START_BIN+o+Al.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var o=Al.BINARIES[i[1]];return Al.BINARIES[i[0]].split("").map(function(l,f){return(l==="1"?"111":"1")+(o[f]==="1"?"000":"0")}).join("")}}]),e}(z4.default);eu.default=X4;var nh={};Object.defineProperty(nh,"__esModule",{value:!0});var q4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Y4=eu,K4=Z4(Y4);function Z4(t){return t&&t.__esModule?t:{default:t}}function Q4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J4(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function e8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Gg=function(e){var n=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,o,l){return i+o*(3-l%2*2)},0);return Math.ceil(n/10)*10-n},t8=function(t){e8(e,t);function e(n,i){return Q4(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=Gg(n)),J4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return q4(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Gg(this.data)}}]),e}(K4.default);nh.default=t8;Object.defineProperty(io,"__esModule",{value:!0});io.ITF14=io.ITF=void 0;var n8=eu,r8=$2(n8),i8=nh,s8=$2(i8);function $2(t){return t&&t.__esModule?t:{default:t}}io.ITF=r8.default;io.ITF14=s8.default;var Kn={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});var o8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a8=pn,l8=c8(a8);function c8(t){return t&&t.__esModule?t:{default:t}}function u8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function f8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h8=function(t){f8(e,t);function e(n,i){return u8(this,e),d8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return o8(e,[{key:"encode",value:function(){for(var i="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),f=l.toString(2);f=g8(f,4-f.length);for(var g=0;g<f.length;g++)i+=f[g]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(l8.default);function g8(t,e){for(var n=0;n<e;n++)t="0"+t;return t}rs.default=h8;var rh={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.mod10=p8;is.mod11=m8;function p8(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);(n+t.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function m8(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var o=parseInt(t[t.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(rh,"__esModule",{value:!0});var x8=rs,w8=v8(x8),y8=is;function v8(t){return t&&t.__esModule?t:{default:t}}function E8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var C8=function(t){_8(e,t);function e(n,i){return E8(this,e),b8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,y8.mod10)(n),i))}return e}(w8.default);rh.default=C8;var ih={};Object.defineProperty(ih,"__esModule",{value:!0});var S8=rs,A8=I8(S8),T8=is;function I8(t){return t&&t.__esModule?t:{default:t}}function N8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function O8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var R8=function(t){O8(e,t);function e(n,i){return N8(this,e),k8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,T8.mod11)(n),i))}return e}(A8.default);ih.default=R8;var sh={};Object.defineProperty(sh,"__esModule",{value:!0});var P8=rs,D8=M8(P8),Xg=is;function M8(t){return t&&t.__esModule?t:{default:t}}function L8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function j8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var F8=function(t){j8(e,t);function e(n,i){return L8(this,e),n+=(0,Xg.mod10)(n),n+=(0,Xg.mod10)(n),B8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(D8.default);sh.default=F8;var oh={};Object.defineProperty(oh,"__esModule",{value:!0});var U8=rs,$8=z8(U8),qg=is;function z8(t){return t&&t.__esModule?t:{default:t}}function V8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H8(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function W8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var G8=function(t){W8(e,t);function e(n,i){return V8(this,e),n+=(0,qg.mod11)(n),n+=(0,qg.mod10)(n),H8(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}($8.default);oh.default=G8;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.MSI1110=Kn.MSI1010=Kn.MSI11=Kn.MSI10=Kn.MSI=void 0;var X8=rs,q8=Va(X8),Y8=rh,K8=Va(Y8),Z8=ih,Q8=Va(Z8),J8=sh,eT=Va(J8),tT=oh,nT=Va(tT);function Va(t){return t&&t.__esModule?t:{default:t}}Kn.MSI=q8.default;Kn.MSI10=K8.default;Kn.MSI11=Q8.default;Kn.MSI1010=eT.default;Kn.MSI1110=nT.default;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.pharmacode=void 0;var rT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),iT=pn,sT=oT(iT);function oT(t){return t&&t.__esModule?t:{default:t}}function aT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uT=function(t){cT(e,t);function e(n,i){aT(this,e);var o=lT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return rT(e,[{key:"encode",value:function(){for(var i=this.number,o="";!isNaN(i)&&i!=0;)i%2===0?(o="11100"+o,i=(i-2)/2):(o="100"+o,i=(i-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(sT.default);tu.pharmacode=uT;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.codabar=void 0;var dT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),fT=pn,hT=gT(fT);function gT(t){return t&&t.__esModule?t:{default:t}}function pT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wT=function(t){xT(e,t);function e(n,i){pT(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=mT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return dT(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],o=this.getEncodings(),l=0;l<this.data.length;l++)i.push(o[this.data.charAt(l)]),l!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(hT.default);nu.codabar=wT;var so={},ru={},Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];Ha.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Ha.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(ru,"__esModule",{value:!0});var yT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Tl=Ha,vT=pn,ET=bT(vT);function bT(t){return t&&t.__esModule?t:{default:t}}function _T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ST(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var AT=function(t){ST(e,t);function e(n,i){return _T(this,e),CT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return yT(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.data.split("").flatMap(function(g){return Tl.MULTI_SYMBOLS[g]||g}),o=i.map(function(g){return e.getEncoding(g)}).join(""),l=e.checksum(i,20),f=e.checksum(i.concat(l),15);return{text:this.text,data:e.getEncoding("")+o+e.getEncoding(l)+e.getEncoding(f)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(i){return Tl.BINARIES[e.symbolValue(i)]}},{key:"getSymbol",value:function(i){return Tl.SYMBOLS[i]}},{key:"symbolValue",value:function(i){return Tl.SYMBOLS.indexOf(i)}},{key:"checksum",value:function(i,o){var l=i.slice().reverse().reduce(function(f,g,m){var w=m%o+1;return f+e.symbolValue(g)*w},0);return e.getSymbol(l%47)}}]),e}(ET.default);ru.default=AT;var ah={};Object.defineProperty(ah,"__esModule",{value:!0});var TT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),IT=ru,NT=kT(IT);function kT(t){return t&&t.__esModule?t:{default:t}}function OT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function PT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DT=function(t){PT(e,t);function e(n,i){return OT(this,e),RT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return TT(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(NT.default);ah.default=DT;Object.defineProperty(so,"__esModule",{value:!0});so.CODE93FullASCII=so.CODE93=void 0;var MT=ru,LT=z2(MT),BT=ah,jT=z2(BT);function z2(t){return t&&t.__esModule?t:{default:t}}so.CODE93=LT.default;so.CODE93FullASCII=jT.default;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.GenericBarcode=void 0;var FT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),UT=pn,$T=zT(UT);function zT(t){return t&&t.__esModule?t:{default:t}}function VT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function WT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var GT=function(t){WT(e,t);function e(n,i){return VT(this,e),HT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return FT(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}($T.default);iu.GenericBarcode=GT;Object.defineProperty(Hf,"__esModule",{value:!0});var XT=Zc,Il=Sr,Es=Sn,Yg=io,jo=Kn,qT=tu,YT=nu,Kg=so,KT=iu;Hf.default={CODE39:XT.CODE39,CODE128:Il.CODE128,CODE128A:Il.CODE128A,CODE128B:Il.CODE128B,CODE128C:Il.CODE128C,EAN13:Es.EAN13,EAN8:Es.EAN8,EAN5:Es.EAN5,EAN2:Es.EAN2,UPC:Es.UPC,UPCE:Es.UPCE,ITF14:Yg.ITF14,ITF:Yg.ITF,MSI:jo.MSI,MSI10:jo.MSI10,MSI11:jo.MSI11,MSI1010:jo.MSI1010,MSI1110:jo.MSI1110,pharmacode:qT.pharmacode,codabar:YT.codabar,CODE93:Kg.CODE93,CODE93FullASCII:Kg.CODE93FullASCII,GenericBarcode:KT.GenericBarcode};var po={};Object.defineProperty(po,"__esModule",{value:!0});var ZT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};po.default=function(t,e){return ZT({},t,e)};var lh={};Object.defineProperty(lh,"__esModule",{value:!0});lh.default=QT;function QT(t){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(t),e}var ch={};Object.defineProperty(ch,"__esModule",{value:!0});ch.default=JT;function JT(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var uh={},dh={},su={};Object.defineProperty(su,"__esModule",{value:!0});su.default=eI;function eI(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});var tI={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};ou.default=tI;Object.defineProperty(dh,"__esModule",{value:!0});var nI=su,rI=V2(nI),iI=ou,Zg=V2(iI);function V2(t){return t&&t.__esModule?t:{default:t}}function sI(t){var e={};for(var n in Zg.default)Zg.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,rI.default)(e),e}dh.default=sI;var fh={},hh={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.getTotalWidthOfEncodings=Mn.calculateEncodingAttributes=Mn.getBarcodePadding=Mn.getEncodingHeight=Mn.getMaximumHeightOfEncodings=void 0;var oI=po,aI=lI(oI);function lI(t){return t&&t.__esModule?t:{default:t}}function H2(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function W2(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function cI(t,e,n){for(var i=0;i<t.length;i++){var o=t[i],l=(0,aI.default)(e,o.options),f;l.displayValue?f=fI(o.text,l,n):f=0;var g=o.data.length*l.width;o.width=Math.ceil(Math.max(f,g)),o.height=H2(o,l),o.barcodePadding=W2(f,g,l)}}function uI(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function dI(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function fI(t,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(t);if(!o)return 0;var l=o.width;return l}Mn.getMaximumHeightOfEncodings=dI;Mn.getEncodingHeight=H2;Mn.getBarcodePadding=W2;Mn.calculateEncodingAttributes=cI;Mn.getTotalWidthOfEncodings=uI;Object.defineProperty(hh,"__esModule",{value:!0});var hI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),gI=po,pI=mI(gI),pd=Mn;function mI(t){return t&&t.__esModule?t:{default:t}}function xI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wI=function(){function t(e,n,i){xI(this,t),this.canvas=e,this.encodings=n,this.options=i}return hI(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var i=(0,pI.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(i,this.encodings[n]),this.drawCanvasText(i,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,pd.calculateEncodingAttributes)(this.encodings,this.options,n);var i=(0,pd.getTotalWidthOfEncodings)(this.encodings),o=(0,pd.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,i){var o=this.canvas.getContext("2d"),l=i.data,f;n.textPosition=="top"?f=n.marginTop+n.fontSize+n.textMargin:f=n.marginTop,o.fillStyle=n.lineColor;for(var g=0;g<l.length;g++){var m=g*n.width+i.barcodePadding;l[g]==="1"?o.fillRect(m,f,n.width,n.height):l[g]&&o.fillRect(m,f,n.width,n.height*l[g])}}},{key:"drawCanvasText",value:function(n,i){var o=this.canvas.getContext("2d"),l=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var f,g;n.textPosition=="top"?g=n.marginTop+n.fontSize-n.textMargin:g=n.height+n.textMargin+n.marginTop+n.fontSize,o.font=l,n.textAlign=="left"||i.barcodePadding>0?(f=0,o.textAlign="left"):n.textAlign=="right"?(f=i.width-1,o.textAlign="right"):(f=i.width/2,o.textAlign="center"),o.fillText(i.text,f,g)}}},{key:"moveCanvasDrawing",value:function(n){var i=this.canvas.getContext("2d");i.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),t}();hh.default=wI;var gh={};Object.defineProperty(gh,"__esModule",{value:!0});var yI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),vI=po,EI=bI(vI),md=Mn;function bI(t){return t&&t.__esModule?t:{default:t}}function _I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nl="http://www.w3.org/2000/svg",CI=function(){function t(e,n,i){_I(this,t),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return yI(t,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var o=this.encodings[i],l=(0,EI.default)(this.options,o.options),f=this.createGroup(n,l.marginTop,this.svg);this.setGroupOptions(f,l),this.drawSvgBarcode(f,l,o),this.drawSVGText(f,l,o),n+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,md.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,md.getTotalWidthOfEncodings)(this.encodings),i=(0,md.getMaximumHeightOfEncodings)(this.encodings),o=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,i),this.options.background&&this.drawRect(0,0,o,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,i,o){var l=o.data,f;i.textPosition=="top"?f=i.fontSize+i.textMargin:f=0;for(var g=0,m=0,w=0;w<l.length;w++)m=w*i.width+o.barcodePadding,l[w]==="1"?g++:g>0&&(this.drawRect(m-i.width*g,f,i.width*g,i.height,n),g=0);g>0&&this.drawRect(m-i.width*(g-1),f,i.width*g,i.height,n)}},{key:"drawSVGText",value:function(n,i,o){var l=this.document.createElementNS(Nl,"text");if(i.displayValue){var f,g;l.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?g=i.fontSize-i.textMargin:g=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||o.barcodePadding>0?(f=0,l.setAttribute("text-anchor","start")):i.textAlign=="right"?(f=o.width-1,l.setAttribute("text-anchor","end")):(f=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",f),l.setAttribute("y",g),l.appendChild(this.document.createTextNode(o.text)),n.appendChild(l)}}},{key:"setSvgAttributes",value:function(n,i){var o=this.svg;o.setAttribute("width",n+"px"),o.setAttribute("height",i+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+n+" "+i),o.setAttribute("xmlns",Nl),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,i,o){var l=this.document.createElementNS(Nl,"g");return l.setAttribute("transform","translate("+n+", "+i+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(n,i){n.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(n,i,o,l,f){var g=this.document.createElementNS(Nl,"rect");return g.setAttribute("x",n),g.setAttribute("y",i),g.setAttribute("width",o),g.setAttribute("height",l),f.appendChild(g),g}}]),t}();gh.default=CI;var ph={};Object.defineProperty(ph,"__esModule",{value:!0});var SI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function AI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var TI=function(){function t(e,n,i){AI(this,t),this.object=e,this.encodings=n,this.options=i}return SI(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();ph.default=TI;Object.defineProperty(fh,"__esModule",{value:!0});var II=hh,NI=mh(II),kI=gh,OI=mh(kI),RI=ph,PI=mh(RI);function mh(t){return t&&t.__esModule?t:{default:t}}fh.default={CanvasRenderer:NI.default,SVGRenderer:OI.default,ObjectRenderer:PI.default};var mo={};Object.defineProperty(mo,"__esModule",{value:!0});function xh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DI=function(t){yh(e,t);function e(n,i){xh(this,e);var o=wh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),MI=function(t){yh(e,t);function e(){xh(this,e);var n=wh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),LI=function(t){yh(e,t);function e(){xh(this,e);var n=wh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);mo.InvalidInputException=DI;mo.InvalidElementException=MI;mo.NoElementException=LI;Object.defineProperty(uh,"__esModule",{value:!0});var BI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jI=dh,k0=G2(jI),FI=fh,Go=G2(FI),UI=mo;function G2(t){return t&&t.__esModule?t:{default:t}}function vh(t){if(typeof t=="string")return $I(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(vh(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return zI(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,k0.default)(t),renderer:Go.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,k0.default)(t),renderer:Go.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Go.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":BI(t))==="object"&&!t.nodeName)return{element:t,renderer:Go.default.ObjectRenderer};throw new UI.InvalidElementException}}function $I(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(vh(e[i]));return n}}function zI(t){var e=document.createElement("canvas");return{element:e,options:(0,k0.default)(t),renderer:Go.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}uh.default=vh;var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});var VI=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function HI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var WI=function(){function t(e){HI(this,t),this.api=e}return VI(t,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var i=n.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(o){return this.handleCatch(o),this.api}}}]),t}();Eh.default=WI;var GI=Hf,Wi=Ai(GI),XI=po,Wa=Ai(XI),qI=lh,X2=Ai(qI),YI=ch,Qg=Ai(YI),KI=uh,ZI=Ai(KI),QI=su,JI=Ai(QI),eN=Eh,tN=Ai(eN),q2=mo,nN=ou,Y2=Ai(nN);function Ai(t){return t&&t.__esModule?t:{default:t}}var Lr=function(){},au=function(e,n,i){var o=new Lr;if(typeof e>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,ZI.default)(e),o._encodings=[],o._options=Y2.default,o._errorHandler=new tN.default(o),typeof n<"u"&&(i=i||{},i.format||(i.format=Z2()),o.options(i)[i.format](n,i).render()),o};au.getModule=function(t){return Wi.default[t]};for(var Jg in Wi.default)Wi.default.hasOwnProperty(Jg)&&rN(Wi.default,Jg);function rN(t,e){Lr.prototype[e]=Lr.prototype[e.toUpperCase()]=Lr.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var l=(0,Wa.default)(o._options,i);l=(0,JI.default)(l);var f=t[e],g=K2(n,f,l);return o._encodings.push(g),o})}}function K2(t,e,n){t=""+t;var i=new e(t,n);if(!i.valid())throw new q2.InvalidInputException(i.constructor.name,t);var o=i.encode();o=(0,X2.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,Wa.default)(n,o[l].options);return o}function Z2(){return Wi.default.CODE128?"CODE128":Object.keys(Wi.default)[0]}Lr.prototype.options=function(t){return this._options=(0,Wa.default)(this._options,t),this};Lr.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Lr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,Wa.default)(this._options,t.options);n.format=="auto"&&(n.format=Z2()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=Wi.default[n.format.toUpperCase()],l=K2(i,o,n);O0(t,l,n)})}}};Lr.prototype.render=function(){if(!this._renderProperties)throw new q2.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)O0(this._renderProperties[t],this._encodings,this._options);else O0(this._renderProperties,this._encodings,this._options);return this};Lr.prototype._defaults=Y2.default;function O0(t,e,n){e=(0,X2.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,Wa.default)(n,e[i].options),(0,Qg.default)(e[i].options);(0,Qg.default)(n);var o=t.renderer,l=new o(t.element,e,n);l.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=au);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),au(n,t,e)});var iN=au;const sN=bc(iN);let Q2="http://127.0.0.1:17620",R0=null;function bh(t){R0=t}async function Na(t=800){try{const e=new AbortController,n=setTimeout(()=>e.abort(),t),i=await fetch(`${Q2}/health`,{signal:e.signal});if(clearTimeout(n),!i.ok)return!1;const o=await i.json();return!!(o!=null&&o.ok)}catch(e){return e instanceof Error&&console.warn("Print agent availability check failed:",e.message),!1}}async function J2(t,e={}){if(!Array.isArray(t)||t.length===0)throw new Error("printReceipt: 'lines' must be a non-empty array");if(!R0)throw new Error("printReceipt: token not set. Call setPrintAgentToken('<token>')");if(!await Na(800))throw new Error("Local print agent not reachable at 127.0.0.1:17620");const i={lines:t,cut:e.cut??!0,drawer:e.drawer??!1};try{const o=await fetch(`${Q2}/print/escpos`,{method:"POST",headers:{"Content-Type":"application/json","X-Print-Token":R0},body:JSON.stringify(i)});if(!o.ok){let l="<no details>";try{l=await o.text()}catch{}throw o.status===401?new Error(`Print failed (${o.status}): Invalid or missing token. Check your print agent token configuration.`):new Error(`Print failed (${o.status}): ${l}`)}}catch(o){throw o instanceof TypeError&&o.message.includes("fetch")?new Error("CORS Error: Local print agent needs to allow origin 'https://scan.mybiletix.com'"):o}}const oN="fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27";bh(oN);class aN{constructor(){this.isConnected=!1}async checkConnection(){try{return this.isConnected=await Na(800),this.isConnected}catch(e){return console.warn("Local print agent not available:",e),this.isConnected=!1,!1}}getConnectionStatus(){return{isAvailable:this.isConnected,isConnected:this.isConnected}}async printReceipt(e,n={}){try{await J2(e,{cut:n.cut!==!1,drawer:n.drawer||!1}),console.log("Receipt printed successfully via print agent")}catch(i){throw console.error("Error printing via print agent:",i),new Error(`Print agent failed: ${i.message}`)}}generateReceiptLines(e){return["\x1B@","\x1Ba","\x1B!0",e.eventName,"\x1B!\0","",e.eventDate,"","================================","","TIP BILET","\x1B! ",e.ticketType,"\x1B!\0","",`Scanat: ${e.scanTime}`,"","\x1B!","INTRARE VERIFICATA","\x1B!\0","","Acces permis",`Bilet: ${e.ticketCode}`,"","================================","Bon de verificare intrare","Valabil doar pentru data evenimentului",`Generat: ${new Date().toLocaleString("ro-RO")}`,"",""]}async printThermalReceipt(e){const n=this.generateReceiptLines(e);await this.printReceipt(n,{cut:!0,drawer:!1})}async testPrint(){const e={eventName:"TEST CLUB",eventDate:new Date().toLocaleDateString("ro-RO"),ticketType:"TEST ENTRY",ticketCode:"TEST123",scanTime:new Date().toLocaleTimeString("ro-RO")};await this.printThermalReceipt(e)}}const Cr=new aN;class lN{async isLocalPrintAvailable(){try{return await Cr.checkConnection()}catch{return!1}}generateTicketCode(){const e=Date.now().toString(36),n=Math.random().toString(36).substr(2,5);return`${e}${n}`.toUpperCase()}async generateQRCode(e){try{return await Fa.toDataURL(e,{width:150,height:150,margin:1,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"M"})}catch(n){throw console.error("Error generating QR code:",n),new Error("Failed to generate QR code")}}generateEAN13Barcode(e){try{if(!/^\d{13}$/.test(e))throw new Error("EAN13 code must be exactly 13 digits");const n=document.createElement("canvas");return sN(n,e,{format:"EAN13",width:2,height:50,displayValue:!0,fontSize:10,textMargin:2,margin:5,background:"#ffffff",lineColor:"#000000"}),n.toDataURL()}catch(n){throw console.error("Error generating EAN13 barcode:",n),new Error("Failed to generate EAN13 barcode")}}async createReceiptHTML(e,n=!0){return n&&await this.generateQRCode(e.ticketCode),this.generateEAN13Barcode(e.ean13Barcode),`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Receipt - ${e.ticketCode}</title>
        <style>
          @page {
            size: A4;
            margin: 0;
            padding: 0;
          }
          
          * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
          }
          
          body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 40px;
            width: 210mm;
            height: 297mm;
            font-size: 16px;
            line-height: 1.3;
            color: #000;
            background: #fff;
            min-height: 297mm;
            height: 297mm;
          }
          
          .receipt {
            width: 100%;
            max-width: 170mm;
            margin: 0 auto;
            text-align: center;
            display: block;
            padding: 0;
          }
          
          .header {
            border-bottom: 2px dashed #000;
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          
          .logo {
            max-width: 80mm;
            max-height: 40mm;
            margin-bottom: 15px;
            display: block;
          }
          
          .event-name {
            font-size: 28px;
            font-weight: 900;
            margin: 15px 0;
            color: #000000;
          }
          
          .event-date {
            font-size: 18px;
            margin: 10px 0;
            font-weight: 700;
            color: #000000;
          }
          
          .ticket-type-section {
            background: #e8e8e8;
            border: 2px solid #000;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
          }
          
          .ticket-type {
            font-size: 36px;
            font-weight: 900;
            margin: 20px 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #000000;
          }
          
          .scan-time {
            font-size: 16px;
            font-weight: 700;
            margin: 15px 0;
            color: #000000;
          }
          
          .qr-section {
            margin: 30px 0;
          }
          
          .qr-code {
            width: 80mm;
            height: 80mm;
            margin: 0 auto;
            display: block;
          }
          
          .qr-label {
            font-size: 14px;
            margin-top: 15px;
          }
          
          .footer {
            border-top: 2px dashed #000;
            padding-top: 20px;
            margin-top: 40px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: 600;
            color: #000000;
          }
          
          .footer-line {
            margin: 8px 0;
            font-weight: 600;
          }
          
          .footer-line:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
          }
          
          .ticket-code {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: #e0e0e0;
            padding: 8px 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: 700;
            color: #000000;
          }
          
          .scan-info {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #000;
            border-radius: 10px;
          }
          
          .scan-info .title {
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 10px;
            color: #000000;
          }
          
          .scan-info .subtitle {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #000000;
          }
          
          @media print {
            body {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: 297mm !important;
              min-height: 297mm !important;
            }
            
            @page {
              margin: 0 !important;
              padding: 0 !important;
              size: A4 !important;
            }
            
            .no-print {
              display: none !important;
            }
            
            .receipt {
              page-break-after: avoid;
              break-after: avoid;
            }
            
            .footer {
              page-break-inside: avoid;
              break-inside: avoid;
            }
          }
          
          @media screen {
            body {
              background: #f0f0f0;
              padding: 40px;
            }
            
            .receipt {
              background: white;
              padding: 30px;
              border: 1px solid #ccc;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
              max-width: 170mm;
              margin: 0 auto;
              border-radius: 10px;
            }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            <div class="event-name">${e.eventName}</div>
            <div class="event-date">${e.eventDate}</div>
          </div>
          
          <div class="ticket-type-section">
            <div style="font-size: 18px; margin-bottom: 15px; font-weight: 900; color: #000000;">TIP BILET</div>
            <div class="ticket-type">${e.entryType||"STANDARD ENTRY"}</div>
            <div class="scan-time">Scanat: ${new Date().toLocaleString("ro-RO")}</div>
          </div>
          
          <div class="scan-info">
            <div class="title">INTRARE VERIFICATA</div>
            <div class="subtitle">Acces permis</div>
            <div class="ticket-code">Bilet: ${e.ticketCode}</div>
          </div>
          
          <div class="footer">
            <div class="footer-line">Bon de verificare intrare</div>
            <div class="footer-line">Valabil doar pentru data evenimentului</div>
            <div class="footer-line" style="font-size: 12px; margin-top: 15px; font-weight: 600;">
              Generat: ${new Date().toLocaleString("ro-RO")}
            </div>
          </div>
        </div>
      </body>
      </html>
    `}async createMultiTicketReceiptHTML(e){const n=this.generateEAN13Barcode(e.ean13Barcode),i=await Promise.all(e.ticketCodes.map(o=>this.generateQRCode(o)));return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Receipt - ${e.quantity} Tickets</title>
        <style>
          @page {
            size: 72mm auto;
            margin: 0;
            padding: 0;
          }
          
          * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
          }
          
          body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 8px;
            width: 72mm;
            font-size: 12px;
            line-height: 1.3;
            color: #000;
            background: #fff;
            min-height: auto;
            height: auto;
          }
          
          .receipt {
            width: 100%;
            text-align: center;
            display: block;
            margin: 0;
            padding: 0;
          }
          
          .header {
            border-bottom: 2px dashed #000;
            padding-bottom: 8px;
            margin-bottom: 8px;
          }
          
          .logo {
            max-width: 50mm;
            max-height: 20mm;
            margin-bottom: 4px;
            display: block;
          }
          
          .event-name {
            font-size: 16px;
            font-weight: bold;
            margin: 4px 0;
          }
          
          .event-date {
            font-size: 10px;
            margin: 2px 0;
          }
          
          .receipt-info {
            margin: 8px 0;
            text-align: left;
          }
          
          .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
            font-size: 11px;
          }
          
          .info-label {
            font-weight: bold;
          }
          
          .payment-section {
            background: #f0f0f0;
            border: 1px solid #000;
            padding: 6px;
            margin: 8px 0;
          }
          
          .total-amount {
            font-size: 14px;
            font-weight: bold;
            margin: 4px 0;
          }
          
          .tickets-section {
            margin: 10px 0;
            border-top: 1px dashed #000;
            padding-top: 8px;
          }
          
          .tickets-title {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
          }
          
          .ticket-item {
            border: 1px solid #000;
            margin: 8px 0;
            padding: 6px;
            background: #fff;
          }
          
          .ticket-number {
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 4px;
            text-align: center;
          }
          
          .qr-section {
            margin: 6px 0;
          }
          
          .qr-code {
            width: 30mm;
            height: 30mm;
            margin: 0 auto;
            display: block;
          }
          
          .qr-label {
            font-size: 8px;
            margin-top: 2px;
          }
          
          .ticket-code {
            font-family: 'Courier New', monospace;
            font-size: 9px;
            background: #f0f0f0;
            padding: 2px 4px;
            margin: 2px 0;
            text-align: center;
          }
          
          .barcode-section {
            margin: 10px 0;
            border-top: 1px dashed #000;
            padding-top: 8px;
          }
          
          .barcode {
            width: 60mm;
            height: auto;
            margin: 0 auto;
            display: block;
          }
          
          .barcode-label {
            font-size: 9px;
            margin-top: 2px;
          }
          
          .footer {
            border-top: 2px dashed #000;
            padding-top: 8px;
            margin-top: 8px;
            margin-bottom: 0;
            font-size: 10px;
          }
          
          .footer-line {
            margin: 2px 0;
          }
          
          .footer-line:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
          }
          
          @media print {
            body {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: auto !important;
              min-height: auto !important;
            }
            
            @page {
              margin: 0 !important;
              padding: 0 !important;
              size: 72mm auto !important;
            }
            
            .no-print {
              display: none !important;
            }
            
            .receipt {
              page-break-after: avoid;
              break-after: avoid;
            }
            
            .ticket-item {
              page-break-inside: avoid;
              break-inside: avoid;
            }
            
            .footer {
              page-break-inside: avoid;
              break-inside: avoid;
            }
          }
          
          @media screen {
            body {
              background: #f0f0f0;
              padding: 20px;
            }
            
            .receipt {
              background: white;
              padding: 8px;
              border: 1px solid #ccc;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
              width: 72mm;
              margin: 0 auto;
            }
          }
        </style>
      </head>
      <body>
        <div class="receipt">
          <div class="header">
            ${e.logoUrl?`<img src="${e.logoUrl}" alt="Logo" class="logo">`:""}
            <div class="event-name">${e.eventName}</div>
            <div class="event-date">${e.eventDate}</div>
          </div>
          
          <div class="receipt-info">
            <div class="info-row">
              <span class="info-label">Bilete:</span>
              <span>${e.quantity}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Plat:</span>
              <span>${e.paymentMethod==="CASH"?"NUMERAR":"CARD"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Timp:</span>
              <span>${new Date().toLocaleString("ro-RO")}</span>
            </div>
          </div>
          
          <div class="payment-section">
            <div class="total-amount">TOTAL: ${e.totalAmount} RON</div>
            <div style="font-size: 10px;">Prezentai la cas pentru plat</div>
          </div>
          
          <div class="tickets-section">
            <div class="tickets-title">BILETELE DUMNEAVOASTR</div>
            ${e.ticketCodes.map((o,l)=>`
              <div class="ticket-item">
                <div class="ticket-number">BILET ${l+1} din ${e.quantity}</div>
                <div class="qr-section">
                  <img src="${i[l]}" alt="QR Code ${l+1}" class="qr-code">
                  <div class="qr-label">Scanai pentru verificare</div>
                  <div class="ticket-code">Cod: ${o}</div>
                </div>
              </div>
            `).join("")}
          </div>
          
          <div class="barcode-section">
            <img src="${n}" alt="EAN13 Barcode" class="barcode">
            <div class="barcode-label">Pentru sistem de cas</div>
          </div>
          
          <div class="footer">
            <div class="footer-line">Bilete electronice generate</div>
            <div class="footer-line">Valabile doar pentru data specificat</div>
            <div class="footer-line">Nu se restituie banii</div>
            <div class="footer-line" style="font-size: 8px; margin-top: 4px;">
              Generat: ${new Date().toLocaleString("ro-RO")}
            </div>
          </div>
        </div>
      </body>
      </html>
    `}async printMultiTicketReceipt(e){try{const n=await this.createMultiTicketReceiptHTML(e),i=window.open("","_blank","width=400,height=800");if(!i){console.warn("Print window blocked by popup blocker, trying alternative method...");try{const o=new Blob([n],{type:"text/html"}),l=URL.createObjectURL(o),f=window.open(l,"_blank");if(!f){const g=document.body.innerHTML;return document.body.innerHTML=n,window.print(),document.body.innerHTML=g,!0}return setTimeout(()=>URL.revokeObjectURL(l),3e4),new Promise(g=>{const m=()=>{f.closed?g(!0):setTimeout(m,1e3)};m()})}catch{throw new Error("Could not print receipt. Please allow popups for this site or use QZ Tray for direct printing.")}}return i.document.write(n),i.document.close(),await new Promise(o=>setTimeout(o,1500)),new Promise(o=>{const l=()=>{i.removeEventListener("afterprint",l),i.close(),o(!0)};i.addEventListener("afterprint",l),i.focus(),i.print(),setTimeout(()=>{i.removeEventListener("afterprint",l),i.closed||i.close(),o(!0)},15e3)})}catch(n){throw console.error("Error printing multi-ticket receipt:",n),n}}async printReceipt(e,n=!0){try{if(await this.isLocalPrintAvailable()){console.log("Using local print server for direct thermal printing...");try{return await Cr.printThermalReceipt({eventName:e.eventName,eventDate:e.eventDate,ticketType:e.entryType||"STANDARD ENTRY",ticketCode:e.ticketCode,scanTime:new Date().toLocaleString("ro-RO")}),console.log("Receipt printed successfully via local print server"),!0}catch(f){throw console.error("Local print server failed:",f),new Error(`Direct printing failed: ${f.message}`)}}const o=await this.createReceiptHTML(e,n),l=window.open("","_blank","width=400,height=600");if(!l)throw new Error("Could not open print window. Please allow popups for this site.");return l.document.write(o),l.document.close(),await new Promise(f=>setTimeout(f,1e3)),new Promise(f=>{const g=()=>{l.removeEventListener("afterprint",g),l.close(),f(!0)};l.addEventListener("afterprint",g),l.focus(),l.print(),setTimeout(()=>{l.removeEventListener("afterprint",g),l.closed||l.close(),f(!0)},1e4)})}catch(i){throw console.error("Error printing receipt:",i),i}}async printQRTicket(e){try{if(await this.isLocalPrintAvailable()){console.log("Using local print server for QR ticket printing...");try{return await Cr.printThermalReceipt({eventName:e.eventName,eventDate:e.eventDate,ticketType:"VERIFIED ENTRY",ticketCode:e.ticketCode,scanTime:new Date().toLocaleString("ro-RO")}),console.log("QR ticket printed successfully via local print server"),!0}catch(f){throw console.error("Local print server QR ticket printing failed:",f),new Error(`Direct QR ticket printing failed: ${f.message}`)}}const i={eventName:e.eventName,eventDate:e.eventDate,paymentMethod:"CASH",ticketCode:e.ticketCode,entryType:"VERIFIED ENTRY",quantity:1,totalAmount:0,ean13Barcode:"1234567890128",logoUrl:e.logoUrl},o=await this.createReceiptHTML(i,!0),l=window.open("","_blank","width=400,height=600");if(!l){console.warn("Print window blocked by popup blocker, trying alternative method...");try{const f=new Blob([o],{type:"text/html"}),g=URL.createObjectURL(f),m=window.open(g,"_blank");if(!m){const w=document.body.innerHTML;return document.body.innerHTML=o,window.print(),document.body.innerHTML=w,!0}return setTimeout(()=>URL.revokeObjectURL(g),3e4),new Promise(w=>{const v=()=>{m.closed?w(!0):setTimeout(v,1e3)};v()})}catch{throw new Error("Could not print receipt. Please allow popups for this site or use QZ Tray for direct printing.")}}return l.document.write(o),l.document.close(),await new Promise(f=>setTimeout(f,1e3)),new Promise(f=>{const g=()=>{l.removeEventListener("afterprint",g),l.close(),f(!0)};l.addEventListener("afterprint",g),l.focus(),l.print(),setTimeout(()=>{l.removeEventListener("afterprint",g),l.closed||l.close(),f(!0)},1e4)})}catch(n){throw console.error("Error printing QR ticket:",n),n}}async createReceiptPreview(e){return await this.createReceiptHTML(e)}getLocalPrintService(){return Cr}}const ew=new lN;class cN{constructor(){this.registration=null,this.deferredPrompt=null,this.updateAvailableCallbacks=[],this.wakeLock=null}async initialize(){if(!this.isServiceWorkerSupported()){console.log("Service Workers not supported in this environment");return}try{this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("Service Worker registered successfully"),this.registration.addEventListener("updatefound",()=>{var n;console.log("New service worker version available");const e=(n=this.registration)==null?void 0:n.installing;e&&(e.postMessage({type:"SKIP_WAITING"}),e.addEventListener("statechange",()=>{e.state==="activated"&&(console.log("New service worker activated, reloading page"),window.location.reload())}))}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Service worker controller changed, reloading page"),window.location.reload()}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&e.data.type==="NEW_VERSION_AVAILABLE"&&(console.log("New version available:",e.data.version),this.notifyUpdateAvailable())}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,console.log("PWA install prompt available")}),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),this.deferredPrompt=null})}catch(e){const n=e.message;this.isUnsupportedEnvironment(n)?console.log("Service Workers not available in this environment, continuing without PWA features"):console.warn("Service Worker registration failed:",n)}}onUpdateAvailable(e){this.updateAvailableCallbacks.push(e)}notifyUpdateAvailable(){this.registration&&this.updateAvailableCallbacks.forEach(e=>{e(this.registration)})}async applyUpdate(){if(this.registration&&this.registration.waiting)return this.registration.waiting.postMessage({type:"SKIP_WAITING"}),new Promise(e=>{navigator.serviceWorker.addEventListener("controllerchange",()=>{e()})})}hasUpdateAvailable(){return!!(this.registration&&this.registration.waiting)}isServiceWorkerSupported(){return!(!("serviceWorker"in navigator)||this.isStackBlitz()||this.isCodeSandbox())}isStackBlitz(){return window.location.hostname.includes("stackblitz")||window.location.hostname.includes("webcontainer")}isCodeSandbox(){return window.location.hostname.includes("codesandbox")||window.location.hostname.includes("csb.app")}isUnsupportedEnvironment(e){return["not yet supported on StackBlitz","Service Workers are not available","WebContainer","not supported in this context"].some(i=>e.toLowerCase().includes(i.toLowerCase()))}async installPrompt(){if(this.deferredPrompt){this.deferredPrompt.prompt();const{outcome:e}=await this.deferredPrompt.userChoice;return this.deferredPrompt=null,e==="accepted"}return!1}isInstallPromptAvailable(){return this.deferredPrompt!==null}isStandalone(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")}async requestNotificationPermission(){if("Notification"in window)try{return await Notification.requestPermission()}catch(e){return console.warn("Notification permission request failed:",e),"denied"}return"denied"}async showNotification(e,n){try{this.registration&&"Notification"in window&&Notification.permission==="granted"&&await this.registration.showNotification(e,{icon:"/pwa-192x192.png",badge:"/pwa-192x192.png",vibrate:[200,100,200],...n})}catch(i){console.warn("Failed to show notification:",i)}}async openFile(e=[".csv"]){try{if("showOpenFilePicker"in window){const n=await window.showOpenFilePicker({types:[{description:"CSV files",accept:{"text/csv":e}}],multiple:!1});if(n.length>0)return await n[0].getFile()}}catch(n){n.name!=="AbortError"&&console.warn("File System Access API failed, falling back to input:",n)}return null}async saveFile(e,n){try{if("showSaveFilePicker"in window){const f=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"CSV files",accept:{"text/csv":[".csv"]}}]})).createWritable();return await f.write(e),await f.close(),!0}}catch(l){l.name!=="AbortError"&&console.warn("File System Access API failed, falling back to download:",l)}const i=URL.createObjectURL(e),o=document.createElement("a");return o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),!1}async requestWakeLock(){try{if("wakeLock"in navigator)return this.wakeLock=await navigator.wakeLock.request("screen"),console.log("Screen wake lock acquired"),!0}catch(e){console.warn("Wake lock failed:",e)}return!1}async releaseWakeLock(){try{this.wakeLock&&(await this.wakeLock.release(),this.wakeLock=null,console.log("Screen wake lock released"))}catch(e){console.warn("Wake lock release failed:",e)}}async shareData(e){try{if("share"in navigator)return await navigator.share(e),!0}catch(n){console.warn("Web Share API failed:",n)}return!1}getPWADisplayMode(){return this.isStandalone()?"standalone":window.matchMedia("(display-mode: minimal-ui)").matches?"minimal-ui":window.matchMedia("(display-mode: fullscreen)").matches?"fullscreen":"browser"}checkInstallability(){const e=[];let n=!0;location.protocol!=="https:"&&location.hostname!=="localhost"&&(n=!1,e.push("Must be served over HTTPS"));const i=document.querySelector('link[rel="manifest"]');i||(n=!1,e.push("Web app manifest is missing")),this.registration||(n=!1,e.push("Service worker is not registered"));try{i&&(i.href||(n=!1,e.push("Manifest link has no href"))),window.isSecureContext||(n=!1,e.push("Not running in secure context")),"serviceWorker"in navigator||(n=!1,e.push("Service Worker not supported")),console.log("PWA Installability Debug:",{protocol:location.protocol,hostname:location.hostname,secureContext:window.isSecureContext,serviceWorkerSupport:"serviceWorker"in navigator,manifestLink:!!i,registration:!!this.registration,standalone:this.isStandalone()})}catch(o){console.warn("Error checking PWA installability:",o),e.push("Error checking PWA requirements")}return{canInstall:n,reasons:e}}}const Wt=new cN,uN=()=>{const{isScanning:t,setIsScanning:e,setLastScanResult:n,addScan:i,backendStatus:o,setFlashColor:l,appSettings:f}=$n(),[g,m]=G.useState(null),[w,v]=G.useState(null),[b,A]=G.useState([]),T=G.useRef(null),L="qr-reader";G.useEffect(()=>(ue.log("QRScanner: Initializing scanner..."),T.current=new Dg(L),Dg.getCameras().then($=>{ue.log("QRScanner: Found cameras:",$.length),$&&$.length>0?(A($),v($[0].id)):m("No cameras found")}).catch($=>{ue.error("QRScanner: Error accessing camera:",$),m("Error accessing camera: "+$.message)}),()=>{T.current&&T.current.isScanning&&T.current.stop().catch($=>ue.error("QRScanner: Error stopping scanner:",$))}),[]);const M=async()=>{if(!(!T.current||!w)){m(null),e(!0);try{Fi()||await Wt.requestWakeLock(),ue.log("QRScanner: Starting camera with ID:",w),await T.current.start(w,{fps:Fi()?5:10,qrbox:{width:300,height:300}},O,N)}catch($){ue.error("QRScanner: Error starting scanner:",$),m("Error starting scanner: "+$.message),e(!1),Fi()||await Wt.releaseWakeLock()}}},H=async()=>{if(!(!T.current||!T.current.isScanning))try{await T.current.stop(),e(!1),Fi()||await Wt.releaseWakeLock(),ue.log("QRScanner: Scanner stopped successfully")}catch($){ue.error("QRScanner: Error stopping scanner:",$)}},O=async $=>{ue.log("QRScanner: QR code scanned:",$),await H();try{const z=await Ta.validateTicket($);try{await Ta.recordScan($,z.valid,z.message),ue.log("QRScanner: Scan recorded successfully")}catch(P){ue.error("QRScanner: Failed to record scan (but validation succeeded):",P)}const B={qrCode:$,timestamp:new Date().toISOString(),success:z.valid,message:z.message,ticket:z.ticket};if(z.valid){l("green"),setTimeout(()=>l(null),5e3);try{fetch("http://localhost:3333/open").then(()=>ue.log("QRScanner: Relay triggered - door/gate opened")).catch(()=>ue.warn("QRScanner: Relay error - could not trigger door/gate"))}catch(P){ue.warn("QRScanner: Relay API call failed:",P)}try{await I(z.ticket,$)}catch(P){ue.warn("QRScanner: Receipt printing failed:",P)}}else l("red"),setTimeout(()=>l(null),5e3);n(B),i(B),Fi()||await Wt.showNotification(z.valid?"Access Granted":"Access Denied",{body:z.message,tag:"scan-result"}),setTimeout(()=>{T.current&&M()},2e3)}catch(z){ue.error("QRScanner: Error processing scan:",z),l("red"),setTimeout(()=>l(null),5e3),m("Error processing scan: Could not connect to Supabase"),setTimeout(M,2e3)}},I=async($,z)=>{try{const B={eventName:`${$.club||"Default Club"} - ${(f==null?void 0:f.clubName)||"Famous Summer Club"}`,eventDate:new Date().toLocaleDateString("ro-RO"),paymentMethod:"CASH",ticketCode:z,entryType:$.entryName,quantity:1,totalAmount:(f==null?void 0:f.ticketPrice)||50,ean13Barcode:(f==null?void 0:f.ean13Barcode)||"1234567890128",logoUrl:(f==null?void 0:f.logoUrl)||void 0};await ew.printReceipt(B,!0),ue.log("QRScanner: Receipt printed successfully")}catch(B){throw ue.error("QRScanner: Error printing receipt:",B),B}},N=$=>{},F=$=>{const z=$.target.value;t?H().then(()=>{v(z),M()}):v(z)};return x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsxs("div",{className:"w-full max-w-lg mb-6 relative",children:[x.jsx("div",{id:L,className:"w-full h-96 overflow-hidden rounded-lg shadow-xl bg-black"}),!t&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm rounded-lg",children:x.jsxs("div",{className:"text-center text-white",children:[x.jsx(sg,{className:"h-12 w-12 mx-auto mb-4 text-primary-400"}),x.jsx("p",{className:"text-lg",children:"Start the scanner to begin"})]})}),t&&x.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[x.jsx("div",{className:"h-1 bg-primary-500 opacity-75 animate-scanner-line"}),x.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-primary-500 opacity-50"})]})]}),g&&x.jsx("div",{className:"bg-red-900/30 border border-red-800 text-red-200 px-4 py-3 rounded-lg relative mb-4 w-full max-w-md",children:x.jsx("span",{className:"block sm:inline",children:g})}),o==="disconnected"&&x.jsx("div",{className:"bg-red-900/30 border-l-4 border-red-500 p-4 mb-4 w-full max-w-md rounded-lg",children:x.jsx("div",{className:"flex",children:x.jsx("div",{className:"ml-3",children:x.jsx("p",{className:"text-sm text-red-200",children:"Cannot scan tickets: Not connected to Supabase backend."})})})}),b.length>1&&x.jsxs("div",{className:"mb-4 w-full max-w-md",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Select Camera"}),x.jsx("select",{className:"block w-full px-3 py-2 bg-dark-800 border border-dark-700 text-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:w||"",onChange:F,disabled:t,children:b.map($=>x.jsx("option",{value:$.id,children:$.label||`Camera ${$.id}`},$.id))})]}),x.jsx("div",{className:"flex justify-center mt-2",children:t?x.jsxs("button",{onClick:H,className:"flex items-center space-x-2 bg-gradient-to-br from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-bold py-3 px-6 rounded-md transition-colors shadow-lg transform hover:scale-105 transition duration-200",children:[x.jsx(Px,{size:24}),x.jsx("span",{children:"Stop Scanner"})]}):x.jsxs("button",{onClick:M,className:"flex items-center space-x-2 bg-gradient-to-br from-primary-500 to-primary-700 hover:from-primary-600 hover:to-primary-800 text-white font-bold py-3 px-6 rounded-md transition-colors shadow-lg transform hover:scale-105 transition duration-200",disabled:!w||o!=="connected",children:[x.jsx(sg,{size:24}),x.jsx("span",{children:"Start Scanner"})]})})]})},dN=()=>{const{setLastScanResult:t,addScan:e,backendStatus:n,appSettings:i,setFlashColor:o}=$n(),[l,f]=G.useState(""),[g,m]=G.useState(!1),[w,v]=G.useState(""),[b,A]=G.useState(null),T=G.useRef(null),L=(i==null?void 0:i.clubName)||"Famous Summer Club";G.useEffect(()=>{const $=()=>{T.current&&document.activeElement!==T.current&&T.current.focus()};$();const z=setInterval($,100);return window.addEventListener("focus",$),document.addEventListener("click",$),()=>{clearInterval(z),window.removeEventListener("focus",$),document.removeEventListener("click",$)}},[]);const M=async $=>{if(!(!$.trim()||g||$===w)){ue.log("DesktopScanner: Processing QR code:",$),m(!0),v($);try{const z=await Ta.validateTicket($);try{await Ta.recordScan($,z.valid,z.message),ue.log("DesktopScanner: Scan recorded successfully")}catch(P){ue.error("DesktopScanner: Failed to record scan (but validation succeeded):",P)}const B={qrCode:$,timestamp:new Date().toISOString(),success:z.valid,message:z.message,ticket:z.ticket};if(z.valid){o("green"),setTimeout(()=>o(null),5e3);try{fetch("http://localhost:3333/open").then(()=>ue.log("DesktopScanner: Relay triggered - door/gate opened")).catch(()=>ue.warn("DesktopScanner: Relay error - could not trigger door/gate"))}catch(P){ue.warn("DesktopScanner: Relay API call failed:",P)}try{await H(z.ticket,$)}catch(P){ue.warn("DesktopScanner: Receipt printing failed:",P)}}else o("red"),setTimeout(()=>o(null),5e3);t(B),e(B)}catch(z){ue.error("DesktopScanner: Error processing scan:",z),o("red"),setTimeout(()=>o(null),5e3);const B={qrCode:$,timestamp:new Date().toISOString(),success:!1,message:"Error processing scan: Could not connect to Supabase"};t(B),e(B)}finally{setTimeout(()=>{m(!1),v("")},2e3)}}},H=async($,z)=>{try{const B={eventName:`${$.club||"Default Club"} - ${(i==null?void 0:i.clubName)||"Famous Summer Club"}`,eventDate:new Date().toLocaleDateString("ro-RO"),paymentMethod:"CASH",ticketCode:z,entryType:$.entryName,quantity:1,totalAmount:(i==null?void 0:i.ticketPrice)||50,ean13Barcode:(i==null?void 0:i.ean13Barcode)||"1234567890128",logoUrl:(i==null?void 0:i.logoUrl)||void 0};await ew.printReceipt(B,!0),ue.log("DesktopScanner: Receipt printed successfully")}catch(B){throw ue.error("DesktopScanner: Error printing receipt:",B),B}},O=$=>{const z=$.target.value;f(z),b&&clearTimeout(b);const B=setTimeout(()=>{z.trim()&&N(z)},300);A(B)},I=$=>{$.key==="Enter"&&($.preventDefault(),N(l))},N=($=l)=>{b&&(clearTimeout(b),A(null)),$.trim()&&!g&&(M($.trim()),f(""))},F=()=>{N()};return x.jsxs("div",{className:"flex flex-col items-center w-full max-w-2xl",children:[x.jsx("div",{className:"mb-8",children:i!=null&&i.logoUrl?x.jsx("div",{className:"flex justify-center",children:x.jsx("div",{className:"glass-card rounded-2xl p-6 shadow-mauve-glow",children:x.jsx("img",{src:i.logoUrl,alt:`${L} Logo`,className:"h-24 w-auto rounded-lg shadow-lg"})})}):x.jsx("div",{className:"flex justify-center",children:x.jsx("div",{className:"glass-card p-8 rounded-2xl shadow-mauve-glow",children:x.jsx("div",{className:"h-16 w-16 bg-mauve-500/20 rounded-lg flex items-center justify-center",children:x.jsx("span",{className:"text-2xl font-bold text-mauve-400",children:L.charAt(0)})})})})}),n!=="connected"&&x.jsx("div",{className:"bg-red-900/30 border-l-4 border-red-500 p-4 mb-6 w-full rounded-lg",children:x.jsx("div",{className:"flex",children:x.jsx("div",{className:"ml-3",children:x.jsx("p",{className:"text-sm text-red-200",children:"Cannot scan tickets: Not connected to Supabase backend."})})})}),x.jsx("div",{className:"w-full mb-6",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{ref:T,id:"qrcode-input",type:"text",value:l,onChange:O,onKeyPress:I,disabled:g||n!=="connected",placeholder:g?"Processing...":"Scan barcode or type QR code here...",className:`
              w-full px-6 py-6 text-xl bg-dark-800 border-2 rounded-xl text-white 
              focus:outline-none focus:ring-2 transition-all duration-200
              ${g?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500/50":n!=="connected"?"border-red-500 focus:border-red-500 focus:ring-red-500/50 cursor-not-allowed":"border-mauve-500/50 focus:border-mauve-500 focus:ring-mauve-500/50"}
              ${l?"pr-16":""}
            `,inputMode:"none",autoFocus:!1,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false"}),g&&x.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:x.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-yellow-400 border-t-transparent rounded-full"})}),l&&!g&&x.jsx("button",{onClick:F,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-mauve-600 hover:bg-mauve-700 text-white rounded-lg transition-colors",title:"Process QR Code (Enter)",children:x.jsx(h0,{className:"h-5 w-5"})})]})})]})},fN=({result:t})=>{const{success:e,message:n,timestamp:i,ticket:o,qrCode:l}=t,f=new Date(i).toLocaleTimeString();return G.useEffect(()=>{const g=document.getElementById(`scan-result-${i}`);g&&(g.classList.add("animate-appear"),setTimeout(()=>{g.classList.remove("animate-appear")},1e3))},[i]),x.jsxs("div",{id:`scan-result-${i}`,className:`
        glass-card rounded-2xl shadow-2xl transition-all duration-300
        transform motion-safe:animate-bounce-in overflow-hidden border
        ${e?"animate-border-success border-green-500/30":"animate-border-error border-red-500/30"}
      `,children:[x.jsx("div",{className:`
          w-full py-6 px-6 flex items-center justify-center font-bold text-2xl
          ${e?"gradient-mauve-light text-white shadow-inner":"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-inner"}
        `,children:e?x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"btn-square-lg glass bg-green-500/20 border-green-400/30",children:x.jsx(d3,{className:"h-8 w-8 text-green-400"})}),x.jsx("span",{children:"ACCESS GRANTED"})]}):x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"btn-square-lg glass bg-red-500/20 border-red-400/30",children:x.jsx(Px,{className:"h-8 w-8 text-red-400"})}),x.jsx("span",{children:"NO ACCESS"})]})}),x.jsx("div",{className:"p-6",children:x.jsxs("div",{className:"flex flex-col space-y-4",children:[x.jsx("p",{className:`text-base ${e?"text-green-300":"text-red-300"}`,children:n}),o&&x.jsxs("div",{className:"glass-card rounded-xl p-4 border border-mauve-500/20",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx("div",{className:"btn-square glass bg-mauve-500/20 border-mauve-400/30",children:x.jsx(E3,{className:"h-4 w-4 text-mauve-400"})}),x.jsx("p",{className:"text-sm font-medium text-mauve-300",children:"Ticket Details"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[x.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[x.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Entry Type"}),x.jsx("p",{className:"text-sm font-semibold text-white",children:o.entryName})]}),x.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[x.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Club"}),x.jsx("p",{className:"text-sm font-semibold text-white",children:o.club})]}),x.jsxs("div",{className:"glass rounded-lg p-3 border border-mauve-500/20",children:[x.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Entries Remaining"}),x.jsxs("p",{className:"text-sm font-semibold text-white flex items-center",children:[x.jsx(Rx,{className:"h-3.5 w-3.5 mr-1 text-gray-400"}),o.entriesRemaining]})]}),x.jsxs("div",{class:"glass rounded-lg p-3 border border-mauve-500/20",children:[x.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"QR Code"}),x.jsx("p",{className:"text-sm font-mono px-2 py-1 rounded text-gray-300 truncate",children:l})]})]})]}),x.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-400",children:[x.jsx(h3,{className:"h-3 w-3 mr-1"}),x.jsx("span",{children:f})]})]})})]})},tw=G.createContext(void 0),hN=({children:t})=>{const[e,n]=G.useState("mobile"),[i,o]=G.useState("mobile");G.useEffect(()=>{const f=()=>{const m="ontouchstart"in window||navigator.maxTouchPoints>0,w=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.innerWidth,b=m&&v<1024||w&&v<768?"mobile":"desktop";o(b);const A=localStorage.getItem("deviceMode");A?n(A):(n(b),localStorage.setItem("deviceMode",b))};f();const g=()=>{f()};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const l=f=>{n(f),localStorage.setItem("deviceMode",f)};return x.jsx(tw.Provider,{value:{mode:e,setMode:l,isMobile:e==="mobile",isDesktop:e==="desktop",autoDetectedMode:i},children:t})},nw=()=>{const t=G.useContext(tw);if(t===void 0)throw new Error("useDevice must be used within a DeviceProvider");return t},ep=()=>{const{lastScanResult:t,ticketsCount:e,backendStatus:n,appSettings:i}=$n(),{mode:o}=nw(),l=(i==null?void 0:i.clubName)||"Famous Summer Club",f=tt.getProjectInfo();return G.useEffect(()=>{document.title=`${l} Scan`},[l]),x.jsxs("div",{className:"flex flex-col items-center",children:[!f.isValid,n!=="connected"?x.jsx("div",{className:"glass-card border-l-4 border-red-500 p-6 mb-6 w-full max-w-2xl rounded-2xl border border-red-500/30",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"btn-square glass bg-red-500/20 border-red-400/30",children:x.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})}),x.jsx("div",{className:"ml-3",children:x.jsxs("p",{className:"text-sm text-red-200",children:[x.jsx("strong",{children:"Not connected to Supabase."})," Please check your credentials in the .env file and go to Settings to configure the database."]})})]})}):e===0?x.jsx("div",{className:"glass-card border-l-4 border-amber-500 p-6 mb-6 w-full max-w-2xl rounded-2xl border border-amber-500/30",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"btn-square glass bg-amber-500/20 border-amber-400/30",children:x.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),x.jsx("div",{className:"ml-3",children:x.jsx("p",{className:"text-sm text-amber-200",children:"No tickets found in database. Please go to Settings to import tickets."})})]})}):null,o==="mobile"?x.jsx(uN,{}):x.jsx(dN,{}),t&&x.jsxs("div",{className:"w-full max-w-2xl mt-6 animate-appear",children:[x.jsx("h2",{className:"text-lg font-medium text-gray-100 mb-2",children:"Last Scan"}),x.jsx(fN,{result:t})]})]})},gN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[o,l]=G.useState(""),[f,g]=G.useState(null),{appSettings:m,refreshAppSettings:w,backendStatus:v}=$n();Bs.useEffect(()=>{l((m==null?void 0:m.logoUrl)||"")},[m]);const b=async()=>{if(!o.trim()){g({text:"Please enter a valid image URL",type:"error"});return}try{new URL(o.trim())}catch{g({text:"Please enter a valid URL",type:"error"});return}e(!0),g({text:"Saving logo URL...",type:"info"});try{if(v!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");m?await tt.settings.saveSettings({...m,logoUrl:o.trim(),updatedAt:new Date().toISOString()}):await tt.settings.saveSettings({id:"settings",logoUrl:o.trim(),clubName:"Famous Summer Club",ean13Barcode:"1234567890128",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),g({text:"Logo URL saved successfully",type:"success"}),i(!1),w()}catch(L){g({text:`Save failed: ${L.message}`,type:"error"})}finally{e(!1)}},A=L=>new Promise(M=>{const H=new Ho;H.onload=()=>M(!0),H.onerror=()=>M(!1),H.src=L}),T=async()=>{if(o.trim()){g({text:"Testing image URL...",type:"info"});try{const L=await A(o.trim());g(L?{text:"Image URL is valid and loads successfully",type:"success"}:{text:"Image URL could not be loaded. Please check the URL.",type:"error"})}catch{g({text:"Error testing image URL",type:"error"})}}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[x.jsx(Ho,{className:"h-6 w-6 mr-2 text-primary-500"}),"Club Logo"]}),(m==null?void 0:m.logoUrl)&&x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"p-2 bg-dark-800 rounded-lg mb-3",children:x.jsx("img",{src:m.logoUrl,alt:"Club Logo",className:"h-32 object-contain rounded",onError:L=>{L.target.style.display="none"}})}),x.jsx("p",{className:"text-sm text-gray-400",children:"Current logo"})]}),x.jsx("div",{className:"mb-4",children:n?x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{htmlFor:"logoUrl",className:"block text-sm font-medium text-gray-300",children:"Logo Image URL"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"url",id:"logoUrl",value:o,onChange:L=>l(L.target.value),placeholder:"https://example.com/logo.png",className:"flex-1 px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:t||v!=="connected"}),x.jsxs("button",{onClick:T,disabled:!o.trim()||t||v!=="connected",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center space-x-2",title:"Test if image URL loads",children:[x.jsx(Nx,{className:"h-4 w-4"}),x.jsx("span",{children:"Test"})]})]})]}):x.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-200 font-medium",children:m!=null&&m.logoUrl?"Logo URL configured":"No logo URL set"}),(m==null?void 0:m.logoUrl)&&x.jsx("p",{className:"text-gray-400 text-sm mt-1 truncate max-w-md",children:m.logoUrl})]}),x.jsx("button",{onClick:()=>{i(!0),l((m==null?void 0:m.logoUrl)||"")},disabled:v!=="connected",className:`p-2 rounded-full ${v!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit logo URL",children:x.jsx(Ho,{className:"h-5 w-5"})})]})}),n&&x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx("button",{onClick:()=>{i(!1),l((m==null?void 0:m.logoUrl)||""),g(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:t,children:"Cancel"}),x.jsx("button",{onClick:b,disabled:t||v!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${t||v!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:t?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Saving..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(Of,{className:"h-4 w-4"}),x.jsx("span",{children:"Save"})]})})]}),f&&x.jsx("div",{className:`
          mt-4 p-4 rounded-md border
          ${f.type==="success"?"bg-green-900/30 text-green-200 border-green-800":f.type==="error"?"bg-red-900/30 text-red-200 border-red-800":"bg-blue-900/30 text-blue-200 border-blue-800"}
        `,children:x.jsxs("div",{className:"flex items-start space-x-3",children:[f.type==="success"?x.jsx(fr,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}):f.type==="error"?x.jsx(vi,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}):x.jsx(Ho,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),x.jsx("span",{children:f.text})]})}),x.jsxs("div",{className:"mt-6 bg-dark-800 p-4 rounded-md",children:[x.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Instructions:"}),x.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[x.jsx("li",{children:" Enter a direct URL to an image file (PNG, JPG, GIF)"}),x.jsx("li",{children:" Use public image hosting services like Imgur, CloudFlare, or your own server"}),x.jsx("li",{children:" Recommended size: 200x200 pixels or similar square format"}),x.jsx("li",{children:' Use the "Test" button to verify the image loads correctly'}),x.jsx("li",{children:" The logo will appear in the app header and on printed receipts"})]})]}),v!=="connected"&&x.jsx("div",{className:"mt-4 p-4 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Connection Error:"})," Cannot update logo URL because you are not connected to Supabase. Please check your Supabase credentials and try again."]})})]})},pN=()=>{const{appSettings:t,refreshAppSettings:e,backendStatus:n}=$n(),[i,o]=G.useState(!1),[l,f]=G.useState(""),[g,m]=G.useState(!1),[w,v]=G.useState(null);Bs.useEffect(()=>{f((t==null?void 0:t.clubName)||"Famous Summer Club")},[t]);const b=async()=>{if(!l.trim()){v({text:"Club name cannot be empty",type:"error"});return}m(!0),v(null);try{if(n!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");t?await tt.settings.saveSettings({...t,clubName:l.trim(),updatedAt:new Date().toISOString()}):await tt.settings.saveSettings({id:"settings",logoUrl:null,clubName:l.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v({text:"Club name updated successfully",type:"success"}),o(!1),await e(),setTimeout(()=>{(t==null?void 0:t.clubName)!==l.trim()&&v({text:"Settings saved but may not be reflected immediately. Please refresh the page.",type:"error"})},1e3)}catch(A){v({text:`Error: ${A.message}`,type:"error"})}finally{m(!1)}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[x.jsx(ag,{className:"h-6 w-6 mr-2 text-primary-500"}),"Club Name"]}),x.jsx("div",{className:"mb-4",children:i?x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{htmlFor:"clubName\\",className:"block text-sm font-medium text-gray-300",children:"Club Name"}),x.jsx("input",{type:"text",id:"clubName",value:l,onChange:A=>f(A.target.value),className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:g||n!=="connected"})]}):x.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[x.jsx("p",{className:"text-gray-200 font-medium",children:(t==null?void 0:t.clubName)||"Famous Summer Club"}),x.jsx("button",{onClick:()=>o(!0),disabled:n!=="connected",className:`p-2 rounded-full ${n!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit club name",children:x.jsx(ag,{className:"h-5 w-5"})})]})}),i&&x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx("button",{onClick:()=>{o(!1),f((t==null?void 0:t.clubName)||"Famous Summer Club"),v(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:g,children:"Cancel"}),x.jsx("button",{onClick:b,disabled:g||n!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${g||n!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:g?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Saving..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(Of,{className:"h-4 w-4"}),x.jsx("span",{children:"Save"})]})})]}),w&&x.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${w.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":"bg-red-900/30 text-red-200 border border-red-800"}
        `,children:[w.type==="success"?x.jsx(fr,{className:"h-5 w-5"}):x.jsx(vi,{className:"h-5 w-5"}),x.jsx("span",{children:w.text})]}),n!=="connected"&&i&&x.jsx("div",{className:"mt-4 p-3 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Connection Error:"})," Cannot update club name because you are not connected to Supabase. Please check your Supabase credentials in the .env file."]})})]})},mN=()=>{const{appSettings:t,refreshAppSettings:e,backendStatus:n}=$n(),[i,o]=G.useState(!1),[l,f]=G.useState((t==null?void 0:t.ean13Barcode)||""),[g,m]=G.useState(!1),[w,v]=G.useState(null),b=()=>{const T=Math.floor(Math.random()*999999999999).toString().padStart(12,"0");let L=0;for(let O=0;O<12;O++){const I=parseInt(T[O]);L+=O%2===0?I:I*3}const M=(10-L%10)%10,H=T+M;f(H)},A=async()=>{if(!l.trim()){v({text:"EAN13 barcode cannot be empty",type:"error"});return}if(!/^\d{13}$/.test(l)){v({text:"EAN13 barcode must be exactly 13 digits",type:"error"});return}m(!0),v(null);try{if(n!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");t?await tt.settings.saveSettings({...t,ean13Barcode:l.trim(),updatedAt:new Date().toISOString()}):await tt.settings.saveSettings({id:"settings",logoUrl:null,clubName:"Famous Summer Club",ean13Barcode:l.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v({text:"EAN13 barcode updated successfully",type:"success"}),o(!1),await e(),setTimeout(()=>{(t==null?void 0:t.ean13Barcode)!==l.trim()&&v({text:"Settings saved but may not be reflected immediately. Please refresh the page.",type:"error"})},1e3)}catch(T){v({text:`Error: ${T.message}`,type:"error"})}finally{m(!1)}};return x.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[x.jsx(ig,{className:"h-6 w-6 mr-2 text-primary-500"}),"EAN13 Barcode fr Kassensystem"]}),x.jsx("p",{className:"text-gray-300 mb-4",children:"Dieser EAN13-Code wird auf allen gedruckten Belegen angezeigt und kann vom Kassensystem gescannt werden."}),x.jsx("div",{className:"mb-4",children:i?x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{htmlFor:"ean13Barcode",className:"block text-sm font-medium text-gray-300",children:"EAN13 Barcode (13 Ziffern)"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"text",id:"ean13Barcode",value:l,onChange:T=>f(T.target.value.replace(/\D/g,"").slice(0,13)),placeholder:"1234567890123",className:"flex-1 px-4 py-2 bg-dark-800 border border-dark-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono",disabled:g||n!=="connected"}),x.jsxs("button",{onClick:b,disabled:g||n!=="connected",className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors flex items-center space-x-2",title:"Generate random EAN13 code",children:[x.jsx(na,{className:"h-4 w-4"}),x.jsx("span",{children:"Generate"})]})]})]}):x.jsxs("div",{className:"flex items-center justify-between bg-dark-800 p-4 rounded-md",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-200 font-mono text-lg",children:(t==null?void 0:t.ean13Barcode)||"Not set"}),x.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Current EAN13 barcode"})]}),x.jsx("button",{onClick:()=>{o(!0),f((t==null?void 0:t.ean13Barcode)||"")},disabled:n!=="connected",className:`p-2 rounded-full ${n!=="connected"?"text-gray-500 cursor-not-allowed":"text-primary-400 hover:bg-dark-700"}`,"aria-label":"Edit EAN13 barcode",children:x.jsx(ig,{className:"h-5 w-5"})})]})}),i&&x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx("button",{onClick:()=>{o(!1),f((t==null?void 0:t.ean13Barcode)||""),v(null)},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-md transition-colors",disabled:g,children:"Cancel"}),x.jsx("button",{onClick:A,disabled:g||n!=="connected",className:`
              flex items-center space-x-2 px-4 py-2 rounded-md text-white
              ${g||n!=="connected"?"bg-dark-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}
            `,children:g?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Saving..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(Of,{className:"h-4 w-4"}),x.jsx("span",{children:"Save"})]})})]}),w&&x.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${w.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":"bg-red-900/30 text-red-200 border border-red-800"}
        `,children:[w.type==="success"?x.jsx(fr,{className:"h-5 w-5"}):x.jsx(vi,{className:"h-5 w-5"}),x.jsx("span",{children:w.text})]}),n!=="connected"&&i&&x.jsx("div",{className:"mt-4 p-3 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Connection Error:"})," Cannot update EAN13 barcode because you are not connected to Supabase. Please check your Supabase credentials in the .env file."]})}),x.jsxs("div",{className:"mt-4 bg-dark-800 p-4 rounded-md",children:[x.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Usage:"}),x.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[x.jsx("li",{children:" This barcode appears on all printed receipts"}),x.jsx("li",{children:" Cashiers can scan this code for payment processing"}),x.jsx("li",{children:" Must be exactly 13 digits for EAN13 compatibility"}),x.jsx("li",{children:' Use "Generate" to create a valid random code'})]})]})]})};var rw={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,i)=>{t.exports=i()})(Gt,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,l=!i.document&&!!i.postMessage,f=i.IS_PAPA_WORKER||!1,g={},m=0,w={};function v(P){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var X=$(R);X.chunkSize=parseInt(X.chunkSize),R.step||R.chunk||(X.chunkSize=null),this._handle=new M(X),(this._handle.streamer=this)._config=X}).call(this,P),this.parseChunk=function(R,X){var re=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<re){let ae=this._config.newline;ae||(Q=this._config.quoteChar||'"',ae=this._handle.guessLineEndings(R,Q)),R=[...R.split(ae).slice(re)].join(ae)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(Q=this._config.beforeFirstChunk(R))!==void 0&&(R=Q),this.isFirstChunk=!1,this._halted=!1;var re=this._partialLine+R,Q=(this._partialLine="",this._handle.parse(re,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(R=Q.meta.cursor,re=(this._finished||(this._partialLine=re.substring(R-this._baseIndex),this._baseIndex=R),Q&&Q.data&&(this._rowCount+=Q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)i.postMessage({results:Q,workerId:w.WORKER_ID,finished:re});else if(B(this._config.chunk)&&!X){if(this._config.chunk(Q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Q.data),this._completeResults.errors=this._completeResults.errors.concat(Q.errors),this._completeResults.meta=Q.meta),this._completed||!re||!B(this._config.complete)||Q&&Q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),re||Q&&Q.meta.paused||this._nextChunk(),Q}this._halted=!0},this._sendError=function(R){B(this._config.error)?this._config.error(R):f&&this._config.error&&i.postMessage({workerId:w.WORKER_ID,error:R,finished:!1})}}function b(P){var R;(P=P||{}).chunkSize||(P.chunkSize=w.RemoteChunkSize),v.call(this,P),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(X){this._input=X,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),l||(R.onload=z(this._chunkLoaded,this),R.onerror=z(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var X,re=this._config.downloadRequestHeaders;for(X in re)R.setRequestHeader(X,re[X])}var Q;this._config.chunkSize&&(Q=this._start+this._config.chunkSize-1,R.setRequestHeader("Range","bytes="+this._start+"-"+Q));try{R.send(this._config.downloadRequestBody)}catch(ae){this._chunkError(ae.message)}l&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize||R.responseText.length,this._finished=!this._config.chunkSize||this._start>=(X=>(X=X.getResponseHeader("Content-Range"))!==null?parseInt(X.substring(X.lastIndexOf("/")+1)):-1)(R),this.parseChunk(R.responseText)))},this._chunkError=function(X){X=R.statusText||X,this._sendError(new Error(X))}}function A(P){(P=P||{}).chunkSize||(P.chunkSize=w.LocalChunkSize),v.call(this,P);var R,X,re=typeof FileReader<"u";this.stream=function(Q){this._input=Q,X=Q.slice||Q.webkitSlice||Q.mozSlice,re?((R=new FileReader).onload=z(this._chunkLoaded,this),R.onerror=z(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Q=this._input,ae=(this._config.chunkSize&&(ae=Math.min(this._start+this._config.chunkSize,this._input.size),Q=X.call(Q,this._start,ae)),R.readAsText(Q,this._config.encoding));re||this._chunkLoaded({target:{result:ae}})},this._chunkLoaded=function(Q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Q.target.result)},this._chunkError=function(){this._sendError(R.error)}}function T(P){var R;v.call(this,P=P||{}),this.stream=function(X){return R=X,this._nextChunk()},this._nextChunk=function(){var X,re;if(!this._finished)return X=this._config.chunkSize,R=X?(re=R.substring(0,X),R.substring(X)):(re=R,""),this._finished=!R,this.parseChunk(re)}}function L(P){v.call(this,P=P||{});var R=[],X=!0,re=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Q){this._input=Q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){re&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):X=!0},this._streamData=z(function(Q){try{R.push(typeof Q=="string"?Q:Q.toString(this._config.encoding)),X&&(X=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(ae){this._streamError(ae)}},this),this._streamError=z(function(Q){this._streamCleanUp(),this._sendError(Q)},this),this._streamEnd=z(function(){this._streamCleanUp(),re=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function M(P){var R,X,re,Q,ae=Math.pow(2,53),Re=-ae,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Fe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,le=this,ne=0,te=0,ye=!1,he=!1,fe=[],ge={data:[],errors:[],meta:{}};function Oe(_e){return P.skipEmptyLines==="greedy"?_e.join("").trim()==="":_e.length===1&&_e[0].length===0}function Xe(){if(ge&&re&&(yt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+w.DefaultDelimiter+"'"),re=!1),P.skipEmptyLines&&(ge.data=ge.data.filter(function(be){return!Oe(be)})),de()){let be=function(Qe,Se){B(P.transformHeader)&&(Qe=P.transformHeader(Qe,Se)),fe.push(Qe)};if(ge)if(Array.isArray(ge.data[0])){for(var _e=0;de()&&_e<ge.data.length;_e++)ge.data[_e].forEach(be);ge.data.splice(0,1)}else ge.data.forEach(be)}function Le(be,Qe){for(var Se=P.header?{}:[],Z=0;Z<be.length;Z++){var Te=Z,Ne=be[Z],Ne=((Ye,pe)=>(ve=>(P.dynamicTypingFunction&&P.dynamicTyping[ve]===void 0&&(P.dynamicTyping[ve]=P.dynamicTypingFunction(ve)),(P.dynamicTyping[ve]||P.dynamicTyping)===!0))(Ye)?pe==="true"||pe==="TRUE"||pe!=="false"&&pe!=="FALSE"&&((ve=>{if(K.test(ve)&&(ve=parseFloat(ve),Re<ve&&ve<ae))return 1})(pe)?parseFloat(pe):Fe.test(pe)?new Date(pe):pe===""?null:pe):pe)(Te=P.header?Z>=fe.length?"__parsed_extra":fe[Z]:Te,Ne=P.transform?P.transform(Ne,Te):Ne);Te==="__parsed_extra"?(Se[Te]=Se[Te]||[],Se[Te].push(Ne)):Se[Te]=Ne}return P.header&&(Z>fe.length?yt("FieldMismatch","TooManyFields","Too many fields: expected "+fe.length+" fields but parsed "+Z,te+Qe):Z<fe.length&&yt("FieldMismatch","TooFewFields","Too few fields: expected "+fe.length+" fields but parsed "+Z,te+Qe)),Se}var qe;ge&&(P.header||P.dynamicTyping||P.transform)&&(qe=1,!ge.data.length||Array.isArray(ge.data[0])?(ge.data=ge.data.map(Le),qe=ge.data.length):ge.data=Le(ge.data,0),P.header&&ge.meta&&(ge.meta.fields=fe),te+=qe)}function de(){return P.header&&fe.length===0}function yt(_e,Le,qe,be){_e={type:_e,code:Le,message:qe},be!==void 0&&(_e.row=be),ge.errors.push(_e)}B(P.step)&&(Q=P.step,P.step=function(_e){ge=_e,de()?Xe():(Xe(),ge.data.length!==0&&(ne+=_e.data.length,P.preview&&ne>P.preview?X.abort():(ge.data=ge.data[0],Q(ge,le))))}),this.parse=function(_e,Le,qe){var be=P.quoteChar||'"',be=(P.newline||(P.newline=this.guessLineEndings(_e,be)),re=!1,P.delimiter?B(P.delimiter)&&(P.delimiter=P.delimiter(_e),ge.meta.delimiter=P.delimiter):((be=((Qe,Se,Z,Te,Ne)=>{var Ye,pe,ve,ln;Ne=Ne||[",","	","|",";",w.RECORD_SEP,w.UNIT_SEP];for(var me=0;me<Ne.length;me++){for(var cn,zr=Ne[me],at=0,mn=0,Je=0,qt=(ve=void 0,new O({comments:Te,delimiter:zr,newline:Se,preview:10}).parse(Qe)),Ft=0;Ft<qt.data.length;Ft++)Z&&Oe(qt.data[Ft])?Je++:(cn=qt.data[Ft].length,mn+=cn,ve===void 0?ve=cn:0<cn&&(at+=Math.abs(cn-ve),ve=cn));0<qt.data.length&&(mn/=qt.data.length-Je),(pe===void 0||at<=pe)&&(ln===void 0||ln<mn)&&1.99<mn&&(pe=at,Ye=zr,ln=mn)}return{successful:!!(P.delimiter=Ye),bestDelimiter:Ye}})(_e,P.newline,P.skipEmptyLines,P.comments,P.delimitersToGuess)).successful?P.delimiter=be.bestDelimiter:(re=!0,P.delimiter=w.DefaultDelimiter),ge.meta.delimiter=P.delimiter),$(P));return P.preview&&P.header&&be.preview++,R=_e,X=new O(be),ge=X.parse(R,Le,qe),Xe(),ye?{meta:{paused:!0}}:ge||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,X.abort(),R=B(P.chunk)?"":R.substring(X.getCharIndex())},this.resume=function(){le.streamer._halted?(ye=!1,le.streamer.parseChunk(R,!0)):setTimeout(le.resume,3)},this.aborted=function(){return he},this.abort=function(){he=!0,X.abort(),ge.meta.aborted=!0,B(P.complete)&&P.complete(ge),R=""},this.guessLineEndings=function(Qe,be){Qe=Qe.substring(0,1048576);var be=new RegExp(H(be)+"([^]*?)"+H(be),"gm"),qe=(Qe=Qe.replace(be,"")).split("\r"),be=Qe.split(`
`),Qe=1<be.length&&be[0].length<qe[0].length;if(qe.length===1||Qe)return`
`;for(var Se=0,Z=0;Z<qe.length;Z++)qe[Z][0]===`
`&&Se++;return Se>=qe.length/2?`\r
`:"\r"}}function H(P){return P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(P){var R=(P=P||{}).delimiter,X=P.newline,re=P.comments,Q=P.step,ae=P.preview,Re=P.fastMode,K=null,Fe=!1,le=P.quoteChar==null?'"':P.quoteChar,ne=le;if(P.escapeChar!==void 0&&(ne=P.escapeChar),(typeof R!="string"||-1<w.BAD_DELIMITERS.indexOf(R))&&(R=","),re===R)throw new Error("Comment character same as delimiter");re===!0?re="#":(typeof re!="string"||-1<w.BAD_DELIMITERS.indexOf(re))&&(re=!1),X!==`
`&&X!=="\r"&&X!==`\r
`&&(X=`
`);var te=0,ye=!1;this.parse=function(he,fe,ge){if(typeof he!="string")throw new Error("Input must be a string");var Oe=he.length,Xe=R.length,de=X.length,yt=re.length,_e=B(Q),Le=[],qe=[],be=[],Qe=te=0;if(!he)return at();if(Re||Re!==!1&&he.indexOf(le)===-1){for(var Se=he.split(X),Z=0;Z<Se.length;Z++){if(be=Se[Z],te+=be.length,Z!==Se.length-1)te+=X.length;else if(ge)return at();if(!re||be.substring(0,yt)!==re){if(_e){if(Le=[],ln(be.split(R)),mn(),ye)return at()}else ln(be.split(R));if(ae&&ae<=Z)return Le=Le.slice(0,ae),at(!0)}}return at()}for(var Te=he.indexOf(R,te),Ne=he.indexOf(X,te),Ye=new RegExp(H(ne)+H(le),"g"),pe=he.indexOf(le,te);;)if(he[te]===le)for(pe=te,te++;;){if((pe=he.indexOf(le,pe+1))===-1)return ge||qe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Le.length,index:te}),cn();if(pe===Oe-1)return cn(he.substring(te,pe).replace(Ye,le));if(le===ne&&he[pe+1]===ne)pe++;else if(le===ne||pe===0||he[pe-1]!==ne){Te!==-1&&Te<pe+1&&(Te=he.indexOf(R,pe+1));var ve=me((Ne=Ne!==-1&&Ne<pe+1?he.indexOf(X,pe+1):Ne)===-1?Te:Math.min(Te,Ne));if(he.substr(pe+1+ve,Xe)===R){be.push(he.substring(te,pe).replace(Ye,le)),he[te=pe+1+ve+Xe]!==le&&(pe=he.indexOf(le,te)),Te=he.indexOf(R,te),Ne=he.indexOf(X,te);break}if(ve=me(Ne),he.substring(pe+1+ve,pe+1+ve+de)===X){if(be.push(he.substring(te,pe).replace(Ye,le)),zr(pe+1+ve+de),Te=he.indexOf(R,te),pe=he.indexOf(le,te),_e&&(mn(),ye))return at();if(ae&&Le.length>=ae)return at(!0);break}qe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Le.length,index:te}),pe++}}else if(re&&be.length===0&&he.substring(te,te+yt)===re){if(Ne===-1)return at();te=Ne+de,Ne=he.indexOf(X,te),Te=he.indexOf(R,te)}else if(Te!==-1&&(Te<Ne||Ne===-1))be.push(he.substring(te,Te)),te=Te+Xe,Te=he.indexOf(R,te);else{if(Ne===-1)break;if(be.push(he.substring(te,Ne)),zr(Ne+de),_e&&(mn(),ye))return at();if(ae&&Le.length>=ae)return at(!0)}return cn();function ln(Je){Le.push(Je),Qe=te}function me(Je){var qt=0;return qt=Je!==-1&&(Je=he.substring(pe+1,Je))&&Je.trim()===""?Je.length:qt}function cn(Je){return ge||(Je===void 0&&(Je=he.substring(te)),be.push(Je),te=Oe,ln(be),_e&&mn()),at()}function zr(Je){te=Je,ln(be),be=[],Ne=he.indexOf(X,te)}function at(Je){if(P.header&&!fe&&Le.length&&!Fe){var qt=Le[0],Ft=Object.create(null),Pt=new Set(qt);let xo=!1;for(let nr=0;nr<qt.length;nr++){let Vn=qt[nr];if(Ft[Vn=B(P.transformHeader)?P.transformHeader(Vn,nr):Vn]){let lt,ce=Ft[Vn];for(;lt=Vn+"_"+ce,ce++,Pt.has(lt););Pt.add(lt),qt[nr]=lt,Ft[Vn]++,xo=!0,(K=K===null?{}:K)[lt]=Vn}else Ft[Vn]=1,qt[nr]=Vn;Pt.add(Vn)}xo&&console.warn("Duplicate headers found and renamed."),Fe=!0}return{data:Le,errors:qe,meta:{delimiter:R,linebreak:X,aborted:ye,truncated:!!Je,cursor:Qe+(fe||0),renamedHeaders:K}}}function mn(){Q(at()),Le=[],qe=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return te}}function I(P){var R=P.data,X=g[R.workerId],re=!1;if(R.error)X.userError(R.error,R.file);else if(R.results&&R.results.data){var Q={abort:function(){re=!0,N(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(B(X.userStep)){for(var ae=0;ae<R.results.data.length&&(X.userStep({data:R.results.data[ae],errors:R.results.errors,meta:R.results.meta},Q),!re);ae++);delete R.results}else B(X.userChunk)&&(X.userChunk(R.results,Q,R.file),delete R.results)}R.finished&&!re&&N(R.workerId,R.results)}function N(P,R){var X=g[P];B(X.userComplete)&&X.userComplete(R),X.terminate(),delete g[P]}function F(){throw new Error("Not implemented.")}function $(P){if(typeof P!="object"||P===null)return P;var R,X=Array.isArray(P)?[]:{};for(R in P)X[R]=$(P[R]);return X}function z(P,R){return function(){P.apply(R,arguments)}}function B(P){return typeof P=="function"}return w.parse=function(P,R){var X=(R=R||{}).dynamicTyping||!1;if(B(X)&&(R.dynamicTypingFunction=X,X={}),R.dynamicTyping=X,R.transform=!!B(R.transform)&&R.transform,!R.worker||!w.WORKERS_SUPPORTED)return X=null,w.NODE_STREAM_INPUT,typeof P=="string"?(P=(re=>re.charCodeAt(0)!==65279?re:re.slice(1))(P),X=new(R.download?b:T)(R)):P.readable===!0&&B(P.read)&&B(P.on)?X=new L(R):(i.File&&P instanceof File||P instanceof Object)&&(X=new A(R)),X.stream(P);(X=(()=>{var re;return!!w.WORKERS_SUPPORTED&&(re=(()=>{var Q=i.URL||i.webkitURL||null,ae=n.toString();return w.BLOB_URL||(w.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ae,")();"],{type:"text/javascript"})))})(),(re=new i.Worker(re)).onmessage=I,re.id=m++,g[re.id]=re)})()).userStep=R.step,X.userChunk=R.chunk,X.userComplete=R.complete,X.userError=R.error,R.step=B(R.step),R.chunk=B(R.chunk),R.complete=B(R.complete),R.error=B(R.error),delete R.worker,X.postMessage({input:P,config:R,workerId:X.id})},w.unparse=function(P,R){var X=!1,re=!0,Q=",",ae=`\r
`,Re='"',K=Re+Re,Fe=!1,le=null,ne=!1,te=((()=>{if(typeof R=="object"){if(typeof R.delimiter!="string"||w.BAD_DELIMITERS.filter(function(fe){return R.delimiter.indexOf(fe)!==-1}).length||(Q=R.delimiter),typeof R.quotes!="boolean"&&typeof R.quotes!="function"&&!Array.isArray(R.quotes)||(X=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(Fe=R.skipEmptyLines),typeof R.newline=="string"&&(ae=R.newline),typeof R.quoteChar=="string"&&(Re=R.quoteChar),typeof R.header=="boolean"&&(re=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");le=R.columns}R.escapeChar!==void 0&&(K=R.escapeChar+Re),R.escapeFormulae instanceof RegExp?ne=R.escapeFormulae:typeof R.escapeFormulae=="boolean"&&R.escapeFormulae&&(ne=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(Re),"g"));if(typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(P)){if(!P.length||Array.isArray(P[0]))return ye(null,P,Fe);if(typeof P[0]=="object")return ye(le||Object.keys(P[0]),P,Fe)}else if(typeof P=="object")return typeof P.data=="string"&&(P.data=JSON.parse(P.data)),Array.isArray(P.data)&&(P.fields||(P.fields=P.meta&&P.meta.fields||le),P.fields||(P.fields=Array.isArray(P.data[0])?P.fields:typeof P.data[0]=="object"?Object.keys(P.data[0]):[]),Array.isArray(P.data[0])||typeof P.data[0]=="object"||(P.data=[P.data])),ye(P.fields||[],P.data||[],Fe);throw new Error("Unable to serialize unrecognized input");function ye(fe,ge,Oe){var Xe="",de=(typeof fe=="string"&&(fe=JSON.parse(fe)),typeof ge=="string"&&(ge=JSON.parse(ge)),Array.isArray(fe)&&0<fe.length),yt=!Array.isArray(ge[0]);if(de&&re){for(var _e=0;_e<fe.length;_e++)0<_e&&(Xe+=Q),Xe+=he(fe[_e],_e);0<ge.length&&(Xe+=ae)}for(var Le=0;Le<ge.length;Le++){var qe=(de?fe:ge[Le]).length,be=!1,Qe=de?Object.keys(ge[Le]).length===0:ge[Le].length===0;if(Oe&&!de&&(be=Oe==="greedy"?ge[Le].join("").trim()==="":ge[Le].length===1&&ge[Le][0].length===0),Oe==="greedy"&&de){for(var Se=[],Z=0;Z<qe;Z++){var Te=yt?fe[Z]:Z;Se.push(ge[Le][Te])}be=Se.join("").trim()===""}if(!be){for(var Ne=0;Ne<qe;Ne++){0<Ne&&!Qe&&(Xe+=Q);var Ye=de&&yt?fe[Ne]:Ne;Xe+=he(ge[Le][Ye],Ne)}Le<ge.length-1&&(!Oe||0<qe&&!Qe)&&(Xe+=ae)}}return Xe}function he(fe,ge){var Oe,Xe;return fe==null?"":fe.constructor===Date?JSON.stringify(fe).slice(1,25):(Xe=!1,ne&&typeof fe=="string"&&ne.test(fe)&&(fe="'"+fe,Xe=!0),Oe=fe.toString().replace(te,K),(Xe=Xe||X===!0||typeof X=="function"&&X(fe,ge)||Array.isArray(X)&&X[ge]||((de,yt)=>{for(var _e=0;_e<yt.length;_e++)if(-1<de.indexOf(yt[_e]))return!0;return!1})(Oe,w.BAD_DELIMITERS)||-1<Oe.indexOf(Q)||Oe.charAt(0)===" "||Oe.charAt(Oe.length-1)===" ")?Re+Oe+Re:Oe)}},w.RECORD_SEP="",w.UNIT_SEP="",w.BYTE_ORDER_MARK="\uFEFF",w.BAD_DELIMITERS=["\r",`
`,'"',w.BYTE_ORDER_MARK],w.WORKERS_SUPPORTED=!l&&!!i.Worker,w.NODE_STREAM_INPUT=1,w.LocalChunkSize=10485760,w.RemoteChunkSize=5242880,w.DefaultDelimiter=",",w.Parser=O,w.ParserHandle=M,w.NetworkStreamer=b,w.FileStreamer=A,w.StringStreamer=T,w.ReadableStreamStreamer=L,i.jQuery&&((o=i.jQuery).fn.parse=function(P){var R=P.config||{},X=[];return this.each(function(ae){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Re=0;Re<this.files.length;Re++)X.push({file:this.files[Re],inputElem:this,instanceConfig:o.extend({},R)})}),re(),this;function re(){if(X.length===0)B(P.complete)&&P.complete();else{var ae,Re,K,Fe,le=X[0];if(B(P.before)){var ne=P.before(le.file,le.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return ae="AbortError",Re=le.file,K=le.inputElem,Fe=ne.reason,void(B(P.error)&&P.error({name:ae},Re,K,Fe));if(ne.action==="skip")return void Q();typeof ne.config=="object"&&(le.instanceConfig=o.extend(le.instanceConfig,ne.config))}else if(ne==="skip")return void Q()}var te=le.instanceConfig.complete;le.instanceConfig.complete=function(ye){B(te)&&te(ye,le.file,le.inputElem),Q()},w.parse(le.file,le.instanceConfig)}}function Q(){X.splice(0,1),re()}}),f&&(i.onmessage=function(P){P=P.data,w.WORKER_ID===void 0&&P&&(w.WORKER_ID=P.workerId),typeof P.input=="string"?i.postMessage({workerId:w.WORKER_ID,results:w.parse(P.input,P.config),finished:!0}):(i.File&&P.input instanceof File||P.input instanceof Object)&&(P=w.parse(P.input,P.config))&&i.postMessage({workerId:w.WORKER_ID,results:P,finished:!0})}),(b.prototype=Object.create(v.prototype)).constructor=b,(A.prototype=Object.create(v.prototype)).constructor=A,(T.prototype=Object.create(T.prototype)).constructor=T,(L.prototype=Object.create(v.prototype)).constructor=L,w})})(rw);var xN=rw.exports;const wN=bc(xN),yN=t=>new Promise((e,n)=>{wN.parse(t,{header:!0,skipEmptyLines:!0,complete:i=>{try{const o=i.data.map(l=>{if(!l.qrCode)throw new Error("CSV missing required qrCode field");return{qrCode:(l.qrCode||"").trim(),entryName:(l.entryName||"Default Entry").trim(),entriesRemaining:parseInt((l.entriesRemaining||"1").toString().trim(),10),lastScanned:null,club:(l.club||"Default Club").trim()}});e(o)}catch(o){n(o)}},error:i=>{n(i)}})}),vN=()=>{const t=`qrCode,entryName,entriesRemaining,club
TICKET001,Regular Entry,1,Capricci
TICKET002,VIP Access,3,Intooit
TICKET003,Backstage Pass,2,Capricci`;return new Blob([t],{type:"text/csv;charset=utf-8;"})},iw=async t=>{try{const e=await yN(t);if(e.length===0)return{success:!1,message:"No valid tickets found in the CSV file"};const n=new Map;e.forEach(f=>{n.set(f.qrCode,f)});const i=Array.from(n.values()),o=e.length-i.length;if(o>0&&ue.log(`CSV: Removed ${o} duplicate tickets based on qrCode`),ue.log(`CSV: Parsed ${i.length} unique tickets from CSV`),await Ms.checkConnection())try{ue.log("CSV: Importing tickets via WebView API...");const f=await Ms.importTickets(i);return f.success?{success:!0,message:o>0?`Successfully imported ${f.count} unique tickets to the database (${o} duplicates were skipped)`:`Successfully imported ${f.count} tickets to the database`,count:f.count}:{success:!1,message:"Failed to import tickets to database"}}catch(f){throw ue.error("CSV: Error importing tickets:",f),new Error(`Error importing tickets to backend: ${f.message}`)}else return{success:!1,message:"Supabase backend is not available. Please check your Supabase credentials and try again."}}catch(e){return ue.error("CSV: Error in import process:",e),{success:!1,message:`Error importing tickets: ${e.message}`}}},EN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(null),{refreshTicketsCount:o,backendStatus:l}=$n(),[f]=G.useState("showOpenFilePicker"in window),g=async()=>{if(l!=="connected"){i({text:"Not connected to Supabase. Please check your credentials and try again.",type:"error"});return}e(!0),i({text:"Opening file picker...",type:"info"});try{const m=await Wt.openFile([".csv"]);if(!m){e(!1),i(null);return}i({text:"Processing file...",type:"info"});const w=await iw(m);w.success?(i({text:w.message,type:"success"}),o()):i({text:w.message,type:"error"})}catch(m){i({text:`Error: ${m.message}`,type:"error"})}finally{e(!1)}};return f?x.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-lg shadow-xl p-6 mb-6 border border-blue-800/50",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[x.jsx(m3,{className:"h-6 w-6 mr-2 text-blue-400"}),"Advanced File Access"]}),x.jsx("p",{className:"text-blue-200 mb-4",children:"Use enhanced file system access to browse and select CSV files from your device."}),x.jsx("button",{onClick:g,disabled:t||l!=="connected",className:`
          flex items-center justify-center space-x-2 py-3 px-6 rounded-lg font-medium
          transition-all duration-200 shadow-lg w-full
          ${t||l!=="connected"?"bg-dark-800 text-gray-400 cursor-not-allowed border border-dark-700":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border border-blue-500 transform hover:scale-105"}
        `,children:t?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),x.jsx("span",{children:"Processing..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(p3,{className:"h-5 w-5"}),x.jsx("span",{children:"Browse & Select CSV File"})]})}),n&&x.jsxs("div",{className:`
          mt-4 p-4 rounded-lg flex items-start space-x-3 border
          ${n.type==="success"?"bg-green-900/30 text-green-200 border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border-red-800":"bg-blue-900/30 text-blue-200 border-blue-800"}
        `,children:[n.type==="success"?x.jsx(fr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?x.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):x.jsx(Rf,{className:"h-5 w-5 flex-shrink-0"}),x.jsx("span",{children:n.text})]}),x.jsxs("div",{className:"mt-4 text-sm text-blue-300 bg-blue-950/50 p-3 rounded-lg",children:[x.jsx("p",{className:"font-medium mb-2",children:"Enhanced Features:"}),x.jsxs("ul",{className:"space-y-1 text-xs",children:[x.jsx("li",{children:" Direct access to your device's file system"}),x.jsx("li",{children:" Better file browsing experience"}),x.jsx("li",{children:" Secure file handling with modern browser APIs"}),x.jsx("li",{children:" Works offline when files are already on device"})]})]})]}):null},bN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(null),o=G.useRef(null),{refreshTicketsCount:l,backendStatus:f}=$n(),g=async v=>{var A;const b=(A=v.target.files)==null?void 0:A[0];if(b){if(b.type!=="text/csv"&&!b.name.endsWith(".csv")){i({text:"Please upload a CSV file",type:"error"});return}e(!0),i({text:"Uploading and processing file...",type:"info"});try{if(f!=="connected")throw new Error("Not connected to Supabase. Please check your credentials and try again.");const T=await iw(b);T.success?(i({text:T.message,type:"success"}),l()):i({text:T.message,type:"error"})}catch(T){i({text:`Error: ${T.message}`,type:"error"})}finally{e(!1),o.current&&(o.current.value="")}}},m=()=>{var v;(v=o.current)==null||v.click()},w=()=>{try{const v=vN(),b=URL.createObjectURL(v),A=document.createElement("a");A.href=b,A.download="ticket-template.csv",document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(b),i({text:"Template downloaded successfully",type:"success"})}catch(v){i({text:`Error downloading template: ${v.message}`,type:"error"})}};return x.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Import Tickets"}),x.jsx("p",{className:"text-gray-300 mb-4",children:"Upload a CSV file containing QR codes and ticket information. The CSV should have the following columns:"}),x.jsx("div",{className:"bg-dark-800 p-3 rounded mb-4 font-mono text-sm text-gray-300",children:x.jsx("code",{children:"qrCode, entryName, entriesRemaining, club"})}),x.jsxs("div",{className:"flex space-x-3 mb-6",children:[x.jsxs("button",{onClick:w,className:`flex items-center justify-center space-x-2 py-2 px-4 
                   bg-dark-800 text-gray-300 hover:bg-dark-700
                   border border-dark-700 rounded-lg transition-colors`,children:[x.jsx(kf,{className:"h-5 w-5"}),x.jsx("span",{children:"Download Template"})]}),x.jsx("input",{type:"file",ref:o,onChange:g,accept:".csv",className:"hidden"}),x.jsx("button",{onClick:m,disabled:t||f!=="connected",className:`
            flex-1 flex items-center justify-center space-x-2 py-2 px-4 
            border rounded-lg transition-colors
            ${t||f!=="connected"?"bg-dark-800 text-gray-500 border-dark-700 cursor-not-allowed":"border-primary-700 bg-primary-600 text-white hover:bg-primary-700"}
          `,children:t?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Processing..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(Rf,{className:"h-5 w-5"}),x.jsx("span",{children:"Upload CSV File"})]})})]}),n&&x.jsxs("div",{className:`
          p-4 rounded-md flex items-start space-x-3
          ${n.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[n.type==="success"?x.jsx(fr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?x.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):x.jsx(g3,{className:"h-5 w-5 flex-shrink-0"}),x.jsx("span",{children:n.text})]}),f!=="connected"&&x.jsx("div",{className:"mt-4 p-4 rounded-md bg-red-900/30 text-red-200 border border-red-800",children:x.jsxs("p",{className:"text-sm",children:[x.jsx("strong",{children:"Connection Error:"})," Cannot upload tickets because you are not connected to Supabase. Please check your Supabase credentials in the .env file and ensure the database tables are created."]})}),x.jsxs("div",{className:"mt-5 pt-5 border-t border-dark-700",children:[x.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"CSV Format Example:"}),x.jsxs("pre",{className:"bg-dark-800 p-3 rounded text-xs overflow-x-auto text-gray-300",children:["qrCode,entryName,entriesRemaining,club",x.jsx("br",{}),"ABC123,Regular Entry,1,Capricci",x.jsx("br",{}),"XYZ456,VIP Access,3,Intooit",x.jsx("br",{}),"DEF789,Backstage Pass,2,Capricci"]})]})]})},_N=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[o,l]=G.useState(null),{refreshTicketsCount:f}=$n(),g=tt.getProjectInfo(),m=async()=>{i(!0);try{await Ta.clearAllData(),l({text:"All data has been cleared successfully",type:"success"}),f()}catch(w){l({text:`Error clearing data: ${w.message}`,type:"error"})}finally{i(!1),e(!1)}};return x.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 border border-dark-800",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Database Management"}),x.jsxs("div",{className:"mb-6 p-4 rounded-lg border bg-blue-900/20 border-blue-800",children:[x.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center text-blue-300",children:[x.jsx(Ox,{className:"h-4 w-4 mr-2"}),"Database Connection"]}),x.jsxs("div",{className:"space-y-1 text-xs",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-400",children:"Project ID:"}),x.jsx("span",{className:"font-mono text-blue-200",children:g.projectId})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-400",children:"Status:"}),x.jsx("span",{className:"font-semibold text-blue-200",children:"Your own database"})]})]}),!g.isValid]}),x.jsx("p",{className:"text-gray-300 mb-6",children:"You can clear all ticket data and scan history from your database. This action cannot be undone."}),t?x.jsxs("div",{className:"border border-red-800 rounded-lg p-5 bg-red-900/30",children:[x.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[x.jsx(rg,{className:"h-6 w-6 text-red-400 flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-red-300",children:"Confirm Data Deletion"}),x.jsx("p",{className:"text-red-200 text-sm mt-1",children:"This will permanently delete all tickets and scan history. This action cannot be undone."})]})]}),x.jsxs("div",{className:"flex space-x-3",children:[x.jsx("button",{onClick:m,disabled:n,className:`
                flex items-center space-x-2 py-2 px-4 rounded-md font-medium shadow-md
                ${n?"bg-dark-700 text-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}
              `,children:n?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Deleting..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(cg,{className:"h-4 w-4"}),x.jsx("span",{children:"Yes, Delete Everything"})]})}),x.jsx("button",{onClick:()=>e(!1),disabled:n,className:"py-2 px-4 bg-dark-700 hover:bg-dark-600 text-gray-200 rounded-md font-medium transition-colors shadow-md",children:"Cancel"})]})]}):x.jsxs("button",{onClick:()=>e(!0),disabled:!g.isValid,className:`
            flex items-center space-x-2 font-medium py-2 px-4 rounded-md transition-colors shadow-md
            bg-red-600 hover:bg-red-700 text-white
          `,children:[x.jsx(cg,{className:"h-5 w-5"}),x.jsx("span",{children:"Clear All Data"})]}),o&&x.jsxs("div",{className:`
          mt-4 p-4 rounded-md flex items-center space-x-2
          ${o.type==="success"?"bg-green-900/30 text-green-300 border border-green-800":"bg-red-900/30 text-red-300 border border-red-800"}
        `,children:[o.type==="success"?x.jsx(fr,{className:"h-5 w-5"}):x.jsx(rg,{className:"h-5 w-5"}),x.jsx("span",{children:o.text})]})]})},CN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(null),[o,l]=G.useState({tickets:!1,scanHistory:!1,settings:!1,fiscalnet:!1}),[f,g]=G.useState({bucketExists:!1,bucketPublic:!1,checkComplete:!1}),m=tt.getProjectInfo();G.useEffect(()=>{w(),v()},[]);const w=async()=>{try{const{error:T}=await Ue.from("tickets").select("count",{count:"exact",head:!0}),{error:L}=await Ue.from("scan_history").select("count",{count:"exact",head:!0}),{error:M}=await Ue.from("app_settings").select("count",{count:"exact",head:!0}),{error:H}=await Ue.from("fiscalnet_settings").select("count",{count:"exact",head:!0});l({tickets:!T||!T.message.includes("does not exist"),scanHistory:!L||!L.message.includes("does not exist"),settings:!M||!M.message.includes("does not exist"),fiscalnet:!H||!H.message.includes("does not exist")&&!H.message.includes("relation")})}catch(T){console.error("Error checking tables:",T)}},v=async()=>{try{const{data:T,error:L}=await Ue.storage.listBuckets();if(L){console.error("Error checking storage buckets:",L),g({bucketExists:!1,bucketPublic:!1,checkComplete:!0});return}const M=T==null?void 0:T.find(H=>H.name==="app-assets");g({bucketExists:!!M,bucketPublic:(M==null?void 0:M.public)||!1,checkComplete:!0})}catch(T){console.error("Error checking storage setup:",T),g({bucketExists:!1,bucketPublic:!1,checkComplete:!0})}},b=async()=>{e(!0),i({text:"Setting up Supabase tables...",type:"info"});try{if((await Promise.allSettled([Ue.rpc("create_tickets_table"),Ue.rpc("create_scan_history_table"),Ue.rpc("create_settings_table"),Ue.rpc("create_fiscalnet_settings_table")])).some(M=>M.status==="fulfilled"))i({text:"Database tables setup completed successfully! All settings tables are now properly configured.",type:"success"});else{console.log("Creating tables directly without functions...");try{await Ue.from("tickets").select("count",{count:"exact",head:!0})}catch{console.log("Tickets table needs to be created manually via Supabase dashboard")}try{const{error:M}=await Ue.from("app_settings").upsert({id:"settings",clubName:"Famous Summer Club",ean13Barcode:"1234567890128",logoUrl:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});M&&!M.message.includes("does not exist")&&console.error("Error creating app_settings:",M)}catch(M){console.error("Error with app_settings:",M)}try{const{error:M}=await Ue.from("fiscalnet_settings").upsert({id:"settings",saveDirectory:"C:\\FiscalNet",fiscalnetEnabled:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});M&&!M.message.includes("does not exist")&&console.error("Error creating fiscalnet_settings:",M)}catch(M){console.error("Error with fiscalnet_settings:",M)}try{await Ue.from("scan_history").select("count",{count:"exact",head:!0})}catch{console.log("Scan history table needs to be created manually via Supabase dashboard")}i({text:"Tables need to be created manually. Please use the SQL provided in the manual setup section below, or create the tables using the Supabase dashboard.",type:"info"})}await w(),await v()}catch(T){console.error("Error creating Supabase tables:",T),i({text:`Error: ${T.message}`,type:"error"})}finally{e(!1)}},A=()=>f.checkComplete?f.bucketExists?f.bucketPublic?" Storage bucket is properly configured!":" Bucket exists but may not be public. Logo upload may fail if bucket is not set to public.":" Storage bucket 'app-assets' not found. Logo upload will not work until you create it manually.":"Checking storage setup...";return x.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center text-white",children:[x.jsx(og,{className:"h-6 w-6 mr-2 text-primary-500"}),"Supabase Setup"]}),x.jsxs("div",{className:"mb-6 p-4 rounded-lg border bg-green-900/20 border-green-800",children:[x.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center text-green-300",children:[x.jsx(Ox,{className:"h-4 w-4 mr-2"}),"Current Database Connection"]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-400",children:"Project ID:"}),x.jsx("span",{className:"font-mono text-green-200",children:m.projectId})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-400",children:"Database URL:"}),x.jsx("span",{className:"font-mono text-xs text-green-200",children:m.url})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-400",children:"Status:"}),x.jsx("span",{className:"font-semibold text-green-200",children:" Your own database"})]})]}),!m.isValid]}),x.jsxs("div",{className:"mb-6 space-y-3",children:[x.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Database Tables"}),x.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.tickets?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[x.jsx("div",{className:"mr-3",children:o.tickets?"":""}),x.jsx("span",{children:"Tickets Table"})]}),x.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.scanHistory?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[x.jsx("div",{className:"mr-3",children:o.scanHistory?"":""}),x.jsx("span",{children:"Scan History Table"})]}),x.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.settings?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[x.jsx("div",{className:"mr-3",children:o.settings?"":""}),x.jsx("span",{children:"App Settings Table"})]}),x.jsxs("div",{className:`flex items-center p-3 rounded-lg ${o.fiscalnet?"bg-green-900/20 text-green-200":"bg-dark-800 text-gray-400"}`,children:[x.jsx("div",{className:"mr-3",children:o.fiscalnet?"":""}),x.jsx("span",{children:"FiscalNet Settings Table"})]})]}),x.jsxs("div",{className:"mb-6 space-y-3",children:[x.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Storage Setup"}),x.jsxs("div",{className:`flex items-center p-3 rounded-lg ${f.bucketExists?f.bucketPublic?"bg-green-900/20 text-green-200":"bg-yellow-900/20 text-yellow-200":"bg-red-900/20 text-red-200"}`,children:[x.jsx("div",{className:"mr-3",children:f.bucketExists?f.bucketPublic?"":"":""}),x.jsx("span",{children:"Storage Bucket Status"})]}),x.jsx("div",{className:"bg-dark-800 p-3 rounded-lg",children:x.jsx("p",{className:"text-sm text-gray-300",children:A()})})]}),x.jsx("p",{className:"text-gray-300 mb-4",children:"Create the necessary database tables in your Supabase project for storing tickets, scan history, app settings, and FiscalNet settings."}),x.jsxs("div",{className:"bg-dark-800 p-4 rounded-md mb-6 border border-dark-700",children:[x.jsx("h3",{className:"text-sm font-medium text-primary-300 mb-2",children:"Manual Table Creation (If Button Fails)"}),x.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"If the automatic setup fails, you can create these tables manually in your Supabase SQL editor:"}),x.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:x.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create tickets table
CREATE TABLE IF NOT EXISTS tickets (
  "qrCode" TEXT PRIMARY KEY,
  "entryName" TEXT NOT NULL,
  "entriesRemaining" INTEGER NOT NULL,
  "lastScanned" TIMESTAMP WITH TIME ZONE
);

-- Enable RLS
ALTER TABLE tickets ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to tickets" ON tickets FOR ALL TO public USING (true);`})}),x.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:x.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create scan_history table
DROP TABLE IF EXISTS scan_history;

CREATE TABLE scan_history (
  id BIGSERIAL PRIMARY KEY,
  "qrCode" TEXT NOT NULL,
  timestamp TIMESTAMP WITH TIME ZONE NOT NULL,
  success BOOLEAN NOT NULL,
  message TEXT NOT NULL
);

-- Enable RLS
ALTER TABLE scan_history ENABLE ROW LEVEL SECURITY;

-- Create policies for scan_history
CREATE POLICY "Allow public insert access to scan_history"
  ON scan_history
  FOR INSERT
  TO public
  WITH CHECK (true);

CREATE POLICY "Allow public read access to scan_history"
  ON scan_history
  FOR SELECT
  TO public
  USING (true);

CREATE POLICY "Allow public delete access to scan_history"
  ON scan_history
  FOR DELETE
  TO public
  USING (true);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_scan_history_qrcode ON scan_history("qrCode");
CREATE INDEX IF NOT EXISTS idx_scan_history_timestamp ON scan_history(timestamp);`})}),x.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:x.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create app_settings table
CREATE TABLE IF NOT EXISTS app_settings (
  id TEXT PRIMARY KEY,
  "logoUrl" TEXT,
  "clubName" TEXT NOT NULL,
  "ean13Barcode" BIGINT DEFAULT 1234567890128,
  "ticketPrice" INTEGER DEFAULT 50,
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
);

-- Enable RLS
ALTER TABLE app_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to app_settings" ON app_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO app_settings (id, "clubName", "ticketPrice", "ean13Barcode", "logoUrl", "createdAt", "updatedAt")
VALUES ('settings', 'Famous Summer Club', 50, 1234567890128, NULL, NOW(), NOW())
ON CONFLICT (id) DO NOTHING;`})}),x.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:x.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create fiscalnet_settings table
CREATE TABLE IF NOT EXISTS fiscalnet_settings (
  id TEXT PRIMARY KEY DEFAULT 'settings',
  "saveDirectory" TEXT NOT NULL DEFAULT 'C:\\FiscalNet',
  "fiscalnetEnabled" BOOLEAN NOT NULL DEFAULT false,
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE fiscalnet_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to fiscalnet_settings" ON fiscalnet_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO fiscalnet_settings (id, "saveDirectory", "fiscalnetEnabled")
VALUES ('settings', 'C:\\FiscalNet', false)
ON CONFLICT (id) DO NOTHING;`})}),x.jsx("div",{className:"bg-dark-950 p-3 rounded overflow-auto text-xs mb-2 text-gray-300",children:x.jsx("pre",{className:"whitespace-pre-wrap",children:`-- Create printer_settings table
CREATE TABLE IF NOT EXISTS printer_settings (
  id TEXT PRIMARY KEY DEFAULT 'settings',
  "selectedPrinter" TEXT,
  "printerName" TEXT,
  "printerType" TEXT DEFAULT 'thermal',
  "printEnabled" BOOLEAN NOT NULL DEFAULT true,
  "autoprint" BOOLEAN NOT NULL DEFAULT true,
  "paperSize" TEXT DEFAULT '80mm',
  "settings" JSONB DEFAULT '{}',
  "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE printer_settings ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Allow public access to printer_settings" ON printer_settings FOR ALL TO public USING (true);

-- Insert default settings
INSERT INTO printer_settings (id, "selectedPrinter", "printerName", "printerType", "printEnabled", "autoprint", "paperSize", "settings")
VALUES ('settings', NULL, NULL, 'thermal', true, true, '80mm', '{}')
ON CONFLICT (id) DO NOTHING;`})})]}),x.jsxs("div",{className:`p-4 rounded-md mb-6 border ${f.bucketExists&&f.bucketPublic?"bg-green-900/20 border-green-800":"bg-red-900/20 border-red-800"}`,children:[x.jsxs("h3",{className:`text-sm font-medium mb-2 flex items-center ${f.bucketExists&&f.bucketPublic?"text-green-300":"text-red-300"}`,children:[f.bucketExists&&f.bucketPublic?x.jsx(fr,{className:"h-4 w-4 mr-2"}):x.jsx(vi,{className:"h-4 w-4 mr-2"}),"Storage Bucket Setup ",f.bucketExists&&f.bucketPublic?"Complete":"Required"]}),!(f.bucketExists&&f.bucketPublic)&&x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-sm text-red-200 mb-3",children:"Logo upload will not work without this bucket! You must manually create it:"}),x.jsxs("ol",{className:"list-decimal list-inside text-sm text-red-200 space-y-2 ml-2",children:[x.jsxs("li",{children:["Go to your ",x.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline inline-flex items-center gap-1",children:["Supabase Dashboard ",x.jsx(Nx,{className:"h-3 w-3"})]})]}),x.jsx("li",{children:"Select your project from the list"}),x.jsx("li",{children:'Navigate to the "Storage" section in the sidebar'}),x.jsx("li",{children:'Click "Create new bucket"'}),x.jsxs("li",{children:["Name the bucket exactly: ",x.jsx("span",{className:"bg-red-950 px-2 py-0.5 rounded font-mono",children:"app-assets"})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"IMPORTANT:"}),' Enable "Public bucket" option',x.jsx("div",{className:"text-xs mt-1 ml-4 text-red-300",children:"This allows the app to serve logo images publicly"})]}),x.jsxs("li",{children:["Set MIME type restrictions to: ",x.jsx("span",{className:"bg-red-950 px-1 py-0.5 rounded text-xs",children:"image/png, image/jpeg, image/gif"})]}),x.jsx("li",{children:"Create the bucket and refresh this page to verify"})]})]}),f.bucketExists&&f.bucketPublic&&x.jsx("p",{className:"text-sm text-green-200",children:" Storage bucket is properly configured! Logo upload functionality is ready to use."})]}),x.jsx("button",{onClick:b,disabled:t,className:`
          w-full flex items-center justify-center space-x-2 py-3 px-4 
          rounded-lg transition-colors shadow-lg
          ${t?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}
        `,children:t?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Setting Up..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(v3,{className:"h-5 w-5"}),x.jsx("span",{children:"Create Database Tables"})]})}),n&&x.jsxs("div",{className:`
          mt-4 p-4 rounded-lg flex items-start space-x-3
          ${n.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":n.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[n.type==="success"?x.jsx(fr,{className:"h-5 w-5 flex-shrink-0"}):n.type==="error"?x.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):x.jsx(og,{className:"h-5 w-5 flex-shrink-0"}),x.jsx("span",{children:n.text})]}),x.jsxs("div",{className:"mt-5 pt-5 border-t border-dark-700",children:[x.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Important Notes:"}),x.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-400 mt-2 space-y-1",children:[x.jsx("li",{children:"Make sure you have set the correct Supabase URL and Anon Key in your environment variables"}),x.jsx("li",{children:"You need to have admin privileges to create these tables"}),x.jsx("li",{children:"This application requires a connection to Supabase to function properly"}),x.jsxs("li",{children:[x.jsx("strong",{children:"The storage bucket MUST be created manually"})," - this cannot be automated through the API"]}),x.jsx("li",{children:"Logo upload functionality depends entirely on the storage bucket being properly configured"}),x.jsx("li",{children:"If logo upload fails, check that the bucket exists and is set to public"})]})]})]})};class SN{constructor(){this.selectedPrinter=null,this.cachedPrinters=[],this.loadSettings()}loadSettings(){try{this.selectedPrinter=localStorage.getItem("selectedPrinter")}catch(e){console.error("Error loading printer settings:",e)}}saveSettings(){try{this.selectedPrinter&&localStorage.setItem("selectedPrinter",this.selectedPrinter)}catch(e){console.error("Error saving printer settings:",e)}}async getLocalPrintStatus(){return Cr.getConnectionStatus()}async getAvailablePrinters(){try{const e=await this.getSystemPrinters(),n=this.getGenericPrinters(),i=[...e,...n],o=this.deduplicatePrinters(i);return await this.markDefaultPrinter(o),this.cachedPrinters=o,o}catch(e){return console.error("Error getting available printers:",e),this.getGenericPrinters()}}async getSystemPrinters(){if(!window.electronAPI)return console.log("Not running in Electron, skipping system printer detection"),[];try{console.log("Fetching system printers via Electron...");const e=await window.electronAPI.getSystemPrinters();return console.log("System printers found:",e.length),e||[]}catch(e){return console.error("Error getting system printers:",e),[]}}getGenericPrinters(){return[{id:"thermal-58mm",name:"Thermal Printer (58mm)",status:"unknown",isDefault:!1,isSystemPrinter:!1,isNetworkPrinter:!1,type:"thermal",portName:"USB001",description:"Generic 58mm thermal receipt printer"},{id:"thermal-80mm",name:"Thermal Printer (80mm)",status:"unknown",isDefault:!1,isSystemPrinter:!1,isNetworkPrinter:!1,type:"thermal",portName:"USB002",description:"Generic 80mm thermal receipt printer"},{id:"pos-printer",name:"POS Receipt Printer",status:"unknown",isDefault:!1,isSystemPrinter:!1,isNetworkPrinter:!1,type:"pos",portName:"COM1",description:"Point of Sale receipt printer"},{id:"default-printer",name:"Default System Printer",status:"unknown",isDefault:!0,isSystemPrinter:!1,isNetworkPrinter:!1,type:"generic",description:"Uses system default printer"}]}deduplicatePrinters(e){const n=new Map;return e.forEach(i=>{const o=i.name.toLowerCase().trim();(!n.has(o)||i.isSystemPrinter)&&n.set(o,i)}),Array.from(n.values())}async markDefaultPrinter(e){if(!(!window.electronAPI||e.length===0))try{const n=await window.electronAPI.getDefaultPrinter();if(n){const i=e.find(o=>o.name.toLowerCase()===n.toLowerCase());i&&(i.isDefault=!0)}}catch(n){console.error("Error getting default printer:",n)}}async refreshPrinters(){return this.cachedPrinters=[],await this.getAvailablePrinters()}async selectPrinter(e){this.selectedPrinter=e,this.saveSettings()}getSelectedPrinter(){return this.selectedPrinter}async print(e){if(await Cr.checkConnection()){const i=this.convertHTMLToLines(e);await Cr.printReceipt(i);return}if(!this.selectedPrinter)throw new Error("No printer selected and local print server not available");if(window.electronAPI&&printer&&printer.isSystemPrinter)try{const i=await window.electronAPI.printToPrinter(printer.name,e);if(!i.success)throw new Error(i.error||"Print failed");return}catch(i){console.error("Electron printing failed:",i)}await this.browserPrint(e)}async browserPrint(e){const n=window.open("","_blank","width=400,height=600");if(!n)throw new Error("Could not open print window");n.document.write(e),n.document.close(),await new Promise(i=>setTimeout(i,1e3)),n.focus(),n.print(),setTimeout(()=>{n.closed||n.close()},1e4)}convertHTMLToLines(e){const n=document.createElement("div");return n.innerHTML=e,(n.textContent||n.innerText||"").split(`
`).map(o=>o.trim()).filter(o=>o.length>0)}async testPrint(){if(await Cr.checkConnection()){await Cr.testPrint();return}if(!this.selectedPrinter)throw new Error("No printer selected and local print server not available");const n=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Printer Test</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            text-align: center;
          }
          .test-content {
            border: 2px solid #000;
            padding: 20px;
            margin: 20px auto;
            max-width: 300px;
          }
        </style>
      </head>
      <body>
        <div class="test-content">
          <h2>QR Scan Printer Test</h2>
          <p><strong>Date:</strong> ${new Date().toLocaleString()}</p>
          <p><strong>Printer:</strong> ${this.getSelectedPrinterName()}</p>
          <p><strong>Port:</strong> ${this.selectedUSBPort||"Default"}</p>
          <hr>
          <p> Printer test successful!</p>
          <p>If you can see this page printed, your printer is working correctly.</p>
        </div>
      </body>
      </html>
    `;await this.print(n)}async printThermalReceipt(e){if(!this.selectedPrinter)throw new Error("No printer selected");const n=this.cachedPrinters.find(i=>i.id===this.selectedPrinter);if(n!=null&&n.isQZTrayPrinter)await qzTrayService.printThermalReceipt(n.name,e);else throw new Error("Thermal receipt printing requires QZ Tray printer")}getSelectedPrinterName(){if(!this.selectedPrinter)return"None";const e=this.cachedPrinters.find(n=>n.id===this.selectedPrinter);return e?e.name:this.selectedPrinter}async getUSBPortsFromSystem(){if(window.electronAPI)try{return await window.electronAPI.getUSBPorts()}catch(e){console.error("Error getting USB ports from system:",e)}return this.getAvailableUSBPorts()}}const Di=new SN;function AN({token:t}){Bs.useEffect(()=>{bh(t)},[t]);const[e,n]=Bs.useState(!1),[i,o]=Bs.useState(null),l=async()=>{n(!0),o(null);try{if(!await Na())throw new Error("Agent not running on 127.0.0.1:17620");await J2(["My Shop","---------------------------","Item A          9.99","Item B          3.50","---------------------------","TOTAL          13.49","","Thank you!"],{cut:!0}),o("Printed ")}catch(f){o((f==null?void 0:f.message)||String(f))}finally{n(!1)}};return x.jsxs("div",{className:"inline-flex flex-col gap-2",children:[x.jsx("button",{className:"px-3 py-2 rounded-md border",onClick:l,disabled:e,children:e?"Printing":"Print test"}),i&&x.jsx("div",{className:"text-sm opacity-75",children:i})]})}const TN=()=>{var _e,Le,qe,be,Qe,Se;const[t,e]=G.useState([]),[n,i]=G.useState(null),[o,l]=G.useState(!0),[f,g]=G.useState(!1),[m,w]=G.useState(!1),[v,b]=G.useState(null),[A,T]=G.useState({isAvailable:!1,isConnected:!1}),[L,M]=G.useState(!1),[H,O]=G.useState(!1),[I,N]=G.useState([]),[F,$]=G.useState(null),[z,B]=G.useState(!1),[P,R]=G.useState(""),[X,re]=G.useState(!1),[Q,ae]=G.useState({isConnected:!1});G.useEffect(()=>{le(),Re()},[]);const Re=async()=>{try{const Z=await Na(800);T({isAvailable:Z,isConnected:Z})}catch(Z){console.error("Error checking local print status:",Z),T({isAvailable:!1,isConnected:!1})}},K=async()=>{M(!0),b({text:"Se verific agentul local de printare...",type:"info"});try{const Z=await Na(800);T({isAvailable:Z,isConnected:Z}),b(Z?{text:"Agentul local de printare este disponibil! Printarea direct este activ.",type:"success"}:{text:"Agentul local de printare nu este disponibil. Verificai c este pornit pe portul 17620.",type:"error"})}catch(Z){b({text:`Eroare la verificarea serverului: ${Z.message}`,type:"error"})}finally{M(!1)}},Fe=async()=>{g(!0),b({text:"Se testeaz agentul local de printare...",type:"info"});try{await Cr.testPrint(),b({text:"Test de printare reuit! Verificai imprimanta pentru biletul de test.",type:"success"})}catch(Z){b({text:`Test de printare euat: ${Z.message}`,type:"error"})}finally{g(!1)}},le=async()=>{l(!0),b(null);try{const Z=await Di.getAvailablePrinters();e(Z);const Te=Di.getSelectedPrinter();if(Te)i(Te);else if(Z.length>0){const ve=Z.find(ln=>ln.isDefault)||Z[0];i(ve.id),Di.selectPrinter(ve.id)}const Ne=Z.filter(ve=>ve.isSystemPrinter),Ye=Z.filter(ve=>!ve.isSystemPrinter),pe=Z.filter(ve=>ve.isQZTrayPrinter);b({text:`Gsite ${Z.length} imprimante disponibile (${Ne.length} sistem, ${pe.length} QZ Tray, ${Ye.length} generice)`,type:"info"})}catch(Z){b({text:`Eroare la ncrcarea imprimantelor: ${Z.message}`,type:"error"})}finally{l(!1)}},ne=async()=>{O(!0),b({text:"Se detecteaz imprimantele instalate n sistem...",type:"info"});try{const Z=await Di.refreshPrinters();e(Z);const Te=Z.filter(Ne=>Ne.isSystemPrinter);Te.length>0?b({text:`Detectate ${Te.length} imprimante de sistem!`,type:"success"}):b({text:"Nu au fost detectate imprimante de sistem. Browser-ul are acces limitat la imprimantele sistemului.",type:"info"})}catch(Z){b({text:`Eroare la detectarea imprimantelor de sistem: ${Z.message}`,type:"error"})}finally{O(!1)}},te=async()=>{try{const Z=await webUSBPrinterService.getConnectedPrinters();if(N(Z),webUSBPrinterService.isConnectedToPrinter()){const Te=Z.find(Ne=>Ne.isConnected);$(Te||null)}}catch(Z){console.error("Error loading USB printers:",Z)}},ye=Z=>{i(Z),Di.selectPrinter(Z).then(()=>{const Te=t.find(Ne=>Ne.id===Z);b({text:`Imprimanta "${Te==null?void 0:Te.name}" a fost selectat i salvat n baza de date`,type:"success"})}).catch(Te=>{b({text:`Eroare la salvarea setrilor: ${Te.message}`,type:"error"})})},he=async()=>{w(!0),b({text:"Se actualizeaz lista de imprimante...",type:"info"});try{const Z=await Di.refreshPrinters();e(Z),b({text:"Lista de imprimante a fost actualizat",type:"success"})}catch(Z){b({text:`Eroare la actualizarea imprimantelor: ${Z.message}`,type:"error"})}finally{w(!1)}X&&await te(),await fe()},fe=async()=>{},ge=async()=>{if(!n){b({text:"V rugm s selectai mai nti o imprimant",type:"error"});return}g(!0),b({text:"Se testeaz imprimanta...",type:"info"});try{await Di.testPrint(),b({text:"Test de printare reuit! Verificai imprimanta.",type:"success"})}catch(Z){b({text:`Test de printare euat: ${Z.message}`,type:"error"})}finally{g(!1)}},Oe=Z=>{switch(Z){case"ready":return"text-green-400";case"offline":return"text-red-400";case"busy":return"text-yellow-400";case"unknown":return"text-gray-400";default:return"text-gray-400"}},Xe=Z=>{switch(Z){case"ready":return"Gata";case"offline":return"Offline";case"busy":return"Ocupat";case"unknown":return"Necunoscut";default:return"Necunoscut"}},de=Z=>Z.isNetworkPrinter?Z.status==="offline"?x.jsx(C3,{className:"h-5 w-5"}):x.jsx(S3,{className:"h-5 w-5"}):x.jsx(pc,{className:"h-5 w-5"}),yt=Z=>Z.isNetworkPrinter?"Imprimant reea":Z.id.includes("thermal")?"Imprimant termic":Z.id.includes("pos")?"Imprimant POS":"Imprimant sistem";return x.jsxs("div",{className:"bg-dark-900 rounded-lg shadow-xl p-6 mb-6 border border-dark-800",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("h2",{className:"text-xl font-semibold flex items-center text-white",children:[x.jsx(zl,{className:"h-6 w-6 mr-2 text-primary-500"}),"Setri Imprimant"]}),x.jsxs("button",{onClick:he,disabled:m||o,className:`
            flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium
            ${m||o?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-dark-700 hover:bg-dark-600 text-gray-300"}
          `,children:[x.jsx(na,{className:`h-4 w-4 ${m?"animate-spin":""}`}),x.jsx("span",{children:"Actualizeaz"})]})]}),x.jsx("p",{className:"text-gray-300 mb-6",children:"Configurai printarea biletelor. Se folosete serverul local pentru printare direct."}),x.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-900/20 to-purple-900/20 rounded-lg border border-blue-800/50",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("h3",{className:"text-lg font-semibold flex items-center text-blue-300",children:[x.jsx(w3,{className:"h-5 w-5 mr-2"}),"Agent Local de Printare",A.isConnected&&x.jsx(h0,{className:"h-4 w-4 ml-2 text-yellow-400"})]}),x.jsx("div",{className:"flex items-center space-x-2",children:x.jsx("button",{onClick:K,disabled:L,className:`
                flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium
                ${L?"bg-dark-700 text-gray-400 cursor-not-allowed":A.isConnected?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}
              `,children:L?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Verificare..."})]}):A.isConnected?x.jsxs("div",{className:"flex items-center space-x-2 text-green-300",children:[x.jsx(fr,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm font-medium",children:"Conectat"})]}):x.jsxs(x.Fragment,{children:[x.jsx(na,{className:"h-4 w-4"}),x.jsx("span",{children:"Verific Agent"})]})})})]}),A.isConnected?x.jsxs("div",{className:"bg-green-900/20 border border-green-800 rounded-lg p-4",children:[x.jsx("h4",{className:"text-green-300 font-medium mb-2",children:" Agent Local Conectat"}),x.jsxs("div",{className:"text-green-200 text-sm space-y-1",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Status:"})," Activ i funcional"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"URL:"})," http://127.0.0.1:17620"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Endpoints:"})," /health, /print/escpos"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Token:"})," Configurat"]})]}),x.jsxs("div",{className:"mt-3 flex items-center space-x-2 text-xs",children:[x.jsx(h0,{className:"h-3 w-3 text-yellow-400"}),x.jsx("span",{className:"text-yellow-300 font-medium",children:"PRINTARE DIRECT ACTIV"}),x.jsx("span",{className:"text-gray-400",children:"- Toate biletele se printeaz direct fr dialoguri"})]})]}):x.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-4",children:[x.jsx("h4",{className:"text-red-300 font-medium mb-2",children:" Agent Local Nu Este Disponibil"}),x.jsxs("div",{className:"text-red-200 text-sm space-y-2",children:[x.jsx("p",{children:"Agentul local de printare nu rspunde. Pentru printare direct:"}),x.jsxs("ol",{className:"list-decimal list-inside ml-4 space-y-1",children:[x.jsx("li",{children:"Asigurai-v c agentul local ruleaz pe portul 17620"}),x.jsx("li",{children:"Verificai c API-ul este accesibil la http://127.0.0.1:17620"}),x.jsxs("li",{children:["Verificai c endpoint-ul GET /health returneaz ",JSON.stringify({ok:!0})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"CORS:"})," Adugai 'https://scan.mybiletix.com' n CORS allowed origins"]}),x.jsx("li",{children:"Testai din nou conexiunea"})]})]})]}),x.jsxs("div",{className:"mt-4 bg-blue-950/50 rounded-lg p-4",children:[x.jsx("h4",{className:"text-blue-300 text-sm font-medium mb-2",children:" Avantajele Agentului Local:"}),x.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[x.jsx("li",{children:"  Printare direct - ZERO dialoguri"}),x.jsx("li",{children:"  Control total asupra imprimantei"}),x.jsx("li",{children:"  Comenzi ESC/POS native"}),x.jsx("li",{children:"  Performan maxim"}),x.jsx("li",{children:"  Securitate prin token"}),x.jsx("li",{children:"  Health check la /health"})]})]}),x.jsxs("div",{className:"mt-4 bg-amber-950/50 rounded-lg p-4 border border-amber-800/50",children:[x.jsx("h4",{className:"text-amber-300 text-sm font-medium mb-2",children:" Configurare CORS:"}),x.jsxs("div",{className:"text-amber-200 text-sm space-y-2",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Important:"})," Agentul local trebuie configurat s permit cereri de la:"]}),x.jsx("div",{className:"bg-amber-900/30 p-2 rounded font-mono text-xs",children:"https://scan.melidom.ro"}),x.jsx("p",{children:"Verificai configuraia CORS n agentul local pentru a permite acest origin."})]})]}),x.jsxs("div",{className:"mt-4 bg-red-950/50 rounded-lg p-4 border border-red-800/50",children:[x.jsx("h4",{className:"text-red-300 text-sm font-medium mb-2",children:" Configurare Token:"}),x.jsxs("div",{className:"text-red-200 text-sm space-y-2",children:[x.jsx("p",{children:x.jsx("strong",{children:"Token curent n aplicaie:"})}),x.jsx("div",{className:"bg-red-900/30 p-2 rounded font-mono text-xs break-all",children:"<<fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27>>"}),x.jsx("p",{children:x.jsx("strong",{children:"Asigurai-v c:"})}),x.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[x.jsx("li",{children:"Agentul local folosete exact acest token"}),x.jsx("li",{children:"Token-ul este configurat n header-ul X-Print-Token"}),x.jsx("li",{children:"Nu exist spaii sau caractere suplimentare"})]}),x.jsx("p",{className:"text-red-300 font-semibold",children:'Dac primii eroarea "401 Unauthorized", token-ul nu se potrivete!'})]})]}),A.isConnected&&x.jsxs("div",{className:"flex justify-center space-x-4",children:[x.jsx(AN,{token:"<<fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27>>"}),x.jsx("button",{onClick:Fe,disabled:f,className:`
                flex items-center space-x-2 px-6 py-3 rounded-lg font-medium
                ${f?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}
              `,children:f?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Se testeaz printarea..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(lg,{className:"h-5 w-5"}),x.jsx("span",{children:"Test Bilet Complet"})]})})]})]}),o?x.jsxs("div",{className:"flex items-center justify-center py-8",children:[x.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary-500 border-t-transparent rounded-full mr-3"}),x.jsx("span",{className:"text-gray-300",children:"Se detecteaz imprimantele..."})]}):x.jsxs("div",{className:"space-y-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Imprimante Browser"}),t.length===0?x.jsxs("div",{className:"text-center py-8",children:[x.jsx(zl,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-400 mb-2",children:"Se detecteaz imprimantele..."}),x.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Dac nu vezi imprimantele tale, ncearc s remprosptezi lista."}),x.jsx("p",{className:"text-gray-500 text-sm",children:"Browser-ul are acces limitat la imprimantele sistemului din motive de securitate."}),x.jsx("button",{onClick:he,className:"mt-4 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md",children:"Rencerc detectarea"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"grid gap-3",children:t.map(Z=>x.jsx("div",{className:`
                      p-4 rounded-lg border-2 cursor-pointer transition-all
                      ${n===Z.id?"border-primary-500 bg-primary-900/30 shadow-lg":Z.status==="offline"?"border-red-700 bg-red-900/20 hover:border-red-600":"border-dark-700 bg-dark-800 hover:border-primary-600"}
                    `,onClick:()=>ye(Z.id),children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`
                          w-4 h-4 rounded-full border-2 flex items-center justify-center
                          ${n===Z.id?"border-primary-500 bg-primary-500":"border-gray-600"}
                        `,children:n===Z.id&&x.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),x.jsx("div",{className:`${Oe(Z.status)}`,children:de(Z)}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("h3",{className:"text-white font-medium",children:Z.name}),Z.isDefault&&x.jsx("span",{className:"bg-primary-900/50 text-primary-300 px-2 py-0.5 rounded text-xs",children:"Implicit"}),Z.isSystemPrinter&&x.jsx("span",{className:"bg-green-900/50 text-green-300 px-2 py-0.5 rounded text-xs",children:"Sistem"})]}),x.jsxs("div",{className:"flex items-center space-x-3 text-sm mt-1",children:[x.jsx("span",{className:Oe(Z.status),children:Xe(Z.status)}),x.jsx("span",{className:"text-gray-400",children:""}),x.jsx("span",{className:"text-gray-400",children:yt(Z)}),Z.portName&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-gray-400",children:""}),x.jsx("span",{className:"text-gray-400",children:Z.portName})]})]}),Z.description&&x.jsx("p",{className:"text-gray-500 text-xs mt-1",children:Z.description}),Z.driverName&&x.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Driver: ",Z.driverName]})]})]}),n===Z.id&&x.jsx(fr,{className:"h-5 w-5 text-primary-500"})]})},Z.id))}),x.jsxs("div",{className:"flex space-x-3 pt-4",children:[x.jsx("button",{onClick:ge,disabled:!n||f,className:`
                    flex items-center space-x-2 px-4 py-2 rounded-md font-medium
                    ${!n||f?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}
                  `,children:f?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Se testeaz..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(lg,{className:"h-4 w-4"}),x.jsx("span",{children:"Test Print"})]})}),x.jsxs("button",{onClick:he,disabled:m,className:`
                    flex items-center space-x-2 px-4 py-2 rounded-md font-medium
                    ${m?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-dark-700 hover:bg-dark-600 text-gray-300"}
                  `,children:[x.jsx(na,{className:`h-4 w-4 ${m?"animate-spin":""}`}),x.jsx("span",{children:"Actualizeaz Lista"})]}),x.jsxs("button",{onClick:ne,disabled:H,className:`
                    flex items-center space-x-2 px-4 py-2 rounded-md font-medium
                    ${H?"bg-dark-700 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}
                  `,children:[x.jsx(pc,{className:"h-4 w-4"}),x.jsx("span",{children:"Sistem PC"})]})]})]})]}),v&&x.jsxs("div",{className:`
          mt-6 p-4 rounded-md flex items-start space-x-3
          ${v.type==="success"?"bg-green-900/30 text-green-200 border border-green-800":v.type==="error"?"bg-red-900/30 text-red-200 border border-red-800":"bg-blue-900/30 text-blue-200 border border-blue-800"}
        `,children:[v.type==="success"?x.jsx(fr,{className:"h-5 w-5 flex-shrink-0"}):v.type==="error"?x.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}):x.jsx(zl,{className:"h-5 w-5 flex-shrink-0"}),x.jsx("span",{children:v.text})]}),x.jsxs("div",{className:"mt-6 space-y-4",children:[z&&F&&x.jsxs("div",{className:"bg-green-900/20 border border-green-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-green-300 mb-2",children:" Modul WebUSB Activ:"}),x.jsxs("p",{className:"text-sm text-green-200",children:["Toate biletele se vor printa direct pe imprimanta USB ",x.jsx("strong",{children:F.name}),"fr dialog de printare. Pentru a reveni la printarea browser, deconectai imprimanta USB."]})]}),x.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Limitri browser:"}),x.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[x.jsx("li",{children:" Browser-ele au acces limitat la imprimantele sistemului din motive de securitate"}),x.jsx("li",{children:" Printarea se face prin dialogul de printare al sistemului"}),x.jsx("li",{children:" Pentru acces direct la imprimante, folosii WebUSB (Chrome/Edge)"}),x.jsx("li",{children:" Imprimantele sistem pot fi detectate doar n anumite browsere"})]})]}),x.jsxs("div",{className:"bg-blue-900/20 border border-blue-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-blue-300 mb-2",children:"Pentru cea mai bun experien:"}),x.jsxs("ul",{className:"text-sm text-blue-200 space-y-1",children:[x.jsx("li",{children:"  Folosii WebUSB pentru printare direct (Chrome/Edge pe desktop)"}),x.jsx("li",{children:" Asigurai-v c imprimanta este pornit i conectat"}),x.jsx("li",{children:" Pentru imprimante termice, conectai prin USB i folosii WebUSB"}),x.jsx("li",{children:" Testai printarea nainte de scanarea biletelor"})]})]}),x.jsxs("div",{className:"bg-blue-900/20 border border-blue-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-blue-300 mb-2",children:"Imprimante compatibile WebUSB:"}),x.jsxs("ul",{className:"text-sm text-blue-200 space-y-1",children:[x.jsx("li",{children:"  Epson TM-T20, TM-T82, TM-T88V"}),x.jsx("li",{children:"  Star TSP100, TSP650"}),x.jsx("li",{children:"  Citizen CT-S310"}),x.jsx("li",{children:"  Brother TD-2020"}),x.jsx("li",{children:"  Imprimante termice generice (58mm/80mm)"})]})]}),n&&x.jsxs("div",{className:"bg-green-900/20 border border-green-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-green-300 mb-2",children:"Imprimant browser selectat:"}),x.jsxs("div",{className:"text-sm text-green-200",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Nume:"})," ",(_e=t.find(Z=>Z.id===n))==null?void 0:_e.name]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Tip:"})," ",(Le=t.find(Z=>Z.id===n))!=null&&Le.isQZTrayPrinter?"QZ Tray":(qe=t.find(Z=>Z.id===n))!=null&&qe.isSystemPrinter?"Sistem":"Generic"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Status:"})," ",Xe(((be=t.find(Z=>Z.id===n))==null?void 0:be.status)||"unknown")]}),((Qe=t.find(Z=>Z.id===n))==null?void 0:Qe.portName)&&x.jsxs("p",{children:[x.jsx("strong",{children:"Port:"})," ",(Se=t.find(Z=>Z.id===n))==null?void 0:Se.portName]}),P&&x.jsxs("p",{children:[x.jsx("strong",{children:"Port USB configurat:"})," ",P]})]})]}),Q.isConnected&&x.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-emerald-300 mb-2",children:" QZ Tray Activ:"}),x.jsxs("p",{className:"text-sm text-emerald-200 mb-2",children:[" ",x.jsx("strong",{children:"Mod QZ Tray Exclusiv Activ:"})," Toate biletele se vor printa DIRECT pe imprimantele QZ Tray fr niciun dialog de printare sau confirmri."]}),x.jsx("div",{className:"bg-emerald-950/50 rounded p-3 mt-2",children:x.jsxs("div",{className:"text-xs text-emerald-300 space-y-1",children:[x.jsx("div",{children:"  Semntur digital configurat"}),x.jsx("div",{children:"  Printare automat fr dialoguri"}),x.jsx("div",{children:"  Acces direct la toate imprimantele sistem"}),x.jsx("div",{children:"  Suport ESC/POS pentru imprimante termice"})]})})]}),x.jsxs("div",{className:"bg-blue-900/20 border border-blue-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-blue-300 mb-2",children:" Pentru detectarea complet a imprimantelor:"}),x.jsxs("ul",{className:"text-sm text-blue-200 space-y-1",children:[x.jsxs("li",{children:["  ",x.jsx("strong",{children:"QZ Tray (Recomandat):"})," Instalai QZ Tray pentru cel mai bun acces la imprimante"]}),x.jsxs("li",{children:["  ",x.jsx("strong",{children:"QZ Tray"})," - Cea mai bun opiune pentru acces direct la imprimante"]}),x.jsx("li",{children:'  Folosii butonul "Detecteaz Imprimante Sistem" pentru imprimante Windows'}),x.jsx("li",{children:"  Configurai portul USB manual pentru conexiuni specifice"}),x.jsx("li",{children:"  Pentru imprimante termice: conectai USB i folosii WebUSB"}),x.jsx("li",{children:"  Pentru imprimante de reea: selectai portul TCP/IP"})]})]}),x.jsxs("div",{className:"bg-amber-900/20 border border-amber-800 rounded-lg p-4",children:[x.jsx("h3",{className:"text-sm font-medium text-amber-300 mb-2",children:" Not despre detectarea imprimantelor sistem:"}),x.jsxs("p",{className:"text-sm text-amber-200",children:[x.jsx("strong",{children:"QZ Tray"})," ofer cea mai bun soluie pentru accesul la imprimante, evitnd limitrile browser-ului. Din motive de securitate, browser-ele web au acces foarte limitat la imprimantele sistemului."]})]})]})]})},IN=()=>{const[t,e]=G.useState("general"),{backendStatus:n}=$n(),i=[{id:"general",label:"General",icon:Rx},{id:"branding",label:"Logo & Branding",icon:Ho},{id:"printer",label:"Printer",icon:zl},{id:"data",label:"Data Import",icon:Rf},{id:"setup",label:"Setup",icon:A3}],o=()=>{switch(t){case"general":return x.jsxs("div",{className:"space-y-6",children:[n==="connected"&&x.jsxs(x.Fragment,{children:[x.jsx(pN,{}),x.jsx(mN,{})]}),n!=="connected"&&x.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:x.jsx("p",{className:"text-red-200",children:"Connect to Supabase to configure general settings."})})]});case"branding":return x.jsxs("div",{className:"space-y-6",children:[n==="connected"&&x.jsx(gN,{}),n!=="connected"&&x.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:x.jsx("p",{className:"text-red-200",children:"Connect to Supabase to configure branding settings."})})]});case"printer":return x.jsx("div",{className:"space-y-6",children:x.jsx(TN,{})});case"data":return x.jsxs("div",{className:"space-y-6",children:[n==="connected"&&x.jsxs(x.Fragment,{children:[x.jsx(EN,{}),x.jsx(bN,{})]}),n!=="connected"&&x.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:x.jsx("p",{className:"text-red-200",children:"Connect to Supabase to import ticket data."})})]});case"database":return x.jsxs("div",{className:"space-y-6",children:[n==="connected"&&x.jsx(x.Fragment,{children:x.jsx(_N,{})}),n!=="connected"&&x.jsx("div",{className:"glass-card border border-red-500/30 rounded-xl p-6",children:x.jsx("p",{className:"text-red-200",children:"Connect to Supabase to manage database settings."})})]});case"setup":return x.jsx("div",{className:"space-y-6",children:x.jsx(CN,{})});default:return null}};return x.jsxs("div",{className:"flex gap-8",children:[x.jsx("div",{className:"w-64 flex-shrink-0",children:x.jsxs("div",{className:"glass-card rounded-xl border border-mauve-500/20 overflow-hidden",children:[x.jsx("div",{className:"p-6 border-b border-mauve-500/20",children:x.jsx("h2",{className:"text-lg font-semibold text-white",children:"Categories"})}),x.jsx("nav",{className:"p-2",children:i.map(l=>{const f=l.icon;return x.jsxs("button",{onClick:()=>e(l.id),className:`
                    w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 text-left
                    ${t===l.id?"bg-gradient-to-r from-mauve-600 to-mauve-700 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-mauve-500/10"}
                  `,children:[x.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),x.jsx("span",{className:"font-medium",children:l.label})]},l.id)})})]})}),x.jsx("div",{className:"flex-1 min-w-0",children:x.jsx("div",{className:"glass-card rounded-xl border border-mauve-500/20 p-6",children:o()})})]})},NN=()=>{const{mode:t,setMode:e,autoDetectedMode:n}=nw(),i=()=>{e(t==="mobile"?"desktop":"mobile")};return x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsxs("div",{className:"hidden sm:flex items-center text-xs text-gray-400",children:[x.jsx("span",{className:"mr-1",children:"Auto:"}),x.jsx("div",{className:"btn-square glass border border-mauve-500/30",children:n==="mobile"?x.jsx(f0,{className:"h-3 w-3 text-mauve-400"}):x.jsx(pc,{className:"h-3 w-3 text-mauve-400"})})]}),x.jsx("button",{onClick:i,className:"glass-button btn-rect flex items-center space-x-2 text-white transition-all duration-300 hover:scale-105",title:`Switch to ${t==="mobile"?"desktop":"mobile"} mode`,children:t==="mobile"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"btn-square glass bg-mauve-500/20 border-mauve-400/30",children:x.jsx(f0,{className:"h-4 w-4 text-mauve-400"})}),x.jsx("span",{className:"text-sm hidden sm:inline",children:"Mobile"}),x.jsx(b3,{className:"h-5 w-5 text-gray-400"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"btn-square glass bg-blue-500/20 border-blue-400/30",children:x.jsx(pc,{className:"h-4 w-4 text-blue-400"})}),x.jsx("span",{className:"text-sm hidden sm:inline",children:"Desktop"}),x.jsx(_3,{className:"h-5 w-5 text-mauve-400"})]})})]})},kN=()=>{const{isLoading:t,ticketsCount:e,backendStatus:n,appSettings:i}=$n(),o=(i==null?void 0:i.clubName)||"Famous Summer Club";return G.useEffect(()=>{document.title=`Settings - ${o} Scan`},[o]),x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-dark-950 via-dark-900 to-dark-800",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("div",{className:"glass-card rounded-xl p-3",children:x.jsx(y3,{className:"h-8 w-8 text-mauve-400"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),x.jsx("p",{className:"text-gray-400",children:o})]})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx(NN,{}),x.jsx(Ax,{to:"/",className:"btn-square glass-button text-gray-300 hover:text-mauve-400 transition-colors",title:"Back to scanner",children:x.jsx(kx,{className:"h-5 w-5"})}),x.jsx("div",{className:`
              flex items-center space-x-3 glass-card rounded-xl px-4 py-3 border
              ${n==="connected"?"border-green-500/30":n==="disconnected"?"border-red-500/30":"border-gray-500/30"}
            `,children:n==="connected"?x.jsxs(x.Fragment,{children:[x.jsx(Ix,{className:"h-5 w-5 text-green-400"}),x.jsx("span",{className:"text-green-400 font-medium",children:"Connected"})]}):n==="disconnected"?x.jsxs(x.Fragment,{children:[x.jsx(Tx,{className:"h-5 w-5 text-red-400"}),x.jsx("span",{className:"text-red-400 font-medium",children:"Disconnected"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-gray-400 border-t-transparent rounded-full"}),x.jsx("span",{className:"text-gray-400 font-medium",children:"Connecting..."})]})})]})]}),!t&&x.jsx("div",{className:"glass-card rounded-xl p-4 mb-8 border border-mauve-500/20",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-white",children:"Database Status"}),x.jsx("p",{className:"text-gray-300 mt-1",children:e>0?`${e} tickets in database`:n==="connected"?"No tickets found - import CSV to add tickets":"Database connection required"})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-2xl font-bold text-mauve-400",children:e}),x.jsx("div",{className:"text-sm text-gray-400",children:"Tickets"})]})]})}),x.jsx(IN,{})]})})},ON=()=>x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-center px-4",children:[x.jsx("h1",{className:"text-9xl font-bold text-dark-800",children:"404"}),x.jsx("h2",{className:"text-3xl font-bold text-white mt-8 mb-2",children:"Page Not Found"}),x.jsx("p",{className:"text-gray-300 mb-8 max-w-md",children:"Pagina cutat nu exist sau a fost mutat."}),x.jsxs(Ax,{to:"/",className:"inline-flex items-center px-5 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors shadow-lg",children:[x.jsx(kx,{className:"h-5 w-5 mr-2"}),"napoi Acas"]})]}),RN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[o,l]=G.useState(null),[f,g]=G.useState(!1),[m,w]=G.useState(!1);G.useEffect(()=>{const T=/iPad|iPhone|iPod/.test(navigator.userAgent);g(T);const L=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if(w(L),Wt.isStandalone())return;(async()=>{let I="beforeinstallprompt"in window;const N=Wt.checkInstallability();console.log("PWA installability check:",{canInstall:I,criteria:N,isStandalone:Wt.isStandalone(),userAgent:navigator.userAgent}),!N.canInstall&&(L||T)&&setTimeout(()=>{e(!0),i(!0)},3e3)})();const H=I=>{const N=I;I.preventDefault(),console.log("beforeinstallprompt event fired"),l(N),i(!0),localStorage.getItem("pwa-install-prompt-seen")||setTimeout(()=>{e(!0)},5e3)},O=()=>{console.log("App installed event fired"),e(!1),i(!1),l(null)};if(window.addEventListener("beforeinstallprompt",H),window.addEventListener("appinstalled",O),!T){const I=setTimeout(()=>{const N=localStorage.getItem("pwa-install-prompt-seen"),F=Wt.checkInstallability();console.log("PWA test timeout check:",{hasSeenPrompt:N,isStandalone:Wt.isStandalone(),canInstall:F.canInstall,reasons:F.reasons}),!N&&!Wt.isStandalone()&&F.canInstall&&(e(!0),i(!0))},1e4);return()=>{clearTimeout(I),window.removeEventListener("beforeinstallprompt",H),window.removeEventListener("appinstalled",O)}}return()=>{window.removeEventListener("beforeinstallprompt",H),window.removeEventListener("appinstalled",O)}},[]);const v=async()=>{if(o){o.prompt();const{outcome:T}=await o.userChoice;T==="accepted"&&(e(!1),i(!1),l(null))}else e(!1),localStorage.setItem("pwa-install-prompt-seen","true")},b=()=>{e(!1),localStorage.setItem("pwa-install-prompt-seen","true")},A=()=>{e(!1)};return!t||Wt.isStandalone()?null:x.jsx("div",{className:"fixed bottom-4 right-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4 rounded-lg shadow-xl border border-primary-500 max-w-sm z-50 animate-bounce-in",children:x.jsxs("div",{className:"flex items-start space-x-3",children:[m?x.jsx(f3,{className:"h-6 w-6 text-primary-200 flex-shrink-0"}):x.jsx(f0,{className:"h-6 w-6 text-primary-200 flex-shrink-0"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-bold text-sm mb-1",children:"Install App"}),x.jsx("p",{className:"text-xs text-primary-100 mb-3",children:f?'Tap the share button in Safari and select "Add to Home Screen"':"Install QR Scan for quick access, offline features, and better performance"}),!f&&x.jsxs("div",{className:"flex flex-col space-y-2",children:[x.jsxs("button",{onClick:v,className:"flex items-center justify-center space-x-2 bg-white text-primary-700 px-3 py-2 rounded-md text-xs font-bold hover:bg-gray-100 transition-colors shadow-md",children:[x.jsx(kf,{className:"h-3 w-3"}),x.jsx("span",{children:"Install Now"})]}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:A,className:"flex-1 text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Remind Later"}),x.jsx("button",{onClick:b,className:"flex-1 text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Not Now"})]})]}),f&&x.jsx("button",{onClick:b,className:"text-primary-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-primary-800 transition-colors",children:"Got it"})]}),x.jsx("button",{onClick:b,className:"text-primary-200 hover:text-white p-1 rounded hover:bg-primary-800 transition-colors",children:x.jsx(Dx,{className:"h-4 w-4"})})]})})},PN=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1);G.useEffect(()=>{Wt.onUpdateAvailable(g=>{console.log("Update available, showing notification"),e(!0)}),Wt.hasUpdateAvailable()&&e(!0)},[]);const o=async()=>{i(!0);try{await Wt.applyUpdate(),setTimeout(()=>{window.location.reload()},1e3)}catch(g){console.error("Error applying update:",g),i(!1),window.location.reload()}},l=()=>{e(!1),localStorage.setItem("pwa-update-dismissed",Date.now().toString())},f=()=>{e(!1),setTimeout(()=>{e(!0)},60*60*1e3)};return t?x.jsx("div",{className:"fixed top-4 right-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-lg shadow-xl border border-blue-500 max-w-sm z-50 animate-bounce-in",children:x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:x.jsx(na,{className:"h-5 w-5 text-blue-200"})})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-bold text-sm mb-1",children:"Update Available!"}),x.jsx("p",{className:"text-xs text-blue-100 mb-3",children:"A new version of the app is available with the latest features and improvements."}),x.jsxs("div",{className:"flex flex-col space-y-2",children:[x.jsx("button",{onClick:o,disabled:n,className:"flex items-center justify-center space-x-2 bg-white text-blue-700 px-3 py-2 rounded-md text-xs font-bold hover:bg-gray-100 transition-colors shadow-md disabled:opacity-50",children:n?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-blue-700 border-t-transparent rounded-full"}),x.jsx("span",{children:"Updating..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(kf,{className:"h-3 w-3"}),x.jsx("span",{children:"Update Now"})]})}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:f,disabled:n,className:"flex-1 text-blue-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-blue-800 transition-colors",children:"Later"}),x.jsx("button",{onClick:l,disabled:n,className:"flex-1 text-blue-200 hover:text-white text-xs px-2 py-1 rounded hover:bg-blue-800 transition-colors",children:"Dismiss"})]})]})]}),x.jsx("button",{onClick:l,disabled:n,className:"text-blue-200 hover:text-white p-1 rounded hover:bg-blue-800 transition-colors",children:x.jsx(Dx,{className:"h-4 w-4"})})]})}):null};function DN(){return G.useEffect(()=>{Wt.initialize(),Wt.requestNotificationPermission()},[]),x.jsx(hN,{children:x.jsx(s3,{children:x.jsxs(W_,{children:[x.jsxs(QE,{children:[x.jsx(Vo,{path:"/",element:x.jsx(bl,{children:x.jsx(ep,{})})}),x.jsx(Vo,{path:"/scanner",element:x.jsx(bl,{children:x.jsx(ep,{})})}),x.jsx(Vo,{path:"/settings",element:x.jsx(bl,{children:x.jsx(kN,{})})}),x.jsx(Vo,{path:"*",element:x.jsx(bl,{children:x.jsx(ON,{})})})]}),x.jsx(RN,{}),x.jsx(PN,{})]})})})}const MN={SUCCESS:"https://assets.mixkit.co/active_storage/sfx/213/213-preview.mp3",ERROR:"https://assets.mixkit.co/active_storage/sfx/178/178-preview.mp3",SCAN:"https://assets.mixkit.co/active_storage/sfx/1234/1234-preview.mp3"},LN=()=>{Object.entries(MN).forEach(([t,e])=>{const n=new Audio(e);n.preload="auto",n.load()})};LN();H_();bh("<<fbbe3ad2e74c28d01b20db42c00969e59e1f5ccc58114f27>>");"serviceWorker"in navigator&&"PushManager"in window&&Wt.isServiceWorkerSupported()&&window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});console.log("Service Worker registered successfully:",t),await t.update(),t.addEventListener("updatefound",()=>{const e=t.installing;console.log("New service worker found"),e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New service worker installed, update available"),window.dispatchEvent(new CustomEvent("sw-update-available")))})})}catch(t){console.error("Service Worker registration failed:",t)}});gx(document.getElementById("root")).render(x.jsx(G.StrictMode,{children:x.jsx(DN,{})}));export{bc as g};
